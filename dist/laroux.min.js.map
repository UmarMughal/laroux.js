{"version":3,"sources":["laroux.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","laroux_events","laroux_helpers","laroux_ajax","corsDefault","wrappers","registry","laroux.js","data","isSuccess","console","log","errorMessage","obj","format","JSON","parse","object","eval","set","name","fnc","xDomainObject","xmlHttpRequestObject","xDomainRequestObject","xhr","crossDomain","XMLHttpRequest","undefined","window","XDomainRequest","xhrResp","options","wrapperFunction","getResponseHeader","response","datatype","responseText","responseXML","wrapperFunc","makeRequest","cors","url","timer","timeout","setTimeout","abort","timeoutFn","onreadystatechange","readyState","clearTimeout","status","res","error","statusText","invoke","success","complete","progress","getdata","constructor","Object","queryString","buildQueryString","indexOf","jsonp","open","type","xhrFields","hasOwnProperty","headers","wrapper","j","setRequestHeader","postdata","send","postdatatype","stringify","buildFormData","get","path","values","successfnc","errorfnc","getJson","getJsonP","method","getScript","post","postJson","Content-Type","./laroux.events.js","./laroux.helpers.js",2,"laroux_css","laroux_anim","fx","interpolate","source","target","shift","easing","pos","Math","cos","PI","newanim","startTime","unit","from","document","body","property","documentElement","scrollTop","Number","reset","push","requestAnimationFrame","onframe","setCss","getProperty","style","camelCase","remove","id","targetKey","item","currentItem","splice","timestamp","removeKeys","result","step","unshift","time","scrollTo","item2","finishT","value","to","./laroux.css.js",3,"hasClass","element","className","classList","contains","addClass","elements","getAsArray","add","removeClass","toggleClass","cycleClass","styleName","getComputedStyle","antiCamelCase","getPropertyValue","setProperty","properties","oldProperties","newStyleName","defaultTransition","setTransitionSingle","transition","currentTransitionsArray","transitions","currentTransitions","split","transitionProperties","substring","found","trim","localeCompare","join","webkitTransition","msTransition","setTransition","show","opacity","hide","height","getPropertyCSSValue","getFloatValue","primitiveType","innerHeight","clientHeight","outerHeight","includeMargin","offsetHeight","marginTop","marginBottom","margins","ceil","width","innerWidth","clientWidth","outerWidth","offsetWidth","marginLeft","marginRight","top","getBoundingClientRect","left","scrollLeft","aboveTheTop","bottom","belowTheFold","leftOfScreen","right","rightOfScreen","inViewport","rect",4,"laroux_date","shortDateFormat","longDateFormat","timeFormat","monthsShort","monthsLong","strings","now","later","ago","seconds","aminute","minutes","ahour","hours","aday","days","aweek","weeks","amonth","months","ayear","years","parseEpoch","timespan","limitWithWeeks","getCustomDateString","date","Date","replace","match","getFullYear","getYear","getMonth","substr","getDate","hour1","getHours","hour2","getMinutes","getSeconds","getDateDiffString","getTime","absTimespan","abs","past","timespanstring","getShortDateString","includeTime","getLongDateString",5,"laroux_dom","docprop","propName","select","selector","parent","toArray","querySelectorAll","selectByClass","getElementsByClassName","selectByTag","getElementsByTagName","selectById","getElementById","selectSingle","querySelector","attr","attributes","getAttribute","oldAttributes","attributeName","removeAttribute","setAttribute","datanames","oldDatanames","dataName","eventHistory","setEvent","eventname","setEventSingle","fncWrapper","preventDefault","event","returnValue","addEventListener","unsetEvent","i1","length1","i2","length2","removeEventListener","dispatchEvent","customEvent","createEvent","initEvent","create","html","frag","createDocumentFragment","temp","createElement","insertAdjacentHTML","firstChild","appendChild","children","elem","append","createOption","key","isDefault","option","selectByValue","selectedIndex","clear","hasChildNodes","removeChild","insert","position","content","prepend","replaceText","textContent","cloneReturn","cloneAppend","cloneInsertAfter","cloneInsertBefore","clone","container","newElement","cloneNode","parentNode","insertBefore","nextSibling","Element","prototype","this","parentElement",6,"delegates","args",7,"laroux_forms","ajaxForm","formobj","fncBegin","serializeFormData","isFormField","tagName","toUpperCase","getFormFieldValue","disabled","files","checked","setFormFieldValue","toggleFormEditing","selection","selected","lastDisabled","formdata","FormData","serialize","deserialize","./laroux.ajax.js","./laroux.dom.js",8,"uniqueId","getUniqueId","rfc3986","uri","regEx","encodeURIComponent","toString","arguments","Array","replaceAll","text","dictionary","re","RegExp","keys","flag","output","currChar","charAt","toLowerCase","quoteAttr","spliceString","index","count","slice","random","min","max","floor","find","iterator","context","some","list","extendObject","each","arr","testOwnProperties","map","dontSkipReturns","results","aeach","amap","aindex","start","column","shuffle","shuffled","rand","merge","tmp","isArray","concat","duplicate","items","NodeList","getLength","getKeysRecursive","delimiter","prefix","getElement","defaultValue","rest",9,"laroux","helpers","events","timers","cached","single","array","c","idc","readyPassed","extend","apply","ready","setInterval","ontick","$l","ajax","css","dom","forms","triggers","vars","anim","mvc","stack","templates","touch","ui","./laroux.anim.js","./laroux.date.js","./laroux.forms.js","./laroux.keys.js","./laroux.mvc.js","./laroux.stack.js","./laroux.templates.js","./laroux.timers.js","./laroux.touch.js","./laroux.triggers.js","./laroux.ui.js","./laroux.vars.js","./laroux.wrapper.js",10,"laroux_keys","keyName","keycode","String","fromCharCode","assign","srcElement","nodeType","disableInputs","shiftKey","ctrl","ctrlKey","alt","altKey","keyCode","which",11,"laroux_mvc","apps","pauseUpdate","init","model","appKey","onupdate","update","rebind","app","modelKeys","_data","boundElements","eventElements","scanElements","ev","binding","bindStringParser","atts","m","binding1","binding2","chldrn","childNodes","boundElement","lastBuffer","buffer","state","curr",12,"laroux_stack","depth","_depth","_top","defineProperty","configurable","newValue","oldValue","scope","setRange","valueKey","getRange","exists",13,"laroux_templates","engines","plain","compile","template","render","compiled","nextIndex","dict","lastIndex","closeIndex","hogan","Hogan","mustache","Mustache","handlebars","Handlebars","lodash","_","underscore","engine","nodeValue",14,"laroux_timers","next",15,"laroux_touch","touchStarted","swipeTreshold","precision","tapCount","tapTreshold","longTapTreshold","tapTimer","end","move","locatePointer","targetTouches","pageX","pageY","navigator","onstart","onend","innerEvent","x","y","delta","distance",16,"laroux_triggers","condition","conditions","ontrigger","triggerName","eventIdx","conditionKey","conditionObj",17,"laroux_ui","floatContainer","popup","defaultTimeout","createBox","xclass","message","class","msgbox","loading","elementSelector","defaultDelay","killTimer","display","localStorage","loadingIndicator","delay","dynamicDates","updateDatesElements","updateDates","getDateString","scrollView","selectedElements","onhidden","onreveal","reveal","createFloatContainer",18,"laroux_vars","cookiePath","getCookie","cookie","decodeURIComponent","setCookie","expires","expireValue","toGMTString","removeCookie","getLocal","setLocal","removeLocal","getSession","sessionStorage","setSession","removeSession",19,"laroux_wrapper","Node","singleTemplate","arrayTemplate","registerBoth","registerSingle","registerArray","register","newFnc"],"mappings":"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","file":"laroux.min.js","sourcesContent":["/**\n * laroux.js - A jquery substitute for modern browsers\n *\n * @version v2.0.0\n * @link https://larukedi.github.io/laroux.js\n * @license Apache-2.0\n */\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && window.XDomainRequest !== undefined) {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new window.XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n\n},{\"./laroux.events.js\":6,\"./laroux.helpers.js\":8}],2:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js');\n\n    // anim\n    var laroux_anim = {\n        data: [],\n\n        fx: {\n            interpolate: function (source, target, shift) {\n                return (source + (target - source) * shift);\n            },\n\n            easing: function (pos) {\n                return (-Math.cos(pos * Math.PI) / 2) + 0.5;\n            }\n        },\n\n        // {object, property, from, to, time, unit, reset}\n        set: function (newanim) {\n            newanim.startTime = null;\n\n            if (newanim.unit === undefined || newanim.unit === null) {\n                newanim.unit = '';\n            }\n\n            if (newanim.from === undefined || newanim.from === null) {\n                if (newanim.object === window.document.body && newanim.property === 'scrollTop') {\n                    newanim.from = (window.document.documentElement && window.document.documentElement.scrollTop) || window.document.body.scrollTop;\n                } else {\n                    newanim.from = newanim.object[newanim.property];\n                }\n            }\n\n            if (typeof newanim.from === 'string') {\n                newanim.from = Number(newanim.from);\n            }\n\n            if (newanim.reset === undefined || newanim.reset === null) {\n                newanim.reset = false;\n            }\n\n            // if (newanim.id === undefined) {\n            //     newanim.id = laroux_helpers.getUniqueId();\n            // }\n\n            laroux_anim.data.push(newanim);\n            if (laroux_anim.data.length === 1) {\n                window.requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        setCss: function (newanim) {\n            if (newanim.from === undefined || newanim.from === null) {\n                newanim.from = laroux_css.getProperty(newanim.object, newanim.property);\n            }\n\n            newanim.object = newanim.object.style;\n            newanim.property = laroux_helpers.camelCase(newanim.property);\n\n            laroux_anim.set(newanim);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_anim.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        onframe: function (timestamp) {\n            var removeKeys = [];\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n                if (currentItem.startTime === null) {\n                    currentItem.startTime = timestamp;\n                }\n\n                var result = laroux_anim.step(currentItem, timestamp);\n\n                if (result === false) {\n                    removeKeys.unshift(item);\n                } else if (timestamp > currentItem.startTime + currentItem.time) {\n                    if (currentItem.reset) {\n                        currentItem.startTime = timestamp;\n                        if (newanim.object === window.document.body && newanim.property == 'scrollTop') {\n                            scrollTo(0, currentItem.from);\n                            // setTimeout(function () { scrollTo(0, currentItem.from); }, 1);\n                        } else {\n                            currentItem.object[currentItem.property] = currentItem.from;\n                        }\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_anim.data.splice(removeKeys[item2], 1);\n            }\n\n            if (laroux_anim.data.length > 0) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        step: function (newanim, timestamp) {\n            var finishT = newanim.startTime + newanim.time,\n                shift = (timestamp > finishT) ? 1 : (timestamp - newanim.startTime) / newanim.time;\n\n            var value = laroux_anim.fx.interpolate(\n                newanim.from,\n                newanim.to,\n                laroux_anim.fx.easing(shift)\n            ) + newanim.unit;\n\n            if (newanim.object === window.document.body && newanim.property == 'scrollTop') {\n                scrollTo(0, value);\n                // setTimeout(function () { scrollTo(0, value); }, 1);\n            } else {\n                newanim.object[newanim.property] = value;\n            }\n        }\n    };\n\n    return laroux_anim;\n\n}());\n\n},{\"./laroux.css.js\":3,\"./laroux.helpers.js\":8}],3:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // css\n    var laroux_css = {\n        // class features\n        hasClass: function (element, className) {\n            return element.classList.contains(className);\n        },\n\n        addClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.add(className);\n            }\n        },\n\n        removeClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.remove(className);\n            }\n        },\n\n        toggleClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                } else {\n                    elements[i].classList.add(className);\n                }\n            }\n        },\n\n        cycleClass: function (elements, className) {\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                    elements[(i + 1) % length].classList.add(className);\n                    return;\n                }\n            }\n        },\n\n        // style features\n        getProperty: function (element, styleName) {\n            var style = getComputedStyle(element);\n\n            styleName = laroux_helpers.antiCamelCase(styleName);\n\n            return style.getPropertyValue(styleName);\n        },\n\n        setProperty: function (element, properties, value) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            if (typeof properties == 'string') {\n                var oldProperties = properties;\n                properties = {};\n                properties[oldProperties] = value;\n            }\n\n            for (var styleName in properties) {\n                if (!properties.hasOwnProperty(styleName)) {\n                    continue;\n                }\n\n                var newStyleName = laroux_helpers.camelCase(styleName);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].style[newStyleName] = properties[styleName];\n                }\n            }\n        },\n\n        // transition features\n        defaultTransition: '2s ease',\n\n        setTransitionSingle: function (element, transition) {\n            var transitions = laroux_helpers.getAsArray(transition),\n                style = getComputedStyle(element),\n                currentTransitions = style.getPropertyValue('transition') || style.getPropertyValue('-webkit-transition') ||\n                    style.getPropertyValue('-ms-transition') || '',\n                currentTransitionsArray;\n\n            if (currentTransitions.length > 0) {\n                currentTransitionsArray = currentTransitions.split(',');\n            } else {\n                currentTransitionsArray = [];\n            }\n\n            for (var item in transitions) {\n                if (!transitions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var styleName,\n                    transitionProperties,\n                    pos = transitions[item].indexOf(' ');\n\n                if (pos !== -1) {\n                    styleName = transitions[item].substring(0, pos);\n                    transitionProperties = transitions[item].substring(pos + 1);\n                } else {\n                    styleName = transitions[item];\n                    transitionProperties = laroux_css.defaultTransition;\n                }\n\n                var found = false;\n                for (var j = 0; j < currentTransitionsArray.length; j++) {\n                    if (currentTransitionsArray[j].trim().localeCompare(styleName) === 0) {\n                        currentTransitionsArray[j] = styleName + ' ' + transitionProperties;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    currentTransitionsArray.push(styleName + ' ' + transitionProperties);\n                }\n            }\n\n            var value = currentTransitionsArray.join(', ');\n\n            element.style.transition = value;\n            element.style.webkitTransition = value;\n            element.style.msTransition = value;\n        },\n\n        setTransition: function (element, transition) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_css.setTransitionSingle(elements[i], transition);\n            }\n        },\n\n        show: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 1 });\n        },\n\n        hide: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 0 });\n        },\n\n        // measurement features\n        // height of element without padding, margin and border\n        height: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('height');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // height of element with padding but without margin and border\n        innerHeight: function (element) {\n            return element.clientHeight;\n        },\n\n        // height of element with padding and border but margin optional\n        outerHeight: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetHeight;\n            }\n\n            var style = getComputedStyle(element),\n                marginTop = style.getPropertyCSSValue('margin-top'),\n                marginBottom = style.getPropertyCSSValue('margin-bottom'),\n                margins = marginTop.getFloatValue(marginTop.primitiveType) +\n                    marginBottom.getFloatValue(marginBottom.primitiveType);\n\n            return Math.ceil(element.offsetHeight + margins);\n        },\n\n        // width of element without padding, margin and border\n        width: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('width');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // width of element with padding but without margin and border\n        innerWidth: function (element) {\n            return element.clientWidth;\n        },\n\n        // width of element with padding and border but margin optional\n        outerWidth: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetWidth;\n            }\n\n            var style = getComputedStyle(element),\n                marginLeft = style.getPropertyCSSValue('margin-left'),\n                marginRight = style.getPropertyCSSValue('margin-right'),\n                margins = marginLeft.getFloatValue(marginLeft.primitiveType) +\n                    marginRight.getFloatValue(marginRight.primitiveType);\n\n            return Math.ceil(element.offsetWidth + margins);\n        },\n\n        top: function (element) {\n            return element.getBoundingClientRect().top +\n                ((window.document.documentElement && window.document.documentElement.scrollTop) || window.document.body.scrollTop);\n        },\n\n        left: function (element) {\n            return element.getBoundingClientRect().left +\n                ((window.document.documentElement && window.document.documentElement.scrollLeft) || window.document.body.scrollLeft);\n        },\n\n        aboveTheTop: function (element) {\n            return element.getBoundingClientRect().bottom <= 0;\n        },\n\n        belowTheFold: function (element) {\n            return element.getBoundingClientRect().top > window.innerHeight;\n        },\n\n        leftOfScreen: function (element) {\n            return element.getBoundingClientRect().right <= 0;\n        },\n\n        rightOfScreen: function (element) {\n            return element.getBoundingClientRect().left > window.innerWidth;\n        },\n\n        inViewport: function (element) {\n            var rect = element.getBoundingClientRect();\n\n            return !(rect.bottom <= 0 || rect.top > window.innerHeight ||\n                rect.right <= 0 || rect.left > window.innerWidth);\n        }\n    };\n\n    return laroux_css;\n\n}());\n\n},{\"./laroux.helpers.js\":8}],4:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n\n},{}],5:[function(require,module,exports){\n(function (laroux) {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n        // laroux_css = require('./laroux.css.js'),\n        // laroux_triggers = require('./laroux.triggers.js');\n\n    // dom\n    var laroux_dom = {\n        docprop: function (propName) {\n            return window.document.documentElement.classList.contains(propName);\n        },\n\n        select: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        },\n\n        selectByClass: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByClassName(selector)\n            );\n        },\n\n        selectByTag: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByTagName(selector)\n            );\n        },\n\n        selectById: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        selectSingle: function (selector, parent) {\n            return (parent || document).querySelector(selector);\n        },\n\n        attr: function (element, attributes, value) {\n            if (value === undefined && attributes.constructor !== Object) {\n                return element.getAttribute(attributes);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof attributes === 'string') {\n                var oldAttributes = attributes;\n                attributes = {};\n                attributes[oldAttributes] = value;\n            }\n\n            for (var attributeName in attributes) {\n                if (!attributes.hasOwnProperty(attributeName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (attributes[attributeName] === null) {\n                        element.removeAttribute(attributeName);\n                    } else {\n                        element.setAttribute(attributeName, attributes[attributeName]);\n                    }\n                }\n            }\n        },\n\n        data: function (element, datanames, value) {\n            if (value === undefined && datanames.constructor !== Object) {\n                return element.getAttribute('data-' + datanames);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof datanames == 'string') {\n                var oldDatanames = datanames;\n                datanames = {};\n                datanames[oldDatanames] = value;\n            }\n\n            for (var dataName in datanames) {\n                if (!datanames.hasOwnProperty(dataName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (datanames[dataName] === null) {\n                        element.removeAttribute('data-' + dataName);\n                    } else {\n                        element.setAttribute('data-' + dataName, datanames[dataName]);\n                    }\n                }\n            }\n        },\n\n        eventHistory: [],\n        setEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_dom.setEventSingle(elements[i], eventname, fnc);\n            }\n        },\n\n        setEventSingle: function (element, eventname, fnc) {\n            var fncWrapper = function (e) {\n                if (fnc(e, element) === false) {\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    } else {\n                        window.event.returnValue = false;\n                    }\n                }\n            };\n\n            laroux_dom.eventHistory.push({ element: element, eventname: eventname, fnc: fnc, fncWrapper: fncWrapper });\n            element.addEventListener(eventname, fncWrapper, false);\n        },\n\n        unsetEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i1 = 0, length1 = elements.length; i1 < length1; i1++) {\n                for (var i2 = 0, length2 = laroux_dom.eventHistory.length; i2 < length2; i2++) {\n                    var item = laroux_dom.eventHistory[i2];\n\n                    if (item === undefined) {\n                        continue;\n                    }\n\n                    if (item.element !== elements[i1]) {\n                        continue;\n                    }\n\n                    if (eventname !== undefined && item.eventname !== eventname) {\n                        continue;\n                    }\n\n                    if (fnc !== undefined && item.fnc !== fnc) {\n                        continue;\n                    }\n\n                    item.element.removeEventListener(item.eventname, item.fncWrapper, false);\n                    delete laroux_dom.eventHistory[i2];\n                }\n            }\n        },\n\n        dispatchEvent: function (element, eventname, data) {\n            var customEvent = window.document.createEvent('Event');\n            for (var item in data) {\n                if (!data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                customEvent[item] = data[item];\n            }\n\n            customEvent.initEvent(eventname, true, true);\n            element.dispatchEvent(customEvent);\n        },\n\n        create: function (html) {\n            var frag = window.document.createDocumentFragment(),\n                temp = window.document.createElement('DIV');\n\n            temp.insertAdjacentHTML('beforeend', html);\n            while (temp.firstChild) {\n                frag.appendChild(temp.firstChild);\n            }\n\n            // nulling out the reference, there is no obvious dispose method\n            temp = null;\n\n            return frag;\n        },\n\n        createElement: function (element, attributes, children) {\n            var elem = window.document.createElement(element);\n\n            if (attributes !== undefined && attributes.constructor === Object) {\n                for (var item in attributes) {\n                    if (!attributes.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    elem.setAttribute(item, attributes[item]);\n                }\n            }\n\n            if (children !== undefined) {\n                if (children.constructor === Object) {\n                    for (var item2 in children) {\n                        if (!children.hasOwnProperty(item2)) {\n                            continue;\n                        }\n\n                        elem.setAttribute(item2, children[item2]);\n                    }\n                } else if (/* typeof children == 'string' && */children.length > 0) {\n                    laroux_dom.append(elem, children);\n                }\n            }\n\n            return elem;\n        },\n\n        createOption: function (element, key, value, isDefault) {\n            /* old behaviour, does not support optgroups as parents.\n            var count = element.options.length;\n            element.options[count] = new Option(value, key);\n\n            if (isDefault === true) {\n                element.options.selectedIndex = count - 1;\n            }\n            */\n\n            var option = window.document.createElement('OPTION');\n            option.setAttribute('value', key);\n            if (isDefault === true) {\n                option.setAttribute('checked', 'checked');\n            }\n\n            laroux_dom.append(option, value);\n            element.appendChild(option);\n        },\n\n        selectByValue: function (element, value) {\n            for (var i = 0, length = element.options.length; i < length; i++) {\n                if (element.options[i].getAttribute('value') == value) {\n                    element.selectedIndex = i;\n                    break;\n                }\n            }\n        },/*,\n\n        // TODO: it's redundant for now\n        loadImage: function () {\n            var images = [];\n\n            for (var i = 0, length = arguments.length; i < length; i++) {\n                var image = window.document.createElement('IMG');\n                image.setAttribute('src', arguments[i]);\n\n                images.push(image);\n            }\n\n            return images;\n        },\n\n        loadAsyncScript: function (path, triggerName, async) {\n            var elem = window.document.createElement('script');\n\n            elem.type = 'text/javascript';\n            elem.async = (async !== undefined) ? async : true;\n            elem.src = path;\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = window.document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },\n\n        loadAsyncStyle: function (path, triggerName, async) {\n            var elem = window.document.createElement('LINK');\n\n            elem.type = 'text/css';\n            elem.async = (async !== undefined) ? async : true;\n            elem.href = path;\n            elem.rel = 'stylesheet';\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = window.document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },*/\n\n        clear: function (element) {\n            while (element.hasChildNodes()) {\n                element.removeChild(element.firstChild);\n            }\n        },\n\n        insert: function (element, position, content) {\n            element.insertAdjacentHTML(position, content);\n        },\n\n        prepend: function (element, content) {\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        append: function (element, content) {\n            element.insertAdjacentHTML('beforeend', content);\n        },\n\n        replace: function (element, content) {\n            laroux_dom.clear(element);\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        replaceText: function (element, content) {\n            // laroux_dom.clear(element);\n            element.textContent = content;\n        },\n\n        remove: function (element) {\n            element.remove();\n        },\n\n        cloneReturn: 0,\n        cloneAppend: 1,\n        cloneInsertAfter: 2,\n        cloneInsertBefore: 3,\n\n        clone: function (element, type, container, target) {\n            var newElement = element.cloneNode(true);\n\n            if (container === undefined) {\n                container = element.parentNode;\n            }\n            if (target === undefined) {\n                target = element;\n            }\n\n            if (type !== undefined && type != laroux_dom.cloneReturn) {\n                if (type == laroux_dom.cloneAppend) {\n                    container.appendChild(newElement);\n                } else if (type == laroux_dom.cloneInsertAfter) {\n                    container.insertBefore(newElement, target.nextSibling);\n                } else { // type == laroux_dom.cloneInsertBefore\n                    container.insertBefore(newElement, target);\n                }\n            }\n\n            return newElement;\n        }/*,\n\n        // TODO: it's redundant for now\n        applyOperations: function (element, operations) {\n            for (var operation in operations) {\n                if (!operations.hasOwnProperty(operation)) {\n                    continue;\n                }\n\n                for (var binding in operations[operation]) {\n                    if (!operations[operation].hasOwnProperty(binding)) {\n                        continue;\n                    }\n\n                    var value = operations[operation][binding];\n\n                    switch (operation) {\n                        case 'setprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.replace(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'addprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), element.getAttribute(binding.substring(1)) + value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.append(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'removeprop':\n                            if (value.substring(0, 1) == '_') {\n                                element.removeAttribute(value.substring(1));\n                                continue;\n                            }\n\n                            if (value == 'content') {\n                                laroux_dom.clear(element);\n                                continue;\n                            }\n                            break;\n                        case 'addclass':\n                            laroux_css.addClass(element, value);\n                            break;\n                        case 'removeclass':\n                            laroux_css.removeClass(element, value);\n                            break;\n                        case 'addstyle':\n                            laroux_css.setProperty(element, binding, value);\n                            break;\n                        case 'removestyle':\n                            laroux_css.setProperty(element, value, 'inherit !important');\n                            break;\n                        case 'repeat':\n                            break;\n                        default:\n                            console.log(operation);\n                    }\n                }\n            }\n        }*/\n    };\n\n    // a fix for Internet Explorer\n    if (typeof window !== 'undefined') {\n        if (window.Element.prototype.remove === undefined) {\n            window.Element.prototype.remove = function () {\n                if (this.parentElement !== null) {\n                    this.parentElement.removeChild(this);\n                }\n            };\n        }\n    }\n\n    return laroux_dom;\n\n}());\n\n},{\"./laroux.helpers.js\":8}],6:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n\n},{}],7:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_ajax = require('./laroux.ajax.js');\n\n    // forms\n    var laroux_forms = {\n        ajaxForm: function (formobj, fnc, fncBegin) {\n            laroux_dom.setEvent(formobj, 'submit', function () {\n                if (fncBegin !== undefined) {\n                    fncBegin();\n                }\n\n                laroux_ajax.post(\n                    formobj.getAttribute('action'),\n                    laroux_forms.serializeFormData(formobj),\n                    fnc\n                );\n\n                return false;\n            });\n        },\n\n        isFormField: function (element) {\n            if (element.tagName === 'SELECT') {\n                return true;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE' || type === 'CHECKBOX' || type === 'RADIO' || type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return true;\n            }\n\n            return false;\n        },\n\n        getFormFieldValue: function (element) {\n            if (element.disabled === true) {\n                return null;\n            }\n\n            if (element.tagName === 'SELECT') {\n                return element.options[element.selectedIndex].value;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE') {\n                    return element.files[0];\n                }\n\n                if (type === 'CHECKBOX' || type === 'RADIO') {\n                    if (element.checked) {\n                        return element.value;\n                    }\n\n                    return null;\n                }\n\n                if (type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return element.value;\n                }\n\n                return null;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return element.value;\n            }\n\n            return null;\n        },\n\n        setFormFieldValue: function (element, value) {\n            if (element.disabled === true) {\n                return;\n            }\n\n            if (element.tagName === 'SELECT') {\n                for (var option in element.options) {\n                    if (!element.options.hasOwnProperty(option)) {\n                        continue;\n                    }\n\n                    if (element.options[option].value == value) {\n                        element.selectedIndex = option;\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type == 'FILE') {\n                    element.files[0] = value;\n                    return;\n                }\n\n                if (type == 'CHECKBOX' || type == 'RADIO') {\n                    if (value === true || value == element.value) {\n                        element.checked = true;\n                    }\n\n                    return;\n                }\n\n                if (type == 'TEXT' || type == 'PASSWORD' || type == 'HIDDEN') {\n                    element.value = value;\n                    return;\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'TEXTAREA') {\n                element.value = value;\n                return;\n            }\n        },\n\n        toggleFormEditing: function (formobj, value) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            if (value === undefined) {\n                if (formobj.getAttribute('data-last-enabled') === null) {\n                    formobj.setAttribute('data-last-enabled', 'enabled');\n                    value = false;\n                } else {\n                    formobj.removeAttribute('data-last-enabled');\n                    value = true;\n                }\n            }\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                if (!laroux_forms.isFormField(selection[selected])) {\n                    continue;\n                }\n\n                var lastDisabled = selection[selected].getAttribute('data-last-disabled');\n                if (!value) {\n                    if (lastDisabled === null) {\n                        if (selection[selected].getAttribute('disabled') !== null) {\n                            selection[selected].setAttribute('data-last-disabled', 'disabled');\n                        }\n                    }\n\n                    selection[selected].setAttribute('disabled', 'disabled');\n                    continue;\n                }\n\n                if (lastDisabled !== null) {\n                    selection[selected].removeAttribute('data-last-disabled');\n                } else {\n                    selection[selected].removeAttribute('disabled');\n                }\n            }\n        },\n\n        serializeFormData: function (formobj) {\n            var formdata = new FormData();\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    formdata.append(selection[selected].getAttribute('name'), value);\n                }\n            }\n\n            return formdata;\n        },\n\n        serialize: function (formobj) {\n            var values = {};\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    values[selection[selected].getAttribute('name')] = value;\n                }\n            }\n\n            return values;\n        },\n\n        deserialize: function (formobj, data) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                laroux_forms.setFormFieldValue(selection[selected], data[selection[selected].getAttribute('name')]);\n            }\n        }\n    };\n\n    return laroux_forms;\n\n}());\n\n},{\"./laroux.ajax.js\":1,\"./laroux.dom.js\":5}],8:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(/%s/g, function () { return Array.prototype.shift.call(args); });\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (!dontSkipReturns && result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (!dontSkipReturns && result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(obj, function (value) { return value[key]; }, true);\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n\n},{}],9:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // core\n    var laroux = function (selector, parent) {\n        if (selector instanceof Array) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        }\n\n        /*\n        // FIXME: non-chrome optimization\n        var re = /^#([^\\+\\>\\[\\]\\.# ]*)$/.exec(selector);\n        if (re) {\n            if (parent === undefined) {\n                return document.getElementById(re[1]);\n            }\n\n            return parent.getElementById(re[1]);\n        }\n        */\n\n        return (parent || document).querySelector(selector);\n    };\n\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.timers = require('./laroux.timers.js');\n\n    laroux.cached = {\n        single: {},\n        array: {},\n        id: {}\n    };\n\n    laroux.c = function (selector) {\n        if (selector instanceof Array) {\n            return laroux.cached.array[selector] || (\n                laroux.cached.array[selector] = laroux.helpers.toArray(\n                    document.querySelectorAll(selector)\n                )\n            );\n        }\n\n        return laroux.cached.single[selector] || (\n            laroux.cached.single[selector] = document.querySelector(selector)\n        );\n    };\n\n    laroux.id = function (selector, parent) {\n        return (parent || document).getElementById(selector);\n    };\n\n    laroux.idc = function (selector) {\n        return laroux.cached.id[selector] ||\n            (laroux.cached.id[selector] = document.getElementById(selector));\n    };\n\n    laroux.readyPassed = false;\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    laroux.ready = function (fnc) {\n        if (!laroux.readyPassed) {\n            laroux.events.add('ContentLoaded', fnc);\n            return;\n        }\n\n        fnc();\n    };\n\n    if (typeof window !== 'undefined') {\n        window.document.addEventListener(\n            'DOMContentLoaded',\n            function () {\n                if (!laroux.readyPassed) {\n                    laroux.events.invoke('ContentLoaded');\n                    window.setInterval(laroux.timers.ontick, 100);\n                    laroux.readyPassed = true;\n                }\n            }\n        );\n\n        if (!('$l' in window)) {\n            window.$l = laroux;\n        }\n    }\n\n    // optional modules\n    laroux.wrapper = require('./laroux.wrapper.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.css = require('./laroux.css.js');\n    laroux.dom = require('./laroux.dom.js');\n    laroux.events = require('./laroux.events.js');\n    laroux.forms = require('./laroux.forms.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n\n    laroux.anim = require('./laroux.anim.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.keys = require('./laroux.keys.js');\n    laroux.mvc = require('./laroux.mvc.js');\n    laroux.stack = require('./laroux.stack.js');\n    laroux.templates = require('./laroux.templates.js');\n    laroux.touch = require('./laroux.touch.js');\n    laroux.ui = require('./laroux.ui.js');\n\n    return laroux;\n\n}());\n\n},{\"./laroux.ajax.js\":1,\"./laroux.anim.js\":2,\"./laroux.css.js\":3,\"./laroux.date.js\":4,\"./laroux.dom.js\":5,\"./laroux.events.js\":6,\"./laroux.forms.js\":7,\"./laroux.helpers.js\":8,\"./laroux.keys.js\":10,\"./laroux.mvc.js\":11,\"./laroux.stack.js\":12,\"./laroux.templates.js\":13,\"./laroux.timers.js\":14,\"./laroux.touch.js\":15,\"./laroux.triggers.js\":16,\"./laroux.ui.js\":17,\"./laroux.vars.js\":18,\"./laroux.wrapper.js\":19}],10:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_forms = require('./laroux.forms.js');\n\n    // keys\n    var laroux_keys = {\n        keyName: function (keycode) {\n            keycode = keycode.toLowerCase();\n\n            switch (keycode) {\n            case 'backspace':\n                return 8;\n\n            case 'tab':\n                return 9;\n\n            case 'enter':\n            case 'return':\n                return 13;\n\n            case 'esc':\n            case 'escape':\n                return 27;\n\n            case 'space':\n                return 32;\n\n            case 'pgup':\n                return 33;\n\n            case 'pgdn':\n                return 34;\n\n            case 'end':\n                return 35;\n\n            case 'home':\n                return 36;\n\n            case 'left':\n                return 37;\n\n            case 'up':\n                return 38;\n\n            case 'right':\n                return 39;\n\n            case 'down':\n                return 40;\n\n            case 'insert':\n                return 45;\n\n            case 'delete':\n                return 46;\n\n            case 'f1':\n                return 112;\n\n            case 'f2':\n                return 113;\n\n            case 'f3':\n                return 114;\n\n            case 'f4':\n                return 115;\n\n            case 'f5':\n                return 116;\n\n            case 'f6':\n                return 117;\n\n            case 'f7':\n                return 118;\n\n            case 'f8':\n                return 119;\n\n            case 'f9':\n                return 120;\n\n            case 'f10':\n                return 121;\n\n            case 'f11':\n                return 122;\n\n            case 'f12':\n                return 123;\n\n            case ',':\n                return 188;\n\n            case '.':\n                return 190;\n            }\n\n            return String.fromCharCode(keycode);\n        },\n\n        // {target, key, shift, ctrl, alt, disableInputs, fnc}\n        assign: function (options) {\n            var wrapper = function (event) {\n                if (!event) {\n                    event = window.event;\n                }\n\n                var element = event.target || event.srcElement;\n                if (element.nodeType === 3 || element.nodeType === 11) { // element.nodeType === 1 ||\n                    element = element.parentNode;\n                }\n\n                if (options.disableInputs && laroux_forms.isFormField(element)) {\n                    return;\n                }\n\n                if (options.shift && !event.shiftKey) {\n                    return;\n                }\n\n                if (options.ctrl && !event.ctrlKey) {\n                    return;\n                }\n\n                if (options.alt && !event.altKey) {\n                    return;\n                }\n\n                var key = laroux_keys.keyName(options.key);\n                if (key !== (event.keyCode || event.which)) {\n                    return;\n                }\n\n                options.fnc(event);\n\n                return false;\n            };\n\n            laroux_dom.setEvent(options.target || window.document, 'keydown', wrapper);\n        }\n    };\n\n    return laroux_keys;\n\n}());\n\n},{\"./laroux.dom.js\":5,\"./laroux.forms.js\":7}],11:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_stack = require('./laroux.stack.js');\n\n    // mvc\n    var laroux_mvc = {\n        apps: {},\n        pauseUpdate: false,\n\n        init: function (element, model) {\n            if (element.constructor === String) {\n                element = laroux_dom.selectById(element);\n            }\n\n            // if (model.constructor !== laroux_stack) {\n            //     model = new laroux_stack(model);\n            // }\n\n            var appKey = element.getAttribute('id');\n\n            model.onupdate = function (event) {\n                if (!laroux_mvc.pauseUpdate) {\n                    laroux_mvc.update(appKey); // , [event.key]\n                }\n            };\n\n            laroux_mvc.apps[appKey] = {\n                element: element,\n                model: model // ,\n                // modelKeys: null,\n                // boundElements: null,\n                // eventElements: null\n            };\n\n            laroux_mvc.rebind(appKey);\n        },\n\n        rebind: function (appKey) {\n            var app = laroux_mvc.apps[appKey];\n            /*jslint nomen: true */\n            app.modelKeys = laroux_helpers.getKeysRecursive(app.model._data); // FIXME: works only for $l.stack\n            app.boundElements = {};\n            app.eventElements = [];\n\n            laroux_mvc.scanElements(app, app.element);\n            laroux_mvc.update(appKey);\n\n            var fnc = function (ev, elem) {\n                var binding = laroux_mvc.bindStringParser(elem.getAttribute('lr-event'));\n                // laroux_mvc.pauseUpdate = true;\n                for (var item in binding) {\n                    if (item === null || !binding.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    if (binding[item].charAt(0) == '\\'') {\n                        app.model[item] = binding[item].substring(1, binding[item].length - 1);\n                    } else if (binding[item].substring(0, 5) == 'attr.') {\n                        app.model[item] = elem.getAttribute(binding[item].substring(5));\n                    } else if (binding[item].substring(0, 5) == 'prop.') {\n                        app.model[item] = elem[binding[item].substring(5)];\n                    }\n                }\n                // laroux_mvc.pauseUpdate = false;\n            };\n\n            for (var i = 0, length = app.eventElements.length; i < length; i++) {\n                laroux_dom.setEvent(\n                    app.eventElements[i].element,\n                    app.eventElements[i].binding[null],\n                    fnc\n                );\n            }\n        },\n\n        scanElements: function (app, element) {\n            for (var i = 0, atts = element.attributes, m = atts.length; i < m; i++) {\n                if (atts[i].name == 'lr-bind') {\n                    var binding1 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    for (var item in binding1) {\n                        if (!binding1.hasOwnProperty(item)) {\n                            continue;\n                        }\n\n                        if (app.boundElements[binding1[item]] === undefined) {\n                            app.boundElements[binding1[item]] = [];\n                        }\n\n                        app.boundElements[binding1[item]].push({\n                            element: element,\n                            target: item\n                        });\n                    }\n                } else if (atts[i].name == 'lr-event') {\n                    var binding2 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    app.eventElements.push({\n                        element: element,\n                        binding: binding2\n                    });\n                }\n            }\n\n            for (var j = 0, chldrn = element.childNodes, n = chldrn.length; j < n; j++) {\n                if (chldrn[j].nodeType === 1) {\n                    laroux_mvc.scanElements(app, chldrn[j]);\n                }\n            }\n        },\n\n        update: function (appKey, keys) {\n            var app = laroux_mvc.apps[appKey];\n\n            if (typeof keys == 'undefined') {\n                keys = app.modelKeys;\n            }\n\n            for (var i = 0, length1 = keys.length; i < length1; i++) {\n                if (!(keys[i] in app.boundElements)) {\n                    continue;\n                }\n\n                var boundElement = app.boundElements[keys[i]];\n\n                for (var j = 0, length2 = boundElement.length; j < length2; j++) {\n                    if (boundElement[j].target.substring(0, 6) == 'style.') {\n                        boundElement[j].element.style[boundElement[j].target.substring(6)] = laroux_helpers.getElement(app.model, keys[i]);\n                    } else if (boundElement[j].target.substring(0, 5) == 'attr.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element.setAttribute(boundElement[j].target.substring(5), laroux_helpers.getElement(app.model, keys[i]));\n                    } else if (boundElement[j].target.substring(0, 5) == 'prop.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element[boundElement[j].target.substring(5)] = laroux_helpers.getElement(app.model, keys[i]);\n                    }\n                }\n            }\n        },\n\n        bindStringParser: function (text) {\n            var lastBuffer = null,\n                buffer = '',\n                state = 0,\n                result = {};\n\n            for (var i = 0, length = text.length; i < length; i++) {\n                var curr = text.charAt(i);\n\n                if (state === 0) {\n                    if (curr == ':') {\n                        state = 1;\n                        lastBuffer = buffer.trim();\n                        buffer = '';\n                        continue;\n                    }\n                }\n\n                if (curr == ',') {\n                    state = 0;\n                    result[lastBuffer] = buffer.trim();\n                    buffer = '';\n                    continue;\n                }\n\n                buffer += curr;\n            }\n\n            if (buffer.length > 0) {\n                result[lastBuffer] = buffer.trim();\n            }\n\n            return result;\n        }\n    };\n\n    return laroux_mvc;\n\n}());\n\n},{\"./laroux.dom.js\":5,\"./laroux.helpers.js\":8,\"./laroux.stack.js\":12}],12:[function(require,module,exports){\n/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n\n},{}],13:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // templates\n    var laroux_templates = {\n        engines: {\n            plain: {\n                compile: function (template, options) {\n                    return [template, options];\n                },\n\n                render: function (compiled, model) {\n                    var result = compiled[0],\n                        dict = [],\n                        lastIndex = 0,\n                        nextIndex;\n\n                    while ((nextIndex = result.indexOf('{{', lastIndex)) !== -1) {\n                        nextIndex += 2;\n                        var closeIndex = result.indexOf('}}', nextIndex);\n                        if (closeIndex === -1) {\n                            break;\n                        }\n\n                        var key = result.substring(nextIndex, closeIndex);\n                        dict['{{' + key + '}}'] = laroux_helpers.getElement(model, key, '');\n                        lastIndex = closeIndex + 2;\n                    }\n\n                    return laroux_helpers.replaceAll(result, dict);\n                }\n            },\n\n            hogan: {\n                compile: function (template, options) {\n                    return window.Hogan.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled.render(model);\n                }\n            },\n\n            mustache: {\n                compile: function (template, options) {\n                    return window.Mustache.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            handlebars: {\n                compile: function (template, options) {\n                    return window.Handlebars.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            lodash: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return window._.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            underscore: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return window._.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            }\n        },\n        engine: 'plain',\n\n        apply: function (element, model, options) {\n            var content, engine = laroux_templates.engines[laroux_templates.engine];\n\n            if (element.nodeType === 1 || element.nodeType === 3 || element.nodeType === 11) {\n                content = element.textContent;\n            } else {\n                content = element.nodeValue;\n            }\n\n            var compiled = engine.compile(content, options);\n            return engine.render(compiled, model);\n        },\n\n        insert: function (element, model, target, position, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.insert(target, position || 'beforeend', output);\n        },\n\n        replace: function (element, model, target, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.replace(target, output);\n        }\n    };\n\n    return laroux_templates;\n\n}());\n\n},{\"./laroux.dom.js\":5,\"./laroux.helpers.js\":8}],14:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n\n},{}],15:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js');\n\n    // touch - partially taken from 'tocca.js' project\n    //         can be found at: https://github.com/GianlucaGuarini/Tocca.js\n    var laroux_touch = {\n        touchStarted: null,\n        swipeTreshold: 80,\n        precision: 30,\n        tapCount: 0,\n        tapTreshold: 200,\n        longTapTreshold: 800,\n        tapTimer: null,\n        pos: null,\n        cached: null,\n\n        events: {\n            start: ['touchstart', 'pointerdown', 'MSPointerDown', 'mousedown'],\n            end: ['touchend', 'pointerup', 'MSPointerUp', 'mouseup'],\n            move: ['touchmove', 'pointermove', 'MSPointerMove', 'mousemove']\n        },\n\n        locatePointer: function (event) {\n            if (event.targetTouches) {\n                event = event.targetTouches[0];\n            }\n\n            laroux_touch.pos = [event.pageX, event.pageY];\n        },\n\n        init: function () {\n            var events = [\n                0,\n                (navigator.msPointerEnabled) ? 2 : 1,\n                3\n            ];\n\n            for (var i = 0, length = events.length; i < length; i++) {\n                laroux_dom.setEventSingle(document, laroux_touch.events.start[events[i]], laroux_touch.onstart);\n                laroux_dom.setEventSingle(document, laroux_touch.events.end[events[i]], laroux_touch.onend);\n                laroux_dom.setEventSingle(document, laroux_touch.events.move[events[i]], laroux_touch.locatePointer);\n            }\n        },\n\n        onstart: function (event) {\n            laroux_touch.locatePointer(event);\n            laroux_touch.cached = [laroux_touch.pos[0], laroux_touch.pos[1]];\n            laroux_touch.touchStarted = Date.now();\n            /*jslint plusplus: true */\n            laroux_touch.tapCount++;\n\n            var fnc = function () {\n                if (laroux_touch.cached[0] >= laroux_touch.pos[0] - laroux_touch.precision &&\n                        laroux_touch.cached[0] <= laroux_touch.pos[0] + laroux_touch.precision &&\n                        laroux_touch.cached[1] >= laroux_touch.pos[1] - laroux_touch.precision &&\n                        laroux_touch.cached[1] <= laroux_touch.pos[1] + laroux_touch.precision) {\n                    if (laroux_touch.touchStarted === null) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            (laroux_touch.tapCount === 2) ? 'dbltap' : 'tap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    if (Date.now() - laroux_touch.touchStarted > laroux_touch.longTapTreshold) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            'longtap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.touchStarted = null;\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n                    return;\n                }\n\n                laroux_touch.tapCount = 0;\n            };\n\n            clearTimeout(laroux_touch.tapTimer);\n            laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n        },\n\n        onend: function (event) {\n            var delta = [\n                    laroux_touch.pos[0] - laroux_touch.cached[0],\n                    laroux_touch.pos[1] - laroux_touch.cached[1]\n                ],\n                data = {\n                    innerEvent: event,\n                    x: laroux_touch.pos[0],\n                    y: laroux_touch.pos[1],\n                    distance: {\n                        x: Math.abs(delta[0]),\n                        y: Math.abs(delta[1])\n                    }\n                };\n\n            laroux_touch.touchStarted = null;\n\n            if (delta[0] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swiperight', data);\n            }\n\n            if (delta[0] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeleft', data);\n            }\n\n            if (delta[1] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipedown', data);\n            }\n\n            if (delta[1] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeup', data);\n            }\n        }\n    };\n\n    return laroux_touch;\n\n}());\n\n},{\"./laroux.dom.js\":5}],16:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n\n},{\"./laroux.helpers.js\":8}],17:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_timers = require('./laroux.timers.js'),\n        laroux_date = require('./laroux.date.js');\n\n    // ui\n    var laroux_ui = {\n        floatContainer: null,\n\n        popup: {\n            defaultTimeout: 500,\n\n            createBox: function (id, xclass, message) {\n                return laroux_dom.createElement('DIV', { id: id, 'class': xclass }, message);\n            },\n\n            msgbox: function (timeout, message) {\n                var id = laroux_helpers.getUniqueId(),\n                    obj = laroux_ui.popup.createBox(id, 'larouxMsgBox', message);\n                laroux_ui.floatContainer.appendChild(obj);\n\n                laroux_css.setProperty(obj, { opacity: 1 });\n\n                laroux_timers.set({\n                    timeout: timeout,\n                    reset: false,\n                    ontick: function (x) {\n                        // laroux_css.setProperty(x, { opacity: 0 });\n                        laroux_dom.remove(x);\n                    },\n                    state: obj\n                });\n            }\n        },\n\n        loading: {\n            elementSelector: null,\n            element: null,\n            defaultDelay: 1500,\n            timer: null,\n\n            killTimer: function () {\n                clearTimeout(laroux_ui.loading.timer);\n            },\n\n            hide: function () {\n                laroux_ui.loading.killTimer();\n\n                laroux_css.setProperty(laroux_ui.loading.element, { display: 'none' });\n                localStorage.loadingIndicator = 'false';\n            },\n\n            show: function (delay) {\n                laroux_ui.loading.killTimer();\n\n                if (delay === undefined) {\n                    delay = laroux_ui.loading.defaultDelay;\n                }\n\n                if (delay > 0) {\n                    setTimeout(function () { laroux_ui.loading.show(0); }, delay);\n                } else {\n                    laroux_css.setProperty(laroux_ui.loading.element, { display: 'block' });\n                    localStorage.loadingIndicator = 'true';\n                }\n            },\n\n            init: function () {\n                if (laroux_ui.loading.element === null && laroux_ui.loading.elementSelector !== null) {\n                    laroux_ui.loading.element = laroux_dom.selectSingle(laroux_ui.loading.elementSelector);\n                }\n\n                if (laroux_ui.loading.element !== null) {\n                    laroux_dom.setEvent(window, 'load', laroux_ui.loading.hide);\n                    laroux_dom.setEvent(window, 'beforeunload', laroux_ui.loading.show);\n\n                    if (localStorage.loadingIndicator !== undefined && localStorage.loadingIndicator === 'true') {\n                        laroux_ui.loading.show(0);\n                    } else {\n                        laroux_ui.loading.show();\n                    }\n                }\n            }\n        },\n\n        dynamicDates: {\n            updateDatesElements: null,\n\n            updateDates: function () {\n                if (laroux_ui.dynamicDates.updateDatesElements === null) {\n                    laroux_ui.dynamicDates.updateDatesElements = laroux_dom.select('*[data-epoch]');\n                }\n\n                for (var item in laroux_ui.dynamicDates.updateDatesElements) {\n                    if (!laroux_ui.dynamicDates.updateDatesElements.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    var obj = laroux_ui.dynamicDates.updateDatesElements[item];\n                    // bitshifting (str >> 0) used instead of parseInt(str, 10)\n                    var date = new Date((obj.getAttribute('data-epoch') >> 0) * 1000);\n\n                    laroux_dom.replace(\n                        obj,\n                        laroux_date.getDateString(date)\n                    );\n\n                    obj.setAttribute('title', laroux_date.getLongDateString(date));\n                }\n            },\n\n            init: function () {\n                laroux_timers.set({\n                    timeout: 500,\n                    reset: true,\n                    ontick: laroux_ui.dynamicDates.updateDates\n                });\n            }\n        },\n\n        scrollView: {\n            selectedElements: [],\n\n            onhidden: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 0 });\n                laroux_css.setTransition(elements, ['opacity']);\n            },\n\n            onreveal: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 1 });\n            },\n\n            set: function (element) {\n                var elements = laroux_helpers.getAsArray(element);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (!laroux_css.inViewport(elements[i])) {\n                        laroux_ui.scrollView.selectedElements.push(elements[i]);\n                    }\n                }\n\n                laroux_ui.scrollView.onhidden(laroux_ui.scrollView.selectedElements);\n                laroux_dom.setEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n            },\n\n            reveal: function () {\n                var removeKeys = [],\n                    elements = [];\n\n                laroux_helpers.each(\n                    laroux_ui.scrollView.selectedElements,\n                    function (i, element) {\n                        if (laroux_css.inViewport(element)) {\n                            removeKeys.unshift(i);\n                            elements.push(element);\n                        }\n                    }\n                );\n\n                for (var item in removeKeys) {\n                    if (!removeKeys.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    laroux_ui.scrollView.selectedElements.splice(removeKeys[item], 1);\n                }\n\n                if (laroux_ui.scrollView.selectedElements.length === 0) {\n                    laroux_dom.unsetEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n                }\n\n                if (elements.length > 0) {\n                    laroux_ui.scrollView.onreveal(elements);\n                }\n            }\n        },\n\n        createFloatContainer: function () {\n            if (!laroux_ui.floatContainer) {\n                laroux_ui.floatContainer = laroux_dom.createElement('DIV', { 'class': 'larouxFloatDiv' });\n                window.document.body.insertBefore(laroux_ui.floatContainer, window.document.body.firstChild);\n            }\n        },\n\n        init: function () {\n            laroux_ui.createFloatContainer();\n            laroux_ui.loading.init();\n            laroux_ui.dynamicDates.init();\n        }\n    };\n\n    return laroux_ui;\n\n}());\n\n},{\"./laroux.css.js\":3,\"./laroux.date.js\":4,\"./laroux.dom.js\":5,\"./laroux.helpers.js\":8,\"./laroux.timers.js\":14}],18:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n\n},{}],19:[function(require,module,exports){\n/*global NodeList, Node */\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // wrapper\n    var laroux_wrapper = function (selector, parent) {\n        var selection;\n\n        if (selector instanceof Array) {\n            selection = selector;\n        } else if (selector instanceof NodeList) {\n            selection = laroux_helpers.toArray(selector);\n        } else if (selector instanceof Node) {\n            selection = [selector];\n        } else {\n            selection = laroux_dom.select(selector, parent);\n        }\n\n        if (selection.length === 1) {\n            return new laroux_wrapper.singleTemplate(selection[0]);\n        }\n\n        return new laroux_wrapper.arrayTemplate(selection);\n    };\n\n    laroux_wrapper.singleTemplate = function (element) {\n        this.source = element;\n        this.isArray = false;\n\n        this.get = function (index) {\n            if (index === 0 || index === undefined) {\n                return this.source;\n            }\n\n            return undefined;\n        };\n\n        this.find = function (selector) {\n            return laroux_wrapper(selector, this.source);\n        };\n    };\n\n    laroux_wrapper.arrayTemplate = function (elements) {\n        this.source = elements;\n        this.isArray = true;\n\n        this.get = function (index) {\n            return this.source[index];\n        };\n    };\n\n    laroux_wrapper.registerBoth = 0;\n    laroux_wrapper.registerSingle = 1;\n    laroux_wrapper.registerArray = 2;\n\n    laroux_wrapper.register = function (name, fnc, scope) {\n        var newFnc = function () {\n            var result = fnc.apply(\n                this,\n                [this.source].concat(laroux_helpers.toArray(arguments))\n            );\n\n            return (result === undefined) ? this : result;\n        };\n\n        switch (scope) {\n        case laroux_wrapper.registerSingle:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            break;\n        case laroux_wrapper.registerArray:\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        default:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        }\n    };\n\n    laroux_wrapper.register('attr', laroux_dom.attr, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('data', laroux_dom.data, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEventSingle, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEvent, laroux_wrapper.registerArray);\n    laroux_wrapper.register('off', laroux_dom.unsetEvent, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('clear', laroux_dom.clear, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('insert', laroux_dom.insert, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('prepend', laroux_dom.prepend, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('append', laroux_dom.append, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replace', laroux_dom.replace, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replaceText', laroux_dom.replaceText, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('remove', laroux_dom.remove, laroux_wrapper.registerSingle);\n\n    laroux_wrapper.register('hasClass', laroux_css.hasClass, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('addClass', laroux_css.addClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('removeClass', laroux_css.removeClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('toggleClass', laroux_css.toggleClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('getProperty', laroux_css.getProperty, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('setProperty', laroux_css.setProperty, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('setTransition', laroux_css.setTransition, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('show', laroux_css.show, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('hide', laroux_css.hide, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('height', laroux_css.height, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerHeight', laroux_css.innerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerHeight', laroux_css.outerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('width', laroux_css.width, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerWidth', laroux_css.innerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerWidth', laroux_css.outerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('top', laroux_css.top, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('left', laroux_css.left, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('aboveTheTop', laroux_css.aboveTheTop, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('belowTheFold', laroux_css.belowTheFold, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('leftOfScreen', laroux_css.leftOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('rightOfScreen', laroux_css.rightOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('inViewport', laroux_css.inViewport, laroux_wrapper.registerSingle);\n\n    return laroux_wrapper;\n\n}());\n\n},{\"./laroux.css.js\":3,\"./laroux.dom.js\":5,\"./laroux.helpers.js\":8}]},{},[9])\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbGFyb3V4LmFqYXguanMiLCJzcmMvbGFyb3V4LmFuaW0uanMiLCJzcmMvbGFyb3V4LmNzcy5qcyIsInNyYy9sYXJvdXguZGF0ZS5qcyIsInNyYy9sYXJvdXguZG9tLmpzIiwic3JjL2xhcm91eC5ldmVudHMuanMiLCJzcmMvbGFyb3V4LmZvcm1zLmpzIiwic3JjL2xhcm91eC5oZWxwZXJzLmpzIiwic3JjL2xhcm91eC5qcyIsInNyYy9sYXJvdXgua2V5cy5qcyIsInNyYy9sYXJvdXgubXZjLmpzIiwic3JjL2xhcm91eC5zdGFjay5qcyIsInNyYy9sYXJvdXgudGVtcGxhdGVzLmpzIiwic3JjL2xhcm91eC50aW1lcnMuanMiLCJzcmMvbGFyb3V4LnRvdWNoLmpzIiwic3JjL2xhcm91eC50cmlnZ2Vycy5qcyIsInNyYy9sYXJvdXgudWkuanMiLCJzcmMvbGFyb3V4LnZhcnMuanMiLCJzcmMvbGFyb3V4LndyYXBwZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5VEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDalFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDamNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdFlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9ldmVudHMgPSByZXF1aXJlKCcuL2xhcm91eC5ldmVudHMuanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG5cbiAgICAvLyBhamF4IC0gcGFydGlhbGx5IHRha2VuIGZyb20gJ2pxdWVyeSBpbiBwYXJ0cycgcHJvamVjdFxuICAgIC8vICAgICAgICBjYW4gYmUgZm91bmQgYXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9teXRoei9qcXVpcC9cbiAgICB2YXIgbGFyb3V4X2FqYXggPSB7XG4gICAgICAgIGNvcnNEZWZhdWx0OiBmYWxzZSxcblxuICAgICAgICB3cmFwcGVyczoge1xuICAgICAgICAgICAgcmVnaXN0cnk6IHtcbiAgICAgICAgICAgICAgICAnbGFyb3V4LmpzJzogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiAnICsgZGF0YS5lcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iajtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5mb3JtYXQgPT09ICdqc29uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShkYXRhLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5mb3JtYXQgPT09ICdzY3JpcHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKmpzaGludCBldmlsOnRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qanNsaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZXZhbChkYXRhLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGlmIChkYXRhLmZvcm1hdCA9PSAneG1sJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZGF0YS5vYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIGZuYykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LndyYXBwZXJzLnJlZ2lzdHJ5W25hbWVdID0gZm5jO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHhEb21haW5PYmplY3Q6IGZhbHNlLFxuICAgICAgICB4bWxIdHRwUmVxdWVzdE9iamVjdDogbnVsbCxcbiAgICAgICAgeERvbWFpblJlcXVlc3RPYmplY3Q6IG51bGwsXG4gICAgICAgIHhocjogZnVuY3Rpb24gKGNyb3NzRG9tYWluKSB7XG4gICAgICAgICAgICBpZiAobGFyb3V4X2FqYXgueG1sSHR0cFJlcXVlc3RPYmplY3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3Jvc3NEb21haW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoISgnd2l0aENyZWRlbnRpYWxzJyBpbiBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdCkgJiYgd2luZG93LlhEb21haW5SZXF1ZXN0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2FqYXgueERvbWFpbk9iamVjdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhcm91eF9hamF4LnhEb21haW5SZXF1ZXN0T2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54RG9tYWluUmVxdWVzdE9iamVjdCA9IG5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfYWpheC54RG9tYWluUmVxdWVzdE9iamVjdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LnhEb21haW5PYmplY3QgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9hamF4LnhtbEh0dHBSZXF1ZXN0T2JqZWN0O1xuICAgICAgICB9LFxuXG4gICAgICAgIHhoclJlc3A6IGZ1bmN0aW9uICh4aHIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyRnVuY3Rpb24gPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVzcG9uc2UtV3JhcHBlci1GdW5jdGlvbicpLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kYXRhdHlwZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGF0eXBlID09PSAnanNvbicpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YXR5cGUgPT09ICdzY3JpcHQnKSB7XG4gICAgICAgICAgICAgICAgLypqc2hpbnQgZXZpbDp0cnVlICovXG4gICAgICAgICAgICAgICAgLypqc2xpbnQgZXZpbDp0cnVlICovXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBldmFsKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGF0eXBlID09PSAneG1sJykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlWE1MO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3cmFwcGVyRnVuY3Rpb24gJiYgKHdyYXBwZXJGdW5jdGlvbiBpbiBsYXJvdXhfYWpheC53cmFwcGVycy5yZWdpc3RyeSkpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGxhcm91eF9hamF4LndyYXBwZXJzLnJlZ2lzdHJ5W3dyYXBwZXJGdW5jdGlvbl0ocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiByZXNwb25zZSxcbiAgICAgICAgICAgICAgICB3cmFwcGVyRnVuYzogd3JhcHBlckZ1bmN0aW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIG1ha2VSZXF1ZXN0OiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGNvcnMgPSBvcHRpb25zLmNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgeGhyID0gbGFyb3V4X2FqYXgueGhyKGNvcnMpLFxuICAgICAgICAgICAgICAgIHVybCA9IG9wdGlvbnMudXJsLFxuICAgICAgICAgICAgICAgIHRpbWVyID0gbnVsbCxcbiAgICAgICAgICAgICAgICBuID0gMDtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGltZXIgPSBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnRpbWVvdXRGbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50aW1lb3V0Rm4ob3B0aW9ucy51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRpbWVvdXRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGltZXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA8IDMwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdWNjZXNzID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMgPSBsYXJvdXhfYWpheC54aHJSZXNwKHhociwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVycm9yKHhociwgeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9ldmVudHMuaW52b2tlKCdhamF4RXJyb3InLCBbeGhyLCB4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCwgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuc3VjY2VzcyAhPT0gdW5kZWZpbmVkICYmIHJlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN1Y2Nlc3MocmVzLnJlc3BvbnNlLCByZXMud3JhcHBlckZ1bmMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9ldmVudHMuaW52b2tlKCdhamF4U3VjY2VzcycsIFt4aHIsIHJlcy5yZXNwb25zZSwgcmVzLndyYXBwZXJGdW5jLCBvcHRpb25zXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lcnJvcih4aHIsIHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5pbnZva2UoJ2FqYXhFcnJvcicsIFt4aHIsIHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0LCBvcHRpb25zXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jb21wbGV0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmNvbXBsZXRlKHhociwgeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5pbnZva2UoJ2FqYXhDb21wbGV0ZScsIFt4aHIsIHhoci5zdGF0dXNUZXh0LCBvcHRpb25zXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnByb2dyZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLypqc2xpbnQgcGx1c3BsdXM6IHRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wcm9ncmVzcygrK24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmdldGRhdGEgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmdldGRhdGEgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRkYXRhLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gbGFyb3V4X2hlbHBlcnMuYnVpbGRRdWVyeVN0cmluZyhvcHRpb25zLmdldGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocXVlcnlTdHJpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA8IDApID8gJz8nIDogJyYnKSArIHF1ZXJ5U3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA8IDApID8gJz8nIDogJyYnKSArIG9wdGlvbnMuZ2V0ZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmpzb25wICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpIDwgMCkgPyAnPycgOiAnJicpICsgJ2pzb25wPScgKyBvcHRpb25zLmpzb25wO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWxhcm91eF9hamF4LnhEb21haW5PYmplY3QpIHtcbiAgICAgICAgICAgICAgICB4aHIub3BlbihvcHRpb25zLnR5cGUsIHVybCwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHhoci5vcGVuKG9wdGlvbnMudHlwZSwgdXJsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy54aHJGaWVsZHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMueGhyRmllbGRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW9wdGlvbnMueGhyRmllbGRzLmhhc093blByb3BlcnR5KGkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHhocltpXSA9IG9wdGlvbnMueGhyRmllbGRzW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgfHwge307XG5cbiAgICAgICAgICAgICAgICBpZiAoIWNvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0JztcblxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy53cmFwcGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydYLVdyYXBwZXItRnVuY3Rpb24nXSA9ICdsYXJvdXguanMnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBoZWFkZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVycy5oYXNPd25Qcm9wZXJ0eShqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihqLCBoZWFkZXJzW2pdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBvc3RkYXRhID09PSB1bmRlZmluZWQgfHwgb3B0aW9ucy5wb3N0ZGF0YSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHhoci5zZW5kKG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3dpdGNoIChvcHRpb25zLnBvc3RkYXRhdHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2pzb24nOlxuICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShvcHRpb25zLnBvc3RkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChsYXJvdXhfaGVscGVycy5idWlsZEZvcm1EYXRhKG9wdGlvbnMucG9zdGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQob3B0aW9ucy5wb3N0ZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGdldDogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdodG1sJyxcbiAgICAgICAgICAgICAgICBnZXRkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRKc29uOiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGdldGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICB3cmFwcGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEpzb25QOiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBtZXRob2QsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgICAgICAgICBnZXRkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAganNvbnA6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICB3cmFwcGVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRTY3JpcHQ6IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgICAgICAgICBnZXRkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcG9zdDogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgcG9zdGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICBwb3N0ZGF0YXR5cGU6ICdmb3JtJyxcbiAgICAgICAgICAgICAgICB3cmFwcGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBvc3RKc29uOiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBwb3N0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHBvc3RkYXRhdHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PVVURi04J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2FqYXg7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpLFxuICAgICAgICBsYXJvdXhfY3NzID0gcmVxdWlyZSgnLi9sYXJvdXguY3NzLmpzJyk7XG5cbiAgICAvLyBhbmltXG4gICAgdmFyIGxhcm91eF9hbmltID0ge1xuICAgICAgICBkYXRhOiBbXSxcblxuICAgICAgICBmeDoge1xuICAgICAgICAgICAgaW50ZXJwb2xhdGU6IGZ1bmN0aW9uIChzb3VyY2UsIHRhcmdldCwgc2hpZnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKHNvdXJjZSArICh0YXJnZXQgLSBzb3VyY2UpICogc2hpZnQpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZWFzaW5nOiBmdW5jdGlvbiAocG9zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICgtTWF0aC5jb3MocG9zICogTWF0aC5QSSkgLyAyKSArIDAuNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyB7b2JqZWN0LCBwcm9wZXJ0eSwgZnJvbSwgdG8sIHRpbWUsIHVuaXQsIHJlc2V0fVxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdhbmltKSB7XG4gICAgICAgICAgICBuZXdhbmltLnN0YXJ0VGltZSA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChuZXdhbmltLnVuaXQgPT09IHVuZGVmaW5lZCB8fCBuZXdhbmltLnVuaXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXdhbmltLnVuaXQgPSAnJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld2FuaW0uZnJvbSA9PT0gdW5kZWZpbmVkIHx8IG5ld2FuaW0uZnJvbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChuZXdhbmltLm9iamVjdCA9PT0gd2luZG93LmRvY3VtZW50LmJvZHkgJiYgbmV3YW5pbS5wcm9wZXJ0eSA9PT0gJ3Njcm9sbFRvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3YW5pbS5mcm9tID0gKHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIHx8IHdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdhbmltLmZyb20gPSBuZXdhbmltLm9iamVjdFtuZXdhbmltLnByb3BlcnR5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3YW5pbS5mcm9tID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG5ld2FuaW0uZnJvbSA9IE51bWJlcihuZXdhbmltLmZyb20pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3YW5pbS5yZXNldCA9PT0gdW5kZWZpbmVkIHx8IG5ld2FuaW0ucmVzZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXdhbmltLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIChuZXdhbmltLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vICAgICBuZXdhbmltLmlkID0gbGFyb3V4X2hlbHBlcnMuZ2V0VW5pcXVlSWQoKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgbGFyb3V4X2FuaW0uZGF0YS5wdXNoKG5ld2FuaW0pO1xuICAgICAgICAgICAgaWYgKGxhcm91eF9hbmltLmRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShsYXJvdXhfYW5pbS5vbmZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXRDc3M6IGZ1bmN0aW9uIChuZXdhbmltKSB7XG4gICAgICAgICAgICBpZiAobmV3YW5pbS5mcm9tID09PSB1bmRlZmluZWQgfHwgbmV3YW5pbS5mcm9tID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3YW5pbS5mcm9tID0gbGFyb3V4X2Nzcy5nZXRQcm9wZXJ0eShuZXdhbmltLm9iamVjdCwgbmV3YW5pbS5wcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld2FuaW0ub2JqZWN0ID0gbmV3YW5pbS5vYmplY3Quc3R5bGU7XG4gICAgICAgICAgICBuZXdhbmltLnByb3BlcnR5ID0gbGFyb3V4X2hlbHBlcnMuY2FtZWxDYXNlKG5ld2FuaW0ucHJvcGVydHkpO1xuXG4gICAgICAgICAgICBsYXJvdXhfYW5pbS5zZXQobmV3YW5pbSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRLZXkgPSBudWxsO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF9hbmltLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9hbmltLmRhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gbGFyb3V4X2FuaW0uZGF0YVtpdGVtXTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5pZCAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRJdGVtLmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEtleSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRhcmdldEtleSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9hbmltLmRhdGEuc3BsaWNlKHRhcmdldEtleSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbmZyYW1lOiBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlS2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfYW5pbS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfYW5pbS5kYXRhLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF9hbmltLmRhdGFbaXRlbV07XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLnN0YXJ0VGltZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5zdGFydFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGxhcm91eF9hbmltLnN0ZXAoY3VycmVudEl0ZW0sIHRpbWVzdGFtcCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVLZXlzLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPiBjdXJyZW50SXRlbS5zdGFydFRpbWUgKyBjdXJyZW50SXRlbS50aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5yZXNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uc3RhcnRUaW1lID0gdGltZXN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld2FuaW0ub2JqZWN0ID09PSB3aW5kb3cuZG9jdW1lbnQuYm9keSAmJiBuZXdhbmltLnByb3BlcnR5ID09ICdzY3JvbGxUb3AnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG8oMCwgY3VycmVudEl0ZW0uZnJvbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHNjcm9sbFRvKDAsIGN1cnJlbnRJdGVtLmZyb20pOyB9LCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0ub2JqZWN0W2N1cnJlbnRJdGVtLnByb3BlcnR5XSA9IGN1cnJlbnRJdGVtLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVLZXlzLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIHJlbW92ZUtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZUtleXMuaGFzT3duUHJvcGVydHkoaXRlbTIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF9hbmltLmRhdGEuc3BsaWNlKHJlbW92ZUtleXNbaXRlbTJdLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxhcm91eF9hbmltLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShsYXJvdXhfYW5pbS5vbmZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzdGVwOiBmdW5jdGlvbiAobmV3YW5pbSwgdGltZXN0YW1wKSB7XG4gICAgICAgICAgICB2YXIgZmluaXNoVCA9IG5ld2FuaW0uc3RhcnRUaW1lICsgbmV3YW5pbS50aW1lLFxuICAgICAgICAgICAgICAgIHNoaWZ0ID0gKHRpbWVzdGFtcCA+IGZpbmlzaFQpID8gMSA6ICh0aW1lc3RhbXAgLSBuZXdhbmltLnN0YXJ0VGltZSkgLyBuZXdhbmltLnRpbWU7XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxhcm91eF9hbmltLmZ4LmludGVycG9sYXRlKFxuICAgICAgICAgICAgICAgIG5ld2FuaW0uZnJvbSxcbiAgICAgICAgICAgICAgICBuZXdhbmltLnRvLFxuICAgICAgICAgICAgICAgIGxhcm91eF9hbmltLmZ4LmVhc2luZyhzaGlmdClcbiAgICAgICAgICAgICkgKyBuZXdhbmltLnVuaXQ7XG5cbiAgICAgICAgICAgIGlmIChuZXdhbmltLm9iamVjdCA9PT0gd2luZG93LmRvY3VtZW50LmJvZHkgJiYgbmV3YW5pbS5wcm9wZXJ0eSA9PSAnc2Nyb2xsVG9wJykge1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvKDAsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2Nyb2xsVG8oMCwgdmFsdWUpOyB9LCAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3YW5pbS5vYmplY3RbbmV3YW5pbS5wcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2FuaW07XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gY3NzXG4gICAgdmFyIGxhcm91eF9jc3MgPSB7XG4gICAgICAgIC8vIGNsYXNzIGZlYXR1cmVzXG4gICAgICAgIGhhc0NsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjeWNsZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbKGkgKyAxKSAlIGxlbmd0aF0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHN0eWxlIGZlYXR1cmVzXG4gICAgICAgIGdldFByb3BlcnR5OiBmdW5jdGlvbiAoZWxlbWVudCwgc3R5bGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBzdHlsZU5hbWUgPSBsYXJvdXhfaGVscGVycy5hbnRpQ2FtZWxDYXNlKHN0eWxlTmFtZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0UHJvcGVydHk6IGZ1bmN0aW9uIChlbGVtZW50LCBwcm9wZXJ0aWVzLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW29sZFByb3BlcnRpZXNdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0eWxlTmFtZSA9IGxhcm91eF9oZWxwZXJzLmNhbWVsQ2FzZShzdHlsZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnN0eWxlW25ld1N0eWxlTmFtZV0gPSBwcm9wZXJ0aWVzW3N0eWxlTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHRyYW5zaXRpb24gZmVhdHVyZXNcbiAgICAgICAgZGVmYXVsdFRyYW5zaXRpb246ICcycyBlYXNlJyxcblxuICAgICAgICBzZXRUcmFuc2l0aW9uU2luZ2xlOiBmdW5jdGlvbiAoZWxlbWVudCwgdHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25zID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheSh0cmFuc2l0aW9uKSxcbiAgICAgICAgICAgICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgY3VycmVudFRyYW5zaXRpb25zID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNpdGlvbicpIHx8IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy13ZWJraXQtdHJhbnNpdGlvbicpIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy1tcy10cmFuc2l0aW9uJykgfHwgJycsXG4gICAgICAgICAgICAgICAgY3VycmVudFRyYW5zaXRpb25zQXJyYXk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5ID0gY3VycmVudFRyYW5zaXRpb25zLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5ID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdHJhbnNpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zaXRpb25zLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzdHlsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgICBwb3MgPSB0cmFuc2l0aW9uc1tpdGVtXS5pbmRleE9mKCcgJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocG9zICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZU5hbWUgPSB0cmFuc2l0aW9uc1tpdGVtXS5zdWJzdHJpbmcoMCwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblByb3BlcnRpZXMgPSB0cmFuc2l0aW9uc1tpdGVtXS5zdWJzdHJpbmcocG9zICsgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVOYW1lID0gdHJhbnNpdGlvbnNbaXRlbV07XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0aWVzID0gbGFyb3V4X2Nzcy5kZWZhdWx0VHJhbnNpdGlvbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbnNBcnJheVtqXS50cmltKCkubG9jYWxlQ29tcGFyZShzdHlsZU5hbWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbnNBcnJheVtqXSA9IHN0eWxlTmFtZSArICcgJyArIHRyYW5zaXRpb25Qcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5LnB1c2goc3R5bGVOYW1lICsgJyAnICsgdHJhbnNpdGlvblByb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gY3VycmVudFRyYW5zaXRpb25zQXJyYXkuam9pbignLCAnKTtcblxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubXNUcmFuc2l0aW9uID0gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvblNpbmdsZShlbGVtZW50c1tpXSwgdHJhbnNpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvblByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbihlbGVtZW50LCAnb3BhY2l0eSAnICsgdHJhbnNpdGlvblByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb24oZWxlbWVudCwgJ29wYWNpdHknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50LCB7IG9wYWNpdHk6IDEgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvblByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbihlbGVtZW50LCAnb3BhY2l0eSAnICsgdHJhbnNpdGlvblByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb24oZWxlbWVudCwgJ29wYWNpdHknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50LCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gbWVhc3VyZW1lbnQgZmVhdHVyZXNcbiAgICAgICAgLy8gaGVpZ2h0IG9mIGVsZW1lbnQgd2l0aG91dCBwYWRkaW5nLCBtYXJnaW4gYW5kIGJvcmRlclxuICAgICAgICBoZWlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGhlaWdodCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ2hlaWdodCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gaGVpZ2h0LmdldEZsb2F0VmFsdWUoaGVpZ2h0LnByaW1pdGl2ZVR5cGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGhlaWdodCBvZiBlbGVtZW50IHdpdGggcGFkZGluZyBidXQgd2l0aG91dCBtYXJnaW4gYW5kIGJvcmRlclxuICAgICAgICBpbm5lckhlaWdodDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBoZWlnaHQgb2YgZWxlbWVudCB3aXRoIHBhZGRpbmcgYW5kIGJvcmRlciBidXQgbWFyZ2luIG9wdGlvbmFsXG4gICAgICAgIG91dGVySGVpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCwgaW5jbHVkZU1hcmdpbikge1xuICAgICAgICAgICAgaWYgKGluY2x1ZGVNYXJnaW4gfHwgZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZSgnbWFyZ2luLXRvcCcpLFxuICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbSA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ21hcmdpbi1ib3R0b20nKSxcbiAgICAgICAgICAgICAgICBtYXJnaW5zID0gbWFyZ2luVG9wLmdldEZsb2F0VmFsdWUobWFyZ2luVG9wLnByaW1pdGl2ZVR5cGUpICtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tLmdldEZsb2F0VmFsdWUobWFyZ2luQm90dG9tLnByaW1pdGl2ZVR5cGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgbWFyZ2lucyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gd2lkdGggb2YgZWxlbWVudCB3aXRob3V0IHBhZGRpbmcsIG1hcmdpbiBhbmQgYm9yZGVyXG4gICAgICAgIHdpZHRoOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSxcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCd3aWR0aCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gaGVpZ2h0LmdldEZsb2F0VmFsdWUoaGVpZ2h0LnByaW1pdGl2ZVR5cGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHdpZHRoIG9mIGVsZW1lbnQgd2l0aCBwYWRkaW5nIGJ1dCB3aXRob3V0IG1hcmdpbiBhbmQgYm9yZGVyXG4gICAgICAgIGlubmVyV2lkdGg6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB3aWR0aCBvZiBlbGVtZW50IHdpdGggcGFkZGluZyBhbmQgYm9yZGVyIGJ1dCBtYXJnaW4gb3B0aW9uYWxcbiAgICAgICAgb3V0ZXJXaWR0aDogZnVuY3Rpb24gKGVsZW1lbnQsIGluY2x1ZGVNYXJnaW4pIHtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlTWFyZ2luIHx8IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgbWFyZ2luTGVmdCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ21hcmdpbi1sZWZ0JyksXG4gICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCdtYXJnaW4tcmlnaHQnKSxcbiAgICAgICAgICAgICAgICBtYXJnaW5zID0gbWFyZ2luTGVmdC5nZXRGbG9hdFZhbHVlKG1hcmdpbkxlZnQucHJpbWl0aXZlVHlwZSkgK1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodC5nZXRGbG9hdFZhbHVlKG1hcmdpblJpZ2h0LnByaW1pdGl2ZVR5cGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGVsZW1lbnQub2Zmc2V0V2lkdGggKyBtYXJnaW5zKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b3A6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgK1xuICAgICAgICAgICAgICAgICgod2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgfHwgd2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArXG4gICAgICAgICAgICAgICAgKCh3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCkgfHwgd2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWJvdmVUaGVUb3A6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gMDtcbiAgICAgICAgfSxcblxuICAgICAgICBiZWxvd1RoZUZvbGQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPiB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbGVmdE9mU2NyZWVuOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgPD0gMDtcbiAgICAgICAgfSxcblxuICAgICAgICByaWdodE9mU2NyZWVuOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCA+IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluVmlld3BvcnQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgIHJldHVybiAhKHJlY3QuYm90dG9tIDw9IDAgfHwgcmVjdC50b3AgPiB3aW5kb3cuaW5uZXJIZWlnaHQgfHxcbiAgICAgICAgICAgICAgICByZWN0LnJpZ2h0IDw9IDAgfHwgcmVjdC5sZWZ0ID4gd2luZG93LmlubmVyV2lkdGgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfY3NzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGRhdGVcbiAgICB2YXIgbGFyb3V4X2RhdGUgPSB7XG4gICAgICAgIHNob3J0RGF0ZUZvcm1hdDogJ2RkLk1NLnl5eXknLFxuICAgICAgICBsb25nRGF0ZUZvcm1hdDogJ2RkIE1NTU0geXl5eScsXG4gICAgICAgIHRpbWVGb3JtYXQ6ICdISDptbScsXG5cbiAgICAgICAgbW9udGhzU2hvcnQ6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcbiAgICAgICAgbW9udGhzTG9uZzogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG5cbiAgICAgICAgc3RyaW5nczoge1xuICAgICAgICAgICAgbm93OiAgICAgJ25vdycsXG4gICAgICAgICAgICBsYXRlcjogICAnbGF0ZXInLFxuICAgICAgICAgICAgYWdvOiAgICAgJ2FnbycsXG4gICAgICAgICAgICBzZWNvbmRzOiAnc2Vjb25kcycsXG4gICAgICAgICAgICBhbWludXRlOiAnYSBtaW51dGUnLFxuICAgICAgICAgICAgbWludXRlczogJ21pbnV0ZXMnLFxuICAgICAgICAgICAgYWhvdXI6ICAgJ2EgaG91cicsXG4gICAgICAgICAgICBob3VyczogICAnaG91cnMnLFxuICAgICAgICAgICAgYWRheTogICAgJ2EgZGF5JyxcbiAgICAgICAgICAgIGRheXM6ICAgICdkYXlzJyxcbiAgICAgICAgICAgIGF3ZWVrOiAgICdhIHdlZWsnLFxuICAgICAgICAgICAgd2Vla3M6ICAgJ3dlZWtzJyxcbiAgICAgICAgICAgIGFtb250aDogICdhIG1vbnRoJyxcbiAgICAgICAgICAgIG1vbnRoczogICdtb250aHMnLFxuICAgICAgICAgICAgYXllYXI6ICAgJ2EgeWVhcicsXG4gICAgICAgICAgICB5ZWFyczogICAneWVhcnMnXG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VFcG9jaDogZnVuY3Rpb24gKHRpbWVzcGFuLCBsaW1pdFdpdGhXZWVrcykge1xuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNjAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSBNYXRoLmNlaWwodGltZXNwYW4gLyAxMDAwKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3Muc2Vjb25kcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICg2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hbWludXRlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MubWludXRlcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYWhvdXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5ob3VycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICgyNCAqIDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYWRheTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW4gKyAnICcgKyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmRheXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aW1lc3BhbiA8IDQgKiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYXdlZWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy53ZWVrcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxpbWl0V2l0aFdlZWtzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aW1lc3BhbiA8IDMwICogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICgzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hbW9udGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5tb250aHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYXllYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MueWVhcnM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q3VzdG9tRGF0ZVN0cmluZzogZnVuY3Rpb24gKGZvcm1hdCwgZGF0ZSkge1xuICAgICAgICAgICAgdmFyIG5vdyA9IGRhdGUgfHwgbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC95eXl5fHl5fE1NTU18TU1NfE1NfE18ZGR8ZHxoaHxofEhIfEh8bW18bXxzc3xzfHR0fHQvZyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd5eXl5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd5eSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldFllYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTU1NJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5tb250aHNMb25nW25vdy5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTU0nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLm1vbnRoc1Nob3J0W25vdy5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIChub3cuZ2V0TW9udGgoKSArIDEpKS5zdWJzdHIoLTIsIDIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5nZXRNb250aCgpICsgMTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXREYXRlKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldERhdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cjEgPSBub3cuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgKCgoaG91cjEgJSAxMikgPiAwKSA/IGhvdXIxICUgMTIgOiAxMikpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cjIgPSBub3cuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoKGhvdXIyICUgMTIpID4gMCkgPyBob3VyMiAlIDEyIDogMTI7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSEgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgnMCcgKyBub3cuZ2V0SG91cnMoKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0SG91cnMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRNaW51dGVzKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldE1pbnV0ZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRTZWNvbmRzKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldFNlY29uZHMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93LmdldEhvdXJzKCkgPj0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3BtJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhbSc7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93LmdldEhvdXJzKCkgPj0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3AnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2EnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0RGF0ZURpZmZTdHJpbmc6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IG5vdyAtIGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgIGFic1RpbWVzcGFuID0gTWF0aC5hYnModGltZXNwYW4pLFxuICAgICAgICAgICAgICAgIHBhc3QgPSAodGltZXNwYW4gPiAwKTtcblxuICAgICAgICAgICAgaWYgKGFic1RpbWVzcGFuIDw9IDMwMDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5ub3c7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0aW1lc3BhbnN0cmluZyA9IGxhcm91eF9kYXRlLnBhcnNlRXBvY2goYWJzVGltZXNwYW4sIHRydWUpO1xuICAgICAgICAgICAgaWYgKHRpbWVzcGFuc3RyaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuc3RyaW5nICtcbiAgICAgICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgKHBhc3QgPyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmFnbyA6IGxhcm91eF9kYXRlLnN0cmluZ3MubGF0ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0U2hvcnREYXRlU3RyaW5nKGRhdGUsIHRydWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNob3J0RGF0ZVN0cmluZzogZnVuY3Rpb24gKGRhdGUsIGluY2x1ZGVUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0Q3VzdG9tRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBpbmNsdWRlVGltZSA/IGxhcm91eF9kYXRlLnNob3J0RGF0ZUZvcm1hdCArICcgJyArIGxhcm91eF9kYXRlLnRpbWVGb3JtYXQgOiBsYXJvdXhfZGF0ZS5zaG9ydERhdGVGb3JtYXQsXG4gICAgICAgICAgICAgICAgZGF0ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMb25nRGF0ZVN0cmluZzogZnVuY3Rpb24gKGRhdGUsIGluY2x1ZGVUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0Q3VzdG9tRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBpbmNsdWRlVGltZSA/IGxhcm91eF9kYXRlLmxvbmdEYXRlRm9ybWF0ICsgJyAnICsgbGFyb3V4X2RhdGUudGltZUZvcm1hdCA6IGxhcm91eF9kYXRlLmxvbmdEYXRlRm9ybWF0LFxuICAgICAgICAgICAgICAgIGRhdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9kYXRlO1xuXG59KCkpO1xuIiwiKGZ1bmN0aW9uIChsYXJvdXgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG4gICAgICAgIC8vIGxhcm91eF9jc3MgPSByZXF1aXJlKCcuL2xhcm91eC5jc3MuanMnKSxcbiAgICAgICAgLy8gbGFyb3V4X3RyaWdnZXJzID0gcmVxdWlyZSgnLi9sYXJvdXgudHJpZ2dlcnMuanMnKTtcblxuICAgIC8vIGRvbVxuICAgIHZhciBsYXJvdXhfZG9tID0ge1xuICAgICAgICBkb2Nwcm9wOiBmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhwcm9wTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLnRvQXJyYXkoXG4gICAgICAgICAgICAgICAgKHBhcmVudCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0QnlDbGFzczogZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy50b0FycmF5KFxuICAgICAgICAgICAgICAgIChwYXJlbnQgfHwgZG9jdW1lbnQpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoc2VsZWN0b3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdEJ5VGFnOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLnRvQXJyYXkoXG4gICAgICAgICAgICAgICAgKHBhcmVudCB8fCBkb2N1bWVudCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdEJ5SWQ6IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gKHBhcmVudCB8fCBkb2N1bWVudCkuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdFNpbmdsZTogZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAocGFyZW50IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhdHRyOiBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cmlidXRlcywgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGF0dHJpYnV0ZXMuY29uc3RydWN0b3IgIT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmlidXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkQXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbb2xkQXR0cmlidXRlc10gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkYXRhOiBmdW5jdGlvbiAoZWxlbWVudCwgZGF0YW5hbWVzLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgZGF0YW5hbWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtJyArIGRhdGFuYW1lcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFuYW1lcyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBvbGREYXRhbmFtZXMgPSBkYXRhbmFtZXM7XG4gICAgICAgICAgICAgICAgZGF0YW5hbWVzID0ge307XG4gICAgICAgICAgICAgICAgZGF0YW5hbWVzW29sZERhdGFuYW1lc10gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgZGF0YU5hbWUgaW4gZGF0YW5hbWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhbmFtZXMuaGFzT3duUHJvcGVydHkoZGF0YU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YW5hbWVzW2RhdGFOYW1lXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtJyArIGRhdGFOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLScgKyBkYXRhTmFtZSwgZGF0YW5hbWVzW2RhdGFOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXZlbnRIaXN0b3J5OiBbXSxcbiAgICAgICAgc2V0RXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudG5hbWUsIGZuYykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudFNpbmdsZShlbGVtZW50c1tpXSwgZXZlbnRuYW1lLCBmbmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldEV2ZW50U2luZ2xlOiBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnRuYW1lLCBmbmMpIHtcbiAgICAgICAgICAgIHZhciBmbmNXcmFwcGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm5jKGUsIGVsZW1lbnQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLmV2ZW50SGlzdG9yeS5wdXNoKHsgZWxlbWVudDogZWxlbWVudCwgZXZlbnRuYW1lOiBldmVudG5hbWUsIGZuYzogZm5jLCBmbmNXcmFwcGVyOiBmbmNXcmFwcGVyIH0pO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50bmFtZSwgZm5jV3JhcHBlciwgZmFsc2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVuc2V0RXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudG5hbWUsIGZuYykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaTEgPSAwLCBsZW5ndGgxID0gZWxlbWVudHMubGVuZ3RoOyBpMSA8IGxlbmd0aDE7IGkxKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpMiA9IDAsIGxlbmd0aDIgPSBsYXJvdXhfZG9tLmV2ZW50SGlzdG9yeS5sZW5ndGg7IGkyIDwgbGVuZ3RoMjsgaTIrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGxhcm91eF9kb20uZXZlbnRIaXN0b3J5W2kyXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmVsZW1lbnQgIT09IGVsZW1lbnRzW2kxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRuYW1lICE9PSB1bmRlZmluZWQgJiYgaXRlbS5ldmVudG5hbWUgIT09IGV2ZW50bmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm5jICE9PSB1bmRlZmluZWQgJiYgaXRlbS5mbmMgIT09IGZuYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpdGVtLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihpdGVtLmV2ZW50bmFtZSwgaXRlbS5mbmNXcmFwcGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsYXJvdXhfZG9tLmV2ZW50SGlzdG9yeVtpMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRpc3BhdGNoRXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBjdXN0b21FdmVudCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjdXN0b21FdmVudFtpdGVtXSA9IGRhdGFbaXRlbV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN1c3RvbUV2ZW50LmluaXRFdmVudChldmVudG5hbWUsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGN1c3RvbUV2ZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChodG1sKSB7XG4gICAgICAgICAgICB2YXIgZnJhZyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICAgICAgICAgICAgdGVtcCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcblxuICAgICAgICAgICAgdGVtcC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGh0bWwpO1xuICAgICAgICAgICAgd2hpbGUgKHRlbXAuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodGVtcC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbnVsbGluZyBvdXQgdGhlIHJlZmVyZW5jZSwgdGhlcmUgaXMgbm8gb2J2aW91cyBkaXNwb3NlIG1ldGhvZFxuICAgICAgICAgICAgdGVtcCA9IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBmcmFnO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyaWJ1dGVzLCBjaGlsZHJlbikge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXMgIT09IHVuZGVmaW5lZCAmJiBhdHRyaWJ1dGVzLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGl0ZW0sIGF0dHJpYnV0ZXNbaXRlbV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNoaWxkcmVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hpbGRyZW4uY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVtMiBpbiBjaGlsZHJlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShpdGVtMikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoaXRlbTIsIGNoaWxkcmVuW2l0ZW0yXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKC8qIHR5cGVvZiBjaGlsZHJlbiA9PSAnc3RyaW5nJyAmJiAqL2NoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5hcHBlbmQoZWxlbSwgY2hpbGRyZW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGVsZW07XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlT3B0aW9uOiBmdW5jdGlvbiAoZWxlbWVudCwga2V5LCB2YWx1ZSwgaXNEZWZhdWx0KSB7XG4gICAgICAgICAgICAvKiBvbGQgYmVoYXZpb3VyLCBkb2VzIG5vdCBzdXBwb3J0IG9wdGdyb3VwcyBhcyBwYXJlbnRzLlxuICAgICAgICAgICAgdmFyIGNvdW50ID0gZWxlbWVudC5vcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIGVsZW1lbnQub3B0aW9uc1tjb3VudF0gPSBuZXcgT3B0aW9uKHZhbHVlLCBrZXkpO1xuXG4gICAgICAgICAgICBpZiAoaXNEZWZhdWx0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5vcHRpb25zLnNlbGVjdGVkSW5kZXggPSBjb3VudCAtIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICB2YXIgb3B0aW9uID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ09QVElPTicpO1xuICAgICAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBrZXkpO1xuICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLmFwcGVuZChvcHRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RCeVZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50Lm9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5vcHRpb25zW2ldLmdldEF0dHJpYnV0ZSgndmFsdWUnKSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sLyosXG5cbiAgICAgICAgLy8gVE9ETzogaXQncyByZWR1bmRhbnQgZm9yIG5vd1xuICAgICAgICBsb2FkSW1hZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbWFnZXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdJTUcnKTtcbiAgICAgICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGFyZ3VtZW50c1tpXSk7XG5cbiAgICAgICAgICAgICAgICBpbWFnZXMucHVzaChpbWFnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpbWFnZXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9hZEFzeW5jU2NyaXB0OiBmdW5jdGlvbiAocGF0aCwgdHJpZ2dlck5hbWUsIGFzeW5jKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICAgICAgZWxlbS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gICAgICAgICAgICBlbGVtLmFzeW5jID0gKGFzeW5jICE9PSB1bmRlZmluZWQpID8gYXN5bmMgOiB0cnVlO1xuICAgICAgICAgICAgZWxlbS5zcmMgPSBwYXRoO1xuXG4gICAgICAgICAgICB2YXIgbG9hZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBlbGVtLm9ubG9hZCA9IGVsZW0ub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICgoZWxlbS5yZWFkeVN0YXRlICYmIGVsZW0ucmVhZHlTdGF0ZSAhPT0gJ2NvbXBsZXRlJyAmJiBlbGVtLnJlYWR5U3RhdGUgIT09ICdsb2FkZWQnKSB8fCBsb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsZW0ub25sb2FkID0gZWxlbS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGxvYWRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHRyaWdnZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdHJpZ2dlck5hbWUgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlck5hbWUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5vbnRyaWdnZXIodHJpZ2dlck5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGhlYWQgPSB3aW5kb3cuZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9hZEFzeW5jU3R5bGU6IGZ1bmN0aW9uIChwYXRoLCB0cmlnZ2VyTmFtZSwgYXN5bmMpIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0xJTksnKTtcblxuICAgICAgICAgICAgZWxlbS50eXBlID0gJ3RleHQvY3NzJztcbiAgICAgICAgICAgIGVsZW0uYXN5bmMgPSAoYXN5bmMgIT09IHVuZGVmaW5lZCkgPyBhc3luYyA6IHRydWU7XG4gICAgICAgICAgICBlbGVtLmhyZWYgPSBwYXRoO1xuICAgICAgICAgICAgZWxlbS5yZWwgPSAnc3R5bGVzaGVldCc7XG5cbiAgICAgICAgICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsZW0ub25sb2FkID0gZWxlbS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtLnJlYWR5U3RhdGUgJiYgZWxlbS5yZWFkeVN0YXRlICE9PSAnY29tcGxldGUnICYmIGVsZW0ucmVhZHlTdGF0ZSAhPT0gJ2xvYWRlZCcpIHx8IGxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxlbS5vbmxvYWQgPSBlbGVtLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyTmFtZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyTmFtZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLm9udHJpZ2dlcih0cmlnZ2VyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaGVhZCA9IHdpbmRvdy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuICAgICAgICAgICAgaGVhZC5hcHBlbmRDaGlsZChlbGVtKTtcbiAgICAgICAgfSwqL1xuXG4gICAgICAgIGNsZWFyOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgd2hpbGUgKGVsZW1lbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluc2VydDogZnVuY3Rpb24gKGVsZW1lbnQsIHBvc2l0aW9uLCBjb250ZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChwb3NpdGlvbiwgY29udGVudCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcHJlcGVuZDogZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgY29udGVudCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXBwZW5kOiBmdW5jdGlvbiAoZWxlbWVudCwgY29udGVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGNvbnRlbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICAgICAgICBsYXJvdXhfZG9tLmNsZWFyKGVsZW1lbnQpO1xuICAgICAgICAgICAgZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBjb250ZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXBsYWNlVGV4dDogZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIC8vIGxhcm91eF9kb20uY2xlYXIoZWxlbWVudCk7XG4gICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsb25lUmV0dXJuOiAwLFxuICAgICAgICBjbG9uZUFwcGVuZDogMSxcbiAgICAgICAgY2xvbmVJbnNlcnRBZnRlcjogMixcbiAgICAgICAgY2xvbmVJbnNlcnRCZWZvcmU6IDMsXG5cbiAgICAgICAgY2xvbmU6IGZ1bmN0aW9uIChlbGVtZW50LCB0eXBlLCBjb250YWluZXIsIHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIG5ld0VsZW1lbnQgPSBlbGVtZW50LmNsb25lTm9kZSh0cnVlKTtcblxuICAgICAgICAgICAgaWYgKGNvbnRhaW5lciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gZWxlbWVudDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGUgIT09IHVuZGVmaW5lZCAmJiB0eXBlICE9IGxhcm91eF9kb20uY2xvbmVSZXR1cm4pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSBsYXJvdXhfZG9tLmNsb25lQXBwZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gbGFyb3V4X2RvbS5jbG9uZUluc2VydEFmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUobmV3RWxlbWVudCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyB0eXBlID09IGxhcm91eF9kb20uY2xvbmVJbnNlcnRCZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShuZXdFbGVtZW50LCB0YXJnZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gICAgICAgIH0vKixcblxuICAgICAgICAvLyBUT0RPOiBpdCdzIHJlZHVuZGFudCBmb3Igbm93XG4gICAgICAgIGFwcGx5T3BlcmF0aW9uczogZnVuY3Rpb24gKGVsZW1lbnQsIG9wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG9wZXJhdGlvbiBpbiBvcGVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvcGVyYXRpb25zLmhhc093blByb3BlcnR5KG9wZXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYmluZGluZyBpbiBvcGVyYXRpb25zW29wZXJhdGlvbl0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvcGVyYXRpb25zW29wZXJhdGlvbl0uaGFzT3duUHJvcGVydHkoYmluZGluZykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3BlcmF0aW9uc1tvcGVyYXRpb25dW2JpbmRpbmddO1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzZXRwcm9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZy5zdWJzdHJpbmcoMCwgMSkgPT0gJ18nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGJpbmRpbmcuc3Vic3RyaW5nKDEpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nID09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnJlcGxhY2UoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGRwcm9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZy5zdWJzdHJpbmcoMCwgMSkgPT0gJ18nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKGJpbmRpbmcuc3Vic3RyaW5nKDEpLCBlbGVtZW50LmdldEF0dHJpYnV0ZShiaW5kaW5nLnN1YnN0cmluZygxKSkgKyB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nID09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmFwcGVuZChlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbW92ZXByb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5zdWJzdHJpbmcoMCwgMSkgPT0gJ18nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKHZhbHVlLnN1YnN0cmluZygxKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PSAnY29udGVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5jbGVhcihlbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkY2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9jc3MuYWRkQ2xhc3MoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVtb3ZlY2xhc3MnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9jc3MucmVtb3ZlQ2xhc3MoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkc3R5bGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoZWxlbWVudCwgYmluZGluZywgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVtb3Zlc3R5bGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoZWxlbWVudCwgdmFsdWUsICdpbmhlcml0ICFpbXBvcnRhbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlcGVhdCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9wZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0qL1xuICAgIH07XG5cbiAgICAvLyBhIGZpeCBmb3IgSW50ZXJuZXQgRXhwbG9yZXJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5FbGVtZW50LnByb3RvdHlwZS5yZW1vdmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LkVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhcm91eF9kb207XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gZXZlbnRzXG4gICAgdmFyIGxhcm91eF9ldmVudHMgPSB7XG4gICAgICAgIGRlbGVnYXRlczogW10sXG5cbiAgICAgICAgYWRkOiBmdW5jdGlvbiAoZXZlbnQsIGZuYykge1xuICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXMucHVzaCh7IGV2ZW50OiBldmVudCwgZm5jOiBmbmMgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW52b2tlOiBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9ldmVudHMuZGVsZWdhdGVzLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfZXZlbnRzLmRlbGVnYXRlc1tpdGVtXS5ldmVudCAhPSBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmRlbGVnYXRlc1tpdGVtXS5mbmMoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9ldmVudHM7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2FqYXggPSByZXF1aXJlKCcuL2xhcm91eC5hamF4LmpzJyk7XG5cbiAgICAvLyBmb3Jtc1xuICAgIHZhciBsYXJvdXhfZm9ybXMgPSB7XG4gICAgICAgIGFqYXhGb3JtOiBmdW5jdGlvbiAoZm9ybW9iaiwgZm5jLCBmbmNCZWdpbikge1xuICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudChmb3Jtb2JqLCAnc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChmbmNCZWdpbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuY0JlZ2luKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2FqYXgucG9zdChcbiAgICAgICAgICAgICAgICAgICAgZm9ybW9iai5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZm9ybXMuc2VyaWFsaXplRm9ybURhdGEoZm9ybW9iaiksXG4gICAgICAgICAgICAgICAgICAgIGZuY1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpc0Zvcm1GaWVsZDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRklMRScgfHwgdHlwZSA9PT0gJ0NIRUNLQk9YJyB8fCB0eXBlID09PSAnUkFESU8nIHx8IHR5cGUgPT09ICdURVhUJyB8fCB0eXBlID09PSAnUEFTU1dPUkQnIHx8IHR5cGUgPT09ICdISURERU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Rm9ybUZpZWxkVmFsdWU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5kaXNhYmxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Lm9wdGlvbnNbZWxlbWVudC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdGSUxFJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5maWxlc1swXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0NIRUNLQk9YJyB8fCB0eXBlID09PSAnUkFESU8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdURVhUJyB8fCB0eXBlID09PSAnUEFTU1dPUkQnIHx8IHR5cGUgPT09ICdISURERU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEZvcm1GaWVsZFZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmRpc2FibGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG9wdGlvbiBpbiBlbGVtZW50Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50Lm9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5vcHRpb25zW29wdGlvbl0udmFsdWUgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2VsZWN0ZWRJbmRleCA9IG9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnSU5QVVQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnRklMRScpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWxlc1swXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ0NIRUNLQk9YJyB8fCB0eXBlID09ICdSQURJTycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ1RFWFQnIHx8IHR5cGUgPT0gJ1BBU1NXT1JEJyB8fCB0eXBlID09ICdISURERU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB0b2dnbGVGb3JtRWRpdGluZzogZnVuY3Rpb24gKGZvcm1vYmosIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZm9ybW9iai5xdWVyeVNlbGVjdG9yQWxsKCcqW25hbWVdJyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1vYmouZ2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZW5hYmxlZCcpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1vYmouc2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZW5hYmxlZCcsICdlbmFibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybW9iai5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1lbmFibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkID0gMCwgbGVuZ3RoID0gc2VsZWN0aW9uLmxlbmd0aDsgc2VsZWN0ZWQgPCBsZW5ndGg7IHNlbGVjdGVkKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9mb3Jtcy5pc0Zvcm1GaWVsZChzZWxlY3Rpb25bc2VsZWN0ZWRdKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGFzdERpc2FibGVkID0gc2VsZWN0aW9uW3NlbGVjdGVkXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3REaXNhYmxlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbltzZWxlY3RlZF0uZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uW3NlbGVjdGVkXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1kaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uW3NlbGVjdGVkXS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXN0RGlzYWJsZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uW3NlbGVjdGVkXS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltzZWxlY3RlZF0ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXJpYWxpemVGb3JtRGF0YTogZnVuY3Rpb24gKGZvcm1vYmopIHtcbiAgICAgICAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGZvcm1vYmoucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lXScpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZCA9IDAsIGxlbmd0aCA9IHNlbGVjdGlvbi5sZW5ndGg7IHNlbGVjdGVkIDwgbGVuZ3RoOyBzZWxlY3RlZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbGFyb3V4X2Zvcm1zLmdldEZvcm1GaWVsZFZhbHVlKHNlbGVjdGlvbltzZWxlY3RlZF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZChzZWxlY3Rpb25bc2VsZWN0ZWRdLmdldEF0dHJpYnV0ZSgnbmFtZScpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZm9ybWRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbiAoZm9ybW9iaikge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGZvcm1vYmoucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lXScpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZCA9IDAsIGxlbmd0aCA9IHNlbGVjdGlvbi5sZW5ndGg7IHNlbGVjdGVkIDwgbGVuZ3RoOyBzZWxlY3RlZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbGFyb3V4X2Zvcm1zLmdldEZvcm1GaWVsZFZhbHVlKHNlbGVjdGlvbltzZWxlY3RlZF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlc1tzZWxlY3Rpb25bc2VsZWN0ZWRdLmdldEF0dHJpYnV0ZSgnbmFtZScpXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfSxcblxuICAgICAgICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24gKGZvcm1vYmosIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBmb3Jtb2JqLnF1ZXJ5U2VsZWN0b3JBbGwoJypbbmFtZV0nKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0ZWQgPSAwLCBsZW5ndGggPSBzZWxlY3Rpb24ubGVuZ3RoOyBzZWxlY3RlZCA8IGxlbmd0aDsgc2VsZWN0ZWQrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9mb3Jtcy5zZXRGb3JtRmllbGRWYWx1ZShzZWxlY3Rpb25bc2VsZWN0ZWRdLCBkYXRhW3NlbGVjdGlvbltzZWxlY3RlZF0uZ2V0QXR0cmlidXRlKCduYW1lJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2Zvcm1zO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGhlbHBlcnNcbiAgICB2YXIgbGFyb3V4X2hlbHBlcnMgPSB7XG4gICAgICAgIHVuaXF1ZUlkOiAwLFxuXG4gICAgICAgIGdldFVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKmpzbGludCBwbHVzcGx1czogdHJ1ZSAqL1xuICAgICAgICAgICAgcmV0dXJuICd1aWQtJyArICgrK2xhcm91eF9oZWxwZXJzLnVuaXF1ZUlkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBidWlsZFF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiAodmFsdWVzLCByZmMzOTg2KSB7XG4gICAgICAgICAgICB2YXIgdXJpID0gJycsXG4gICAgICAgICAgICAgICAgcmVnRXggPSAvJTIwL2c7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXNbbmFtZV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmZjMzk4NiB8fCBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJpICs9ICcmJyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKS5yZXBsYWNlKHJlZ0V4LCAnKycpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlc1tuYW1lXS50b1N0cmluZygpKS5yZXBsYWNlKHJlZ0V4LCAnKycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJpICs9ICcmJyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbbmFtZV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1cmkuc3Vic3RyKDEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJ1aWxkRm9ybURhdGE6IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXNbbmFtZV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZChuYW1lLCB2YWx1ZXNbbmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZm9ybWF0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmdzKS5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmdzKTsgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwbGFjZUFsbDogZnVuY3Rpb24gKHRleHQsIGRpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoT2JqZWN0LmtleXMoZGljdGlvbmFyeSkuam9pbignfCcpLCAnZycpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIHJlLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGljdGlvbmFyeVttYXRjaF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjYW1lbENhc2U6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyQ2hhciA9IHZhbHVlLmNoYXJBdChqKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyckNoYXIgPT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gKCFmbGFnKSA/IGN1cnJDaGFyIDogY3VyckNoYXIudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYW50aUNhbWVsQ2FzZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyckNoYXIgPSB2YWx1ZS5jaGFyQXQoaik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJDaGFyICE9ICctJyAmJiBjdXJyQ2hhciA9PSBjdXJyQ2hhci50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSAnLScgKyBjdXJyQ2hhci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gY3VyckNoYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcXVvdGVBdHRyOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAnJmFwb3M7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHJcXG4vZywgJyYjMTM7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxyXFxuXS9nLCAnJiMxMzsnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzcGxpY2VTdHJpbmc6IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvdW50LCBhZGQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCBpbmRleCkgKyAoYWRkIHx8ICcnKSArIHZhbHVlLnNsaWNlKGluZGV4ICsgY291bnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJhbmRvbTogZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaW5kOiBmdW5jdGlvbiAob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgb2JqLnNvbWUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGV4dGVuZE9iamVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgaXNBcnJheSA9IHRhcmdldCBpbnN0YW5jZW9mIEFycmF5O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gYXJndW1lbnRzW2l0ZW1dKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0YXJnZXQucHVzaChhcmd1bWVudHNbaXRlbV1bbmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgICAgICAvKiB0YXJnZXRbbmFtZV0uY29uc3RydWN0b3IgPT09IE9iamVjdCAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KG5hbWUpICYmIHRhcmdldFtuYW1lXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2hlbHBlcnMuZXh0ZW5kT2JqZWN0KHRhcmdldFtuYW1lXSwgYXJndW1lbnRzW2l0ZW1dW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gYXJndW1lbnRzW2l0ZW1dW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBlYWNoOiBmdW5jdGlvbiAoYXJyLCBmbmMsIHRlc3RPd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFycikge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0T3duUHJvcGVydGllcyAmJiAhYXJyLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmbmMoaXRlbSwgYXJyW2l0ZW1dKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1hcDogZnVuY3Rpb24gKGFyciwgZm5jLCBkb250U2tpcFJldHVybnMsIHRlc3RPd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFycikge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0T3duUHJvcGVydGllcyAmJiAhYXJyLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbmMoYXJyW2l0ZW1dLCBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRTa2lwUmV0dXJucyAmJiByZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluZGV4OiBmdW5jdGlvbiAoYXJyLCB2YWx1ZSwgdGVzdE93blByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gYXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRlc3RPd25Qcm9wZXJ0aWVzICYmICFhcnIuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFycltpdGVtXSA9PT0gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWVhY2g6IGZ1bmN0aW9uIChhcnIsIGZuYykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFyci5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmbmMoaSwgYXJyW2ldKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFtYXA6IGZ1bmN0aW9uIChhcnIsIGZuYywgZG9udFNraXBSZXR1cm5zKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuYyhhcnJbaV0sIGkpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICghZG9udFNraXBSZXR1cm5zICYmIHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMudW5zaGlmdChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWluZGV4OiBmdW5jdGlvbiAoYXJyLCB2YWx1ZSwgc3RhcnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoc3RhcnQgfHwgMCksIGxlbmd0aCA9IGFyci5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNvbHVtbjogZnVuY3Rpb24gKG9iaiwga2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2hlbHBlcnMubWFwKG9iaiwgZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LCB0cnVlKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaHVmZmxlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAwLFxuICAgICAgICAgICAgICAgIHNodWZmbGVkID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJhbmQgPSBsYXJvdXhfaGVscGVycy5yYW5kb20oMCwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIHNodWZmbGVkW2luZGV4KytdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICAgICAgICAgICAgc2h1ZmZsZWRbcmFuZF0gPSBvYmpbaXRlbV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzaHVmZmxlZDtcbiAgICAgICAgfSxcblxuICAgICAgICBtZXJnZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgdG1wID0gdGFyZ2V0LFxuICAgICAgICAgICAgICAgIGlzQXJyYXkgPSB0bXAgaW5zdGFuY2VvZiBBcnJheTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICB0bXAgPSB0bXAuY29uY2F0KGFyZ3VtZW50c1tpdGVtXSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGF0dHIgaW4gYXJndW1lbnRzW2l0ZW1dKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzW2l0ZW1dLmhhc093blByb3BlcnR5KGF0dHIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRtcFthdHRyXSA9IGFyZ3VtZW50c1tpdGVtXVthdHRyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHVwbGljYXRlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b0FycmF5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aCxcbiAgICAgICAgICAgICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaXRlbXNbaV0gPSBvYmpbaV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRBc0FycmF5OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICB2YXIgaXRlbXM7XG5cbiAgICAgICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgICAgIGl0ZW1zID0gb2JqO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW1zW2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBbb2JqXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldExlbmd0aDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRLZXlzUmVjdXJzaXZlOiBmdW5jdGlvbiAob2JqLCBkZWxpbWl0ZXIsIHByZWZpeCwga2V5cykge1xuICAgICAgICAgICAgaWYgKGRlbGltaXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJy4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocHJlZml4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBwcmVmaXggPSAnJztcbiAgICAgICAgICAgICAgICBrZXlzID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gb2JqKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmouaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKHByZWZpeCArIGl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKG9ialtpdGVtXSAhPT0gdW5kZWZpbmVkICYmIG9ialtpdGVtXSAhPT0gbnVsbCAmJiBvYmpbaXRlbV0uY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfaGVscGVycy5nZXRLZXlzUmVjdXJzaXZlKG9ialtpdGVtXSwgZGVsaW1pdGVyLCBwcmVmaXggKyBpdGVtICsgZGVsaW1pdGVyLCBrZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRFbGVtZW50OiBmdW5jdGlvbiAob2JqLCBwYXRoLCBkZWZhdWx0VmFsdWUsIGRlbGltaXRlcikge1xuICAgICAgICAgICAgaWYgKGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRlbGltaXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZGVsaW1pdGVyID0gJy4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcG9zID0gcGF0aC5pbmRleE9mKGRlbGltaXRlcik7XG4gICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgdmFyIHJlc3Q7XG4gICAgICAgICAgICBpZiAocG9zID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHBhdGg7XG4gICAgICAgICAgICAgICAgcmVzdCA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGtleSA9IHBhdGguc3Vic3RyaW5nKDAsIHBvcyk7XG4gICAgICAgICAgICAgICAgcmVzdCA9IHBhdGguc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIShrZXkgaW4gb2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyZXN0ID09PSBudWxsIHx8IHJlc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2hlbHBlcnMuZ2V0RWxlbWVudChvYmpba2V5XSwgcmVzdCwgZGVmYXVsdFZhbHVlLCBkZWxpbWl0ZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfaGVscGVycztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBjb3JlXG4gICAgdmFyIGxhcm91eCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4LmhlbHBlcnMudG9BcnJheShcbiAgICAgICAgICAgICAgICAocGFyZW50IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgIC8vIEZJWE1FOiBub24tY2hyb21lIG9wdGltaXphdGlvblxuICAgICAgICB2YXIgcmUgPSAvXiMoW15cXCtcXD5cXFtcXF1cXC4jIF0qKSQvLmV4ZWMoc2VsZWN0b3IpO1xuICAgICAgICBpZiAocmUpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZVsxXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0RWxlbWVudEJ5SWQocmVbMV0pO1xuICAgICAgICB9XG4gICAgICAgICovXG5cbiAgICAgICAgcmV0dXJuIChwYXJlbnQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICBsYXJvdXguZXZlbnRzID0gcmVxdWlyZSgnLi9sYXJvdXguZXZlbnRzLmpzJyk7XG4gICAgbGFyb3V4LmhlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG4gICAgbGFyb3V4LnRpbWVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LnRpbWVycy5qcycpO1xuXG4gICAgbGFyb3V4LmNhY2hlZCA9IHtcbiAgICAgICAgc2luZ2xlOiB7fSxcbiAgICAgICAgYXJyYXk6IHt9LFxuICAgICAgICBpZDoge31cbiAgICB9O1xuXG4gICAgbGFyb3V4LmMgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXguY2FjaGVkLmFycmF5W3NlbGVjdG9yXSB8fCAoXG4gICAgICAgICAgICAgICAgbGFyb3V4LmNhY2hlZC5hcnJheVtzZWxlY3Rvcl0gPSBsYXJvdXguaGVscGVycy50b0FycmF5KFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGFyb3V4LmNhY2hlZC5zaW5nbGVbc2VsZWN0b3JdIHx8IChcbiAgICAgICAgICAgIGxhcm91eC5jYWNoZWQuc2luZ2xlW3NlbGVjdG9yXSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIGxhcm91eC5pZCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgIHJldHVybiAocGFyZW50IHx8IGRvY3VtZW50KS5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIGxhcm91eC5pZGMgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGxhcm91eC5jYWNoZWQuaWRbc2VsZWN0b3JdIHx8XG4gICAgICAgICAgICAobGFyb3V4LmNhY2hlZC5pZFtzZWxlY3Rvcl0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RvcikpO1xuICAgIH07XG5cbiAgICBsYXJvdXgucmVhZHlQYXNzZWQgPSBmYWxzZTtcblxuICAgIGxhcm91eC5leHRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBsYXJvdXgpO1xuICAgICAgICBsYXJvdXguaGVscGVycy5leHRlbmRPYmplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgbGFyb3V4LmV4dGVuZE9iamVjdCA9IGxhcm91eC5oZWxwZXJzLmV4dGVuZE9iamVjdDtcbiAgICBsYXJvdXguZWFjaCA9IGxhcm91eC5oZWxwZXJzLmVhY2g7XG4gICAgbGFyb3V4Lm1hcCA9IGxhcm91eC5oZWxwZXJzLm1hcDtcbiAgICBsYXJvdXguaW5kZXggPSBsYXJvdXguaGVscGVycy5pbmRleDtcbiAgICBsYXJvdXguYWVhY2ggPSBsYXJvdXguaGVscGVycy5hZWFjaDtcbiAgICBsYXJvdXguYW1hcCA9IGxhcm91eC5oZWxwZXJzLmFtYXA7XG4gICAgbGFyb3V4LmFpbmRleCA9IGxhcm91eC5oZWxwZXJzLmFpbmRleDtcblxuICAgIGxhcm91eC5yZWFkeSA9IGZ1bmN0aW9uIChmbmMpIHtcbiAgICAgICAgaWYgKCFsYXJvdXgucmVhZHlQYXNzZWQpIHtcbiAgICAgICAgICAgIGxhcm91eC5ldmVudHMuYWRkKCdDb250ZW50TG9hZGVkJywgZm5jKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZuYygpO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnRE9NQ29udGVudExvYWRlZCcsXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXgucmVhZHlQYXNzZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4LmV2ZW50cy5pbnZva2UoJ0NvbnRlbnRMb2FkZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldEludGVydmFsKGxhcm91eC50aW1lcnMub250aWNrLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXgucmVhZHlQYXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoISgnJGwnIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIHdpbmRvdy4kbCA9IGxhcm91eDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG9wdGlvbmFsIG1vZHVsZXNcbiAgICBsYXJvdXgud3JhcHBlciA9IHJlcXVpcmUoJy4vbGFyb3V4LndyYXBwZXIuanMnKTtcbiAgICBsYXJvdXguYWpheCA9IHJlcXVpcmUoJy4vbGFyb3V4LmFqYXguanMnKTtcbiAgICBsYXJvdXguY3NzID0gcmVxdWlyZSgnLi9sYXJvdXguY3NzLmpzJyk7XG4gICAgbGFyb3V4LmRvbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRvbS5qcycpO1xuICAgIGxhcm91eC5ldmVudHMgPSByZXF1aXJlKCcuL2xhcm91eC5ldmVudHMuanMnKTtcbiAgICBsYXJvdXguZm9ybXMgPSByZXF1aXJlKCcuL2xhcm91eC5mb3Jtcy5qcycpO1xuICAgIGxhcm91eC5oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuICAgIGxhcm91eC50aW1lcnMgPSByZXF1aXJlKCcuL2xhcm91eC50aW1lcnMuanMnKTtcbiAgICBsYXJvdXgudHJpZ2dlcnMgPSByZXF1aXJlKCcuL2xhcm91eC50cmlnZ2Vycy5qcycpO1xuICAgIGxhcm91eC52YXJzID0gcmVxdWlyZSgnLi9sYXJvdXgudmFycy5qcycpO1xuXG4gICAgbGFyb3V4LmFuaW0gPSByZXF1aXJlKCcuL2xhcm91eC5hbmltLmpzJyk7XG4gICAgbGFyb3V4LmRhdGUgPSByZXF1aXJlKCcuL2xhcm91eC5kYXRlLmpzJyk7XG4gICAgbGFyb3V4LmtleXMgPSByZXF1aXJlKCcuL2xhcm91eC5rZXlzLmpzJyk7XG4gICAgbGFyb3V4Lm12YyA9IHJlcXVpcmUoJy4vbGFyb3V4Lm12Yy5qcycpO1xuICAgIGxhcm91eC5zdGFjayA9IHJlcXVpcmUoJy4vbGFyb3V4LnN0YWNrLmpzJyk7XG4gICAgbGFyb3V4LnRlbXBsYXRlcyA9IHJlcXVpcmUoJy4vbGFyb3V4LnRlbXBsYXRlcy5qcycpO1xuICAgIGxhcm91eC50b3VjaCA9IHJlcXVpcmUoJy4vbGFyb3V4LnRvdWNoLmpzJyk7XG4gICAgbGFyb3V4LnVpID0gcmVxdWlyZSgnLi9sYXJvdXgudWkuanMnKTtcblxuICAgIHJldHVybiBsYXJvdXg7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2Zvcm1zID0gcmVxdWlyZSgnLi9sYXJvdXguZm9ybXMuanMnKTtcblxuICAgIC8vIGtleXNcbiAgICB2YXIgbGFyb3V4X2tleXMgPSB7XG4gICAgICAgIGtleU5hbWU6IGZ1bmN0aW9uIChrZXljb2RlKSB7XG4gICAgICAgICAgICBrZXljb2RlID0ga2V5Y29kZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGtleWNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2JhY2tzcGFjZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDk7XG5cbiAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgIGNhc2UgJ3JldHVybic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEzO1xuXG4gICAgICAgICAgICBjYXNlICdlc2MnOlxuICAgICAgICAgICAgY2FzZSAnZXNjYXBlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMjc7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzI7XG5cbiAgICAgICAgICAgIGNhc2UgJ3BndXAnOlxuICAgICAgICAgICAgICAgIHJldHVybiAzMztcblxuICAgICAgICAgICAgY2FzZSAncGdkbic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM0O1xuXG4gICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAzNTtcblxuICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM2O1xuXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzc7XG5cbiAgICAgICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzg7XG5cbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzk7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgICAgICAgIHJldHVybiA0MDtcblxuICAgICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ2O1xuXG4gICAgICAgICAgICBjYXNlICdmMSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExMjtcblxuICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTM7XG5cbiAgICAgICAgICAgIGNhc2UgJ2YzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTE0O1xuXG4gICAgICAgICAgICBjYXNlICdmNCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExNTtcblxuICAgICAgICAgICAgY2FzZSAnZjUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTY7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Y2JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTE3O1xuXG4gICAgICAgICAgICBjYXNlICdmNyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExODtcblxuICAgICAgICAgICAgY2FzZSAnZjgnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTk7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Y5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTIwO1xuXG4gICAgICAgICAgICBjYXNlICdmMTAnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMjE7XG5cbiAgICAgICAgICAgIGNhc2UgJ2YxMSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEyMjtcblxuICAgICAgICAgICAgY2FzZSAnZjEyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTIzO1xuXG4gICAgICAgICAgICBjYXNlICcsJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTg4O1xuXG4gICAgICAgICAgICBjYXNlICcuJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTkwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShrZXljb2RlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB7dGFyZ2V0LCBrZXksIHNoaWZ0LCBjdHJsLCBhbHQsIGRpc2FibGVJbnB1dHMsIGZuY31cbiAgICAgICAgYXNzaWduOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50ID0gd2luZG93LmV2ZW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZXZlbnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IDMgfHwgZWxlbWVudC5ub2RlVHlwZSA9PT0gMTEpIHsgLy8gZWxlbWVudC5ub2RlVHlwZSA9PT0gMSB8fFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVJbnB1dHMgJiYgbGFyb3V4X2Zvcm1zLmlzRm9ybUZpZWxkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zaGlmdCAmJiAhZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmN0cmwgJiYgIWV2ZW50LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFsdCAmJiAhZXZlbnQuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbGFyb3V4X2tleXMua2V5TmFtZShvcHRpb25zLmtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gKGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvcHRpb25zLmZuYyhldmVudCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50KG9wdGlvbnMudGFyZ2V0IHx8IHdpbmRvdy5kb2N1bWVudCwgJ2tleWRvd24nLCB3cmFwcGVyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2tleXM7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyksXG4gICAgICAgIGxhcm91eF9zdGFjayA9IHJlcXVpcmUoJy4vbGFyb3V4LnN0YWNrLmpzJyk7XG5cbiAgICAvLyBtdmNcbiAgICB2YXIgbGFyb3V4X212YyA9IHtcbiAgICAgICAgYXBwczoge30sXG4gICAgICAgIHBhdXNlVXBkYXRlOiBmYWxzZSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoZWxlbWVudCwgbW9kZWwpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmNvbnN0cnVjdG9yID09PSBTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gbGFyb3V4X2RvbS5zZWxlY3RCeUlkKGVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiAobW9kZWwuY29uc3RydWN0b3IgIT09IGxhcm91eF9zdGFjaykge1xuICAgICAgICAgICAgLy8gICAgIG1vZGVsID0gbmV3IGxhcm91eF9zdGFjayhtb2RlbCk7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIHZhciBhcHBLZXkgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaWQnKTtcblxuICAgICAgICAgICAgbW9kZWwub251cGRhdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9tdmMucGF1c2VVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X212Yy51cGRhdGUoYXBwS2V5KTsgLy8gLCBbZXZlbnQua2V5XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxhcm91eF9tdmMuYXBwc1thcHBLZXldID0ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgbW9kZWw6IG1vZGVsIC8vICxcbiAgICAgICAgICAgICAgICAvLyBtb2RlbEtleXM6IG51bGwsXG4gICAgICAgICAgICAgICAgLy8gYm91bmRFbGVtZW50czogbnVsbCxcbiAgICAgICAgICAgICAgICAvLyBldmVudEVsZW1lbnRzOiBudWxsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsYXJvdXhfbXZjLnJlYmluZChhcHBLZXkpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlYmluZDogZnVuY3Rpb24gKGFwcEtleSkge1xuICAgICAgICAgICAgdmFyIGFwcCA9IGxhcm91eF9tdmMuYXBwc1thcHBLZXldO1xuICAgICAgICAgICAgLypqc2xpbnQgbm9tZW46IHRydWUgKi9cbiAgICAgICAgICAgIGFwcC5tb2RlbEtleXMgPSBsYXJvdXhfaGVscGVycy5nZXRLZXlzUmVjdXJzaXZlKGFwcC5tb2RlbC5fZGF0YSk7IC8vIEZJWE1FOiB3b3JrcyBvbmx5IGZvciAkbC5zdGFja1xuICAgICAgICAgICAgYXBwLmJvdW5kRWxlbWVudHMgPSB7fTtcbiAgICAgICAgICAgIGFwcC5ldmVudEVsZW1lbnRzID0gW107XG5cbiAgICAgICAgICAgIGxhcm91eF9tdmMuc2NhbkVsZW1lbnRzKGFwcCwgYXBwLmVsZW1lbnQpO1xuICAgICAgICAgICAgbGFyb3V4X212Yy51cGRhdGUoYXBwS2V5KTtcblxuICAgICAgICAgICAgdmFyIGZuYyA9IGZ1bmN0aW9uIChldiwgZWxlbSkge1xuICAgICAgICAgICAgICAgIHZhciBiaW5kaW5nID0gbGFyb3V4X212Yy5iaW5kU3RyaW5nUGFyc2VyKGVsZW0uZ2V0QXR0cmlidXRlKCdsci1ldmVudCcpKTtcbiAgICAgICAgICAgICAgICAvLyBsYXJvdXhfbXZjLnBhdXNlVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGJpbmRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09IG51bGwgfHwgIWJpbmRpbmcuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmdbaXRlbV0uY2hhckF0KDApID09ICdcXCcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAubW9kZWxbaXRlbV0gPSBiaW5kaW5nW2l0ZW1dLnN1YnN0cmluZygxLCBiaW5kaW5nW2l0ZW1dLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJpbmRpbmdbaXRlbV0uc3Vic3RyaW5nKDAsIDUpID09ICdhdHRyLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tb2RlbFtpdGVtXSA9IGVsZW0uZ2V0QXR0cmlidXRlKGJpbmRpbmdbaXRlbV0uc3Vic3RyaW5nKDUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiaW5kaW5nW2l0ZW1dLnN1YnN0cmluZygwLCA1KSA9PSAncHJvcC4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAubW9kZWxbaXRlbV0gPSBlbGVtW2JpbmRpbmdbaXRlbV0uc3Vic3RyaW5nKDUpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBsYXJvdXhfbXZjLnBhdXNlVXBkYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gYXBwLmV2ZW50RWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50KFxuICAgICAgICAgICAgICAgICAgICBhcHAuZXZlbnRFbGVtZW50c1tpXS5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBhcHAuZXZlbnRFbGVtZW50c1tpXS5iaW5kaW5nW251bGxdLFxuICAgICAgICAgICAgICAgICAgICBmbmNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNjYW5FbGVtZW50czogZnVuY3Rpb24gKGFwcCwgZWxlbWVudCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGF0dHMgPSBlbGVtZW50LmF0dHJpYnV0ZXMsIG0gPSBhdHRzLmxlbmd0aDsgaSA8IG07IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChhdHRzW2ldLm5hbWUgPT0gJ2xyLWJpbmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiaW5kaW5nMSA9IGxhcm91eF9tdmMuYmluZFN0cmluZ1BhcnNlcihhdHRzW2ldLnZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGJpbmRpbmcxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWJpbmRpbmcxLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcHAuYm91bmRFbGVtZW50c1tiaW5kaW5nMVtpdGVtXV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5ib3VuZEVsZW1lbnRzW2JpbmRpbmcxW2l0ZW1dXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAuYm91bmRFbGVtZW50c1tiaW5kaW5nMVtpdGVtXV0ucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGl0ZW1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhdHRzW2ldLm5hbWUgPT0gJ2xyLWV2ZW50Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmluZGluZzIgPSBsYXJvdXhfbXZjLmJpbmRTdHJpbmdQYXJzZXIoYXR0c1tpXS52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXBwLmV2ZW50RWxlbWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZGluZzogYmluZGluZzJcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgY2hsZHJuID0gZWxlbWVudC5jaGlsZE5vZGVzLCBuID0gY2hsZHJuLmxlbmd0aDsgaiA8IG47IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChjaGxkcm5bal0ubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X212Yy5zY2FuRWxlbWVudHMoYXBwLCBjaGxkcm5bal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIChhcHBLZXksIGtleXMpIHtcbiAgICAgICAgICAgIHZhciBhcHAgPSBsYXJvdXhfbXZjLmFwcHNbYXBwS2V5XTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBrZXlzID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAga2V5cyA9IGFwcC5tb2RlbEtleXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGgxID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGgxOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXlzW2ldIGluIGFwcC5ib3VuZEVsZW1lbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgYm91bmRFbGVtZW50ID0gYXBwLmJvdW5kRWxlbWVudHNba2V5c1tpXV07XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuZ3RoMiA9IGJvdW5kRWxlbWVudC5sZW5ndGg7IGogPCBsZW5ndGgyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJvdW5kRWxlbWVudFtqXS50YXJnZXQuc3Vic3RyaW5nKDAsIDYpID09ICdzdHlsZS4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZEVsZW1lbnRbal0uZWxlbWVudC5zdHlsZVtib3VuZEVsZW1lbnRbal0udGFyZ2V0LnN1YnN0cmluZyg2KV0gPSBsYXJvdXhfaGVscGVycy5nZXRFbGVtZW50KGFwcC5tb2RlbCwga2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYm91bmRFbGVtZW50W2pdLnRhcmdldC5zdWJzdHJpbmcoMCwgNSkgPT0gJ2F0dHIuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUUgcmVtb3ZlQXR0cmlidXRlIG9uIG51bGwgdmFsdWU/XG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZEVsZW1lbnRbal0uZWxlbWVudC5zZXRBdHRyaWJ1dGUoYm91bmRFbGVtZW50W2pdLnRhcmdldC5zdWJzdHJpbmcoNSksIGxhcm91eF9oZWxwZXJzLmdldEVsZW1lbnQoYXBwLm1vZGVsLCBrZXlzW2ldKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYm91bmRFbGVtZW50W2pdLnRhcmdldC5zdWJzdHJpbmcoMCwgNSkgPT0gJ3Byb3AuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRklYTUUgcmVtb3ZlQXR0cmlidXRlIG9uIG51bGwgdmFsdWU/XG4gICAgICAgICAgICAgICAgICAgICAgICBib3VuZEVsZW1lbnRbal0uZWxlbWVudFtib3VuZEVsZW1lbnRbal0udGFyZ2V0LnN1YnN0cmluZyg1KV0gPSBsYXJvdXhfaGVscGVycy5nZXRFbGVtZW50KGFwcC5tb2RlbCwga2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmluZFN0cmluZ1BhcnNlcjogZnVuY3Rpb24gKHRleHQpIHtcbiAgICAgICAgICAgIHZhciBsYXN0QnVmZmVyID0gbnVsbCxcbiAgICAgICAgICAgICAgICBidWZmZXIgPSAnJyxcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IDAsXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0ge307XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSB0ZXh0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnIgPSB0ZXh0LmNoYXJBdChpKTtcblxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VyciA9PSAnOicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCdWZmZXIgPSBidWZmZXIudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjdXJyID09ICcsJykge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtsYXN0QnVmZmVyXSA9IGJ1ZmZlci50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBidWZmZXIgKz0gY3VycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W2xhc3RCdWZmZXJdID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X212YztcblxufSgpKTtcbiIsIi8qanNsaW50IG5vbWVuOiB0cnVlICovXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gc3RhY2tcbiAgICB2YXIgbGFyb3V4X3N0YWNrID0gZnVuY3Rpb24gKGRhdGEsIGRlcHRoLCB0b3ApIHtcbiAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xuICAgICAgICB0aGlzLl9kZXB0aCA9IGRlcHRoO1xuICAgICAgICB0aGlzLl90b3AgPSB0b3AgfHwgdGhpcztcblxuICAgICAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAvLyBkZWxldGUgdGhpcy5fZGF0YVtrZXldO1xuXG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kYXRhW2tleV0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSBuZXcgbGFyb3V4X3N0YWNrKFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZXB0aCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVwdGggKyAnLicgKyBrZXkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RvcFxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLl9kYXRhW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2RhdGFba2V5XSA9PT0gbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2V0KHRoaXMsIGtleSwgbmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IG5ld1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RvcC5vbnVwZGF0ZSh7IHNjb3BlOiB0aGlzLCBrZXk6IGtleSwgb2xkVmFsdWU6IG9sZFZhbHVlLCBuZXdWYWx1ZTogbmV3VmFsdWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0UmFuZ2UgPSBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciB2YWx1ZUtleSBpbiB2YWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZUtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXQodmFsdWVLZXksIHZhbHVlc1t2YWx1ZUtleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGtleSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1trZXldIHx8IGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0UmFuZ2UgPSBmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWtleXMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFsdWVzW2tleXNbaXRlbV1dID0gdGhpc1trZXlzW2l0ZW1dXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5fZGF0YSkubGVuZ3RoO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZXhpc3RzID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIChrZXkgaW4gdGhpcy5fZGF0YSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAoa2V5IGluIHRoaXMuX2RhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1trZXldO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9kYXRhW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdGhpcy5fZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5fZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpc1tpdGVtXTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVtpdGVtXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fZGF0YSA9IHt9O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMub251cGRhdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5zZXRSYW5nZShkYXRhKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3N0YWNrO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gdGVtcGxhdGVzXG4gICAgdmFyIGxhcm91eF90ZW1wbGF0ZXMgPSB7XG4gICAgICAgIGVuZ2luZXM6IHtcbiAgICAgICAgICAgIHBsYWluOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdGVtcGxhdGUsIG9wdGlvbnNdO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIChjb21waWxlZCwgbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbXBpbGVkWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGljdCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJbmRleDtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKG5leHRJbmRleCA9IHJlc3VsdC5pbmRleE9mKCd7eycsIGxhc3RJbmRleCkpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEluZGV4ICs9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2xvc2VJbmRleCA9IHJlc3VsdC5pbmRleE9mKCd9fScsIG5leHRJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2xvc2VJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9IHJlc3VsdC5zdWJzdHJpbmcobmV4dEluZGV4LCBjbG9zZUluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpY3RbJ3t7JyArIGtleSArICd9fSddID0gbGFyb3V4X2hlbHBlcnMuZ2V0RWxlbWVudChtb2RlbCwga2V5LCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBjbG9zZUluZGV4ICsgMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy5yZXBsYWNlQWxsKHJlc3VsdCwgZGljdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaG9nYW46IHtcbiAgICAgICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5Ib2dhbi5jb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZC5yZW5kZXIobW9kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG11c3RhY2hlOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuTXVzdGFjaGUuY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKGNvbXBpbGVkLCBtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZWQobW9kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhhbmRsZWJhcnM6IHtcbiAgICAgICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5IYW5kbGViYXJzLmNvbXBpbGUodGVtcGxhdGUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIChjb21waWxlZCwgbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVkKG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBsb2Rhc2g6IHtcbiAgICAgICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLypqc2xpbnQgbm9tZW46IHRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5fLmNvbXBpbGUodGVtcGxhdGUsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIChjb21waWxlZCwgbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVkKG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qanNsaW50IG5vbWVuOiB0cnVlICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuXy5jb21waWxlKHRlbXBsYXRlLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmdpbmU6ICdwbGFpbicsXG5cbiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uIChlbGVtZW50LCBtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGVuZ2luZSA9IGxhcm91eF90ZW1wbGF0ZXMuZW5naW5lc1tsYXJvdXhfdGVtcGxhdGVzLmVuZ2luZV07XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSAxIHx8IGVsZW1lbnQubm9kZVR5cGUgPT09IDMgfHwgZWxlbWVudC5ub2RlVHlwZSA9PT0gMTEpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGVsZW1lbnQubm9kZVZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29tcGlsZWQgPSBlbmdpbmUuY29tcGlsZShjb250ZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBlbmdpbmUucmVuZGVyKGNvbXBpbGVkLCBtb2RlbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5zZXJ0OiBmdW5jdGlvbiAoZWxlbWVudCwgbW9kZWwsIHRhcmdldCwgcG9zaXRpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBsYXJvdXhfdGVtcGxhdGVzLmFwcGx5KGVsZW1lbnQsIG1vZGVsLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgbGFyb3V4X2RvbS5pbnNlcnQodGFyZ2V0LCBwb3NpdGlvbiB8fCAnYmVmb3JlZW5kJywgb3V0cHV0KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXBsYWNlOiBmdW5jdGlvbiAoZWxlbWVudCwgbW9kZWwsIHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IGxhcm91eF90ZW1wbGF0ZXMuYXBwbHkoZWxlbWVudCwgbW9kZWwsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLnJlcGxhY2UodGFyZ2V0LCBvdXRwdXQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfdGVtcGxhdGVzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHRpbWVyc1xuICAgIHZhciBsYXJvdXhfdGltZXJzID0ge1xuICAgICAgICBkYXRhOiBbXSxcblxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0aW1lcikge1xuICAgICAgICAgICAgdGltZXIubmV4dCA9IERhdGUubm93KCkgKyB0aW1lci50aW1lb3V0O1xuICAgICAgICAgICAgbGFyb3V4X3RpbWVycy5kYXRhLnB1c2godGltZXIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0S2V5ID0gbnVsbDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfdGltZXJzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF90aW1lcnMuZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBsYXJvdXhfdGltZXJzLmRhdGFbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0uaWQgIT09IHVuZGVmaW5lZCAmJiBjdXJyZW50SXRlbS5pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRLZXkgPSBpdGVtO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXRLZXkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfdGltZXJzLmRhdGEuc3BsaWNlKHRhcmdldEtleSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbnRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgICAgICB2YXIgcmVtb3ZlS2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfdGltZXJzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF90aW1lcnMuZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBsYXJvdXhfdGltZXJzLmRhdGFbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0ubmV4dCA8PSBub3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGN1cnJlbnRJdGVtLm9udGljayhjdXJyZW50SXRlbS5zdGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UgJiYgY3VycmVudEl0ZW0ucmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLm5leHQgPSBub3cgKyBjdXJyZW50SXRlbS50aW1lb3V0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlS2V5cy51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtMiBpbiByZW1vdmVLZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZW1vdmVLZXlzLmhhc093blByb3BlcnR5KGl0ZW0yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfdGltZXJzLmRhdGEuc3BsaWNlKHJlbW92ZUtleXNbaXRlbTJdLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3RpbWVycztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2RvbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRvbS5qcycpO1xuXG4gICAgLy8gdG91Y2ggLSBwYXJ0aWFsbHkgdGFrZW4gZnJvbSAndG9jY2EuanMnIHByb2plY3RcbiAgICAvLyAgICAgICAgIGNhbiBiZSBmb3VuZCBhdDogaHR0cHM6Ly9naXRodWIuY29tL0dpYW5sdWNhR3VhcmluaS9Ub2NjYS5qc1xuICAgIHZhciBsYXJvdXhfdG91Y2ggPSB7XG4gICAgICAgIHRvdWNoU3RhcnRlZDogbnVsbCxcbiAgICAgICAgc3dpcGVUcmVzaG9sZDogODAsXG4gICAgICAgIHByZWNpc2lvbjogMzAsXG4gICAgICAgIHRhcENvdW50OiAwLFxuICAgICAgICB0YXBUcmVzaG9sZDogMjAwLFxuICAgICAgICBsb25nVGFwVHJlc2hvbGQ6IDgwMCxcbiAgICAgICAgdGFwVGltZXI6IG51bGwsXG4gICAgICAgIHBvczogbnVsbCxcbiAgICAgICAgY2FjaGVkOiBudWxsLFxuXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgc3RhcnQ6IFsndG91Y2hzdGFydCcsICdwb2ludGVyZG93bicsICdNU1BvaW50ZXJEb3duJywgJ21vdXNlZG93biddLFxuICAgICAgICAgICAgZW5kOiBbJ3RvdWNoZW5kJywgJ3BvaW50ZXJ1cCcsICdNU1BvaW50ZXJVcCcsICdtb3VzZXVwJ10sXG4gICAgICAgICAgICBtb3ZlOiBbJ3RvdWNobW92ZScsICdwb2ludGVybW92ZScsICdNU1BvaW50ZXJNb3ZlJywgJ21vdXNlbW92ZSddXG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9jYXRlUG9pbnRlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcykge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnBvcyA9IFtldmVudC5wYWdlWCwgZXZlbnQucGFnZVldO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBldmVudHMgPSBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAobmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpID8gMiA6IDEsXG4gICAgICAgICAgICAgICAgM1xuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGV2ZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnRTaW5nbGUoZG9jdW1lbnQsIGxhcm91eF90b3VjaC5ldmVudHMuc3RhcnRbZXZlbnRzW2ldXSwgbGFyb3V4X3RvdWNoLm9uc3RhcnQpO1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnRTaW5nbGUoZG9jdW1lbnQsIGxhcm91eF90b3VjaC5ldmVudHMuZW5kW2V2ZW50c1tpXV0sIGxhcm91eF90b3VjaC5vbmVuZCk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudFNpbmdsZShkb2N1bWVudCwgbGFyb3V4X3RvdWNoLmV2ZW50cy5tb3ZlW2V2ZW50c1tpXV0sIGxhcm91eF90b3VjaC5sb2NhdGVQb2ludGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvbnN0YXJ0OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGxhcm91eF90b3VjaC5sb2NhdGVQb2ludGVyKGV2ZW50KTtcbiAgICAgICAgICAgIGxhcm91eF90b3VjaC5jYWNoZWQgPSBbbGFyb3V4X3RvdWNoLnBvc1swXSwgbGFyb3V4X3RvdWNoLnBvc1sxXV07XG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gudG91Y2hTdGFydGVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8qanNsaW50IHBsdXNwbHVzOiB0cnVlICovXG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwQ291bnQrKztcblxuICAgICAgICAgICAgdmFyIGZuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3RvdWNoLmNhY2hlZFswXSA+PSBsYXJvdXhfdG91Y2gucG9zWzBdIC0gbGFyb3V4X3RvdWNoLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZFswXSA8PSBsYXJvdXhfdG91Y2gucG9zWzBdICsgbGFyb3V4X3RvdWNoLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZFsxXSA+PSBsYXJvdXhfdG91Y2gucG9zWzFdIC0gbGFyb3V4X3RvdWNoLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZFsxXSA8PSBsYXJvdXhfdG91Y2gucG9zWzFdICsgbGFyb3V4X3RvdWNoLnByZWNpc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3RvdWNoLnRvdWNoU3RhcnRlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobGFyb3V4X3RvdWNoLnRhcENvdW50ID09PSAyKSA/ICdkYmx0YXAnIDogJ3RhcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lckV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbGFyb3V4X3RvdWNoLnBvc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogbGFyb3V4X3RvdWNoLnBvc1sxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC50YXBDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGxhcm91eF90b3VjaC50b3VjaFN0YXJ0ZWQgPiBsYXJvdXhfdG91Y2gubG9uZ1RhcFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb25ndGFwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBsYXJvdXhfdG91Y2gucG9zWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBsYXJvdXhfdG91Y2gucG9zWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnRvdWNoU3RhcnRlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnRhcFRpbWVyID0gc2V0VGltZW91dChmbmMsIGxhcm91eF90b3VjaC50YXBUcmVzaG9sZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwQ291bnQgPSAwO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxhcm91eF90b3VjaC50YXBUaW1lcik7XG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwVGltZXIgPSBzZXRUaW1lb3V0KGZuYywgbGFyb3V4X3RvdWNoLnRhcFRyZXNob2xkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbmVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC5wb3NbMF0gLSBsYXJvdXhfdG91Y2guY2FjaGVkWzBdLFxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gucG9zWzFdIC0gbGFyb3V4X3RvdWNoLmNhY2hlZFsxXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJFdmVudDogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgIHg6IGxhcm91eF90b3VjaC5wb3NbMF0sXG4gICAgICAgICAgICAgICAgICAgIHk6IGxhcm91eF90b3VjaC5wb3NbMV0sXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBNYXRoLmFicyhkZWx0YVswXSksXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLmFicyhkZWx0YVsxXSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxhcm91eF90b3VjaC50b3VjaFN0YXJ0ZWQgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMF0gPD0gLWxhcm91eF90b3VjaC5zd2lwZVRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KGV2ZW50LnRhcmdldCwgJ3N3aXBlcmlnaHQnLCBkYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRlbHRhWzBdID49IGxhcm91eF90b3VjaC5zd2lwZVRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KGV2ZW50LnRhcmdldCwgJ3N3aXBlbGVmdCcsIGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMV0gPD0gLWxhcm91eF90b3VjaC5zd2lwZVRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KGV2ZW50LnRhcmdldCwgJ3N3aXBlZG93bicsIGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMV0gPj0gbGFyb3V4X3RvdWNoLnN3aXBlVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQudGFyZ2V0LCAnc3dpcGV1cCcsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfdG91Y2g7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gdHJpZ2dlcnNcbiAgICB2YXIgbGFyb3V4X3RyaWdnZXJzID0ge1xuICAgICAgICBkZWxlZ2F0ZXM6IFtdLFxuICAgICAgICBsaXN0OiBbXSxcblxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjb25kaXRpb24sIGZuYywgc3RhdGUpIHtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25zID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShjb25kaXRpb24pO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmRpdGlvbnMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxhcm91eF9oZWxwZXJzLmFpbmRleChsYXJvdXhfdHJpZ2dlcnMubGlzdCwgY29uZGl0aW9uc1tpdGVtXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5saXN0LnB1c2goY29uZGl0aW9uc1tpdGVtXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMuZGVsZWdhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbnMsXG4gICAgICAgICAgICAgICAgZm5jOiBmbmMsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbnRyaWdnZXI6IGZ1bmN0aW9uICh0cmlnZ2VyTmFtZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIGV2ZW50SWR4ID0gbGFyb3V4X2hlbHBlcnMuYWluZGV4KGxhcm91eF90cmlnZ2Vycy5saXN0LCB0cmlnZ2VyTmFtZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnRJZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLmxpc3Quc3BsaWNlKGV2ZW50SWR4LCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlbW92ZUtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXNbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb25kaXRpb25LZXkgaW4gY3VycmVudEl0ZW0uY29uZGl0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJdGVtLmNvbmRpdGlvbnMuaGFzT3duUHJvcGVydHkoY29uZGl0aW9uS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uT2JqID0gY3VycmVudEl0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25LZXldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfaGVscGVycy5haW5kZXgobGFyb3V4X3RyaWdnZXJzLmxpc3QsIGNvbmRpdGlvbk9iaikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uZm5jKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBjdXJyZW50SXRlbS5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGFyZ3MpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIHJlbW92ZUtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZUtleXMuaGFzT3duUHJvcGVydHkoaXRlbTIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXMuc3BsaWNlKHJlbW92ZUtleXNbaXRlbTJdLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaWdnZXIgbmFtZTogJyArIHRyaWdnZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3RyaWdnZXJzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpLFxuICAgICAgICBsYXJvdXhfY3NzID0gcmVxdWlyZSgnLi9sYXJvdXguY3NzLmpzJyksXG4gICAgICAgIGxhcm91eF90aW1lcnMgPSByZXF1aXJlKCcuL2xhcm91eC50aW1lcnMuanMnKSxcbiAgICAgICAgbGFyb3V4X2RhdGUgPSByZXF1aXJlKCcuL2xhcm91eC5kYXRlLmpzJyk7XG5cbiAgICAvLyB1aVxuICAgIHZhciBsYXJvdXhfdWkgPSB7XG4gICAgICAgIGZsb2F0Q29udGFpbmVyOiBudWxsLFxuXG4gICAgICAgIHBvcHVwOiB7XG4gICAgICAgICAgICBkZWZhdWx0VGltZW91dDogNTAwLFxuXG4gICAgICAgICAgICBjcmVhdGVCb3g6IGZ1bmN0aW9uIChpZCwgeGNsYXNzLCBtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kb20uY3JlYXRlRWxlbWVudCgnRElWJywgeyBpZDogaWQsICdjbGFzcyc6IHhjbGFzcyB9LCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG1zZ2JveDogZnVuY3Rpb24gKHRpbWVvdXQsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBsYXJvdXhfaGVscGVycy5nZXRVbmlxdWVJZCgpLFxuICAgICAgICAgICAgICAgICAgICBvYmogPSBsYXJvdXhfdWkucG9wdXAuY3JlYXRlQm94KGlkLCAnbGFyb3V4TXNnQm94JywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLmZsb2F0Q29udGFpbmVyLmFwcGVuZENoaWxkKG9iaik7XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KG9iaiwgeyBvcGFjaXR5OiAxIH0pO1xuXG4gICAgICAgICAgICAgICAgbGFyb3V4X3RpbWVycy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aW1lb3V0LFxuICAgICAgICAgICAgICAgICAgICByZXNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9udGljazogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoeCwgeyBvcGFjaXR5OiAwIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5yZW1vdmUoeCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiBvYmpcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBsb2FkaW5nOiB7XG4gICAgICAgICAgICBlbGVtZW50U2VsZWN0b3I6IG51bGwsXG4gICAgICAgICAgICBlbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgZGVmYXVsdERlbGF5OiAxNTAwLFxuICAgICAgICAgICAgdGltZXI6IG51bGwsXG5cbiAgICAgICAgICAgIGtpbGxUaW1lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsYXJvdXhfdWkubG9hZGluZy50aW1lcik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLmxvYWRpbmcua2lsbFRpbWVyKCk7XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sb2FkaW5nSW5kaWNhdG9yID0gJ2ZhbHNlJztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChkZWxheSkge1xuICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLmtpbGxUaW1lcigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBsYXJvdXhfdWkubG9hZGluZy5kZWZhdWx0RGVsYXk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgbGFyb3V4X3VpLmxvYWRpbmcuc2hvdygwKTsgfSwgZGVsYXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkobGFyb3V4X3VpLmxvYWRpbmcuZWxlbWVudCwgeyBkaXNwbGF5OiAnYmxvY2snIH0pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UubG9hZGluZ0luZGljYXRvciA9ICd0cnVlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQgPT09IG51bGwgJiYgbGFyb3V4X3VpLmxvYWRpbmcuZWxlbWVudFNlbGVjdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQgPSBsYXJvdXhfZG9tLnNlbGVjdFNpbmdsZShsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50U2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnQod2luZG93LCAnbG9hZCcsIGxhcm91eF91aS5sb2FkaW5nLmhpZGUpO1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50KHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGxhcm91eF91aS5sb2FkaW5nLnNob3cpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UubG9hZGluZ0luZGljYXRvciAhPT0gdW5kZWZpbmVkICYmIGxvY2FsU3RvcmFnZS5sb2FkaW5nSW5kaWNhdG9yID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLnNob3coMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkubG9hZGluZy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHluYW1pY0RhdGVzOiB7XG4gICAgICAgICAgICB1cGRhdGVEYXRlc0VsZW1lbnRzOiBudWxsLFxuXG4gICAgICAgICAgICB1cGRhdGVEYXRlczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdWkuZHluYW1pY0RhdGVzLnVwZGF0ZURhdGVzRWxlbWVudHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLmR5bmFtaWNEYXRlcy51cGRhdGVEYXRlc0VsZW1lbnRzID0gbGFyb3V4X2RvbS5zZWxlY3QoJypbZGF0YS1lcG9jaF0nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF91aS5keW5hbWljRGF0ZXMudXBkYXRlRGF0ZXNFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF91aS5keW5hbWljRGF0ZXMudXBkYXRlRGF0ZXNFbGVtZW50cy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gbGFyb3V4X3VpLmR5bmFtaWNEYXRlcy51cGRhdGVEYXRlc0VsZW1lbnRzW2l0ZW1dO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaXRzaGlmdGluZyAoc3RyID4+IDApIHVzZWQgaW5zdGVhZCBvZiBwYXJzZUludChzdHIsIDEwKVxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKChvYmouZ2V0QXR0cmlidXRlKCdkYXRhLWVwb2NoJykgPj4gMCkgKiAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmosXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZGF0ZS5nZXREYXRlU3RyaW5nKGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBsYXJvdXhfZGF0ZS5nZXRMb25nRGF0ZVN0cmluZyhkYXRlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF90aW1lcnMuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogNTAwLFxuICAgICAgICAgICAgICAgICAgICByZXNldDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgb250aWNrOiBsYXJvdXhfdWkuZHluYW1pY0RhdGVzLnVwZGF0ZURhdGVzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2Nyb2xsVmlldzoge1xuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50czogW10sXG5cbiAgICAgICAgICAgIG9uaGlkZGVuOiBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGVsZW1lbnRzLCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRUcmFuc2l0aW9uKGVsZW1lbnRzLCBbJ29wYWNpdHknXSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBvbnJldmVhbDogZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50cywgeyBvcGFjaXR5OiAxIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfY3NzLmluVmlld3BvcnQoZWxlbWVudHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkuc2Nyb2xsVmlldy5zZWxlY3RlZEVsZW1lbnRzLnB1c2goZWxlbWVudHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLnNjcm9sbFZpZXcub25oaWRkZW4obGFyb3V4X3VpLnNjcm9sbFZpZXcuc2VsZWN0ZWRFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudCh3aW5kb3csICdzY3JvbGwnLCBsYXJvdXhfdWkuc2Nyb2xsVmlldy5yZXZlYWwpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcmV2ZWFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZUtleXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGxhcm91eF9oZWxwZXJzLmVhY2goXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5zY3JvbGxWaWV3LnNlbGVjdGVkRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2Nzcy5pblZpZXdwb3J0KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlS2V5cy51bnNoaWZ0KGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiByZW1vdmVLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVtb3ZlS2V5cy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkuc2Nyb2xsVmlldy5zZWxlY3RlZEVsZW1lbnRzLnNwbGljZShyZW1vdmVLZXlzW2l0ZW1dLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3VpLnNjcm9sbFZpZXcuc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS51bnNldEV2ZW50KHdpbmRvdywgJ3Njcm9sbCcsIGxhcm91eF91aS5zY3JvbGxWaWV3LnJldmVhbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLnNjcm9sbFZpZXcub25yZXZlYWwoZWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVGbG9hdENvbnRhaW5lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFsYXJvdXhfdWkuZmxvYXRDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfdWkuZmxvYXRDb250YWluZXIgPSBsYXJvdXhfZG9tLmNyZWF0ZUVsZW1lbnQoJ0RJVicsIHsgJ2NsYXNzJzogJ2xhcm91eEZsb2F0RGl2JyB9KTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUobGFyb3V4X3VpLmZsb2F0Q29udGFpbmVyLCB3aW5kb3cuZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsYXJvdXhfdWkuY3JlYXRlRmxvYXRDb250YWluZXIoKTtcbiAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLmluaXQoKTtcbiAgICAgICAgICAgIGxhcm91eF91aS5keW5hbWljRGF0ZXMuaW5pdCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfdWk7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gdmFyc1xuICAgIHZhciBsYXJvdXhfdmFycyA9IHtcbiAgICAgICAgY29va2llUGF0aDogJy8nLFxuXG4gICAgICAgIGdldENvb2tpZTogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPVteO10rJywgJ2knKSxcbiAgICAgICAgICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChyZSk7XG5cbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMF0uc3BsaXQoJz0nKVsxXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0Q29va2llOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgpIHtcbiAgICAgICAgICAgIHZhciBleHBpcmVWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgICAgICAgICBleHBpcmVWYWx1ZSA9ICc7IGV4cGlyZXM9JyArIGV4cGlyZXMudG9HTVRTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArIGV4cGlyZVZhbHVlICsgJzsgcGF0aD0nICsgKHBhdGggfHwgbGFyb3V4X3ZhcnMuY29va2llUGF0aCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlQ29va2llOiBmdW5jdGlvbiAobmFtZSwgcGF0aCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQ7IHBhdGg9JyArIChwYXRoIHx8IGxhcm91eF92YXJzLmNvb2tpZVBhdGgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldExvY2FsOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIShuYW1lIGluIGxvY2FsU3RvcmFnZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVtuYW1lXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0TG9jYWw6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlW25hbWVdID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUxvY2FsOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRTZXNzaW9uOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIShuYW1lIGluIHNlc3Npb25TdG9yYWdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2VbbmFtZV0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFNlc3Npb246IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VbbmFtZV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlU2Vzc2lvbjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZXNzaW9uU3RvcmFnZVtuYW1lXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3ZhcnM7XG5cbn0oKSk7XG4iLCIvKmdsb2JhbCBOb2RlTGlzdCwgTm9kZSAqL1xubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9jc3MgPSByZXF1aXJlKCcuL2xhcm91eC5jc3MuanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG5cbiAgICAvLyB3cmFwcGVyXG4gICAgdmFyIGxhcm91eF93cmFwcGVyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIHNlbGVjdGlvbjtcblxuICAgICAgICBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0b3I7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gbGFyb3V4X2hlbHBlcnMudG9BcnJheShzZWxlY3Rvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBbc2VsZWN0b3JdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gbGFyb3V4X2RvbS5zZWxlY3Qoc2VsZWN0b3IsIHBhcmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBsYXJvdXhfd3JhcHBlci5zaW5nbGVUZW1wbGF0ZShzZWxlY3Rpb25bMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBsYXJvdXhfd3JhcHBlci5hcnJheVRlbXBsYXRlKHNlbGVjdGlvbik7XG4gICAgfTtcblxuICAgIGxhcm91eF93cmFwcGVyLnNpbmdsZVRlbXBsYXRlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmlzQXJyYXkgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwIHx8IGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5maW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X3dyYXBwZXIoc2VsZWN0b3IsIHRoaXMuc291cmNlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgbGFyb3V4X3dyYXBwZXIuYXJyYXlUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IGVsZW1lbnRzO1xuICAgICAgICB0aGlzLmlzQXJyYXkgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VbaW5kZXhdO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGggPSAwO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlID0gMTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckFycmF5ID0gMjtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIGZuYywgc2NvcGUpIHtcbiAgICAgICAgdmFyIG5ld0ZuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbmMuYXBwbHkoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBbdGhpcy5zb3VyY2VdLmNvbmNhdChsYXJvdXhfaGVscGVycy50b0FycmF5KGFyZ3VtZW50cykpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSA/IHRoaXMgOiByZXN1bHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgc3dpdGNoIChzY29wZSkge1xuICAgICAgICBjYXNlIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlOlxuICAgICAgICAgICAgbGFyb3V4X3dyYXBwZXIuc2luZ2xlVGVtcGxhdGUucHJvdG90eXBlW25hbWVdID0gbmV3Rm5jO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJBcnJheTpcbiAgICAgICAgICAgIGxhcm91eF93cmFwcGVyLmFycmF5VGVtcGxhdGUucHJvdG90eXBlW25hbWVdID0gbmV3Rm5jO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBsYXJvdXhfd3JhcHBlci5zaW5nbGVUZW1wbGF0ZS5wcm90b3R5cGVbbmFtZV0gPSBuZXdGbmM7XG4gICAgICAgICAgICBsYXJvdXhfd3JhcHBlci5hcnJheVRlbXBsYXRlLnByb3RvdHlwZVtuYW1lXSA9IG5ld0ZuYztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdhdHRyJywgbGFyb3V4X2RvbS5hdHRyLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2RhdGEnLCBsYXJvdXhfZG9tLmRhdGEsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignb24nLCBsYXJvdXhfZG9tLnNldEV2ZW50U2luZ2xlLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ29uJywgbGFyb3V4X2RvbS5zZXRFdmVudCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJBcnJheSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ29mZicsIGxhcm91eF9kb20udW5zZXRFdmVudCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignY2xlYXInLCBsYXJvdXhfZG9tLmNsZWFyLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2luc2VydCcsIGxhcm91eF9kb20uaW5zZXJ0LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3ByZXBlbmQnLCBsYXJvdXhfZG9tLnByZXBlbmQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYXBwZW5kJywgbGFyb3V4X2RvbS5hcHBlbmQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigncmVwbGFjZScsIGxhcm91eF9kb20ucmVwbGFjZSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdyZXBsYWNlVGV4dCcsIGxhcm91eF9kb20ucmVwbGFjZVRleHQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigncmVtb3ZlJywgbGFyb3V4X2RvbS5yZW1vdmUsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdoYXNDbGFzcycsIGxhcm91eF9jc3MuaGFzQ2xhc3MsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYWRkQ2xhc3MnLCBsYXJvdXhfY3NzLmFkZENsYXNzLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdyZW1vdmVDbGFzcycsIGxhcm91eF9jc3MucmVtb3ZlQ2xhc3MsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyQm90aCk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3RvZ2dsZUNsYXNzJywgbGFyb3V4X2Nzcy50b2dnbGVDbGFzcywgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignZ2V0UHJvcGVydHknLCBsYXJvdXhfY3NzLmdldFByb3BlcnR5LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3NldFByb3BlcnR5JywgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignc2V0VHJhbnNpdGlvbicsIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbiwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignc2hvdycsIGxhcm91eF9jc3Muc2hvdywgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaGlkZScsIGxhcm91eF9jc3MuaGlkZSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaGVpZ2h0JywgbGFyb3V4X2Nzcy5oZWlnaHQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5uZXJIZWlnaHQnLCBsYXJvdXhfY3NzLmlubmVySGVpZ2h0LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ291dGVySGVpZ2h0JywgbGFyb3V4X2Nzcy5vdXRlckhlaWdodCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCd3aWR0aCcsIGxhcm91eF9jc3Mud2lkdGgsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5uZXJXaWR0aCcsIGxhcm91eF9jc3MuaW5uZXJXaWR0aCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdvdXRlcldpZHRoJywgbGFyb3V4X2Nzcy5vdXRlcldpZHRoLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3RvcCcsIGxhcm91eF9jc3MudG9wLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2xlZnQnLCBsYXJvdXhfY3NzLmxlZnQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYWJvdmVUaGVUb3AnLCBsYXJvdXhfY3NzLmFib3ZlVGhlVG9wLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2JlbG93VGhlRm9sZCcsIGxhcm91eF9jc3MuYmVsb3dUaGVGb2xkLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2xlZnRPZlNjcmVlbicsIGxhcm91eF9jc3MubGVmdE9mU2NyZWVuLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3JpZ2h0T2ZTY3JlZW4nLCBsYXJvdXhfY3NzLnJpZ2h0T2ZTY3JlZW4sIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5WaWV3cG9ydCcsIGxhcm91eF9jc3MuaW5WaWV3cG9ydCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuXG4gICAgcmV0dXJuIGxhcm91eF93cmFwcGVyO1xuXG59KCkpO1xuIl19\n"],"sourceRoot":"/source/"}