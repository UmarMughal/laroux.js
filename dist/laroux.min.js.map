{"version":3,"sources":["src/laroux.js","src/laroux.ajax.js","src/laroux.anim.js","src/laroux.css.js","src/laroux.date.js","src/laroux.dom.js","src/laroux.events.js","src/laroux.forms.js","src/laroux.helpers.js","src/laroux.keys.js","src/laroux.mvc.js","src/laroux.stack.js","src/laroux.templates.js","src/laroux.timers.js","src/laroux.touch.js","src/laroux.triggers.js","src/laroux.ui.js","src/laroux.vars.js","src/laroux.wrapper.js","laroux.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","global","scope","laroux","selector","parent","Array","helpers","toArray","document","querySelectorAll","querySelector","$l","events","timers","cached","single","array","id","c","getElementById","idc","readyPassed","extend","prototype","unshift","arguments","extendObject","apply","this","each","map","index","aeach","amap","aindex","ready","fnc","add","wrapper","ajax","css","dom","forms","triggers","vars","anim","date","keys","mvc","stack","templates","touch","ui","addEventListener","invoke","setInterval","ontick","init","window","self","./laroux.ajax.js","./laroux.anim.js","./laroux.css.js","./laroux.date.js","./laroux.dom.js","./laroux.events.js","./laroux.forms.js","./laroux.helpers.js","./laroux.keys.js","./laroux.mvc.js","./laroux.stack.js","./laroux.templates.js","./laroux.timers.js","./laroux.touch.js","./laroux.triggers.js","./laroux.ui.js","./laroux.vars.js","./laroux.wrapper.js",2,"laroux_events","laroux_helpers","laroux_ajax","corsDefault","wrappers","registry","laroux.js","data","isSuccess","console","log","errorMessage","obj","format","JSON","parse","object","eval","set","name","xDomainObject","xmlHttpRequestObject","xDomainRequestObject","xhr","crossDomain","XMLHttpRequest","XDomainRequest","xhrResp","options","wrapperFunction","getResponseHeader","response","undefined","datatype","responseText","responseXML","wrapperFunc","makeRequest","cors","url","timer","timeout","setTimeout","abort","timeoutFn","onreadystatechange","readyState","clearTimeout","status","res","error","statusText","success","complete","progress","getdata","constructor","Object","queryString","buildQueryString","indexOf","jsonp","open","type","xhrFields","hasOwnProperty","headers","j","setRequestHeader","postdata","send","postdatatype","stringify","buildFormData","get","path","values","successfnc","errorfnc","getJson","getJsonP","method","getScript","post","postJson","Content-Type",3,"laroux_css","laroux_anim","fx","interpolate","source","target","shift","easing","pos","Math","cos","PI","newanim","startTime","unit","from","body","property","documentElement","scrollTop","Number","reset","push","requestAnimationFrame","onframe","setCss","getProperty","style","camelCase","remove","targetKey","item","currentItem","splice","timestamp","removeKeys","result","step","time","scrollTo","item2","finishT","value","to",4,"hasClass","element","className","classList","contains","addClass","elements","getAsArray","removeClass","toggleClass","cycleClass","styleName","getComputedStyle","antiCamelCase","getPropertyValue","setProperty","properties","oldProperties","newStyleName","defaultTransition","setTransitionSingle","transition","currentTransitionsArray","transitions","currentTransitions","split","transitionProperties","substring","found","trim","localeCompare","join","webkitTransition","msTransition","setTransition","show","opacity","hide","height","getPropertyCSSValue","getFloatValue","primitiveType","innerHeight","clientHeight","outerHeight","includeMargin","offsetHeight","marginTop","marginBottom","margins","ceil","width","innerWidth","clientWidth","outerWidth","offsetWidth","marginLeft","marginRight","top","getBoundingClientRect","left","scrollLeft","aboveTheTop","bottom","belowTheFold","leftOfScreen","right","rightOfScreen","inViewport","rect",5,"laroux_date","shortDateFormat","longDateFormat","timeFormat","monthsShort","monthsLong","strings","now","later","ago","seconds","aminute","minutes","ahour","hours","aday","days","aweek","weeks","amonth","months","ayear","years","parseEpoch","timespan","limitWithWeeks","getCustomDateString","Date","replace","match","getFullYear","getYear","getMonth","substr","getDate","hour1","getHours","hour2","getMinutes","getSeconds","getDateDiffString","getTime","absTimespan","abs","past","timespanstring","getShortDateString","includeTime","getLongDateString",6,"laroux_dom","docprop","propName","select","selectByClass","getElementsByClassName","selectByTag","getElementsByTagName","selectById","selectSingle","attr","attributes","getAttribute","oldAttributes","attributeName","removeAttribute","setAttribute","datanames","oldDatanames","dataName","eventHistory","setEvent","eventname","setEventSingle","fncWrapper","preventDefault","event","returnValue","unsetEvent","i1","length1","i2","length2","removeEventListener","dispatchEvent","customEvent","createEvent","initEvent","create","html","frag","createDocumentFragment","temp","createElement","insertAdjacentHTML","firstChild","appendChild","children","elem","append","createOption","key","isDefault","option","selectByValue","selectedIndex","clear","hasChildNodes","removeChild","insert","position","content","prepend","replaceText","textContent","cloneReturn","cloneAppend","cloneInsertAfter","cloneInsertBefore","clone","container","newElement","cloneNode","parentNode","insertBefore","nextSibling","Element","parentElement",7,"delegates","args",8,"laroux_forms","ajaxForm","formobj","fncBegin","serializeFormData","isFormField","tagName","toUpperCase","getFormFieldValue","disabled","files","checked","setFormFieldValue","toggleFormEditing","selection","selected","lastDisabled","formdata","FormData","serialize","deserialize",9,"uniqueId","getUniqueId","rfc3986","uri","regEx","encodeURIComponent","toString","replaceAll","text","dictionary","re","RegExp","flag","output","currChar","charAt","toLowerCase","quoteAttr","spliceString","count","slice","random","min","max","floor","find","iterator","context","some","list","arr","testOwnProperties","dontSkipReturns","results","start","column","shuffle","shuffled","rand","merge","tmp","isArray","concat","duplicate","items","NodeList","getLength","getKeysRecursive","delimiter","prefix","getElement","defaultValue","rest",10,"laroux_keys","keyName","keycode","String","fromCharCode","assign","ev","srcElement","nodeType","disableInputs","shiftKey","ctrl","ctrlKey","alt","altKey","keyCode","which",11,"laroux_mvc","apps","pauseUpdate","model","appKey","onupdate","update","rebind","app","modelKeys","_data","boundElements","eventElements","scanElements","binding","bindStringParser","atts","m","binding1","binding2","chldrn","childNodes","boundElement","lastBuffer","buffer","state","curr",12,"laroux_stack","depth","_depth","_top","defineProperty","configurable","newValue","oldValue","setRange","valueKey","getRange","exists",13,"laroux_templates","engines","plain","compile","template","render","compiled","nextIndex","dict","lastIndex","closeIndex","hogan","Hogan","mustache","Mustache","handlebars","Handlebars","lodash","_","underscore","engine","nodeValue",14,"laroux_timers","next",15,"laroux_touch","touchStarted","swipeTreshold","precision","tapCount","tapTreshold","longTapTreshold","tapTimer","end","move","locatePointer","targetTouches","pageX","pageY","navigator","onstart","onend","innerEvent","x","y","delta","distance",16,"laroux_triggers","condition","conditions","ontrigger","triggerName","eventIdx","conditionKey","conditionObj",17,"laroux_ui","floatContainer","popup","defaultTimeout","createBox","xclass","message","class","msgbox","loading","elementSelector","defaultDelay","killTimer","display","localStorage","loadingIndicator","delay","dynamicDates","updateDatesElements","updateDates","getDateString","scrollView","selectedElements","onhidden","onreveal","reveal","createFloatContainer",18,"laroux_vars","cookiePath","getCookie","cookie","decodeURIComponent","setCookie","expires","expireValue","toGMTString","removeCookie","getLocal","setLocal","removeLocal","getSession","sessionStorage","setSession","removeSession",19,"laroux_wrapper","Node","singleTemplate","arrayTemplate","registerBoth","registerSingle","registerArray","register","newFnc"],"mappings":"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","file":"laroux.min.js","sourcesContent":["module.exports = (function (scope) {\n    'use strict';\n\n    // core\n    var laroux = function (selector, parent) {\n        if (selector instanceof Array) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        }\n\n        /*\n        // FIXME: non-chrome optimization\n        var re = /^#([^\\+\\>\\[\\]\\.# ]*)$/.exec(selector);\n        if (re) {\n            if (parent === undefined) {\n                return document.getElementById(re[1]);\n            }\n\n            return parent.getElementById(re[1]);\n        }\n        */\n\n        return (parent || document).querySelector(selector);\n    };\n\n    if (!('$l' in scope)) {\n        scope.$l = laroux;\n    }\n\n    // core modules\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.timers = require('./laroux.timers.js');\n\n    laroux.cached = {\n        single: {},\n        array: {},\n        id: {}\n    };\n\n    laroux.c = function (selector) {\n        if (selector instanceof Array) {\n            return laroux.cached.array[selector] || (\n                laroux.cached.array[selector] = laroux.helpers.toArray(\n                    document.querySelectorAll(selector)\n                )\n            );\n        }\n\n        return laroux.cached.single[selector] || (\n            laroux.cached.single[selector] = document.querySelector(selector)\n        );\n    };\n\n    laroux.id = function (selector, parent) {\n        return (parent || document).getElementById(selector);\n    };\n\n    laroux.idc = function (selector) {\n        return laroux.cached.id[selector] ||\n            (laroux.cached.id[selector] = document.getElementById(selector));\n    };\n\n    laroux.readyPassed = false;\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    laroux.ready = function (fnc) {\n        if (!laroux.readyPassed) {\n            laroux.events.add('ContentLoaded', fnc);\n            return;\n        }\n\n        fnc();\n    };\n\n    // optional modules\n    laroux.wrapper = require('./laroux.wrapper.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.css = require('./laroux.css.js');\n    laroux.dom = require('./laroux.dom.js');\n    // laroux.events = require('./laroux.events.js');\n    laroux.forms = require('./laroux.forms.js');\n    // laroux.helpers = require('./laroux.helpers.js');\n    // laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n\n    laroux.anim = require('./laroux.anim.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.keys = require('./laroux.keys.js');\n    laroux.mvc = require('./laroux.mvc.js');\n    laroux.stack = require('./laroux.stack.js');\n    laroux.templates = require('./laroux.templates.js');\n    laroux.touch = require('./laroux.touch.js');\n    laroux.ui = require('./laroux.ui.js');\n\n    if (typeof document !== 'undefined') {\n        document.addEventListener(\n            'DOMContentLoaded',\n            function () {\n                if (!laroux.readyPassed) {\n                    laroux.events.invoke('ContentLoaded');\n                    setInterval(laroux.timers.ontick, 100);\n                    laroux.touch.init();\n                    laroux.readyPassed = true;\n                }\n            }\n        );\n    }\n\n    return laroux;\n\n}(typeof window !== 'undefined' ? window : global));\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js');\n\n    // anim\n    var laroux_anim = {\n        data: [],\n\n        fx: {\n            interpolate: function (source, target, shift) {\n                return (source + (target - source) * shift);\n            },\n\n            easing: function (pos) {\n                return (-Math.cos(pos * Math.PI) / 2) + 0.5;\n            }\n        },\n\n        // {object, property, from, to, time, unit, reset}\n        set: function (newanim) {\n            newanim.startTime = null;\n\n            if (newanim.unit === undefined || newanim.unit === null) {\n                newanim.unit = '';\n            }\n\n            if (newanim.from === undefined || newanim.from === null) {\n                if (newanim.object === document.body && newanim.property === 'scrollTop') {\n                    newanim.from = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n                } else {\n                    newanim.from = newanim.object[newanim.property];\n                }\n            }\n\n            if (typeof newanim.from === 'string') {\n                newanim.from = Number(newanim.from);\n            }\n\n            if (newanim.reset === undefined || newanim.reset === null) {\n                newanim.reset = false;\n            }\n\n            // if (newanim.id === undefined) {\n            //     newanim.id = laroux_helpers.getUniqueId();\n            // }\n\n            laroux_anim.data.push(newanim);\n            if (laroux_anim.data.length === 1) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        setCss: function (newanim) {\n            if (newanim.from === undefined || newanim.from === null) {\n                newanim.from = laroux_css.getProperty(newanim.object, newanim.property);\n            }\n\n            newanim.object = newanim.object.style;\n            newanim.property = laroux_helpers.camelCase(newanim.property);\n\n            laroux_anim.set(newanim);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_anim.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        onframe: function (timestamp) {\n            var removeKeys = [];\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n                if (currentItem.startTime === null) {\n                    currentItem.startTime = timestamp;\n                }\n\n                var result = laroux_anim.step(currentItem, timestamp);\n\n                if (result === false) {\n                    removeKeys.unshift(item);\n                } else if (timestamp > currentItem.startTime + currentItem.time) {\n                    if (currentItem.reset) {\n                        currentItem.startTime = timestamp;\n                        if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                            scrollTo(0, currentItem.from);\n                            // setTimeout(function () { scrollTo(0, currentItem.from); }, 1);\n                        } else {\n                            currentItem.object[currentItem.property] = currentItem.from;\n                        }\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_anim.data.splice(removeKeys[item2], 1);\n            }\n\n            if (laroux_anim.data.length > 0) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        step: function (newanim, timestamp) {\n            var finishT = newanim.startTime + newanim.time,\n                shift = (timestamp > finishT) ? 1 : (timestamp - newanim.startTime) / newanim.time;\n\n            var value = laroux_anim.fx.interpolate(\n                newanim.from,\n                newanim.to,\n                laroux_anim.fx.easing(shift)\n            ) + newanim.unit;\n\n            if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                scrollTo(0, value);\n                // setTimeout(function () { scrollTo(0, value); }, 1);\n            } else {\n                newanim.object[newanim.property] = value;\n            }\n        }\n    };\n\n    return laroux_anim;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // css\n    var laroux_css = {\n        // class features\n        hasClass: function (element, className) {\n            return element.classList.contains(className);\n        },\n\n        addClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.add(className);\n            }\n        },\n\n        removeClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.remove(className);\n            }\n        },\n\n        toggleClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                } else {\n                    elements[i].classList.add(className);\n                }\n            }\n        },\n\n        cycleClass: function (elements, className) {\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                    elements[(i + 1) % length].classList.add(className);\n                    return;\n                }\n            }\n        },\n\n        // style features\n        getProperty: function (element, styleName) {\n            var style = getComputedStyle(element);\n\n            styleName = laroux_helpers.antiCamelCase(styleName);\n\n            return style.getPropertyValue(styleName);\n        },\n\n        setProperty: function (element, properties, value) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            if (typeof properties == 'string') {\n                var oldProperties = properties;\n                properties = {};\n                properties[oldProperties] = value;\n            }\n\n            for (var styleName in properties) {\n                if (!properties.hasOwnProperty(styleName)) {\n                    continue;\n                }\n\n                var newStyleName = laroux_helpers.camelCase(styleName);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].style[newStyleName] = properties[styleName];\n                }\n            }\n        },\n\n        // transition features\n        defaultTransition: '2s ease',\n\n        setTransitionSingle: function (element, transition) {\n            var transitions = laroux_helpers.getAsArray(transition),\n                style = getComputedStyle(element),\n                currentTransitions = style.getPropertyValue('transition') || style.getPropertyValue('-webkit-transition') ||\n                    style.getPropertyValue('-ms-transition') || '',\n                currentTransitionsArray;\n\n            if (currentTransitions.length > 0) {\n                currentTransitionsArray = currentTransitions.split(',');\n            } else {\n                currentTransitionsArray = [];\n            }\n\n            for (var item in transitions) {\n                if (!transitions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var styleName,\n                    transitionProperties,\n                    pos = transitions[item].indexOf(' ');\n\n                if (pos !== -1) {\n                    styleName = transitions[item].substring(0, pos);\n                    transitionProperties = transitions[item].substring(pos + 1);\n                } else {\n                    styleName = transitions[item];\n                    transitionProperties = laroux_css.defaultTransition;\n                }\n\n                var found = false;\n                for (var j = 0; j < currentTransitionsArray.length; j++) {\n                    if (currentTransitionsArray[j].trim().localeCompare(styleName) === 0) {\n                        currentTransitionsArray[j] = styleName + ' ' + transitionProperties;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    currentTransitionsArray.push(styleName + ' ' + transitionProperties);\n                }\n            }\n\n            var value = currentTransitionsArray.join(', ');\n\n            element.style.transition = value;\n            element.style.webkitTransition = value;\n            element.style.msTransition = value;\n        },\n\n        setTransition: function (element, transition) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_css.setTransitionSingle(elements[i], transition);\n            }\n        },\n\n        show: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 1 });\n        },\n\n        hide: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 0 });\n        },\n\n        // measurement features\n        // height of element without padding, margin and border\n        height: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('height');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // height of element with padding but without margin and border\n        innerHeight: function (element) {\n            return element.clientHeight;\n        },\n\n        // height of element with padding and border but margin optional\n        outerHeight: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetHeight;\n            }\n\n            var style = getComputedStyle(element),\n                marginTop = style.getPropertyCSSValue('margin-top'),\n                marginBottom = style.getPropertyCSSValue('margin-bottom'),\n                margins = marginTop.getFloatValue(marginTop.primitiveType) +\n                    marginBottom.getFloatValue(marginBottom.primitiveType);\n\n            return Math.ceil(element.offsetHeight + margins);\n        },\n\n        // width of element without padding, margin and border\n        width: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('width');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // width of element with padding but without margin and border\n        innerWidth: function (element) {\n            return element.clientWidth;\n        },\n\n        // width of element with padding and border but margin optional\n        outerWidth: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetWidth;\n            }\n\n            var style = getComputedStyle(element),\n                marginLeft = style.getPropertyCSSValue('margin-left'),\n                marginRight = style.getPropertyCSSValue('margin-right'),\n                margins = marginLeft.getFloatValue(marginLeft.primitiveType) +\n                    marginRight.getFloatValue(marginRight.primitiveType);\n\n            return Math.ceil(element.offsetWidth + margins);\n        },\n\n        top: function (element) {\n            return element.getBoundingClientRect().top +\n                ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n        },\n\n        left: function (element) {\n            return element.getBoundingClientRect().left +\n                ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);\n        },\n\n        aboveTheTop: function (element) {\n            return element.getBoundingClientRect().bottom <= 0;\n        },\n\n        belowTheFold: function (element) {\n            return element.getBoundingClientRect().top > innerHeight;\n        },\n\n        leftOfScreen: function (element) {\n            return element.getBoundingClientRect().right <= 0;\n        },\n\n        rightOfScreen: function (element) {\n            return element.getBoundingClientRect().left > innerWidth;\n        },\n\n        inViewport: function (element) {\n            var rect = element.getBoundingClientRect();\n\n            return !(rect.bottom <= 0 || rect.top > innerHeight ||\n                rect.right <= 0 || rect.left > innerWidth);\n        }\n    };\n\n    return laroux_css;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n        // laroux_css = require('./laroux.css.js'),\n        // laroux_triggers = require('./laroux.triggers.js');\n\n    // dom\n    var laroux_dom = {\n        docprop: function (propName) {\n            return document.documentElement.classList.contains(propName);\n        },\n\n        select: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        },\n\n        selectByClass: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByClassName(selector)\n            );\n        },\n\n        selectByTag: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByTagName(selector)\n            );\n        },\n\n        selectById: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        selectSingle: function (selector, parent) {\n            return (parent || document).querySelector(selector);\n        },\n\n        attr: function (element, attributes, value) {\n            if (value === undefined && attributes.constructor !== Object) {\n                return element.getAttribute(attributes);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof attributes === 'string') {\n                var oldAttributes = attributes;\n                attributes = {};\n                attributes[oldAttributes] = value;\n            }\n\n            for (var attributeName in attributes) {\n                if (!attributes.hasOwnProperty(attributeName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (attributes[attributeName] === null) {\n                        element.removeAttribute(attributeName);\n                    } else {\n                        element.setAttribute(attributeName, attributes[attributeName]);\n                    }\n                }\n            }\n        },\n\n        data: function (element, datanames, value) {\n            if (value === undefined && datanames.constructor !== Object) {\n                return element.getAttribute('data-' + datanames);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof datanames == 'string') {\n                var oldDatanames = datanames;\n                datanames = {};\n                datanames[oldDatanames] = value;\n            }\n\n            for (var dataName in datanames) {\n                if (!datanames.hasOwnProperty(dataName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (datanames[dataName] === null) {\n                        element.removeAttribute('data-' + dataName);\n                    } else {\n                        element.setAttribute('data-' + dataName, datanames[dataName]);\n                    }\n                }\n            }\n        },\n\n        eventHistory: [],\n        setEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_dom.setEventSingle(elements[i], eventname, fnc);\n            }\n        },\n\n        setEventSingle: function (element, eventname, fnc) {\n            var fncWrapper = function (e) {\n                if (fnc(e, element) === false) {\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    } else {\n                        event.returnValue = false;\n                    }\n                }\n            };\n\n            laroux_dom.eventHistory.push({ element: element, eventname: eventname, fnc: fnc, fncWrapper: fncWrapper });\n            element.addEventListener(eventname, fncWrapper, false);\n        },\n\n        unsetEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i1 = 0, length1 = elements.length; i1 < length1; i1++) {\n                for (var i2 = 0, length2 = laroux_dom.eventHistory.length; i2 < length2; i2++) {\n                    var item = laroux_dom.eventHistory[i2];\n\n                    if (item === undefined) {\n                        continue;\n                    }\n\n                    if (item.element !== elements[i1]) {\n                        continue;\n                    }\n\n                    if (eventname !== undefined && item.eventname !== eventname) {\n                        continue;\n                    }\n\n                    if (fnc !== undefined && item.fnc !== fnc) {\n                        continue;\n                    }\n\n                    item.element.removeEventListener(item.eventname, item.fncWrapper, false);\n                    delete laroux_dom.eventHistory[i2];\n                }\n            }\n        },\n\n        dispatchEvent: function (element, eventname, data) {\n            var customEvent = document.createEvent('Event');\n            for (var item in data) {\n                if (!data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                customEvent[item] = data[item];\n            }\n\n            customEvent.initEvent(eventname, true, true);\n            element.dispatchEvent(customEvent);\n        },\n\n        create: function (html) {\n            var frag = document.createDocumentFragment(),\n                temp = document.createElement('DIV');\n\n            temp.insertAdjacentHTML('beforeend', html);\n            while (temp.firstChild) {\n                frag.appendChild(temp.firstChild);\n            }\n\n            // nulling out the reference, there is no obvious dispose method\n            temp = null;\n\n            return frag;\n        },\n\n        createElement: function (element, attributes, children) {\n            var elem = document.createElement(element);\n\n            if (attributes !== undefined && attributes.constructor === Object) {\n                for (var item in attributes) {\n                    if (!attributes.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    elem.setAttribute(item, attributes[item]);\n                }\n            }\n\n            if (children !== undefined) {\n                if (children.constructor === Object) {\n                    for (var item2 in children) {\n                        if (!children.hasOwnProperty(item2)) {\n                            continue;\n                        }\n\n                        elem.setAttribute(item2, children[item2]);\n                    }\n                } else if (/* typeof children == 'string' && */children.length > 0) {\n                    laroux_dom.append(elem, children);\n                }\n            }\n\n            return elem;\n        },\n\n        createOption: function (element, key, value, isDefault) {\n            /* old behaviour, does not support optgroups as parents.\n            var count = element.options.length;\n            element.options[count] = new Option(value, key);\n\n            if (isDefault === true) {\n                element.options.selectedIndex = count - 1;\n            }\n            */\n\n            var option = document.createElement('OPTION');\n            option.setAttribute('value', key);\n            if (isDefault === true) {\n                option.setAttribute('checked', 'checked');\n            }\n\n            laroux_dom.append(option, value);\n            element.appendChild(option);\n        },\n\n        selectByValue: function (element, value) {\n            for (var i = 0, length = element.options.length; i < length; i++) {\n                if (element.options[i].getAttribute('value') == value) {\n                    element.selectedIndex = i;\n                    break;\n                }\n            }\n        },/*,\n\n        // TODO: it's redundant for now\n        loadImage: function () {\n            var images = [];\n\n            for (var i = 0, length = arguments.length; i < length; i++) {\n                var image = document.createElement('IMG');\n                image.setAttribute('src', arguments[i]);\n\n                images.push(image);\n            }\n\n            return images;\n        },\n\n        loadAsyncScript: function (path, triggerName, async) {\n            var elem = document.createElement('script');\n\n            elem.type = 'text/javascript';\n            elem.async = (async !== undefined) ? async : true;\n            elem.src = path;\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },\n\n        loadAsyncStyle: function (path, triggerName, async) {\n            var elem = document.createElement('LINK');\n\n            elem.type = 'text/css';\n            elem.async = (async !== undefined) ? async : true;\n            elem.href = path;\n            elem.rel = 'stylesheet';\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },*/\n\n        clear: function (element) {\n            while (element.hasChildNodes()) {\n                element.removeChild(element.firstChild);\n            }\n        },\n\n        insert: function (element, position, content) {\n            element.insertAdjacentHTML(position, content);\n        },\n\n        prepend: function (element, content) {\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        append: function (element, content) {\n            element.insertAdjacentHTML('beforeend', content);\n        },\n\n        replace: function (element, content) {\n            laroux_dom.clear(element);\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        replaceText: function (element, content) {\n            // laroux_dom.clear(element);\n            element.textContent = content;\n        },\n\n        remove: function (element) {\n            element.remove();\n        },\n\n        cloneReturn: 0,\n        cloneAppend: 1,\n        cloneInsertAfter: 2,\n        cloneInsertBefore: 3,\n\n        clone: function (element, type, container, target) {\n            var newElement = element.cloneNode(true);\n\n            if (container === undefined) {\n                container = element.parentNode;\n            }\n            if (target === undefined) {\n                target = element;\n            }\n\n            if (type !== undefined && type != laroux_dom.cloneReturn) {\n                if (type == laroux_dom.cloneAppend) {\n                    container.appendChild(newElement);\n                } else if (type == laroux_dom.cloneInsertAfter) {\n                    container.insertBefore(newElement, target.nextSibling);\n                } else { // type == laroux_dom.cloneInsertBefore\n                    container.insertBefore(newElement, target);\n                }\n            }\n\n            return newElement;\n        }/*,\n\n        // TODO: it's redundant for now\n        applyOperations: function (element, operations) {\n            for (var operation in operations) {\n                if (!operations.hasOwnProperty(operation)) {\n                    continue;\n                }\n\n                for (var binding in operations[operation]) {\n                    if (!operations[operation].hasOwnProperty(binding)) {\n                        continue;\n                    }\n\n                    var value = operations[operation][binding];\n\n                    switch (operation) {\n                        case 'setprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.replace(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'addprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), element.getAttribute(binding.substring(1)) + value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.append(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'removeprop':\n                            if (value.substring(0, 1) == '_') {\n                                element.removeAttribute(value.substring(1));\n                                continue;\n                            }\n\n                            if (value == 'content') {\n                                laroux_dom.clear(element);\n                                continue;\n                            }\n                            break;\n                        case 'addclass':\n                            laroux_css.addClass(element, value);\n                            break;\n                        case 'removeclass':\n                            laroux_css.removeClass(element, value);\n                            break;\n                        case 'addstyle':\n                            laroux_css.setProperty(element, binding, value);\n                            break;\n                        case 'removestyle':\n                            laroux_css.setProperty(element, value, 'inherit !important');\n                            break;\n                        case 'repeat':\n                            break;\n                        default:\n                            console.log(operation);\n                    }\n                }\n            }\n        }*/\n    };\n\n    // a fix for Internet Explorer\n    if (typeof Element !== 'undefined') {\n        if (Element.prototype.remove === undefined) {\n            Element.prototype.remove = function () {\n                if (this.parentElement !== null) {\n                    this.parentElement.removeChild(this);\n                }\n            };\n        }\n    }\n\n    return laroux_dom;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_ajax = require('./laroux.ajax.js');\n\n    // forms\n    var laroux_forms = {\n        ajaxForm: function (formobj, fnc, fncBegin) {\n            laroux_dom.setEvent(formobj, 'submit', function () {\n                if (fncBegin !== undefined) {\n                    fncBegin();\n                }\n\n                laroux_ajax.post(\n                    formobj.getAttribute('action'),\n                    laroux_forms.serializeFormData(formobj),\n                    fnc\n                );\n\n                return false;\n            });\n        },\n\n        isFormField: function (element) {\n            if (element.tagName === 'SELECT') {\n                return true;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE' || type === 'CHECKBOX' || type === 'RADIO' || type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return true;\n            }\n\n            return false;\n        },\n\n        getFormFieldValue: function (element) {\n            if (element.disabled === true) {\n                return null;\n            }\n\n            if (element.tagName === 'SELECT') {\n                return element.options[element.selectedIndex].value;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE') {\n                    return element.files[0];\n                }\n\n                if (type === 'CHECKBOX' || type === 'RADIO') {\n                    if (element.checked) {\n                        return element.value;\n                    }\n\n                    return null;\n                }\n\n                if (type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return element.value;\n                }\n\n                return null;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return element.value;\n            }\n\n            return null;\n        },\n\n        setFormFieldValue: function (element, value) {\n            if (element.disabled === true) {\n                return;\n            }\n\n            if (element.tagName === 'SELECT') {\n                for (var option in element.options) {\n                    if (!element.options.hasOwnProperty(option)) {\n                        continue;\n                    }\n\n                    if (element.options[option].value == value) {\n                        element.selectedIndex = option;\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type == 'FILE') {\n                    element.files[0] = value;\n                    return;\n                }\n\n                if (type == 'CHECKBOX' || type == 'RADIO') {\n                    if (value === true || value == element.value) {\n                        element.checked = true;\n                    }\n\n                    return;\n                }\n\n                if (type == 'TEXT' || type == 'PASSWORD' || type == 'HIDDEN') {\n                    element.value = value;\n                    return;\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'TEXTAREA') {\n                element.value = value;\n                return;\n            }\n        },\n\n        toggleFormEditing: function (formobj, value) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            if (value === undefined) {\n                if (formobj.getAttribute('data-last-enabled') === null) {\n                    formobj.setAttribute('data-last-enabled', 'enabled');\n                    value = false;\n                } else {\n                    formobj.removeAttribute('data-last-enabled');\n                    value = true;\n                }\n            }\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                if (!laroux_forms.isFormField(selection[selected])) {\n                    continue;\n                }\n\n                var lastDisabled = selection[selected].getAttribute('data-last-disabled');\n                if (!value) {\n                    if (lastDisabled === null) {\n                        if (selection[selected].getAttribute('disabled') !== null) {\n                            selection[selected].setAttribute('data-last-disabled', 'disabled');\n                        }\n                    }\n\n                    selection[selected].setAttribute('disabled', 'disabled');\n                    continue;\n                }\n\n                if (lastDisabled !== null) {\n                    selection[selected].removeAttribute('data-last-disabled');\n                } else {\n                    selection[selected].removeAttribute('disabled');\n                }\n            }\n        },\n\n        serializeFormData: function (formobj) {\n            var formdata = new FormData();\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    formdata.append(selection[selected].getAttribute('name'), value);\n                }\n            }\n\n            return formdata;\n        },\n\n        serialize: function (formobj) {\n            var values = {};\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    values[selection[selected].getAttribute('name')] = value;\n                }\n            }\n\n            return values;\n        },\n\n        deserialize: function (formobj, data) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                laroux_forms.setFormFieldValue(selection[selected], data[selection[selected].getAttribute('name')]);\n            }\n        }\n    };\n\n    return laroux_forms;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(/%s/g, function () { return Array.prototype.shift.call(args); });\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(obj, function (value) { return value[key]; }, true);\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_forms = require('./laroux.forms.js');\n\n    // keys\n    var laroux_keys = {\n        keyName: function (keycode) {\n            keycode = keycode.toLowerCase();\n\n            switch (keycode) {\n            case 'backspace':\n                return 8;\n\n            case 'tab':\n                return 9;\n\n            case 'enter':\n            case 'return':\n                return 13;\n\n            case 'esc':\n            case 'escape':\n                return 27;\n\n            case 'space':\n                return 32;\n\n            case 'pgup':\n                return 33;\n\n            case 'pgdn':\n                return 34;\n\n            case 'end':\n                return 35;\n\n            case 'home':\n                return 36;\n\n            case 'left':\n                return 37;\n\n            case 'up':\n                return 38;\n\n            case 'right':\n                return 39;\n\n            case 'down':\n                return 40;\n\n            case 'insert':\n                return 45;\n\n            case 'delete':\n                return 46;\n\n            case 'f1':\n                return 112;\n\n            case 'f2':\n                return 113;\n\n            case 'f3':\n                return 114;\n\n            case 'f4':\n                return 115;\n\n            case 'f5':\n                return 116;\n\n            case 'f6':\n                return 117;\n\n            case 'f7':\n                return 118;\n\n            case 'f8':\n                return 119;\n\n            case 'f9':\n                return 120;\n\n            case 'f10':\n                return 121;\n\n            case 'f11':\n                return 122;\n\n            case 'f12':\n                return 123;\n\n            case ',':\n                return 188;\n\n            case '.':\n                return 190;\n            }\n\n            return String.fromCharCode(keycode);\n        },\n\n        // {target, key, shift, ctrl, alt, disableInputs, fnc}\n        assign: function (options) {\n            var wrapper = function (ev) {\n                if (!ev) {\n                    ev = event;\n                }\n\n                var element = ev.target || ev.srcElement;\n                if (element.nodeType === 3 || element.nodeType === 11) { // element.nodeType === 1 ||\n                    element = element.parentNode;\n                }\n\n                if (options.disableInputs && laroux_forms.isFormField(element)) {\n                    return;\n                }\n\n                if (options.shift && !ev.shiftKey) {\n                    return;\n                }\n\n                if (options.ctrl && !ev.ctrlKey) {\n                    return;\n                }\n\n                if (options.alt && !ev.altKey) {\n                    return;\n                }\n\n                var key = laroux_keys.keyName(options.key);\n                if (key !== (ev.keyCode || ev.which)) {\n                    return;\n                }\n\n                options.fnc(ev);\n\n                return false;\n            };\n\n            laroux_dom.setEvent(options.target || document, 'keydown', wrapper);\n        }\n    };\n\n    return laroux_keys;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_stack = require('./laroux.stack.js');\n\n    // mvc\n    var laroux_mvc = {\n        apps: {},\n        pauseUpdate: false,\n\n        init: function (element, model) {\n            if (element.constructor === String) {\n                element = laroux_dom.selectById(element);\n            }\n\n            // if (model.constructor !== laroux_stack) {\n            //     model = new laroux_stack(model);\n            // }\n\n            var appKey = element.getAttribute('id');\n\n            model.onupdate = function (event) {\n                if (!laroux_mvc.pauseUpdate) {\n                    laroux_mvc.update(appKey); // , [event.key]\n                }\n            };\n\n            laroux_mvc.apps[appKey] = {\n                element: element,\n                model: model // ,\n                // modelKeys: null,\n                // boundElements: null,\n                // eventElements: null\n            };\n\n            laroux_mvc.rebind(appKey);\n        },\n\n        rebind: function (appKey) {\n            var app = laroux_mvc.apps[appKey];\n            /*jslint nomen: true */\n            app.modelKeys = laroux_helpers.getKeysRecursive(app.model._data); // FIXME: works only for $l.stack\n            app.boundElements = {};\n            app.eventElements = [];\n\n            laroux_mvc.scanElements(app, app.element);\n            laroux_mvc.update(appKey);\n\n            var fnc = function (ev, elem) {\n                var binding = laroux_mvc.bindStringParser(elem.getAttribute('lr-event'));\n                // laroux_mvc.pauseUpdate = true;\n                for (var item in binding) {\n                    if (item === null || !binding.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    if (binding[item].charAt(0) == '\\'') {\n                        app.model[item] = binding[item].substring(1, binding[item].length - 1);\n                    } else if (binding[item].substring(0, 5) == 'attr.') {\n                        app.model[item] = elem.getAttribute(binding[item].substring(5));\n                    } else if (binding[item].substring(0, 5) == 'prop.') {\n                        app.model[item] = elem[binding[item].substring(5)];\n                    }\n                }\n                // laroux_mvc.pauseUpdate = false;\n            };\n\n            for (var i = 0, length = app.eventElements.length; i < length; i++) {\n                laroux_dom.setEvent(\n                    app.eventElements[i].element,\n                    app.eventElements[i].binding[null],\n                    fnc\n                );\n            }\n        },\n\n        scanElements: function (app, element) {\n            for (var i = 0, atts = element.attributes, m = atts.length; i < m; i++) {\n                if (atts[i].name == 'lr-bind') {\n                    var binding1 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    for (var item in binding1) {\n                        if (!binding1.hasOwnProperty(item)) {\n                            continue;\n                        }\n\n                        if (app.boundElements[binding1[item]] === undefined) {\n                            app.boundElements[binding1[item]] = [];\n                        }\n\n                        app.boundElements[binding1[item]].push({\n                            element: element,\n                            target: item\n                        });\n                    }\n                } else if (atts[i].name == 'lr-event') {\n                    var binding2 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    app.eventElements.push({\n                        element: element,\n                        binding: binding2\n                    });\n                }\n            }\n\n            for (var j = 0, chldrn = element.childNodes, n = chldrn.length; j < n; j++) {\n                if (chldrn[j].nodeType === 1) {\n                    laroux_mvc.scanElements(app, chldrn[j]);\n                }\n            }\n        },\n\n        update: function (appKey, keys) {\n            var app = laroux_mvc.apps[appKey];\n\n            if (typeof keys == 'undefined') {\n                keys = app.modelKeys;\n            }\n\n            for (var i = 0, length1 = keys.length; i < length1; i++) {\n                if (!(keys[i] in app.boundElements)) {\n                    continue;\n                }\n\n                var boundElement = app.boundElements[keys[i]];\n\n                for (var j = 0, length2 = boundElement.length; j < length2; j++) {\n                    if (boundElement[j].target.substring(0, 6) == 'style.') {\n                        boundElement[j].element.style[boundElement[j].target.substring(6)] = laroux_helpers.getElement(app.model, keys[i]);\n                    } else if (boundElement[j].target.substring(0, 5) == 'attr.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element.setAttribute(boundElement[j].target.substring(5), laroux_helpers.getElement(app.model, keys[i]));\n                    } else if (boundElement[j].target.substring(0, 5) == 'prop.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element[boundElement[j].target.substring(5)] = laroux_helpers.getElement(app.model, keys[i]);\n                    }\n                }\n            }\n        },\n\n        bindStringParser: function (text) {\n            var lastBuffer = null,\n                buffer = '',\n                state = 0,\n                result = {};\n\n            for (var i = 0, length = text.length; i < length; i++) {\n                var curr = text.charAt(i);\n\n                if (state === 0) {\n                    if (curr == ':') {\n                        state = 1;\n                        lastBuffer = buffer.trim();\n                        buffer = '';\n                        continue;\n                    }\n                }\n\n                if (curr == ',') {\n                    state = 0;\n                    result[lastBuffer] = buffer.trim();\n                    buffer = '';\n                    continue;\n                }\n\n                buffer += curr;\n            }\n\n            if (buffer.length > 0) {\n                result[lastBuffer] = buffer.trim();\n            }\n\n            return result;\n        }\n    };\n\n    return laroux_mvc;\n\n}());\n","/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // templates\n    var laroux_templates = {\n        engines: {\n            plain: {\n                compile: function (template, options) {\n                    return [template, options];\n                },\n\n                render: function (compiled, model) {\n                    var result = compiled[0],\n                        dict = [],\n                        lastIndex = 0,\n                        nextIndex;\n\n                    while ((nextIndex = result.indexOf('{{', lastIndex)) !== -1) {\n                        nextIndex += 2;\n                        var closeIndex = result.indexOf('}}', nextIndex);\n                        if (closeIndex === -1) {\n                            break;\n                        }\n\n                        var key = result.substring(nextIndex, closeIndex);\n                        dict['{{' + key + '}}'] = laroux_helpers.getElement(model, key, '');\n                        lastIndex = closeIndex + 2;\n                    }\n\n                    return laroux_helpers.replaceAll(result, dict);\n                }\n            },\n\n            hogan: {\n                compile: function (template, options) {\n                    return Hogan.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled.render(model);\n                }\n            },\n\n            mustache: {\n                compile: function (template, options) {\n                    return Mustache.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            handlebars: {\n                compile: function (template, options) {\n                    return Handlebars.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            lodash: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            underscore: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            }\n        },\n        engine: 'plain',\n\n        apply: function (element, model, options) {\n            var content, engine = laroux_templates.engines[laroux_templates.engine];\n\n            if (element.nodeType === 1 || element.nodeType === 3 || element.nodeType === 11) {\n                content = element.textContent;\n            } else {\n                content = element.nodeValue;\n            }\n\n            var compiled = engine.compile(content, options);\n            return engine.render(compiled, model);\n        },\n\n        insert: function (element, model, target, position, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.insert(target, position || 'beforeend', output);\n        },\n\n        replace: function (element, model, target, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.replace(target, output);\n        }\n    };\n\n    return laroux_templates;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js');\n\n    // touch - partially taken from 'tocca.js' project\n    //         can be found at: https://github.com/GianlucaGuarini/Tocca.js\n    var laroux_touch = {\n        touchStarted: null,\n        swipeTreshold: 80,\n        precision: 30,\n        tapCount: 0,\n        tapTreshold: 200,\n        longTapTreshold: 800,\n        tapTimer: null,\n        pos: null,\n        cached: null,\n\n        events: {\n            start: ['touchstart', 'pointerdown', 'MSPointerDown', 'mousedown'],\n            end: ['touchend', 'pointerup', 'MSPointerUp', 'mouseup'],\n            move: ['touchmove', 'pointermove', 'MSPointerMove', 'mousemove']\n        },\n\n        locatePointer: function (event) {\n            if (event.targetTouches) {\n                event = event.targetTouches[0];\n            }\n\n            laroux_touch.pos = [event.pageX, event.pageY];\n        },\n\n        init: function () {\n            var events = [\n                0,\n                (navigator.msPointerEnabled) ? 2 : 1,\n                3\n            ];\n\n            for (var i = 0, length = events.length; i < length; i++) {\n                laroux_dom.setEventSingle(document, laroux_touch.events.start[events[i]], laroux_touch.onstart);\n                laroux_dom.setEventSingle(document, laroux_touch.events.end[events[i]], laroux_touch.onend);\n                laroux_dom.setEventSingle(document, laroux_touch.events.move[events[i]], laroux_touch.locatePointer);\n            }\n        },\n\n        onstart: function (event) {\n            laroux_touch.locatePointer(event);\n            laroux_touch.cached = [laroux_touch.pos[0], laroux_touch.pos[1]];\n            laroux_touch.touchStarted = Date.now();\n            /*jslint plusplus: true */\n            laroux_touch.tapCount++;\n\n            var fnc = function () {\n                if (laroux_touch.cached[0] >= laroux_touch.pos[0] - laroux_touch.precision &&\n                        laroux_touch.cached[0] <= laroux_touch.pos[0] + laroux_touch.precision &&\n                        laroux_touch.cached[1] >= laroux_touch.pos[1] - laroux_touch.precision &&\n                        laroux_touch.cached[1] <= laroux_touch.pos[1] + laroux_touch.precision) {\n                    if (laroux_touch.touchStarted === null) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            (laroux_touch.tapCount === 2) ? 'dbltap' : 'tap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    if (Date.now() - laroux_touch.touchStarted > laroux_touch.longTapTreshold) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            'longtap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.touchStarted = null;\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n                    return;\n                }\n\n                laroux_touch.tapCount = 0;\n            };\n\n            clearTimeout(laroux_touch.tapTimer);\n            laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n        },\n\n        onend: function (event) {\n            var delta = [\n                    laroux_touch.pos[0] - laroux_touch.cached[0],\n                    laroux_touch.pos[1] - laroux_touch.cached[1]\n                ],\n                data = {\n                    innerEvent: event,\n                    x: laroux_touch.pos[0],\n                    y: laroux_touch.pos[1],\n                    distance: {\n                        x: Math.abs(delta[0]),\n                        y: Math.abs(delta[1])\n                    }\n                };\n\n            laroux_touch.touchStarted = null;\n\n            if (delta[0] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swiperight', data);\n            }\n\n            if (delta[0] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeleft', data);\n            }\n\n            if (delta[1] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipedown', data);\n            }\n\n            if (delta[1] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeup', data);\n            }\n        }\n    };\n\n    // laroux.ready(laroux_touch.init);\n\n    return laroux_touch;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_timers = require('./laroux.timers.js'),\n        laroux_date = require('./laroux.date.js');\n\n    // ui\n    var laroux_ui = {\n        floatContainer: null,\n\n        popup: {\n            defaultTimeout: 500,\n\n            createBox: function (id, xclass, message) {\n                return laroux_dom.createElement('DIV', { id: id, 'class': xclass }, message);\n            },\n\n            msgbox: function (timeout, message) {\n                var id = laroux_helpers.getUniqueId(),\n                    obj = laroux_ui.popup.createBox(id, 'larouxMsgBox', message);\n                laroux_ui.floatContainer.appendChild(obj);\n\n                laroux_css.setProperty(obj, { opacity: 1 });\n\n                laroux_timers.set({\n                    timeout: timeout,\n                    reset: false,\n                    ontick: function (x) {\n                        // laroux_css.setProperty(x, { opacity: 0 });\n                        laroux_dom.remove(x);\n                    },\n                    state: obj\n                });\n            }\n        },\n\n        loading: {\n            elementSelector: null,\n            element: null,\n            defaultDelay: 1500,\n            timer: null,\n\n            killTimer: function () {\n                clearTimeout(laroux_ui.loading.timer);\n            },\n\n            hide: function () {\n                laroux_ui.loading.killTimer();\n\n                laroux_css.setProperty(laroux_ui.loading.element, { display: 'none' });\n                localStorage.loadingIndicator = 'false';\n            },\n\n            show: function (delay) {\n                laroux_ui.loading.killTimer();\n\n                if (delay === undefined) {\n                    delay = laroux_ui.loading.defaultDelay;\n                }\n\n                if (delay > 0) {\n                    setTimeout(function () { laroux_ui.loading.show(0); }, delay);\n                } else {\n                    laroux_css.setProperty(laroux_ui.loading.element, { display: 'block' });\n                    localStorage.loadingIndicator = 'true';\n                }\n            },\n\n            init: function () {\n                if (laroux_ui.loading.element === null && laroux_ui.loading.elementSelector !== null) {\n                    laroux_ui.loading.element = laroux_dom.selectSingle(laroux_ui.loading.elementSelector);\n                }\n\n                if (laroux_ui.loading.element !== null) {\n                    laroux_dom.setEvent(window, 'load', laroux_ui.loading.hide);\n                    laroux_dom.setEvent(window, 'beforeunload', laroux_ui.loading.show);\n\n                    if (localStorage.loadingIndicator !== undefined && localStorage.loadingIndicator === 'true') {\n                        laroux_ui.loading.show(0);\n                    } else {\n                        laroux_ui.loading.show();\n                    }\n                }\n            }\n        },\n\n        dynamicDates: {\n            updateDatesElements: null,\n\n            updateDates: function () {\n                if (laroux_ui.dynamicDates.updateDatesElements === null) {\n                    laroux_ui.dynamicDates.updateDatesElements = laroux_dom.select('*[data-epoch]');\n                }\n\n                for (var item in laroux_ui.dynamicDates.updateDatesElements) {\n                    if (!laroux_ui.dynamicDates.updateDatesElements.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    var obj = laroux_ui.dynamicDates.updateDatesElements[item];\n                    // bitshifting (str >> 0) used instead of parseInt(str, 10)\n                    var date = new Date((obj.getAttribute('data-epoch') >> 0) * 1000);\n\n                    laroux_dom.replace(\n                        obj,\n                        laroux_date.getDateString(date)\n                    );\n\n                    obj.setAttribute('title', laroux_date.getLongDateString(date));\n                }\n            },\n\n            init: function () {\n                laroux_timers.set({\n                    timeout: 500,\n                    reset: true,\n                    ontick: laroux_ui.dynamicDates.updateDates\n                });\n            }\n        },\n\n        scrollView: {\n            selectedElements: [],\n\n            onhidden: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 0 });\n                laroux_css.setTransition(elements, ['opacity']);\n            },\n\n            onreveal: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 1 });\n            },\n\n            set: function (element) {\n                var elements = laroux_helpers.getAsArray(element);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (!laroux_css.inViewport(elements[i])) {\n                        laroux_ui.scrollView.selectedElements.push(elements[i]);\n                    }\n                }\n\n                laroux_ui.scrollView.onhidden(laroux_ui.scrollView.selectedElements);\n                laroux_dom.setEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n            },\n\n            reveal: function () {\n                var removeKeys = [],\n                    elements = [];\n\n                laroux_helpers.each(\n                    laroux_ui.scrollView.selectedElements,\n                    function (i, element) {\n                        if (laroux_css.inViewport(element)) {\n                            removeKeys.unshift(i);\n                            elements.push(element);\n                        }\n                    }\n                );\n\n                for (var item in removeKeys) {\n                    if (!removeKeys.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    laroux_ui.scrollView.selectedElements.splice(removeKeys[item], 1);\n                }\n\n                if (laroux_ui.scrollView.selectedElements.length === 0) {\n                    laroux_dom.unsetEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n                }\n\n                if (elements.length > 0) {\n                    laroux_ui.scrollView.onreveal(elements);\n                }\n            }\n        },\n\n        createFloatContainer: function () {\n            if (!laroux_ui.floatContainer) {\n                laroux_ui.floatContainer = laroux_dom.createElement('DIV', { 'class': 'larouxFloatDiv' });\n                document.body.insertBefore(laroux_ui.floatContainer, document.body.firstChild);\n            }\n        },\n\n        init: function () {\n            laroux_ui.createFloatContainer();\n            laroux_ui.loading.init();\n            laroux_ui.dynamicDates.init();\n        }\n    };\n\n    // laroux.ready(laroux_ui.init);\n\n    return laroux_ui;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n","/*global NodeList, Node */\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // wrapper\n    var laroux_wrapper = function (selector, parent) {\n        var selection;\n\n        if (selector instanceof Array) {\n            selection = selector;\n        } else if (selector instanceof NodeList) {\n            selection = laroux_helpers.toArray(selector);\n        } else if (selector instanceof Node) {\n            selection = [selector];\n        } else {\n            selection = laroux_dom.select(selector, parent);\n        }\n\n        if (selection.length === 1) {\n            return new laroux_wrapper.singleTemplate(selection[0]);\n        }\n\n        return new laroux_wrapper.arrayTemplate(selection);\n    };\n\n    laroux_wrapper.singleTemplate = function (element) {\n        this.source = element;\n        this.isArray = false;\n\n        this.get = function (index) {\n            if (index === 0 || index === undefined) {\n                return this.source;\n            }\n\n            return undefined;\n        };\n\n        this.find = function (selector) {\n            return laroux_wrapper(selector, this.source);\n        };\n    };\n\n    laroux_wrapper.arrayTemplate = function (elements) {\n        this.source = elements;\n        this.isArray = true;\n\n        this.get = function (index) {\n            return this.source[index];\n        };\n    };\n\n    laroux_wrapper.registerBoth = 0;\n    laroux_wrapper.registerSingle = 1;\n    laroux_wrapper.registerArray = 2;\n\n    laroux_wrapper.register = function (name, fnc, scope) {\n        var newFnc = function () {\n            var result = fnc.apply(\n                this,\n                [this.source].concat(laroux_helpers.toArray(arguments))\n            );\n\n            return (result === undefined) ? this : result;\n        };\n\n        switch (scope) {\n        case laroux_wrapper.registerSingle:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            break;\n        case laroux_wrapper.registerArray:\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        default:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        }\n    };\n\n    laroux_wrapper.register('attr', laroux_dom.attr, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('data', laroux_dom.data, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEventSingle, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEvent, laroux_wrapper.registerArray);\n    laroux_wrapper.register('off', laroux_dom.unsetEvent, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('clear', laroux_dom.clear, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('insert', laroux_dom.insert, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('prepend', laroux_dom.prepend, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('append', laroux_dom.append, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replace', laroux_dom.replace, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replaceText', laroux_dom.replaceText, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('remove', laroux_dom.remove, laroux_wrapper.registerSingle);\n\n    laroux_wrapper.register('hasClass', laroux_css.hasClass, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('addClass', laroux_css.addClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('removeClass', laroux_css.removeClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('toggleClass', laroux_css.toggleClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('getProperty', laroux_css.getProperty, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('setProperty', laroux_css.setProperty, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('setTransition', laroux_css.setTransition, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('show', laroux_css.show, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('hide', laroux_css.hide, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('height', laroux_css.height, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerHeight', laroux_css.innerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerHeight', laroux_css.outerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('width', laroux_css.width, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerWidth', laroux_css.innerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerWidth', laroux_css.outerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('top', laroux_css.top, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('left', laroux_css.left, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('aboveTheTop', laroux_css.aboveTheTop, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('belowTheFold', laroux_css.belowTheFold, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('leftOfScreen', laroux_css.leftOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('rightOfScreen', laroux_css.rightOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('inViewport', laroux_css.inViewport, laroux_wrapper.registerSingle);\n\n    return laroux_wrapper;\n\n}());\n","/**\n * laroux.js - A jquery substitute for modern browsers\n *\n * @version v2.0.0\n * @link https://larukedi.github.io/laroux.js\n * @license Apache-2.0\n */\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\nmodule.exports = (function (scope) {\n    'use strict';\n\n    // core\n    var laroux = function (selector, parent) {\n        if (selector instanceof Array) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        }\n\n        /*\n        // FIXME: non-chrome optimization\n        var re = /^#([^\\+\\>\\[\\]\\.# ]*)$/.exec(selector);\n        if (re) {\n            if (parent === undefined) {\n                return document.getElementById(re[1]);\n            }\n\n            return parent.getElementById(re[1]);\n        }\n        */\n\n        return (parent || document).querySelector(selector);\n    };\n\n    if (!('$l' in scope)) {\n        scope.$l = laroux;\n    }\n\n    // core modules\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.timers = require('./laroux.timers.js');\n\n    laroux.cached = {\n        single: {},\n        array: {},\n        id: {}\n    };\n\n    laroux.c = function (selector) {\n        if (selector instanceof Array) {\n            return laroux.cached.array[selector] || (\n                laroux.cached.array[selector] = laroux.helpers.toArray(\n                    document.querySelectorAll(selector)\n                )\n            );\n        }\n\n        return laroux.cached.single[selector] || (\n            laroux.cached.single[selector] = document.querySelector(selector)\n        );\n    };\n\n    laroux.id = function (selector, parent) {\n        return (parent || document).getElementById(selector);\n    };\n\n    laroux.idc = function (selector) {\n        return laroux.cached.id[selector] ||\n            (laroux.cached.id[selector] = document.getElementById(selector));\n    };\n\n    laroux.readyPassed = false;\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    laroux.ready = function (fnc) {\n        if (!laroux.readyPassed) {\n            laroux.events.add('ContentLoaded', fnc);\n            return;\n        }\n\n        fnc();\n    };\n\n    // optional modules\n    laroux.wrapper = require('./laroux.wrapper.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.css = require('./laroux.css.js');\n    laroux.dom = require('./laroux.dom.js');\n    // laroux.events = require('./laroux.events.js');\n    laroux.forms = require('./laroux.forms.js');\n    // laroux.helpers = require('./laroux.helpers.js');\n    // laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n\n    laroux.anim = require('./laroux.anim.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.keys = require('./laroux.keys.js');\n    laroux.mvc = require('./laroux.mvc.js');\n    laroux.stack = require('./laroux.stack.js');\n    laroux.templates = require('./laroux.templates.js');\n    laroux.touch = require('./laroux.touch.js');\n    laroux.ui = require('./laroux.ui.js');\n\n    if (typeof document !== 'undefined') {\n        document.addEventListener(\n            'DOMContentLoaded',\n            function () {\n                if (!laroux.readyPassed) {\n                    laroux.events.invoke('ContentLoaded');\n                    setInterval(laroux.timers.ontick, 100);\n                    laroux.touch.init();\n                    laroux.readyPassed = true;\n                }\n            }\n        );\n    }\n\n    return laroux;\n\n}(typeof window !== 'undefined' ? window : global));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./laroux.ajax.js\":2,\"./laroux.anim.js\":3,\"./laroux.css.js\":4,\"./laroux.date.js\":5,\"./laroux.dom.js\":6,\"./laroux.events.js\":7,\"./laroux.forms.js\":8,\"./laroux.helpers.js\":9,\"./laroux.keys.js\":10,\"./laroux.mvc.js\":11,\"./laroux.stack.js\":12,\"./laroux.templates.js\":13,\"./laroux.timers.js\":14,\"./laroux.touch.js\":15,\"./laroux.triggers.js\":16,\"./laroux.ui.js\":17,\"./laroux.vars.js\":18,\"./laroux.wrapper.js\":19}],2:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n\n},{\"./laroux.events.js\":7,\"./laroux.helpers.js\":9}],3:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js');\n\n    // anim\n    var laroux_anim = {\n        data: [],\n\n        fx: {\n            interpolate: function (source, target, shift) {\n                return (source + (target - source) * shift);\n            },\n\n            easing: function (pos) {\n                return (-Math.cos(pos * Math.PI) / 2) + 0.5;\n            }\n        },\n\n        // {object, property, from, to, time, unit, reset}\n        set: function (newanim) {\n            newanim.startTime = null;\n\n            if (newanim.unit === undefined || newanim.unit === null) {\n                newanim.unit = '';\n            }\n\n            if (newanim.from === undefined || newanim.from === null) {\n                if (newanim.object === document.body && newanim.property === 'scrollTop') {\n                    newanim.from = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n                } else {\n                    newanim.from = newanim.object[newanim.property];\n                }\n            }\n\n            if (typeof newanim.from === 'string') {\n                newanim.from = Number(newanim.from);\n            }\n\n            if (newanim.reset === undefined || newanim.reset === null) {\n                newanim.reset = false;\n            }\n\n            // if (newanim.id === undefined) {\n            //     newanim.id = laroux_helpers.getUniqueId();\n            // }\n\n            laroux_anim.data.push(newanim);\n            if (laroux_anim.data.length === 1) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        setCss: function (newanim) {\n            if (newanim.from === undefined || newanim.from === null) {\n                newanim.from = laroux_css.getProperty(newanim.object, newanim.property);\n            }\n\n            newanim.object = newanim.object.style;\n            newanim.property = laroux_helpers.camelCase(newanim.property);\n\n            laroux_anim.set(newanim);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_anim.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        onframe: function (timestamp) {\n            var removeKeys = [];\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n                if (currentItem.startTime === null) {\n                    currentItem.startTime = timestamp;\n                }\n\n                var result = laroux_anim.step(currentItem, timestamp);\n\n                if (result === false) {\n                    removeKeys.unshift(item);\n                } else if (timestamp > currentItem.startTime + currentItem.time) {\n                    if (currentItem.reset) {\n                        currentItem.startTime = timestamp;\n                        if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                            scrollTo(0, currentItem.from);\n                            // setTimeout(function () { scrollTo(0, currentItem.from); }, 1);\n                        } else {\n                            currentItem.object[currentItem.property] = currentItem.from;\n                        }\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_anim.data.splice(removeKeys[item2], 1);\n            }\n\n            if (laroux_anim.data.length > 0) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        step: function (newanim, timestamp) {\n            var finishT = newanim.startTime + newanim.time,\n                shift = (timestamp > finishT) ? 1 : (timestamp - newanim.startTime) / newanim.time;\n\n            var value = laroux_anim.fx.interpolate(\n                newanim.from,\n                newanim.to,\n                laroux_anim.fx.easing(shift)\n            ) + newanim.unit;\n\n            if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                scrollTo(0, value);\n                // setTimeout(function () { scrollTo(0, value); }, 1);\n            } else {\n                newanim.object[newanim.property] = value;\n            }\n        }\n    };\n\n    return laroux_anim;\n\n}());\n\n},{\"./laroux.css.js\":4,\"./laroux.helpers.js\":9}],4:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // css\n    var laroux_css = {\n        // class features\n        hasClass: function (element, className) {\n            return element.classList.contains(className);\n        },\n\n        addClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.add(className);\n            }\n        },\n\n        removeClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.remove(className);\n            }\n        },\n\n        toggleClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                } else {\n                    elements[i].classList.add(className);\n                }\n            }\n        },\n\n        cycleClass: function (elements, className) {\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                    elements[(i + 1) % length].classList.add(className);\n                    return;\n                }\n            }\n        },\n\n        // style features\n        getProperty: function (element, styleName) {\n            var style = getComputedStyle(element);\n\n            styleName = laroux_helpers.antiCamelCase(styleName);\n\n            return style.getPropertyValue(styleName);\n        },\n\n        setProperty: function (element, properties, value) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            if (typeof properties == 'string') {\n                var oldProperties = properties;\n                properties = {};\n                properties[oldProperties] = value;\n            }\n\n            for (var styleName in properties) {\n                if (!properties.hasOwnProperty(styleName)) {\n                    continue;\n                }\n\n                var newStyleName = laroux_helpers.camelCase(styleName);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].style[newStyleName] = properties[styleName];\n                }\n            }\n        },\n\n        // transition features\n        defaultTransition: '2s ease',\n\n        setTransitionSingle: function (element, transition) {\n            var transitions = laroux_helpers.getAsArray(transition),\n                style = getComputedStyle(element),\n                currentTransitions = style.getPropertyValue('transition') || style.getPropertyValue('-webkit-transition') ||\n                    style.getPropertyValue('-ms-transition') || '',\n                currentTransitionsArray;\n\n            if (currentTransitions.length > 0) {\n                currentTransitionsArray = currentTransitions.split(',');\n            } else {\n                currentTransitionsArray = [];\n            }\n\n            for (var item in transitions) {\n                if (!transitions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var styleName,\n                    transitionProperties,\n                    pos = transitions[item].indexOf(' ');\n\n                if (pos !== -1) {\n                    styleName = transitions[item].substring(0, pos);\n                    transitionProperties = transitions[item].substring(pos + 1);\n                } else {\n                    styleName = transitions[item];\n                    transitionProperties = laroux_css.defaultTransition;\n                }\n\n                var found = false;\n                for (var j = 0; j < currentTransitionsArray.length; j++) {\n                    if (currentTransitionsArray[j].trim().localeCompare(styleName) === 0) {\n                        currentTransitionsArray[j] = styleName + ' ' + transitionProperties;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    currentTransitionsArray.push(styleName + ' ' + transitionProperties);\n                }\n            }\n\n            var value = currentTransitionsArray.join(', ');\n\n            element.style.transition = value;\n            element.style.webkitTransition = value;\n            element.style.msTransition = value;\n        },\n\n        setTransition: function (element, transition) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_css.setTransitionSingle(elements[i], transition);\n            }\n        },\n\n        show: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 1 });\n        },\n\n        hide: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 0 });\n        },\n\n        // measurement features\n        // height of element without padding, margin and border\n        height: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('height');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // height of element with padding but without margin and border\n        innerHeight: function (element) {\n            return element.clientHeight;\n        },\n\n        // height of element with padding and border but margin optional\n        outerHeight: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetHeight;\n            }\n\n            var style = getComputedStyle(element),\n                marginTop = style.getPropertyCSSValue('margin-top'),\n                marginBottom = style.getPropertyCSSValue('margin-bottom'),\n                margins = marginTop.getFloatValue(marginTop.primitiveType) +\n                    marginBottom.getFloatValue(marginBottom.primitiveType);\n\n            return Math.ceil(element.offsetHeight + margins);\n        },\n\n        // width of element without padding, margin and border\n        width: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('width');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // width of element with padding but without margin and border\n        innerWidth: function (element) {\n            return element.clientWidth;\n        },\n\n        // width of element with padding and border but margin optional\n        outerWidth: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetWidth;\n            }\n\n            var style = getComputedStyle(element),\n                marginLeft = style.getPropertyCSSValue('margin-left'),\n                marginRight = style.getPropertyCSSValue('margin-right'),\n                margins = marginLeft.getFloatValue(marginLeft.primitiveType) +\n                    marginRight.getFloatValue(marginRight.primitiveType);\n\n            return Math.ceil(element.offsetWidth + margins);\n        },\n\n        top: function (element) {\n            return element.getBoundingClientRect().top +\n                ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n        },\n\n        left: function (element) {\n            return element.getBoundingClientRect().left +\n                ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);\n        },\n\n        aboveTheTop: function (element) {\n            return element.getBoundingClientRect().bottom <= 0;\n        },\n\n        belowTheFold: function (element) {\n            return element.getBoundingClientRect().top > innerHeight;\n        },\n\n        leftOfScreen: function (element) {\n            return element.getBoundingClientRect().right <= 0;\n        },\n\n        rightOfScreen: function (element) {\n            return element.getBoundingClientRect().left > innerWidth;\n        },\n\n        inViewport: function (element) {\n            var rect = element.getBoundingClientRect();\n\n            return !(rect.bottom <= 0 || rect.top > innerHeight ||\n                rect.right <= 0 || rect.left > innerWidth);\n        }\n    };\n\n    return laroux_css;\n\n}());\n\n},{\"./laroux.helpers.js\":9}],5:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n\n},{}],6:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n        // laroux_css = require('./laroux.css.js'),\n        // laroux_triggers = require('./laroux.triggers.js');\n\n    // dom\n    var laroux_dom = {\n        docprop: function (propName) {\n            return document.documentElement.classList.contains(propName);\n        },\n\n        select: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        },\n\n        selectByClass: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByClassName(selector)\n            );\n        },\n\n        selectByTag: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByTagName(selector)\n            );\n        },\n\n        selectById: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        selectSingle: function (selector, parent) {\n            return (parent || document).querySelector(selector);\n        },\n\n        attr: function (element, attributes, value) {\n            if (value === undefined && attributes.constructor !== Object) {\n                return element.getAttribute(attributes);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof attributes === 'string') {\n                var oldAttributes = attributes;\n                attributes = {};\n                attributes[oldAttributes] = value;\n            }\n\n            for (var attributeName in attributes) {\n                if (!attributes.hasOwnProperty(attributeName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (attributes[attributeName] === null) {\n                        element.removeAttribute(attributeName);\n                    } else {\n                        element.setAttribute(attributeName, attributes[attributeName]);\n                    }\n                }\n            }\n        },\n\n        data: function (element, datanames, value) {\n            if (value === undefined && datanames.constructor !== Object) {\n                return element.getAttribute('data-' + datanames);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof datanames == 'string') {\n                var oldDatanames = datanames;\n                datanames = {};\n                datanames[oldDatanames] = value;\n            }\n\n            for (var dataName in datanames) {\n                if (!datanames.hasOwnProperty(dataName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (datanames[dataName] === null) {\n                        element.removeAttribute('data-' + dataName);\n                    } else {\n                        element.setAttribute('data-' + dataName, datanames[dataName]);\n                    }\n                }\n            }\n        },\n\n        eventHistory: [],\n        setEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_dom.setEventSingle(elements[i], eventname, fnc);\n            }\n        },\n\n        setEventSingle: function (element, eventname, fnc) {\n            var fncWrapper = function (e) {\n                if (fnc(e, element) === false) {\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    } else {\n                        event.returnValue = false;\n                    }\n                }\n            };\n\n            laroux_dom.eventHistory.push({ element: element, eventname: eventname, fnc: fnc, fncWrapper: fncWrapper });\n            element.addEventListener(eventname, fncWrapper, false);\n        },\n\n        unsetEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i1 = 0, length1 = elements.length; i1 < length1; i1++) {\n                for (var i2 = 0, length2 = laroux_dom.eventHistory.length; i2 < length2; i2++) {\n                    var item = laroux_dom.eventHistory[i2];\n\n                    if (item === undefined) {\n                        continue;\n                    }\n\n                    if (item.element !== elements[i1]) {\n                        continue;\n                    }\n\n                    if (eventname !== undefined && item.eventname !== eventname) {\n                        continue;\n                    }\n\n                    if (fnc !== undefined && item.fnc !== fnc) {\n                        continue;\n                    }\n\n                    item.element.removeEventListener(item.eventname, item.fncWrapper, false);\n                    delete laroux_dom.eventHistory[i2];\n                }\n            }\n        },\n\n        dispatchEvent: function (element, eventname, data) {\n            var customEvent = document.createEvent('Event');\n            for (var item in data) {\n                if (!data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                customEvent[item] = data[item];\n            }\n\n            customEvent.initEvent(eventname, true, true);\n            element.dispatchEvent(customEvent);\n        },\n\n        create: function (html) {\n            var frag = document.createDocumentFragment(),\n                temp = document.createElement('DIV');\n\n            temp.insertAdjacentHTML('beforeend', html);\n            while (temp.firstChild) {\n                frag.appendChild(temp.firstChild);\n            }\n\n            // nulling out the reference, there is no obvious dispose method\n            temp = null;\n\n            return frag;\n        },\n\n        createElement: function (element, attributes, children) {\n            var elem = document.createElement(element);\n\n            if (attributes !== undefined && attributes.constructor === Object) {\n                for (var item in attributes) {\n                    if (!attributes.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    elem.setAttribute(item, attributes[item]);\n                }\n            }\n\n            if (children !== undefined) {\n                if (children.constructor === Object) {\n                    for (var item2 in children) {\n                        if (!children.hasOwnProperty(item2)) {\n                            continue;\n                        }\n\n                        elem.setAttribute(item2, children[item2]);\n                    }\n                } else if (/* typeof children == 'string' && */children.length > 0) {\n                    laroux_dom.append(elem, children);\n                }\n            }\n\n            return elem;\n        },\n\n        createOption: function (element, key, value, isDefault) {\n            /* old behaviour, does not support optgroups as parents.\n            var count = element.options.length;\n            element.options[count] = new Option(value, key);\n\n            if (isDefault === true) {\n                element.options.selectedIndex = count - 1;\n            }\n            */\n\n            var option = document.createElement('OPTION');\n            option.setAttribute('value', key);\n            if (isDefault === true) {\n                option.setAttribute('checked', 'checked');\n            }\n\n            laroux_dom.append(option, value);\n            element.appendChild(option);\n        },\n\n        selectByValue: function (element, value) {\n            for (var i = 0, length = element.options.length; i < length; i++) {\n                if (element.options[i].getAttribute('value') == value) {\n                    element.selectedIndex = i;\n                    break;\n                }\n            }\n        },/*,\n\n        // TODO: it's redundant for now\n        loadImage: function () {\n            var images = [];\n\n            for (var i = 0, length = arguments.length; i < length; i++) {\n                var image = document.createElement('IMG');\n                image.setAttribute('src', arguments[i]);\n\n                images.push(image);\n            }\n\n            return images;\n        },\n\n        loadAsyncScript: function (path, triggerName, async) {\n            var elem = document.createElement('script');\n\n            elem.type = 'text/javascript';\n            elem.async = (async !== undefined) ? async : true;\n            elem.src = path;\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },\n\n        loadAsyncStyle: function (path, triggerName, async) {\n            var elem = document.createElement('LINK');\n\n            elem.type = 'text/css';\n            elem.async = (async !== undefined) ? async : true;\n            elem.href = path;\n            elem.rel = 'stylesheet';\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },*/\n\n        clear: function (element) {\n            while (element.hasChildNodes()) {\n                element.removeChild(element.firstChild);\n            }\n        },\n\n        insert: function (element, position, content) {\n            element.insertAdjacentHTML(position, content);\n        },\n\n        prepend: function (element, content) {\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        append: function (element, content) {\n            element.insertAdjacentHTML('beforeend', content);\n        },\n\n        replace: function (element, content) {\n            laroux_dom.clear(element);\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        replaceText: function (element, content) {\n            // laroux_dom.clear(element);\n            element.textContent = content;\n        },\n\n        remove: function (element) {\n            element.remove();\n        },\n\n        cloneReturn: 0,\n        cloneAppend: 1,\n        cloneInsertAfter: 2,\n        cloneInsertBefore: 3,\n\n        clone: function (element, type, container, target) {\n            var newElement = element.cloneNode(true);\n\n            if (container === undefined) {\n                container = element.parentNode;\n            }\n            if (target === undefined) {\n                target = element;\n            }\n\n            if (type !== undefined && type != laroux_dom.cloneReturn) {\n                if (type == laroux_dom.cloneAppend) {\n                    container.appendChild(newElement);\n                } else if (type == laroux_dom.cloneInsertAfter) {\n                    container.insertBefore(newElement, target.nextSibling);\n                } else { // type == laroux_dom.cloneInsertBefore\n                    container.insertBefore(newElement, target);\n                }\n            }\n\n            return newElement;\n        }/*,\n\n        // TODO: it's redundant for now\n        applyOperations: function (element, operations) {\n            for (var operation in operations) {\n                if (!operations.hasOwnProperty(operation)) {\n                    continue;\n                }\n\n                for (var binding in operations[operation]) {\n                    if (!operations[operation].hasOwnProperty(binding)) {\n                        continue;\n                    }\n\n                    var value = operations[operation][binding];\n\n                    switch (operation) {\n                        case 'setprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.replace(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'addprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), element.getAttribute(binding.substring(1)) + value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.append(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'removeprop':\n                            if (value.substring(0, 1) == '_') {\n                                element.removeAttribute(value.substring(1));\n                                continue;\n                            }\n\n                            if (value == 'content') {\n                                laroux_dom.clear(element);\n                                continue;\n                            }\n                            break;\n                        case 'addclass':\n                            laroux_css.addClass(element, value);\n                            break;\n                        case 'removeclass':\n                            laroux_css.removeClass(element, value);\n                            break;\n                        case 'addstyle':\n                            laroux_css.setProperty(element, binding, value);\n                            break;\n                        case 'removestyle':\n                            laroux_css.setProperty(element, value, 'inherit !important');\n                            break;\n                        case 'repeat':\n                            break;\n                        default:\n                            console.log(operation);\n                    }\n                }\n            }\n        }*/\n    };\n\n    // a fix for Internet Explorer\n    if (typeof Element !== 'undefined') {\n        if (Element.prototype.remove === undefined) {\n            Element.prototype.remove = function () {\n                if (this.parentElement !== null) {\n                    this.parentElement.removeChild(this);\n                }\n            };\n        }\n    }\n\n    return laroux_dom;\n\n}());\n\n},{\"./laroux.helpers.js\":9}],7:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n\n},{}],8:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_ajax = require('./laroux.ajax.js');\n\n    // forms\n    var laroux_forms = {\n        ajaxForm: function (formobj, fnc, fncBegin) {\n            laroux_dom.setEvent(formobj, 'submit', function () {\n                if (fncBegin !== undefined) {\n                    fncBegin();\n                }\n\n                laroux_ajax.post(\n                    formobj.getAttribute('action'),\n                    laroux_forms.serializeFormData(formobj),\n                    fnc\n                );\n\n                return false;\n            });\n        },\n\n        isFormField: function (element) {\n            if (element.tagName === 'SELECT') {\n                return true;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE' || type === 'CHECKBOX' || type === 'RADIO' || type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return true;\n            }\n\n            return false;\n        },\n\n        getFormFieldValue: function (element) {\n            if (element.disabled === true) {\n                return null;\n            }\n\n            if (element.tagName === 'SELECT') {\n                return element.options[element.selectedIndex].value;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE') {\n                    return element.files[0];\n                }\n\n                if (type === 'CHECKBOX' || type === 'RADIO') {\n                    if (element.checked) {\n                        return element.value;\n                    }\n\n                    return null;\n                }\n\n                if (type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return element.value;\n                }\n\n                return null;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return element.value;\n            }\n\n            return null;\n        },\n\n        setFormFieldValue: function (element, value) {\n            if (element.disabled === true) {\n                return;\n            }\n\n            if (element.tagName === 'SELECT') {\n                for (var option in element.options) {\n                    if (!element.options.hasOwnProperty(option)) {\n                        continue;\n                    }\n\n                    if (element.options[option].value == value) {\n                        element.selectedIndex = option;\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type == 'FILE') {\n                    element.files[0] = value;\n                    return;\n                }\n\n                if (type == 'CHECKBOX' || type == 'RADIO') {\n                    if (value === true || value == element.value) {\n                        element.checked = true;\n                    }\n\n                    return;\n                }\n\n                if (type == 'TEXT' || type == 'PASSWORD' || type == 'HIDDEN') {\n                    element.value = value;\n                    return;\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'TEXTAREA') {\n                element.value = value;\n                return;\n            }\n        },\n\n        toggleFormEditing: function (formobj, value) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            if (value === undefined) {\n                if (formobj.getAttribute('data-last-enabled') === null) {\n                    formobj.setAttribute('data-last-enabled', 'enabled');\n                    value = false;\n                } else {\n                    formobj.removeAttribute('data-last-enabled');\n                    value = true;\n                }\n            }\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                if (!laroux_forms.isFormField(selection[selected])) {\n                    continue;\n                }\n\n                var lastDisabled = selection[selected].getAttribute('data-last-disabled');\n                if (!value) {\n                    if (lastDisabled === null) {\n                        if (selection[selected].getAttribute('disabled') !== null) {\n                            selection[selected].setAttribute('data-last-disabled', 'disabled');\n                        }\n                    }\n\n                    selection[selected].setAttribute('disabled', 'disabled');\n                    continue;\n                }\n\n                if (lastDisabled !== null) {\n                    selection[selected].removeAttribute('data-last-disabled');\n                } else {\n                    selection[selected].removeAttribute('disabled');\n                }\n            }\n        },\n\n        serializeFormData: function (formobj) {\n            var formdata = new FormData();\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    formdata.append(selection[selected].getAttribute('name'), value);\n                }\n            }\n\n            return formdata;\n        },\n\n        serialize: function (formobj) {\n            var values = {};\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    values[selection[selected].getAttribute('name')] = value;\n                }\n            }\n\n            return values;\n        },\n\n        deserialize: function (formobj, data) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                laroux_forms.setFormFieldValue(selection[selected], data[selection[selected].getAttribute('name')]);\n            }\n        }\n    };\n\n    return laroux_forms;\n\n}());\n\n},{\"./laroux.ajax.js\":2,\"./laroux.dom.js\":6}],9:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(/%s/g, function () { return Array.prototype.shift.call(args); });\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(obj, function (value) { return value[key]; }, true);\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n\n},{}],10:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_forms = require('./laroux.forms.js');\n\n    // keys\n    var laroux_keys = {\n        keyName: function (keycode) {\n            keycode = keycode.toLowerCase();\n\n            switch (keycode) {\n            case 'backspace':\n                return 8;\n\n            case 'tab':\n                return 9;\n\n            case 'enter':\n            case 'return':\n                return 13;\n\n            case 'esc':\n            case 'escape':\n                return 27;\n\n            case 'space':\n                return 32;\n\n            case 'pgup':\n                return 33;\n\n            case 'pgdn':\n                return 34;\n\n            case 'end':\n                return 35;\n\n            case 'home':\n                return 36;\n\n            case 'left':\n                return 37;\n\n            case 'up':\n                return 38;\n\n            case 'right':\n                return 39;\n\n            case 'down':\n                return 40;\n\n            case 'insert':\n                return 45;\n\n            case 'delete':\n                return 46;\n\n            case 'f1':\n                return 112;\n\n            case 'f2':\n                return 113;\n\n            case 'f3':\n                return 114;\n\n            case 'f4':\n                return 115;\n\n            case 'f5':\n                return 116;\n\n            case 'f6':\n                return 117;\n\n            case 'f7':\n                return 118;\n\n            case 'f8':\n                return 119;\n\n            case 'f9':\n                return 120;\n\n            case 'f10':\n                return 121;\n\n            case 'f11':\n                return 122;\n\n            case 'f12':\n                return 123;\n\n            case ',':\n                return 188;\n\n            case '.':\n                return 190;\n            }\n\n            return String.fromCharCode(keycode);\n        },\n\n        // {target, key, shift, ctrl, alt, disableInputs, fnc}\n        assign: function (options) {\n            var wrapper = function (ev) {\n                if (!ev) {\n                    ev = event;\n                }\n\n                var element = ev.target || ev.srcElement;\n                if (element.nodeType === 3 || element.nodeType === 11) { // element.nodeType === 1 ||\n                    element = element.parentNode;\n                }\n\n                if (options.disableInputs && laroux_forms.isFormField(element)) {\n                    return;\n                }\n\n                if (options.shift && !ev.shiftKey) {\n                    return;\n                }\n\n                if (options.ctrl && !ev.ctrlKey) {\n                    return;\n                }\n\n                if (options.alt && !ev.altKey) {\n                    return;\n                }\n\n                var key = laroux_keys.keyName(options.key);\n                if (key !== (ev.keyCode || ev.which)) {\n                    return;\n                }\n\n                options.fnc(ev);\n\n                return false;\n            };\n\n            laroux_dom.setEvent(options.target || document, 'keydown', wrapper);\n        }\n    };\n\n    return laroux_keys;\n\n}());\n\n},{\"./laroux.dom.js\":6,\"./laroux.forms.js\":8}],11:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_stack = require('./laroux.stack.js');\n\n    // mvc\n    var laroux_mvc = {\n        apps: {},\n        pauseUpdate: false,\n\n        init: function (element, model) {\n            if (element.constructor === String) {\n                element = laroux_dom.selectById(element);\n            }\n\n            // if (model.constructor !== laroux_stack) {\n            //     model = new laroux_stack(model);\n            // }\n\n            var appKey = element.getAttribute('id');\n\n            model.onupdate = function (event) {\n                if (!laroux_mvc.pauseUpdate) {\n                    laroux_mvc.update(appKey); // , [event.key]\n                }\n            };\n\n            laroux_mvc.apps[appKey] = {\n                element: element,\n                model: model // ,\n                // modelKeys: null,\n                // boundElements: null,\n                // eventElements: null\n            };\n\n            laroux_mvc.rebind(appKey);\n        },\n\n        rebind: function (appKey) {\n            var app = laroux_mvc.apps[appKey];\n            /*jslint nomen: true */\n            app.modelKeys = laroux_helpers.getKeysRecursive(app.model._data); // FIXME: works only for $l.stack\n            app.boundElements = {};\n            app.eventElements = [];\n\n            laroux_mvc.scanElements(app, app.element);\n            laroux_mvc.update(appKey);\n\n            var fnc = function (ev, elem) {\n                var binding = laroux_mvc.bindStringParser(elem.getAttribute('lr-event'));\n                // laroux_mvc.pauseUpdate = true;\n                for (var item in binding) {\n                    if (item === null || !binding.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    if (binding[item].charAt(0) == '\\'') {\n                        app.model[item] = binding[item].substring(1, binding[item].length - 1);\n                    } else if (binding[item].substring(0, 5) == 'attr.') {\n                        app.model[item] = elem.getAttribute(binding[item].substring(5));\n                    } else if (binding[item].substring(0, 5) == 'prop.') {\n                        app.model[item] = elem[binding[item].substring(5)];\n                    }\n                }\n                // laroux_mvc.pauseUpdate = false;\n            };\n\n            for (var i = 0, length = app.eventElements.length; i < length; i++) {\n                laroux_dom.setEvent(\n                    app.eventElements[i].element,\n                    app.eventElements[i].binding[null],\n                    fnc\n                );\n            }\n        },\n\n        scanElements: function (app, element) {\n            for (var i = 0, atts = element.attributes, m = atts.length; i < m; i++) {\n                if (atts[i].name == 'lr-bind') {\n                    var binding1 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    for (var item in binding1) {\n                        if (!binding1.hasOwnProperty(item)) {\n                            continue;\n                        }\n\n                        if (app.boundElements[binding1[item]] === undefined) {\n                            app.boundElements[binding1[item]] = [];\n                        }\n\n                        app.boundElements[binding1[item]].push({\n                            element: element,\n                            target: item\n                        });\n                    }\n                } else if (atts[i].name == 'lr-event') {\n                    var binding2 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    app.eventElements.push({\n                        element: element,\n                        binding: binding2\n                    });\n                }\n            }\n\n            for (var j = 0, chldrn = element.childNodes, n = chldrn.length; j < n; j++) {\n                if (chldrn[j].nodeType === 1) {\n                    laroux_mvc.scanElements(app, chldrn[j]);\n                }\n            }\n        },\n\n        update: function (appKey, keys) {\n            var app = laroux_mvc.apps[appKey];\n\n            if (typeof keys == 'undefined') {\n                keys = app.modelKeys;\n            }\n\n            for (var i = 0, length1 = keys.length; i < length1; i++) {\n                if (!(keys[i] in app.boundElements)) {\n                    continue;\n                }\n\n                var boundElement = app.boundElements[keys[i]];\n\n                for (var j = 0, length2 = boundElement.length; j < length2; j++) {\n                    if (boundElement[j].target.substring(0, 6) == 'style.') {\n                        boundElement[j].element.style[boundElement[j].target.substring(6)] = laroux_helpers.getElement(app.model, keys[i]);\n                    } else if (boundElement[j].target.substring(0, 5) == 'attr.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element.setAttribute(boundElement[j].target.substring(5), laroux_helpers.getElement(app.model, keys[i]));\n                    } else if (boundElement[j].target.substring(0, 5) == 'prop.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element[boundElement[j].target.substring(5)] = laroux_helpers.getElement(app.model, keys[i]);\n                    }\n                }\n            }\n        },\n\n        bindStringParser: function (text) {\n            var lastBuffer = null,\n                buffer = '',\n                state = 0,\n                result = {};\n\n            for (var i = 0, length = text.length; i < length; i++) {\n                var curr = text.charAt(i);\n\n                if (state === 0) {\n                    if (curr == ':') {\n                        state = 1;\n                        lastBuffer = buffer.trim();\n                        buffer = '';\n                        continue;\n                    }\n                }\n\n                if (curr == ',') {\n                    state = 0;\n                    result[lastBuffer] = buffer.trim();\n                    buffer = '';\n                    continue;\n                }\n\n                buffer += curr;\n            }\n\n            if (buffer.length > 0) {\n                result[lastBuffer] = buffer.trim();\n            }\n\n            return result;\n        }\n    };\n\n    return laroux_mvc;\n\n}());\n\n},{\"./laroux.dom.js\":6,\"./laroux.helpers.js\":9,\"./laroux.stack.js\":12}],12:[function(require,module,exports){\n/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n\n},{}],13:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // templates\n    var laroux_templates = {\n        engines: {\n            plain: {\n                compile: function (template, options) {\n                    return [template, options];\n                },\n\n                render: function (compiled, model) {\n                    var result = compiled[0],\n                        dict = [],\n                        lastIndex = 0,\n                        nextIndex;\n\n                    while ((nextIndex = result.indexOf('{{', lastIndex)) !== -1) {\n                        nextIndex += 2;\n                        var closeIndex = result.indexOf('}}', nextIndex);\n                        if (closeIndex === -1) {\n                            break;\n                        }\n\n                        var key = result.substring(nextIndex, closeIndex);\n                        dict['{{' + key + '}}'] = laroux_helpers.getElement(model, key, '');\n                        lastIndex = closeIndex + 2;\n                    }\n\n                    return laroux_helpers.replaceAll(result, dict);\n                }\n            },\n\n            hogan: {\n                compile: function (template, options) {\n                    return Hogan.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled.render(model);\n                }\n            },\n\n            mustache: {\n                compile: function (template, options) {\n                    return Mustache.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            handlebars: {\n                compile: function (template, options) {\n                    return Handlebars.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            lodash: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            underscore: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            }\n        },\n        engine: 'plain',\n\n        apply: function (element, model, options) {\n            var content, engine = laroux_templates.engines[laroux_templates.engine];\n\n            if (element.nodeType === 1 || element.nodeType === 3 || element.nodeType === 11) {\n                content = element.textContent;\n            } else {\n                content = element.nodeValue;\n            }\n\n            var compiled = engine.compile(content, options);\n            return engine.render(compiled, model);\n        },\n\n        insert: function (element, model, target, position, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.insert(target, position || 'beforeend', output);\n        },\n\n        replace: function (element, model, target, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.replace(target, output);\n        }\n    };\n\n    return laroux_templates;\n\n}());\n\n},{\"./laroux.dom.js\":6,\"./laroux.helpers.js\":9}],14:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n\n},{}],15:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js');\n\n    // touch - partially taken from 'tocca.js' project\n    //         can be found at: https://github.com/GianlucaGuarini/Tocca.js\n    var laroux_touch = {\n        touchStarted: null,\n        swipeTreshold: 80,\n        precision: 30,\n        tapCount: 0,\n        tapTreshold: 200,\n        longTapTreshold: 800,\n        tapTimer: null,\n        pos: null,\n        cached: null,\n\n        events: {\n            start: ['touchstart', 'pointerdown', 'MSPointerDown', 'mousedown'],\n            end: ['touchend', 'pointerup', 'MSPointerUp', 'mouseup'],\n            move: ['touchmove', 'pointermove', 'MSPointerMove', 'mousemove']\n        },\n\n        locatePointer: function (event) {\n            if (event.targetTouches) {\n                event = event.targetTouches[0];\n            }\n\n            laroux_touch.pos = [event.pageX, event.pageY];\n        },\n\n        init: function () {\n            var events = [\n                0,\n                (navigator.msPointerEnabled) ? 2 : 1,\n                3\n            ];\n\n            for (var i = 0, length = events.length; i < length; i++) {\n                laroux_dom.setEventSingle(document, laroux_touch.events.start[events[i]], laroux_touch.onstart);\n                laroux_dom.setEventSingle(document, laroux_touch.events.end[events[i]], laroux_touch.onend);\n                laroux_dom.setEventSingle(document, laroux_touch.events.move[events[i]], laroux_touch.locatePointer);\n            }\n        },\n\n        onstart: function (event) {\n            laroux_touch.locatePointer(event);\n            laroux_touch.cached = [laroux_touch.pos[0], laroux_touch.pos[1]];\n            laroux_touch.touchStarted = Date.now();\n            /*jslint plusplus: true */\n            laroux_touch.tapCount++;\n\n            var fnc = function () {\n                if (laroux_touch.cached[0] >= laroux_touch.pos[0] - laroux_touch.precision &&\n                        laroux_touch.cached[0] <= laroux_touch.pos[0] + laroux_touch.precision &&\n                        laroux_touch.cached[1] >= laroux_touch.pos[1] - laroux_touch.precision &&\n                        laroux_touch.cached[1] <= laroux_touch.pos[1] + laroux_touch.precision) {\n                    if (laroux_touch.touchStarted === null) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            (laroux_touch.tapCount === 2) ? 'dbltap' : 'tap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    if (Date.now() - laroux_touch.touchStarted > laroux_touch.longTapTreshold) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            'longtap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.touchStarted = null;\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n                    return;\n                }\n\n                laroux_touch.tapCount = 0;\n            };\n\n            clearTimeout(laroux_touch.tapTimer);\n            laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n        },\n\n        onend: function (event) {\n            var delta = [\n                    laroux_touch.pos[0] - laroux_touch.cached[0],\n                    laroux_touch.pos[1] - laroux_touch.cached[1]\n                ],\n                data = {\n                    innerEvent: event,\n                    x: laroux_touch.pos[0],\n                    y: laroux_touch.pos[1],\n                    distance: {\n                        x: Math.abs(delta[0]),\n                        y: Math.abs(delta[1])\n                    }\n                };\n\n            laroux_touch.touchStarted = null;\n\n            if (delta[0] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swiperight', data);\n            }\n\n            if (delta[0] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeleft', data);\n            }\n\n            if (delta[1] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipedown', data);\n            }\n\n            if (delta[1] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeup', data);\n            }\n        }\n    };\n\n    // laroux.ready(laroux_touch.init);\n\n    return laroux_touch;\n\n}());\n\n},{\"./laroux.dom.js\":6}],16:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n\n},{\"./laroux.helpers.js\":9}],17:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_timers = require('./laroux.timers.js'),\n        laroux_date = require('./laroux.date.js');\n\n    // ui\n    var laroux_ui = {\n        floatContainer: null,\n\n        popup: {\n            defaultTimeout: 500,\n\n            createBox: function (id, xclass, message) {\n                return laroux_dom.createElement('DIV', { id: id, 'class': xclass }, message);\n            },\n\n            msgbox: function (timeout, message) {\n                var id = laroux_helpers.getUniqueId(),\n                    obj = laroux_ui.popup.createBox(id, 'larouxMsgBox', message);\n                laroux_ui.floatContainer.appendChild(obj);\n\n                laroux_css.setProperty(obj, { opacity: 1 });\n\n                laroux_timers.set({\n                    timeout: timeout,\n                    reset: false,\n                    ontick: function (x) {\n                        // laroux_css.setProperty(x, { opacity: 0 });\n                        laroux_dom.remove(x);\n                    },\n                    state: obj\n                });\n            }\n        },\n\n        loading: {\n            elementSelector: null,\n            element: null,\n            defaultDelay: 1500,\n            timer: null,\n\n            killTimer: function () {\n                clearTimeout(laroux_ui.loading.timer);\n            },\n\n            hide: function () {\n                laroux_ui.loading.killTimer();\n\n                laroux_css.setProperty(laroux_ui.loading.element, { display: 'none' });\n                localStorage.loadingIndicator = 'false';\n            },\n\n            show: function (delay) {\n                laroux_ui.loading.killTimer();\n\n                if (delay === undefined) {\n                    delay = laroux_ui.loading.defaultDelay;\n                }\n\n                if (delay > 0) {\n                    setTimeout(function () { laroux_ui.loading.show(0); }, delay);\n                } else {\n                    laroux_css.setProperty(laroux_ui.loading.element, { display: 'block' });\n                    localStorage.loadingIndicator = 'true';\n                }\n            },\n\n            init: function () {\n                if (laroux_ui.loading.element === null && laroux_ui.loading.elementSelector !== null) {\n                    laroux_ui.loading.element = laroux_dom.selectSingle(laroux_ui.loading.elementSelector);\n                }\n\n                if (laroux_ui.loading.element !== null) {\n                    laroux_dom.setEvent(window, 'load', laroux_ui.loading.hide);\n                    laroux_dom.setEvent(window, 'beforeunload', laroux_ui.loading.show);\n\n                    if (localStorage.loadingIndicator !== undefined && localStorage.loadingIndicator === 'true') {\n                        laroux_ui.loading.show(0);\n                    } else {\n                        laroux_ui.loading.show();\n                    }\n                }\n            }\n        },\n\n        dynamicDates: {\n            updateDatesElements: null,\n\n            updateDates: function () {\n                if (laroux_ui.dynamicDates.updateDatesElements === null) {\n                    laroux_ui.dynamicDates.updateDatesElements = laroux_dom.select('*[data-epoch]');\n                }\n\n                for (var item in laroux_ui.dynamicDates.updateDatesElements) {\n                    if (!laroux_ui.dynamicDates.updateDatesElements.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    var obj = laroux_ui.dynamicDates.updateDatesElements[item];\n                    // bitshifting (str >> 0) used instead of parseInt(str, 10)\n                    var date = new Date((obj.getAttribute('data-epoch') >> 0) * 1000);\n\n                    laroux_dom.replace(\n                        obj,\n                        laroux_date.getDateString(date)\n                    );\n\n                    obj.setAttribute('title', laroux_date.getLongDateString(date));\n                }\n            },\n\n            init: function () {\n                laroux_timers.set({\n                    timeout: 500,\n                    reset: true,\n                    ontick: laroux_ui.dynamicDates.updateDates\n                });\n            }\n        },\n\n        scrollView: {\n            selectedElements: [],\n\n            onhidden: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 0 });\n                laroux_css.setTransition(elements, ['opacity']);\n            },\n\n            onreveal: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 1 });\n            },\n\n            set: function (element) {\n                var elements = laroux_helpers.getAsArray(element);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (!laroux_css.inViewport(elements[i])) {\n                        laroux_ui.scrollView.selectedElements.push(elements[i]);\n                    }\n                }\n\n                laroux_ui.scrollView.onhidden(laroux_ui.scrollView.selectedElements);\n                laroux_dom.setEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n            },\n\n            reveal: function () {\n                var removeKeys = [],\n                    elements = [];\n\n                laroux_helpers.each(\n                    laroux_ui.scrollView.selectedElements,\n                    function (i, element) {\n                        if (laroux_css.inViewport(element)) {\n                            removeKeys.unshift(i);\n                            elements.push(element);\n                        }\n                    }\n                );\n\n                for (var item in removeKeys) {\n                    if (!removeKeys.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    laroux_ui.scrollView.selectedElements.splice(removeKeys[item], 1);\n                }\n\n                if (laroux_ui.scrollView.selectedElements.length === 0) {\n                    laroux_dom.unsetEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n                }\n\n                if (elements.length > 0) {\n                    laroux_ui.scrollView.onreveal(elements);\n                }\n            }\n        },\n\n        createFloatContainer: function () {\n            if (!laroux_ui.floatContainer) {\n                laroux_ui.floatContainer = laroux_dom.createElement('DIV', { 'class': 'larouxFloatDiv' });\n                document.body.insertBefore(laroux_ui.floatContainer, document.body.firstChild);\n            }\n        },\n\n        init: function () {\n            laroux_ui.createFloatContainer();\n            laroux_ui.loading.init();\n            laroux_ui.dynamicDates.init();\n        }\n    };\n\n    // laroux.ready(laroux_ui.init);\n\n    return laroux_ui;\n\n}());\n\n},{\"./laroux.css.js\":4,\"./laroux.date.js\":5,\"./laroux.dom.js\":6,\"./laroux.helpers.js\":9,\"./laroux.timers.js\":14}],18:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n\n},{}],19:[function(require,module,exports){\n/*global NodeList, Node */\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // wrapper\n    var laroux_wrapper = function (selector, parent) {\n        var selection;\n\n        if (selector instanceof Array) {\n            selection = selector;\n        } else if (selector instanceof NodeList) {\n            selection = laroux_helpers.toArray(selector);\n        } else if (selector instanceof Node) {\n            selection = [selector];\n        } else {\n            selection = laroux_dom.select(selector, parent);\n        }\n\n        if (selection.length === 1) {\n            return new laroux_wrapper.singleTemplate(selection[0]);\n        }\n\n        return new laroux_wrapper.arrayTemplate(selection);\n    };\n\n    laroux_wrapper.singleTemplate = function (element) {\n        this.source = element;\n        this.isArray = false;\n\n        this.get = function (index) {\n            if (index === 0 || index === undefined) {\n                return this.source;\n            }\n\n            return undefined;\n        };\n\n        this.find = function (selector) {\n            return laroux_wrapper(selector, this.source);\n        };\n    };\n\n    laroux_wrapper.arrayTemplate = function (elements) {\n        this.source = elements;\n        this.isArray = true;\n\n        this.get = function (index) {\n            return this.source[index];\n        };\n    };\n\n    laroux_wrapper.registerBoth = 0;\n    laroux_wrapper.registerSingle = 1;\n    laroux_wrapper.registerArray = 2;\n\n    laroux_wrapper.register = function (name, fnc, scope) {\n        var newFnc = function () {\n            var result = fnc.apply(\n                this,\n                [this.source].concat(laroux_helpers.toArray(arguments))\n            );\n\n            return (result === undefined) ? this : result;\n        };\n\n        switch (scope) {\n        case laroux_wrapper.registerSingle:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            break;\n        case laroux_wrapper.registerArray:\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        default:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        }\n    };\n\n    laroux_wrapper.register('attr', laroux_dom.attr, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('data', laroux_dom.data, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEventSingle, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEvent, laroux_wrapper.registerArray);\n    laroux_wrapper.register('off', laroux_dom.unsetEvent, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('clear', laroux_dom.clear, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('insert', laroux_dom.insert, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('prepend', laroux_dom.prepend, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('append', laroux_dom.append, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replace', laroux_dom.replace, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replaceText', laroux_dom.replaceText, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('remove', laroux_dom.remove, laroux_wrapper.registerSingle);\n\n    laroux_wrapper.register('hasClass', laroux_css.hasClass, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('addClass', laroux_css.addClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('removeClass', laroux_css.removeClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('toggleClass', laroux_css.toggleClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('getProperty', laroux_css.getProperty, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('setProperty', laroux_css.setProperty, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('setTransition', laroux_css.setTransition, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('show', laroux_css.show, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('hide', laroux_css.hide, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('height', laroux_css.height, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerHeight', laroux_css.innerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerHeight', laroux_css.outerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('width', laroux_css.width, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerWidth', laroux_css.innerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerWidth', laroux_css.outerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('top', laroux_css.top, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('left', laroux_css.left, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('aboveTheTop', laroux_css.aboveTheTop, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('belowTheFold', laroux_css.belowTheFold, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('leftOfScreen', laroux_css.leftOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('rightOfScreen', laroux_css.rightOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('inViewport', laroux_css.inViewport, laroux_wrapper.registerSingle);\n\n    return laroux_wrapper;\n\n}());\n\n},{\"./laroux.css.js\":4,\"./laroux.dom.js\":6,\"./laroux.helpers.js\":9}]},{},[1])\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvbGFyb3V4LmpzIiwic3JjL2xhcm91eC5hamF4LmpzIiwic3JjL2xhcm91eC5hbmltLmpzIiwic3JjL2xhcm91eC5jc3MuanMiLCJzcmMvbGFyb3V4LmRhdGUuanMiLCJzcmMvbGFyb3V4LmRvbS5qcyIsInNyYy9sYXJvdXguZXZlbnRzLmpzIiwic3JjL2xhcm91eC5mb3Jtcy5qcyIsInNyYy9sYXJvdXguaGVscGVycy5qcyIsInNyYy9sYXJvdXgua2V5cy5qcyIsInNyYy9sYXJvdXgubXZjLmpzIiwic3JjL2xhcm91eC5zdGFjay5qcyIsInNyYy9sYXJvdXgudGVtcGxhdGVzLmpzIiwic3JjL2xhcm91eC50aW1lcnMuanMiLCJzcmMvbGFyb3V4LnRvdWNoLmpzIiwic3JjL2xhcm91eC50cmlnZ2Vycy5qcyIsInNyYy9sYXJvdXgudWkuanMiLCJzcmMvbGFyb3V4LnZhcnMuanMiLCJzcmMvbGFyb3V4LndyYXBwZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pjQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoc2NvcGUpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBjb3JlXG4gICAgdmFyIGxhcm91eCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4LmhlbHBlcnMudG9BcnJheShcbiAgICAgICAgICAgICAgICAocGFyZW50IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgIC8vIEZJWE1FOiBub24tY2hyb21lIG9wdGltaXphdGlvblxuICAgICAgICB2YXIgcmUgPSAvXiMoW15cXCtcXD5cXFtcXF1cXC4jIF0qKSQvLmV4ZWMoc2VsZWN0b3IpO1xuICAgICAgICBpZiAocmUpIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyZVsxXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJlbnQuZ2V0RWxlbWVudEJ5SWQocmVbMV0pO1xuICAgICAgICB9XG4gICAgICAgICovXG5cbiAgICAgICAgcmV0dXJuIChwYXJlbnQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICBpZiAoISgnJGwnIGluIHNjb3BlKSkge1xuICAgICAgICBzY29wZS4kbCA9IGxhcm91eDtcbiAgICB9XG5cbiAgICAvLyBjb3JlIG1vZHVsZXNcbiAgICBsYXJvdXguZXZlbnRzID0gcmVxdWlyZSgnLi9sYXJvdXguZXZlbnRzLmpzJyk7XG4gICAgbGFyb3V4LmhlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG4gICAgbGFyb3V4LnRpbWVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LnRpbWVycy5qcycpO1xuXG4gICAgbGFyb3V4LmNhY2hlZCA9IHtcbiAgICAgICAgc2luZ2xlOiB7fSxcbiAgICAgICAgYXJyYXk6IHt9LFxuICAgICAgICBpZDoge31cbiAgICB9O1xuXG4gICAgbGFyb3V4LmMgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXguY2FjaGVkLmFycmF5W3NlbGVjdG9yXSB8fCAoXG4gICAgICAgICAgICAgICAgbGFyb3V4LmNhY2hlZC5hcnJheVtzZWxlY3Rvcl0gPSBsYXJvdXguaGVscGVycy50b0FycmF5KFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGFyb3V4LmNhY2hlZC5zaW5nbGVbc2VsZWN0b3JdIHx8IChcbiAgICAgICAgICAgIGxhcm91eC5jYWNoZWQuc2luZ2xlW3NlbGVjdG9yXSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpXG4gICAgICAgICk7XG4gICAgfTtcblxuICAgIGxhcm91eC5pZCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgIHJldHVybiAocGFyZW50IHx8IGRvY3VtZW50KS5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIGxhcm91eC5pZGMgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGxhcm91eC5jYWNoZWQuaWRbc2VsZWN0b3JdIHx8XG4gICAgICAgICAgICAobGFyb3V4LmNhY2hlZC5pZFtzZWxlY3Rvcl0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RvcikpO1xuICAgIH07XG5cbiAgICBsYXJvdXgucmVhZHlQYXNzZWQgPSBmYWxzZTtcblxuICAgIGxhcm91eC5leHRlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBsYXJvdXgpO1xuICAgICAgICBsYXJvdXguaGVscGVycy5leHRlbmRPYmplY3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgbGFyb3V4LmV4dGVuZE9iamVjdCA9IGxhcm91eC5oZWxwZXJzLmV4dGVuZE9iamVjdDtcbiAgICBsYXJvdXguZWFjaCA9IGxhcm91eC5oZWxwZXJzLmVhY2g7XG4gICAgbGFyb3V4Lm1hcCA9IGxhcm91eC5oZWxwZXJzLm1hcDtcbiAgICBsYXJvdXguaW5kZXggPSBsYXJvdXguaGVscGVycy5pbmRleDtcbiAgICBsYXJvdXguYWVhY2ggPSBsYXJvdXguaGVscGVycy5hZWFjaDtcbiAgICBsYXJvdXguYW1hcCA9IGxhcm91eC5oZWxwZXJzLmFtYXA7XG4gICAgbGFyb3V4LmFpbmRleCA9IGxhcm91eC5oZWxwZXJzLmFpbmRleDtcblxuICAgIGxhcm91eC5yZWFkeSA9IGZ1bmN0aW9uIChmbmMpIHtcbiAgICAgICAgaWYgKCFsYXJvdXgucmVhZHlQYXNzZWQpIHtcbiAgICAgICAgICAgIGxhcm91eC5ldmVudHMuYWRkKCdDb250ZW50TG9hZGVkJywgZm5jKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZuYygpO1xuICAgIH07XG5cbiAgICAvLyBvcHRpb25hbCBtb2R1bGVzXG4gICAgbGFyb3V4LndyYXBwZXIgPSByZXF1aXJlKCcuL2xhcm91eC53cmFwcGVyLmpzJyk7XG4gICAgbGFyb3V4LmFqYXggPSByZXF1aXJlKCcuL2xhcm91eC5hamF4LmpzJyk7XG4gICAgbGFyb3V4LmNzcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmNzcy5qcycpO1xuICAgIGxhcm91eC5kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKTtcbiAgICAvLyBsYXJvdXguZXZlbnRzID0gcmVxdWlyZSgnLi9sYXJvdXguZXZlbnRzLmpzJyk7XG4gICAgbGFyb3V4LmZvcm1zID0gcmVxdWlyZSgnLi9sYXJvdXguZm9ybXMuanMnKTtcbiAgICAvLyBsYXJvdXguaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKTtcbiAgICAvLyBsYXJvdXgudGltZXJzID0gcmVxdWlyZSgnLi9sYXJvdXgudGltZXJzLmpzJyk7XG4gICAgbGFyb3V4LnRyaWdnZXJzID0gcmVxdWlyZSgnLi9sYXJvdXgudHJpZ2dlcnMuanMnKTtcbiAgICBsYXJvdXgudmFycyA9IHJlcXVpcmUoJy4vbGFyb3V4LnZhcnMuanMnKTtcblxuICAgIGxhcm91eC5hbmltID0gcmVxdWlyZSgnLi9sYXJvdXguYW5pbS5qcycpO1xuICAgIGxhcm91eC5kYXRlID0gcmVxdWlyZSgnLi9sYXJvdXguZGF0ZS5qcycpO1xuICAgIGxhcm91eC5rZXlzID0gcmVxdWlyZSgnLi9sYXJvdXgua2V5cy5qcycpO1xuICAgIGxhcm91eC5tdmMgPSByZXF1aXJlKCcuL2xhcm91eC5tdmMuanMnKTtcbiAgICBsYXJvdXguc3RhY2sgPSByZXF1aXJlKCcuL2xhcm91eC5zdGFjay5qcycpO1xuICAgIGxhcm91eC50ZW1wbGF0ZXMgPSByZXF1aXJlKCcuL2xhcm91eC50ZW1wbGF0ZXMuanMnKTtcbiAgICBsYXJvdXgudG91Y2ggPSByZXF1aXJlKCcuL2xhcm91eC50b3VjaC5qcycpO1xuICAgIGxhcm91eC51aSA9IHJlcXVpcmUoJy4vbGFyb3V4LnVpLmpzJyk7XG5cbiAgICBpZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ0RPTUNvbnRlbnRMb2FkZWQnLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4LnJlYWR5UGFzc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eC5ldmVudHMuaW52b2tlKCdDb250ZW50TG9hZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHNldEludGVydmFsKGxhcm91eC50aW1lcnMub250aWNrLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXgudG91Y2guaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXgucmVhZHlQYXNzZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGFyb3V4O1xuXG59KHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogZ2xvYmFsKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9ldmVudHMgPSByZXF1aXJlKCcuL2xhcm91eC5ldmVudHMuanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG5cbiAgICAvLyBhamF4IC0gcGFydGlhbGx5IHRha2VuIGZyb20gJ2pxdWVyeSBpbiBwYXJ0cycgcHJvamVjdFxuICAgIC8vICAgICAgICBjYW4gYmUgZm91bmQgYXQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9teXRoei9qcXVpcC9cbiAgICB2YXIgbGFyb3V4X2FqYXggPSB7XG4gICAgICAgIGNvcnNEZWZhdWx0OiBmYWxzZSxcblxuICAgICAgICB3cmFwcGVyczoge1xuICAgICAgICAgICAgcmVnaXN0cnk6IHtcbiAgICAgICAgICAgICAgICAnbGFyb3V4LmpzJzogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXRhLmlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yOiAnICsgZGF0YS5lcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iajtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5mb3JtYXQgPT09ICdqc29uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShkYXRhLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YS5mb3JtYXQgPT09ICdzY3JpcHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKmpzaGludCBldmlsOnRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qanNsaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZXZhbChkYXRhLm9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIGlmIChkYXRhLmZvcm1hdCA9PSAneG1sJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gZGF0YS5vYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5hbWUsIGZuYykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LndyYXBwZXJzLnJlZ2lzdHJ5W25hbWVdID0gZm5jO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHhEb21haW5PYmplY3Q6IGZhbHNlLFxuICAgICAgICB4bWxIdHRwUmVxdWVzdE9iamVjdDogbnVsbCxcbiAgICAgICAgeERvbWFpblJlcXVlc3RPYmplY3Q6IG51bGwsXG4gICAgICAgIHhocjogZnVuY3Rpb24gKGNyb3NzRG9tYWluKSB7XG4gICAgICAgICAgICBpZiAobGFyb3V4X2FqYXgueG1sSHR0cFJlcXVlc3RPYmplY3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY3Jvc3NEb21haW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoISgnd2l0aENyZWRlbnRpYWxzJyBpbiBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdCkgJiYgdHlwZW9mIFhEb21haW5SZXF1ZXN0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54RG9tYWluT2JqZWN0ID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2FqYXgueERvbWFpblJlcXVlc3RPYmplY3QgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LnhEb21haW5SZXF1ZXN0T2JqZWN0ID0gbmV3IFhEb21haW5SZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2FqYXgueERvbWFpblJlcXVlc3RPYmplY3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54RG9tYWluT2JqZWN0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfYWpheC54bWxIdHRwUmVxdWVzdE9iamVjdDtcbiAgICAgICAgfSxcblxuICAgICAgICB4aHJSZXNwOiBmdW5jdGlvbiAoeGhyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgd3JhcHBlckZ1bmN0aW9uID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlc3BvbnNlLVdyYXBwZXItRnVuY3Rpb24nKSxcbiAgICAgICAgICAgICAgICByZXNwb25zZTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGF0YXR5cGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5kYXRhdHlwZSA9PT0gJ2pzb24nKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGF0eXBlID09PSAnc2NyaXB0Jykge1xuICAgICAgICAgICAgICAgIC8qanNoaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgIC8qanNsaW50IGV2aWw6dHJ1ZSAqL1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gZXZhbCh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5kYXRhdHlwZSA9PT0gJ3htbCcpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHhoci5yZXNwb25zZVhNTDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAod3JhcHBlckZ1bmN0aW9uICYmICh3cmFwcGVyRnVuY3Rpb24gaW4gbGFyb3V4X2FqYXgud3JhcHBlcnMucmVnaXN0cnkpKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBsYXJvdXhfYWpheC53cmFwcGVycy5yZWdpc3RyeVt3cmFwcGVyRnVuY3Rpb25dKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgd3JhcHBlckZ1bmM6IHdyYXBwZXJGdW5jdGlvblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICBtYWtlUmVxdWVzdDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBjb3JzID0gb3B0aW9ucy5jb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHhociA9IGxhcm91eF9hamF4Lnhocihjb3JzKSxcbiAgICAgICAgICAgICAgICB1cmwgPSBvcHRpb25zLnVybCxcbiAgICAgICAgICAgICAgICB0aW1lciA9IG51bGwsXG4gICAgICAgICAgICAgICAgbiA9IDA7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnRpbWVvdXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRpbWVyID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lb3V0Rm4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGltZW91dEZuKG9wdGlvbnMudXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50aW1lb3V0XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpbWVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPCAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXMgPSBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzU3VjY2VzcyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzID0gbGFyb3V4X2FqYXgueGhyUmVzcCh4aHIsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5lcnJvcih4aHIsIHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmludm9rZSgnYWpheEVycm9yJywgW3hociwgeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQsIG9wdGlvbnNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnN1Y2Nlc3MgIT09IHVuZGVmaW5lZCAmJiByZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdWNjZXNzKHJlcy5yZXNwb25zZSwgcmVzLndyYXBwZXJGdW5jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmludm9rZSgnYWpheFN1Y2Nlc3MnLCBbeGhyLCByZXMucmVzcG9uc2UsIHJlcy53cmFwcGVyRnVuYywgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3IoeGhyLCB4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9ldmVudHMuaW52b2tlKCdhamF4RXJyb3InLCBbeGhyLCB4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCwgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY29tcGxldGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5jb21wbGV0ZSh4aHIsIHhoci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9ldmVudHMuaW52b2tlKCdhamF4Q29tcGxldGUnLCBbeGhyLCB4aHIuc3RhdHVzVGV4dCwgb3B0aW9uc10pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5wcm9ncmVzcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qanNsaW50IHBsdXNwbHVzOiB0cnVlICovXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHJvZ3Jlc3MoKytuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5nZXRkYXRhICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy5nZXRkYXRhICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2V0ZGF0YS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IGxhcm91eF9oZWxwZXJzLmJ1aWxkUXVlcnlTdHJpbmcob3B0aW9ucy5nZXRkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPCAwKSA/ICc/JyA6ICcmJykgKyBxdWVyeVN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPCAwKSA/ICc/JyA6ICcmJykgKyBvcHRpb25zLmdldGRhdGE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5qc29ucCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdXJsICs9ICgodXJsLmluZGV4T2YoJz8nKSA8IDApID8gJz8nIDogJyYnKSArICdqc29ucD0nICsgb3B0aW9ucy5qc29ucDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFsYXJvdXhfYWpheC54RG9tYWluT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgeGhyLm9wZW4ob3B0aW9ucy50eXBlLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB4aHIub3BlbihvcHRpb25zLnR5cGUsIHVybCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMueGhyRmllbGRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zLnhockZpZWxkcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zLnhockZpZWxkcy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHJbaV0gPSBvcHRpb25zLnhockZpZWxkc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIHx8IHt9O1xuXG4gICAgICAgICAgICAgICAgaWYgKCFjb3JzKSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ1gtUmVxdWVzdGVkLVdpdGgnXSA9ICdYTUxIdHRwUmVxdWVzdCc7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMud3JhcHBlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyc1snWC1XcmFwcGVyLUZ1bmN0aW9uJ10gPSAnbGFyb3V4LmpzJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gaGVhZGVycykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnMuaGFzT3duUHJvcGVydHkoaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaiwgaGVhZGVyc1tqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wb3N0ZGF0YSA9PT0gdW5kZWZpbmVkIHx8IG9wdGlvbnMucG9zdGRhdGEgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICB4aHIuc2VuZChudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAob3B0aW9ucy5wb3N0ZGF0YXR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdqc29uJzpcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5wb3N0ZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmb3JtJzpcbiAgICAgICAgICAgICAgICAgICAgeGhyLnNlbmQobGFyb3V4X2hlbHBlcnMuYnVpbGRGb3JtRGF0YShvcHRpb25zLnBvc3RkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKG9wdGlvbnMucG9zdGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnaHRtbCcsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SnNvbjogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBnZXRkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRKc29uUDogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgbWV0aG9kLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIGpzb25wOiBtZXRob2QsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0U2NyaXB0OiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHBvc3Q6IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIHBvc3RkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgcG9zdGRhdGF0eXBlOiAnZm9ybScsXG4gICAgICAgICAgICAgICAgd3JhcHBlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBwb3N0SnNvbjogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgcG9zdGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICBwb3N0ZGF0YXR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD1VVEYtOCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9hamF4O1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKSxcbiAgICAgICAgbGFyb3V4X2NzcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmNzcy5qcycpO1xuXG4gICAgLy8gYW5pbVxuICAgIHZhciBsYXJvdXhfYW5pbSA9IHtcbiAgICAgICAgZGF0YTogW10sXG5cbiAgICAgICAgZng6IHtcbiAgICAgICAgICAgIGludGVycG9sYXRlOiBmdW5jdGlvbiAoc291cmNlLCB0YXJnZXQsIHNoaWZ0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIChzb3VyY2UgKyAodGFyZ2V0IC0gc291cmNlKSAqIHNoaWZ0KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGVhc2luZzogZnVuY3Rpb24gKHBvcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAoLU1hdGguY29zKHBvcyAqIE1hdGguUEkpIC8gMikgKyAwLjU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8ge29iamVjdCwgcHJvcGVydHksIGZyb20sIHRvLCB0aW1lLCB1bml0LCByZXNldH1cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3YW5pbSkge1xuICAgICAgICAgICAgbmV3YW5pbS5zdGFydFRpbWUgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAobmV3YW5pbS51bml0ID09PSB1bmRlZmluZWQgfHwgbmV3YW5pbS51bml0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3YW5pbS51bml0ID0gJyc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChuZXdhbmltLmZyb20gPT09IHVuZGVmaW5lZCB8fCBuZXdhbmltLmZyb20gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAobmV3YW5pbS5vYmplY3QgPT09IGRvY3VtZW50LmJvZHkgJiYgbmV3YW5pbS5wcm9wZXJ0eSA9PT0gJ3Njcm9sbFRvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3YW5pbS5mcm9tID0gKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdhbmltLmZyb20gPSBuZXdhbmltLm9iamVjdFtuZXdhbmltLnByb3BlcnR5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbmV3YW5pbS5mcm9tID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIG5ld2FuaW0uZnJvbSA9IE51bWJlcihuZXdhbmltLmZyb20pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3YW5pbS5yZXNldCA9PT0gdW5kZWZpbmVkIHx8IG5ld2FuaW0ucmVzZXQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXdhbmltLnJlc2V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIChuZXdhbmltLmlkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8vICAgICBuZXdhbmltLmlkID0gbGFyb3V4X2hlbHBlcnMuZ2V0VW5pcXVlSWQoKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgbGFyb3V4X2FuaW0uZGF0YS5wdXNoKG5ld2FuaW0pO1xuICAgICAgICAgICAgaWYgKGxhcm91eF9hbmltLmRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxhcm91eF9hbmltLm9uZnJhbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldENzczogZnVuY3Rpb24gKG5ld2FuaW0pIHtcbiAgICAgICAgICAgIGlmIChuZXdhbmltLmZyb20gPT09IHVuZGVmaW5lZCB8fCBuZXdhbmltLmZyb20gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBuZXdhbmltLmZyb20gPSBsYXJvdXhfY3NzLmdldFByb3BlcnR5KG5ld2FuaW0ub2JqZWN0LCBuZXdhbmltLnByb3BlcnR5KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbmV3YW5pbS5vYmplY3QgPSBuZXdhbmltLm9iamVjdC5zdHlsZTtcbiAgICAgICAgICAgIG5ld2FuaW0ucHJvcGVydHkgPSBsYXJvdXhfaGVscGVycy5jYW1lbENhc2UobmV3YW5pbS5wcm9wZXJ0eSk7XG5cbiAgICAgICAgICAgIGxhcm91eF9hbmltLnNldChuZXdhbmltKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldEtleSA9IG51bGw7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X2FuaW0uZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X2FuaW0uZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBsYXJvdXhfYW5pbS5kYXRhW2l0ZW1dO1xuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLmlkICE9PSB1bmRlZmluZWQgJiYgY3VycmVudEl0ZW0uaWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0S2V5ID0gaXRlbTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGFyZ2V0S2V5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2FuaW0uZGF0YS5zcGxpY2UodGFyZ2V0S2V5LCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uZnJhbWU6IGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHZhciByZW1vdmVLZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF9hbmltLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9hbmltLmRhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gbGFyb3V4X2FuaW0uZGF0YVtpdGVtXTtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0uc3RhcnRUaW1lID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLnN0YXJ0VGltZSA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gbGFyb3V4X2FuaW0uc3RlcChjdXJyZW50SXRlbSwgdGltZXN0YW1wKTtcblxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVzdGFtcCA+IGN1cnJlbnRJdGVtLnN0YXJ0VGltZSArIGN1cnJlbnRJdGVtLnRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLnJlc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5zdGFydFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3YW5pbS5vYmplY3QgPT09IGRvY3VtZW50LmJvZHkgJiYgbmV3YW5pbS5wcm9wZXJ0eSA9PSAnc2Nyb2xsVG9wJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvKDAsIGN1cnJlbnRJdGVtLmZyb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyBzY3JvbGxUbygwLCBjdXJyZW50SXRlbS5mcm9tKTsgfSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLm9iamVjdFtjdXJyZW50SXRlbS5wcm9wZXJ0eV0gPSBjdXJyZW50SXRlbS5mcm9tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlS2V5cy51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtMiBpbiByZW1vdmVLZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZW1vdmVLZXlzLmhhc093blByb3BlcnR5KGl0ZW0yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfYW5pbS5kYXRhLnNwbGljZShyZW1vdmVLZXlzW2l0ZW0yXSwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChsYXJvdXhfYW5pbS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobGFyb3V4X2FuaW0ub25mcmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RlcDogZnVuY3Rpb24gKG5ld2FuaW0sIHRpbWVzdGFtcCkge1xuICAgICAgICAgICAgdmFyIGZpbmlzaFQgPSBuZXdhbmltLnN0YXJ0VGltZSArIG5ld2FuaW0udGltZSxcbiAgICAgICAgICAgICAgICBzaGlmdCA9ICh0aW1lc3RhbXAgPiBmaW5pc2hUKSA/IDEgOiAodGltZXN0YW1wIC0gbmV3YW5pbS5zdGFydFRpbWUpIC8gbmV3YW5pbS50aW1lO1xuXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBsYXJvdXhfYW5pbS5meC5pbnRlcnBvbGF0ZShcbiAgICAgICAgICAgICAgICBuZXdhbmltLmZyb20sXG4gICAgICAgICAgICAgICAgbmV3YW5pbS50byxcbiAgICAgICAgICAgICAgICBsYXJvdXhfYW5pbS5meC5lYXNpbmcoc2hpZnQpXG4gICAgICAgICAgICApICsgbmV3YW5pbS51bml0O1xuXG4gICAgICAgICAgICBpZiAobmV3YW5pbS5vYmplY3QgPT09IGRvY3VtZW50LmJvZHkgJiYgbmV3YW5pbS5wcm9wZXJ0eSA9PSAnc2Nyb2xsVG9wJykge1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvKDAsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2Nyb2xsVG8oMCwgdmFsdWUpOyB9LCAxKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3YW5pbS5vYmplY3RbbmV3YW5pbS5wcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2FuaW07XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gY3NzXG4gICAgdmFyIGxhcm91eF9jc3MgPSB7XG4gICAgICAgIC8vIGNsYXNzIGZlYXR1cmVzXG4gICAgICAgIGhhc0NsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhZGRDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjeWNsZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudHMsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5jb250YWlucyhjbGFzc05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbKGkgKyAxKSAlIGxlbmd0aF0uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHN0eWxlIGZlYXR1cmVzXG4gICAgICAgIGdldFByb3BlcnR5OiBmdW5jdGlvbiAoZWxlbWVudCwgc3R5bGVOYW1lKSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBzdHlsZU5hbWUgPSBsYXJvdXhfaGVscGVycy5hbnRpQ2FtZWxDYXNlKHN0eWxlTmFtZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHN0eWxlTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0UHJvcGVydHk6IGZ1bmN0aW9uIChlbGVtZW50LCBwcm9wZXJ0aWVzLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0aWVzID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZFByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgPSB7fTtcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzW29sZFByb3BlcnRpZXNdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHN0eWxlTmFtZSBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG5ld1N0eWxlTmFtZSA9IGxhcm91eF9oZWxwZXJzLmNhbWVsQ2FzZShzdHlsZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnN0eWxlW25ld1N0eWxlTmFtZV0gPSBwcm9wZXJ0aWVzW3N0eWxlTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHRyYW5zaXRpb24gZmVhdHVyZXNcbiAgICAgICAgZGVmYXVsdFRyYW5zaXRpb246ICcycyBlYXNlJyxcblxuICAgICAgICBzZXRUcmFuc2l0aW9uU2luZ2xlOiBmdW5jdGlvbiAoZWxlbWVudCwgdHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdmFyIHRyYW5zaXRpb25zID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheSh0cmFuc2l0aW9uKSxcbiAgICAgICAgICAgICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgY3VycmVudFRyYW5zaXRpb25zID0gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgndHJhbnNpdGlvbicpIHx8IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy13ZWJraXQtdHJhbnNpdGlvbicpIHx8XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy1tcy10cmFuc2l0aW9uJykgfHwgJycsXG4gICAgICAgICAgICAgICAgY3VycmVudFRyYW5zaXRpb25zQXJyYXk7XG5cbiAgICAgICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5ID0gY3VycmVudFRyYW5zaXRpb25zLnNwbGl0KCcsJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5ID0gW107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdHJhbnNpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRyYW5zaXRpb25zLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzdHlsZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0aWVzLFxuICAgICAgICAgICAgICAgICAgICBwb3MgPSB0cmFuc2l0aW9uc1tpdGVtXS5pbmRleE9mKCcgJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocG9zICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZU5hbWUgPSB0cmFuc2l0aW9uc1tpdGVtXS5zdWJzdHJpbmcoMCwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvblByb3BlcnRpZXMgPSB0cmFuc2l0aW9uc1tpdGVtXS5zdWJzdHJpbmcocG9zICsgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVOYW1lID0gdHJhbnNpdGlvbnNbaXRlbV07XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0aWVzID0gbGFyb3V4X2Nzcy5kZWZhdWx0VHJhbnNpdGlvbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbnNBcnJheVtqXS50cmltKCkubG9jYWxlQ29tcGFyZShzdHlsZU5hbWUpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbnNBcnJheVtqXSA9IHN0eWxlTmFtZSArICcgJyArIHRyYW5zaXRpb25Qcm9wZXJ0aWVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5LnB1c2goc3R5bGVOYW1lICsgJyAnICsgdHJhbnNpdGlvblByb3BlcnRpZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gY3VycmVudFRyYW5zaXRpb25zQXJyYXkuam9pbignLCAnKTtcblxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLndlYmtpdFRyYW5zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubXNUcmFuc2l0aW9uID0gdmFsdWU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0VHJhbnNpdGlvbjogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvblNpbmdsZShlbGVtZW50c1tpXSwgdHJhbnNpdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvblByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbihlbGVtZW50LCAnb3BhY2l0eSAnICsgdHJhbnNpdGlvblByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb24oZWxlbWVudCwgJ29wYWNpdHknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50LCB7IG9wYWNpdHk6IDEgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBpZiAodHJhbnNpdGlvblByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbihlbGVtZW50LCAnb3BhY2l0eSAnICsgdHJhbnNpdGlvblByb3BlcnRpZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb24oZWxlbWVudCwgJ29wYWNpdHknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50LCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gbWVhc3VyZW1lbnQgZmVhdHVyZXNcbiAgICAgICAgLy8gaGVpZ2h0IG9mIGVsZW1lbnQgd2l0aG91dCBwYWRkaW5nLCBtYXJnaW4gYW5kIGJvcmRlclxuICAgICAgICBoZWlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGhlaWdodCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ2hlaWdodCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gaGVpZ2h0LmdldEZsb2F0VmFsdWUoaGVpZ2h0LnByaW1pdGl2ZVR5cGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIGhlaWdodCBvZiBlbGVtZW50IHdpdGggcGFkZGluZyBidXQgd2l0aG91dCBtYXJnaW4gYW5kIGJvcmRlclxuICAgICAgICBpbm5lckhlaWdodDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBoZWlnaHQgb2YgZWxlbWVudCB3aXRoIHBhZGRpbmcgYW5kIGJvcmRlciBidXQgbWFyZ2luIG9wdGlvbmFsXG4gICAgICAgIG91dGVySGVpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCwgaW5jbHVkZU1hcmdpbikge1xuICAgICAgICAgICAgaWYgKGluY2x1ZGVNYXJnaW4gfHwgZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgbWFyZ2luVG9wID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZSgnbWFyZ2luLXRvcCcpLFxuICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbSA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ21hcmdpbi1ib3R0b20nKSxcbiAgICAgICAgICAgICAgICBtYXJnaW5zID0gbWFyZ2luVG9wLmdldEZsb2F0VmFsdWUobWFyZ2luVG9wLnByaW1pdGl2ZVR5cGUpICtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luQm90dG9tLmdldEZsb2F0VmFsdWUobWFyZ2luQm90dG9tLnByaW1pdGl2ZVR5cGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGVsZW1lbnQub2Zmc2V0SGVpZ2h0ICsgbWFyZ2lucyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gd2lkdGggb2YgZWxlbWVudCB3aXRob3V0IHBhZGRpbmcsIG1hcmdpbiBhbmQgYm9yZGVyXG4gICAgICAgIHdpZHRoOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSxcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCd3aWR0aCcpO1xuXG4gICAgICAgICAgICByZXR1cm4gaGVpZ2h0LmdldEZsb2F0VmFsdWUoaGVpZ2h0LnByaW1pdGl2ZVR5cGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHdpZHRoIG9mIGVsZW1lbnQgd2l0aCBwYWRkaW5nIGJ1dCB3aXRob3V0IG1hcmdpbiBhbmQgYm9yZGVyXG4gICAgICAgIGlubmVyV2lkdGg6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB3aWR0aCBvZiBlbGVtZW50IHdpdGggcGFkZGluZyBhbmQgYm9yZGVyIGJ1dCBtYXJnaW4gb3B0aW9uYWxcbiAgICAgICAgb3V0ZXJXaWR0aDogZnVuY3Rpb24gKGVsZW1lbnQsIGluY2x1ZGVNYXJnaW4pIHtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlTWFyZ2luIHx8IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgbWFyZ2luTGVmdCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ21hcmdpbi1sZWZ0JyksXG4gICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCdtYXJnaW4tcmlnaHQnKSxcbiAgICAgICAgICAgICAgICBtYXJnaW5zID0gbWFyZ2luTGVmdC5nZXRGbG9hdFZhbHVlKG1hcmdpbkxlZnQucHJpbWl0aXZlVHlwZSkgK1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW5SaWdodC5nZXRGbG9hdFZhbHVlKG1hcmdpblJpZ2h0LnByaW1pdGl2ZVR5cGUpO1xuXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5jZWlsKGVsZW1lbnQub2Zmc2V0V2lkdGggKyBtYXJnaW5zKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b3A6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgK1xuICAgICAgICAgICAgICAgICgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsZWZ0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArXG4gICAgICAgICAgICAgICAgKChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWJvdmVUaGVUb3A6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20gPD0gMDtcbiAgICAgICAgfSxcblxuICAgICAgICBiZWxvd1RoZUZvbGQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgPiBpbm5lckhlaWdodDtcbiAgICAgICAgfSxcblxuICAgICAgICBsZWZ0T2ZTY3JlZW46IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5yaWdodCA8PSAwO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJpZ2h0T2ZTY3JlZW46IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0ID4gaW5uZXJXaWR0aDtcbiAgICAgICAgfSxcblxuICAgICAgICBpblZpZXdwb3J0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgICAgICByZXR1cm4gIShyZWN0LmJvdHRvbSA8PSAwIHx8IHJlY3QudG9wID4gaW5uZXJIZWlnaHQgfHxcbiAgICAgICAgICAgICAgICByZWN0LnJpZ2h0IDw9IDAgfHwgcmVjdC5sZWZ0ID4gaW5uZXJXaWR0aCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9jc3M7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gZGF0ZVxuICAgIHZhciBsYXJvdXhfZGF0ZSA9IHtcbiAgICAgICAgc2hvcnREYXRlRm9ybWF0OiAnZGQuTU0ueXl5eScsXG4gICAgICAgIGxvbmdEYXRlRm9ybWF0OiAnZGQgTU1NTSB5eXl5JyxcbiAgICAgICAgdGltZUZvcm1hdDogJ0hIOm1tJyxcblxuICAgICAgICBtb250aHNTaG9ydDogWydKYW4nLCAnRmViJywgJ01hcicsICdBcHInLCAnTWF5JywgJ0p1bicsICdKdWwnLCAnQXVnJywgJ1NlcCcsICdPY3QnLCAnTm92JywgJ0RlYyddLFxuICAgICAgICBtb250aHNMb25nOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcblxuICAgICAgICBzdHJpbmdzOiB7XG4gICAgICAgICAgICBub3c6ICAgICAnbm93JyxcbiAgICAgICAgICAgIGxhdGVyOiAgICdsYXRlcicsXG4gICAgICAgICAgICBhZ286ICAgICAnYWdvJyxcbiAgICAgICAgICAgIHNlY29uZHM6ICdzZWNvbmRzJyxcbiAgICAgICAgICAgIGFtaW51dGU6ICdhIG1pbnV0ZScsXG4gICAgICAgICAgICBtaW51dGVzOiAnbWludXRlcycsXG4gICAgICAgICAgICBhaG91cjogICAnYSBob3VyJyxcbiAgICAgICAgICAgIGhvdXJzOiAgICdob3VycycsXG4gICAgICAgICAgICBhZGF5OiAgICAnYSBkYXknLFxuICAgICAgICAgICAgZGF5czogICAgJ2RheXMnLFxuICAgICAgICAgICAgYXdlZWs6ICAgJ2Egd2VlaycsXG4gICAgICAgICAgICB3ZWVrczogICAnd2Vla3MnLFxuICAgICAgICAgICAgYW1vbnRoOiAgJ2EgbW9udGgnLFxuICAgICAgICAgICAgbW9udGhzOiAgJ21vbnRocycsXG4gICAgICAgICAgICBheWVhcjogICAnYSB5ZWFyJyxcbiAgICAgICAgICAgIHllYXJzOiAgICd5ZWFycydcbiAgICAgICAgfSxcblxuICAgICAgICBwYXJzZUVwb2NoOiBmdW5jdGlvbiAodGltZXNwYW4sIGxpbWl0V2l0aFdlZWtzKSB7XG4gICAgICAgICAgICBpZiAodGltZXNwYW4gPCA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvIDEwMDApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5zZWNvbmRzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGltZXNwYW4gPCA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDYwICogMTAwMCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVzcGFuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5zdHJpbmdzLmFtaW51dGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5taW51dGVzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGltZXNwYW4gPCAyNCAqIDYwICogNjAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSBNYXRoLmNlaWwodGltZXNwYW4gLyAoNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5haG91cjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW4gKyAnICcgKyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmhvdXJzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGltZXNwYW4gPCA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hZGF5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MuZGF5cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNCAqIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSBNYXRoLmNlaWwodGltZXNwYW4gLyAoNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hd2VlaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW4gKyAnICcgKyBsYXJvdXhfZGF0ZS5zdHJpbmdzLndlZWtzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGltaXRXaXRoV2Vla3MgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgMzAgKiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDMwICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRpbWVzcGFuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5zdHJpbmdzLmFtb250aDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW4gKyAnICcgKyBsYXJvdXhfZGF0ZS5zdHJpbmdzLm1vbnRocztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGltZXNwYW4gPSBNYXRoLmNlaWwodGltZXNwYW4gLyAoMzY1ICogMjQgKiA2MCAqIDYwICogMTAwMCkpO1xuXG4gICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5heWVhcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy55ZWFycztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRDdXN0b21EYXRlU3RyaW5nOiBmdW5jdGlvbiAoZm9ybWF0LCBkYXRlKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gZGF0ZSB8fCBuZXcgRGF0ZSgpO1xuXG4gICAgICAgICAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgL3l5eXl8eXl8TU1NTXxNTU18TU18TXxkZHxkfGhofGh8SEh8SHxtbXxtfHNzfHN8dHR8dC9nLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3l5eXknOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5nZXRGdWxsWWVhcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3l5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0WWVhcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ01NTU0nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLm1vbnRoc0xvbmdbbm93LmdldE1vbnRoKCldO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ01NTSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUubW9udGhzU2hvcnRbbm93LmdldE1vbnRoKCldO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ01NJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgKG5vdy5nZXRNb250aCgpICsgMSkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldE1vbnRoKCkgKyAxO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2RkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgbm93LmdldERhdGUoKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0RGF0ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2hoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob3VyMSA9IG5vdy5nZXRIb3VycygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgnMCcgKyAoKChob3VyMSAlIDEyKSA+IDApID8gaG91cjEgJSAxMiA6IDEyKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBob3VyMiA9IG5vdy5nZXRIb3VycygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoaG91cjIgJSAxMikgPiAwKSA/IGhvdXIyICUgMTIgOiAxMjtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdISCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRIb3VycygpKS5zdWJzdHIoLTIsIDIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0gnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5nZXRIb3VycygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ21tJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgbm93LmdldE1pbnV0ZXMoKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0TWludXRlcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgbm93LmdldFNlY29uZHMoKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0U2Vjb25kcygpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ3R0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3cuZ2V0SG91cnMoKSA+PSAxMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncG0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2FtJztcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub3cuZ2V0SG91cnMoKSA+PSAxMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAncCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnYSc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXREYXRlRGlmZlN0cmluZzogZnVuY3Rpb24gKGRhdGUpIHtcbiAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gbm93IC0gZGF0ZS5nZXRUaW1lKCksXG4gICAgICAgICAgICAgICAgYWJzVGltZXNwYW4gPSBNYXRoLmFicyh0aW1lc3BhbiksXG4gICAgICAgICAgICAgICAgcGFzdCA9ICh0aW1lc3BhbiA+IDApO1xuXG4gICAgICAgICAgICBpZiAoYWJzVGltZXNwYW4gPD0gMzAwMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5zdHJpbmdzLm5vdztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRpbWVzcGFuc3RyaW5nID0gbGFyb3V4X2RhdGUucGFyc2VFcG9jaChhYnNUaW1lc3BhbiwgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAodGltZXNwYW5zdHJpbmcgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW5zdHJpbmcgK1xuICAgICAgICAgICAgICAgICAgICAnICcgK1xuICAgICAgICAgICAgICAgICAgICAocGFzdCA/IGxhcm91eF9kYXRlLnN0cmluZ3MuYWdvIDogbGFyb3V4X2RhdGUuc3RyaW5ncy5sYXRlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5nZXRTaG9ydERhdGVTdHJpbmcoZGF0ZSwgdHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0U2hvcnREYXRlU3RyaW5nOiBmdW5jdGlvbiAoZGF0ZSwgaW5jbHVkZVRpbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5nZXRDdXN0b21EYXRlU3RyaW5nKFxuICAgICAgICAgICAgICAgIGluY2x1ZGVUaW1lID8gbGFyb3V4X2RhdGUuc2hvcnREYXRlRm9ybWF0ICsgJyAnICsgbGFyb3V4X2RhdGUudGltZUZvcm1hdCA6IGxhcm91eF9kYXRlLnNob3J0RGF0ZUZvcm1hdCxcbiAgICAgICAgICAgICAgICBkYXRlXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldExvbmdEYXRlU3RyaW5nOiBmdW5jdGlvbiAoZGF0ZSwgaW5jbHVkZVRpbWUpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5nZXRDdXN0b21EYXRlU3RyaW5nKFxuICAgICAgICAgICAgICAgIGluY2x1ZGVUaW1lID8gbGFyb3V4X2RhdGUubG9uZ0RhdGVGb3JtYXQgKyAnICcgKyBsYXJvdXhfZGF0ZS50aW1lRm9ybWF0IDogbGFyb3V4X2RhdGUubG9uZ0RhdGVGb3JtYXQsXG4gICAgICAgICAgICAgICAgZGF0ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2RhdGU7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuICAgICAgICAvLyBsYXJvdXhfY3NzID0gcmVxdWlyZSgnLi9sYXJvdXguY3NzLmpzJyksXG4gICAgICAgIC8vIGxhcm91eF90cmlnZ2VycyA9IHJlcXVpcmUoJy4vbGFyb3V4LnRyaWdnZXJzLmpzJyk7XG5cbiAgICAvLyBkb21cbiAgICB2YXIgbGFyb3V4X2RvbSA9IHtcbiAgICAgICAgZG9jcHJvcDogZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhwcm9wTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLnRvQXJyYXkoXG4gICAgICAgICAgICAgICAgKHBhcmVudCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0QnlDbGFzczogZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy50b0FycmF5KFxuICAgICAgICAgICAgICAgIChwYXJlbnQgfHwgZG9jdW1lbnQpLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoc2VsZWN0b3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdEJ5VGFnOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLnRvQXJyYXkoXG4gICAgICAgICAgICAgICAgKHBhcmVudCB8fCBkb2N1bWVudCkuZ2V0RWxlbWVudHNCeVRhZ05hbWUoc2VsZWN0b3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdEJ5SWQ6IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gKHBhcmVudCB8fCBkb2N1bWVudCkuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdFNpbmdsZTogZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiAocGFyZW50IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgfSxcblxuICAgICAgICBhdHRyOiBmdW5jdGlvbiAoZWxlbWVudCwgYXR0cmlidXRlcywgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGF0dHJpYnV0ZXMuY29uc3RydWN0b3IgIT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYXR0cmlidXRlcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkQXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlcyA9IHt9O1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXNbb2xkQXR0cmlidXRlc10gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgYXR0cmlidXRlTmFtZSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCBhdHRyaWJ1dGVzW2F0dHJpYnV0ZU5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBkYXRhOiBmdW5jdGlvbiAoZWxlbWVudCwgZGF0YW5hbWVzLCB2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgZGF0YW5hbWVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtJyArIGRhdGFuYW1lcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGRhdGFuYW1lcyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBvbGREYXRhbmFtZXMgPSBkYXRhbmFtZXM7XG4gICAgICAgICAgICAgICAgZGF0YW5hbWVzID0ge307XG4gICAgICAgICAgICAgICAgZGF0YW5hbWVzW29sZERhdGFuYW1lc10gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgZGF0YU5hbWUgaW4gZGF0YW5hbWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhbmFtZXMuaGFzT3duUHJvcGVydHkoZGF0YU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YW5hbWVzW2RhdGFOYW1lXSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtJyArIGRhdGFOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2V0QXR0cmlidXRlKCdkYXRhLScgKyBkYXRhTmFtZSwgZGF0YW5hbWVzW2RhdGFOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZXZlbnRIaXN0b3J5OiBbXSxcbiAgICAgICAgc2V0RXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudG5hbWUsIGZuYykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudFNpbmdsZShlbGVtZW50c1tpXSwgZXZlbnRuYW1lLCBmbmMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldEV2ZW50U2luZ2xlOiBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnRuYW1lLCBmbmMpIHtcbiAgICAgICAgICAgIHZhciBmbmNXcmFwcGVyID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm5jKGUsIGVsZW1lbnQpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxhcm91eF9kb20uZXZlbnRIaXN0b3J5LnB1c2goeyBlbGVtZW50OiBlbGVtZW50LCBldmVudG5hbWU6IGV2ZW50bmFtZSwgZm5jOiBmbmMsIGZuY1dyYXBwZXI6IGZuY1dyYXBwZXIgfSk7XG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRuYW1lLCBmbmNXcmFwcGVyLCBmYWxzZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdW5zZXRFdmVudDogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50bmFtZSwgZm5jKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpMSA9IDAsIGxlbmd0aDEgPSBlbGVtZW50cy5sZW5ndGg7IGkxIDwgbGVuZ3RoMTsgaTErKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkyID0gMCwgbGVuZ3RoMiA9IGxhcm91eF9kb20uZXZlbnRIaXN0b3J5Lmxlbmd0aDsgaTIgPCBsZW5ndGgyOyBpMisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gbGFyb3V4X2RvbS5ldmVudEhpc3RvcnlbaTJdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uZWxlbWVudCAhPT0gZWxlbWVudHNbaTFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudG5hbWUgIT09IHVuZGVmaW5lZCAmJiBpdGVtLmV2ZW50bmFtZSAhPT0gZXZlbnRuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmbmMgIT09IHVuZGVmaW5lZCAmJiBpdGVtLmZuYyAhPT0gZm5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGl0ZW0uZXZlbnRuYW1lLCBpdGVtLmZuY1dyYXBwZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGxhcm91eF9kb20uZXZlbnRIaXN0b3J5W2kyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGlzcGF0Y2hFdmVudDogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50bmFtZSwgZGF0YSkge1xuICAgICAgICAgICAgdmFyIGN1c3RvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3VzdG9tRXZlbnRbaXRlbV0gPSBkYXRhW2l0ZW1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdXN0b21FdmVudC5pbml0RXZlbnQoZXZlbnRuYW1lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChjdXN0b21FdmVudCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlOiBmdW5jdGlvbiAoaHRtbCkge1xuICAgICAgICAgICAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICAgICAgICAgICAgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0RJVicpO1xuXG4gICAgICAgICAgICB0ZW1wLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgaHRtbCk7XG4gICAgICAgICAgICB3aGlsZSAodGVtcC5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgZnJhZy5hcHBlbmRDaGlsZCh0ZW1wLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBudWxsaW5nIG91dCB0aGUgcmVmZXJlbmNlLCB0aGVyZSBpcyBubyBvYnZpb3VzIGRpc3Bvc2UgbWV0aG9kXG4gICAgICAgICAgICB0ZW1wID0gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlRWxlbWVudDogZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJpYnV0ZXMsIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzICE9PSB1bmRlZmluZWQgJiYgYXR0cmlidXRlcy5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShpdGVtLCBhdHRyaWJ1dGVzW2l0ZW1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjaGlsZHJlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkcmVuLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbTIgaW4gY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hpbGRyZW4uaGFzT3duUHJvcGVydHkoaXRlbTIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGl0ZW0yLCBjaGlsZHJlbltpdGVtMl0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgvKiB0eXBlb2YgY2hpbGRyZW4gPT0gJ3N0cmluZycgJiYgKi9jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20uYXBwZW5kKGVsZW0sIGNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZU9wdGlvbjogZnVuY3Rpb24gKGVsZW1lbnQsIGtleSwgdmFsdWUsIGlzRGVmYXVsdCkge1xuICAgICAgICAgICAgLyogb2xkIGJlaGF2aW91ciwgZG9lcyBub3Qgc3VwcG9ydCBvcHRncm91cHMgYXMgcGFyZW50cy5cbiAgICAgICAgICAgIHZhciBjb3VudCA9IGVsZW1lbnQub3B0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICBlbGVtZW50Lm9wdGlvbnNbY291bnRdID0gbmV3IE9wdGlvbih2YWx1ZSwga2V5KTtcblxuICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQub3B0aW9ucy5zZWxlY3RlZEluZGV4ID0gY291bnQgLSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgdmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ09QVElPTicpO1xuICAgICAgICAgICAgb3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBrZXkpO1xuICAgICAgICAgICAgaWYgKGlzRGVmYXVsdCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ2NoZWNrZWQnLCAnY2hlY2tlZCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLmFwcGVuZChvcHRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RCeVZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50Lm9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5vcHRpb25zW2ldLmdldEF0dHJpYnV0ZSgndmFsdWUnKSA9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNlbGVjdGVkSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sLyosXG5cbiAgICAgICAgLy8gVE9ETzogaXQncyByZWR1bmRhbnQgZm9yIG5vd1xuICAgICAgICBsb2FkSW1hZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbWFnZXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0lNRycpO1xuICAgICAgICAgICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgYXJndW1lbnRzW2ldKTtcblxuICAgICAgICAgICAgICAgIGltYWdlcy5wdXNoKGltYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGltYWdlcztcbiAgICAgICAgfSxcblxuICAgICAgICBsb2FkQXN5bmNTY3JpcHQ6IGZ1bmN0aW9uIChwYXRoLCB0cmlnZ2VyTmFtZSwgYXN5bmMpIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG5cbiAgICAgICAgICAgIGVsZW0udHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuICAgICAgICAgICAgZWxlbS5hc3luYyA9IChhc3luYyAhPT0gdW5kZWZpbmVkKSA/IGFzeW5jIDogdHJ1ZTtcbiAgICAgICAgICAgIGVsZW0uc3JjID0gcGF0aDtcblxuICAgICAgICAgICAgdmFyIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZWxlbS5vbmxvYWQgPSBlbGVtLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW0ucmVhZHlTdGF0ZSAmJiBlbGVtLnJlYWR5U3RhdGUgIT09ICdjb21wbGV0ZScgJiYgZWxlbS5yZWFkeVN0YXRlICE9PSAnbG9hZGVkJykgfHwgbG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtLm9ubG9hZCA9IGVsZW0ub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBsb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRyaWdnZXJOYW1lID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJOYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMub250cmlnZ2VyKHRyaWdnZXJOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9hZEFzeW5jU3R5bGU6IGZ1bmN0aW9uIChwYXRoLCB0cmlnZ2VyTmFtZSwgYXN5bmMpIHtcbiAgICAgICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnTElOSycpO1xuXG4gICAgICAgICAgICBlbGVtLnR5cGUgPSAndGV4dC9jc3MnO1xuICAgICAgICAgICAgZWxlbS5hc3luYyA9IChhc3luYyAhPT0gdW5kZWZpbmVkKSA/IGFzeW5jIDogdHJ1ZTtcbiAgICAgICAgICAgIGVsZW0uaHJlZiA9IHBhdGg7XG4gICAgICAgICAgICBlbGVtLnJlbCA9ICdzdHlsZXNoZWV0JztcblxuICAgICAgICAgICAgdmFyIGxvYWRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgZWxlbS5vbmxvYWQgPSBlbGVtLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGVsZW0ucmVhZHlTdGF0ZSAmJiBlbGVtLnJlYWR5U3RhdGUgIT09ICdjb21wbGV0ZScgJiYgZWxlbS5yZWFkeVN0YXRlICE9PSAnbG9hZGVkJykgfHwgbG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbGVtLm9ubG9hZCA9IGVsZW0ub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBsb2FkZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICh0cmlnZ2VyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRyaWdnZXJOYW1lID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXJOYW1lKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMub250cmlnZ2VyKHRyaWdnZXJOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcbiAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQoZWxlbSk7XG4gICAgICAgIH0sKi9cblxuICAgICAgICBjbGVhcjogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHdoaWxlIChlbGVtZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBpbnNlcnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBwb3NpdGlvbiwgY29udGVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwocG9zaXRpb24sIGNvbnRlbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByZXBlbmQ6IGZ1bmN0aW9uIChlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGNvbnRlbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFwcGVuZDogZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCBjb250ZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXBsYWNlOiBmdW5jdGlvbiAoZWxlbWVudCwgY29udGVudCkge1xuICAgICAgICAgICAgbGFyb3V4X2RvbS5jbGVhcihlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmJlZ2luJywgY29udGVudCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwbGFjZVRleHQ6IGZ1bmN0aW9uIChlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICAgICAgICAvLyBsYXJvdXhfZG9tLmNsZWFyKGVsZW1lbnQpO1xuICAgICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbG9uZVJldHVybjogMCxcbiAgICAgICAgY2xvbmVBcHBlbmQ6IDEsXG4gICAgICAgIGNsb25lSW5zZXJ0QWZ0ZXI6IDIsXG4gICAgICAgIGNsb25lSW5zZXJ0QmVmb3JlOiAzLFxuXG4gICAgICAgIGNsb25lOiBmdW5jdGlvbiAoZWxlbWVudCwgdHlwZSwgY29udGFpbmVyLCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBuZXdFbGVtZW50ID0gZWxlbWVudC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgICAgIGlmIChjb250YWluZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRhcmdldCA9IGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlICE9PSB1bmRlZmluZWQgJiYgdHlwZSAhPSBsYXJvdXhfZG9tLmNsb25lUmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gbGFyb3V4X2RvbS5jbG9uZUFwcGVuZCkge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobmV3RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IGxhcm91eF9kb20uY2xvbmVJbnNlcnRBZnRlcikge1xuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKG5ld0VsZW1lbnQsIHRhcmdldC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy8gdHlwZSA9PSBsYXJvdXhfZG9tLmNsb25lSW5zZXJ0QmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbnNlcnRCZWZvcmUobmV3RWxlbWVudCwgdGFyZ2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBuZXdFbGVtZW50O1xuICAgICAgICB9LyosXG5cbiAgICAgICAgLy8gVE9ETzogaXQncyByZWR1bmRhbnQgZm9yIG5vd1xuICAgICAgICBhcHBseU9wZXJhdGlvbnM6IGZ1bmN0aW9uIChlbGVtZW50LCBvcGVyYXRpb25zKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBvcGVyYXRpb24gaW4gb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmICghb3BlcmF0aW9ucy5oYXNPd25Qcm9wZXJ0eShvcGVyYXRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGJpbmRpbmcgaW4gb3BlcmF0aW9uc1tvcGVyYXRpb25dKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghb3BlcmF0aW9uc1tvcGVyYXRpb25dLmhhc093blByb3BlcnR5KGJpbmRpbmcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9wZXJhdGlvbnNbb3BlcmF0aW9uXVtiaW5kaW5nXTtcblxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2V0cHJvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcuc3Vic3RyaW5nKDAsIDEpID09ICdfJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShiaW5kaW5nLnN1YnN0cmluZygxKSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZyA9PSAnY29udGVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5yZXBsYWNlKGVsZW1lbnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWRkcHJvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcuc3Vic3RyaW5nKDAsIDEpID09ICdfJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShiaW5kaW5nLnN1YnN0cmluZygxKSwgZWxlbWVudC5nZXRBdHRyaWJ1dGUoYmluZGluZy5zdWJzdHJpbmcoMSkpICsgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZyA9PSAnY29udGVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5hcHBlbmQoZWxlbWVudCwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZW1vdmVwcm9wJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUuc3Vic3RyaW5nKDAsIDEpID09ICdfJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSh2YWx1ZS5zdWJzdHJpbmcoMSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20uY2xlYXIoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZGNsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLmFkZENsYXNzKGVsZW1lbnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbW92ZWNsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnJlbW92ZUNsYXNzKGVsZW1lbnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZHN0eWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGVsZW1lbnQsIGJpbmRpbmcsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3JlbW92ZXN0eWxlJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGVsZW1lbnQsIHZhbHVlLCAnaW5oZXJpdCAhaW1wb3J0YW50Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXBlYXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhvcGVyYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9Ki9cbiAgICB9O1xuXG4gICAgLy8gYSBmaXggZm9yIEludGVybmV0IEV4cGxvcmVyXG4gICAgaWYgKHR5cGVvZiBFbGVtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAoRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnRFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhcm91eF9kb207XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gZXZlbnRzXG4gICAgdmFyIGxhcm91eF9ldmVudHMgPSB7XG4gICAgICAgIGRlbGVnYXRlczogW10sXG5cbiAgICAgICAgYWRkOiBmdW5jdGlvbiAoZXZlbnQsIGZuYykge1xuICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXMucHVzaCh7IGV2ZW50OiBldmVudCwgZm5jOiBmbmMgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW52b2tlOiBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9ldmVudHMuZGVsZWdhdGVzLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfZXZlbnRzLmRlbGVnYXRlc1tpdGVtXS5ldmVudCAhPSBldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmRlbGVnYXRlc1tpdGVtXS5mbmMoYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9ldmVudHM7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2FqYXggPSByZXF1aXJlKCcuL2xhcm91eC5hamF4LmpzJyk7XG5cbiAgICAvLyBmb3Jtc1xuICAgIHZhciBsYXJvdXhfZm9ybXMgPSB7XG4gICAgICAgIGFqYXhGb3JtOiBmdW5jdGlvbiAoZm9ybW9iaiwgZm5jLCBmbmNCZWdpbikge1xuICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudChmb3Jtb2JqLCAnc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChmbmNCZWdpbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZuY0JlZ2luKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2FqYXgucG9zdChcbiAgICAgICAgICAgICAgICAgICAgZm9ybW9iai5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpLFxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZm9ybXMuc2VyaWFsaXplRm9ybURhdGEoZm9ybW9iaiksXG4gICAgICAgICAgICAgICAgICAgIGZuY1xuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBpc0Zvcm1GaWVsZDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdTRUxFQ1QnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRklMRScgfHwgdHlwZSA9PT0gJ0NIRUNLQk9YJyB8fCB0eXBlID09PSAnUkFESU8nIHx8IHR5cGUgPT09ICdURVhUJyB8fCB0eXBlID09PSAnUEFTU1dPUkQnIHx8IHR5cGUgPT09ICdISURERU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Rm9ybUZpZWxkVmFsdWU6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5kaXNhYmxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Lm9wdGlvbnNbZWxlbWVudC5zZWxlY3RlZEluZGV4XS52YWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ0lOUFVUJykge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdGSUxFJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5maWxlc1swXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0NIRUNLQk9YJyB8fCB0eXBlID09PSAnUkFESU8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdURVhUJyB8fCB0eXBlID09PSAnUEFTU1dPUkQnIHx8IHR5cGUgPT09ICdISURERU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEZvcm1GaWVsZFZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCwgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50LmRpc2FibGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG9wdGlvbiBpbiBlbGVtZW50Lm9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50Lm9wdGlvbnMuaGFzT3duUHJvcGVydHkob3B0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5vcHRpb25zW29wdGlvbl0udmFsdWUgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc2VsZWN0ZWRJbmRleCA9IG9wdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnSU5QVVQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSAnRklMRScpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5maWxlc1swXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ0NIRUNLQk9YJyB8fCB0eXBlID09ICdSQURJTycpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8IHZhbHVlID09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ1RFWFQnIHx8IHR5cGUgPT0gJ1BBU1NXT1JEJyB8fCB0eXBlID09ICdISURERU4nKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB0b2dnbGVGb3JtRWRpdGluZzogZnVuY3Rpb24gKGZvcm1vYmosIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZm9ybW9iai5xdWVyeVNlbGVjdG9yQWxsKCcqW25hbWVdJyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZvcm1vYmouZ2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZW5hYmxlZCcpID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1vYmouc2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZW5hYmxlZCcsICdlbmFibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybW9iai5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1lbmFibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkID0gMCwgbGVuZ3RoID0gc2VsZWN0aW9uLmxlbmd0aDsgc2VsZWN0ZWQgPCBsZW5ndGg7IHNlbGVjdGVkKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9mb3Jtcy5pc0Zvcm1GaWVsZChzZWxlY3Rpb25bc2VsZWN0ZWRdKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGFzdERpc2FibGVkID0gc2VsZWN0aW9uW3NlbGVjdGVkXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3REaXNhYmxlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGlvbltzZWxlY3RlZF0uZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uW3NlbGVjdGVkXS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1kaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uW3NlbGVjdGVkXS5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXN0RGlzYWJsZWQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0aW9uW3NlbGVjdGVkXS5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbGFzdC1kaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltzZWxlY3RlZF0ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXJpYWxpemVGb3JtRGF0YTogZnVuY3Rpb24gKGZvcm1vYmopIHtcbiAgICAgICAgICAgIHZhciBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGZvcm1vYmoucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lXScpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZCA9IDAsIGxlbmd0aCA9IHNlbGVjdGlvbi5sZW5ndGg7IHNlbGVjdGVkIDwgbGVuZ3RoOyBzZWxlY3RlZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbGFyb3V4X2Zvcm1zLmdldEZvcm1GaWVsZFZhbHVlKHNlbGVjdGlvbltzZWxlY3RlZF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZChzZWxlY3Rpb25bc2VsZWN0ZWRdLmdldEF0dHJpYnV0ZSgnbmFtZScpLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZm9ybWRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbiAoZm9ybW9iaikge1xuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHt9O1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGZvcm1vYmoucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lXScpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZCA9IDAsIGxlbmd0aCA9IHNlbGVjdGlvbi5sZW5ndGg7IHNlbGVjdGVkIDwgbGVuZ3RoOyBzZWxlY3RlZCsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbGFyb3V4X2Zvcm1zLmdldEZvcm1GaWVsZFZhbHVlKHNlbGVjdGlvbltzZWxlY3RlZF0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlc1tzZWxlY3Rpb25bc2VsZWN0ZWRdLmdldEF0dHJpYnV0ZSgnbmFtZScpXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgfSxcblxuICAgICAgICBkZXNlcmlhbGl6ZTogZnVuY3Rpb24gKGZvcm1vYmosIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBmb3Jtb2JqLnF1ZXJ5U2VsZWN0b3JBbGwoJypbbmFtZV0nKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0ZWQgPSAwLCBsZW5ndGggPSBzZWxlY3Rpb24ubGVuZ3RoOyBzZWxlY3RlZCA8IGxlbmd0aDsgc2VsZWN0ZWQrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9mb3Jtcy5zZXRGb3JtRmllbGRWYWx1ZShzZWxlY3Rpb25bc2VsZWN0ZWRdLCBkYXRhW3NlbGVjdGlvbltzZWxlY3RlZF0uZ2V0QXR0cmlidXRlKCduYW1lJyldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2Zvcm1zO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGhlbHBlcnNcbiAgICB2YXIgbGFyb3V4X2hlbHBlcnMgPSB7XG4gICAgICAgIHVuaXF1ZUlkOiAwLFxuXG4gICAgICAgIGdldFVuaXF1ZUlkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvKmpzbGludCBwbHVzcGx1czogdHJ1ZSAqL1xuICAgICAgICAgICAgcmV0dXJuICd1aWQtJyArICgrK2xhcm91eF9oZWxwZXJzLnVuaXF1ZUlkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBidWlsZFF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiAodmFsdWVzLCByZmMzOTg2KSB7XG4gICAgICAgICAgICB2YXIgdXJpID0gJycsXG4gICAgICAgICAgICAgICAgcmVnRXggPSAvJTIwL2c7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXNbbmFtZV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmZjMzk4NiB8fCBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJpICs9ICcmJyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKS5yZXBsYWNlKHJlZ0V4LCAnKycpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlc1tuYW1lXS50b1N0cmluZygpKS5yZXBsYWNlKHJlZ0V4LCAnKycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJpICs9ICcmJyArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbbmFtZV0udG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1cmkuc3Vic3RyKDEpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGJ1aWxkRm9ybURhdGE6IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXNbbmFtZV0gIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLmFwcGVuZChuYW1lLCB2YWx1ZXNbbmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZm9ybWF0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmdzKS5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbiAoKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmdzKTsgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwbGFjZUFsbDogZnVuY3Rpb24gKHRleHQsIGRpY3Rpb25hcnkpIHtcbiAgICAgICAgICAgIHZhciByZSA9IG5ldyBSZWdFeHAoT2JqZWN0LmtleXMoZGljdGlvbmFyeSkuam9pbignfCcpLCAnZycpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGV4dC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIHJlLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGljdGlvbmFyeVttYXRjaF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjYW1lbENhc2U6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSAnJztcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyQ2hhciA9IHZhbHVlLmNoYXJBdChqKTtcbiAgICAgICAgICAgICAgICBpZiAoY3VyckNoYXIgPT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gKCFmbGFnKSA/IGN1cnJDaGFyIDogY3VyckNoYXIudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYW50aUNhbWVsQ2FzZTogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyckNoYXIgPSB2YWx1ZS5jaGFyQXQoaik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJDaGFyICE9ICctJyAmJiBjdXJyQ2hhciA9PSBjdXJyQ2hhci50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dCArPSAnLScgKyBjdXJyQ2hhci50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvdXRwdXQgKz0gY3VyckNoYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcXVvdGVBdHRyOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC8mL2csICcmYW1wOycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvJy9nLCAnJmFwb3M7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC88L2csICcmbHQ7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICcmZ3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cIi9nLCAnJnF1b3Q7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXHJcXG4vZywgJyYjMTM7JylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9bXFxyXFxuXS9nLCAnJiMxMzsnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzcGxpY2VTdHJpbmc6IGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGNvdW50LCBhZGQpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZS5zbGljZSgwLCBpbmRleCkgKyAoYWRkIHx8ICcnKSArIHZhbHVlLnNsaWNlKGluZGV4ICsgY291bnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJhbmRvbTogZnVuY3Rpb24gKG1pbiwgbWF4KSB7XG4gICAgICAgICAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgICAgICAgfSxcblxuICAgICAgICBmaW5kOiBmdW5jdGlvbiAob2JqLCBpdGVyYXRvciwgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgb2JqLnNvbWUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVyYXRvci5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgbGlzdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGV4dGVuZE9iamVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IEFycmF5LnByb3RvdHlwZS5zaGlmdC5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgICAgICAgICAgaXNBcnJheSA9IHRhcmdldCBpbnN0YW5jZW9mIEFycmF5O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIG5hbWUgaW4gYXJndW1lbnRzW2l0ZW1dKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgICB0YXJnZXQucHVzaChhcmd1bWVudHNbaXRlbV1bbmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgICAgICAvKiB0YXJnZXRbbmFtZV0uY29uc3RydWN0b3IgPT09IE9iamVjdCAqL1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Lmhhc093blByb3BlcnR5KG5hbWUpICYmIHRhcmdldFtuYW1lXSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2hlbHBlcnMuZXh0ZW5kT2JqZWN0KHRhcmdldFtuYW1lXSwgYXJndW1lbnRzW2l0ZW1dW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W25hbWVdID0gYXJndW1lbnRzW2l0ZW1dW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBlYWNoOiBmdW5jdGlvbiAoYXJyLCBmbmMsIHRlc3RPd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFycikge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0T3duUHJvcGVydGllcyAmJiAhYXJyLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChmbmMoaXRlbSwgYXJyW2l0ZW1dKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1hcDogZnVuY3Rpb24gKGFyciwgZm5jLCBkb250U2tpcFJldHVybnMsIHRlc3RPd25Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFycikge1xuICAgICAgICAgICAgICAgIGlmICh0ZXN0T3duUHJvcGVydGllcyAmJiAhYXJyLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbmMoYXJyW2l0ZW1dLCBpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZG9udFNraXBSZXR1cm5zIHx8IHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5kZXg6IGZ1bmN0aW9uIChhcnIsIHZhbHVlLCB0ZXN0T3duUHJvcGVydGllcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGVzdE93blByb3BlcnRpZXMgJiYgIWFyci5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoYXJyW2l0ZW1dID09PSBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBhZWFjaDogZnVuY3Rpb24gKGFyciwgZm5jKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuYyhpLCBhcnJbaV0pID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBhcnI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYW1hcDogZnVuY3Rpb24gKGFyciwgZm5jLCBkb250U2tpcFJldHVybnMpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcnIubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm5jKGFycltpXSwgaSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRvbnRTa2lwUmV0dXJucyB8fCByZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnVuc2hpZnQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFpbmRleDogZnVuY3Rpb24gKGFyciwgdmFsdWUsIHN0YXJ0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gKHN0YXJ0IHx8IDApLCBsZW5ndGggPSBhcnIubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfSxcblxuICAgICAgICBjb2x1bW46IGZ1bmN0aW9uIChvYmosIGtleSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLm1hcChvYmosIGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfSwgdHJ1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2h1ZmZsZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICAgICAgICBzaHVmZmxlZCA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciByYW5kID0gbGFyb3V4X2hlbHBlcnMucmFuZG9tKDAsIGluZGV4KTtcbiAgICAgICAgICAgICAgICBzaHVmZmxlZFtpbmRleCsrXSA9IHNodWZmbGVkW3JhbmRdO1xuICAgICAgICAgICAgICAgIHNodWZmbGVkW3JhbmRdID0gb2JqW2l0ZW1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2h1ZmZsZWQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbWVyZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmd1bWVudHMpLFxuICAgICAgICAgICAgICAgIHRtcCA9IHRhcmdldCxcbiAgICAgICAgICAgICAgICBpc0FycmF5ID0gdG1wIGluc3RhbmNlb2YgQXJyYXk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgdG1wID0gdG1wLmNvbmNhdChhcmd1bWVudHNbaXRlbV0pO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhdHRyIGluIGFyZ3VtZW50c1tpdGVtXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZ3VtZW50c1tpdGVtXS5oYXNPd25Qcm9wZXJ0eShhdHRyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0bXBbYXR0cl0gPSBhcmd1bWVudHNbaXRlbV1bYXR0cl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICB9LFxuXG4gICAgICAgIGR1cGxpY2F0ZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9BcnJheTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaXRlbXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGl0ZW1zW2ldID0gb2JqW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0QXNBcnJheTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgdmFyIGl0ZW1zO1xuXG4gICAgICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpdGVtcyA9IG9iajtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqIGluc3RhbmNlb2YgTm9kZUxpc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgIGl0ZW1zID0gbmV3IEFycmF5KGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpdGVtc1tpXSA9IG9ialtpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGl0ZW1zID0gW29ial07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMZW5ndGg6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIGlmIChvYmouY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChvYmoubGVuZ3RoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iai5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0S2V5c1JlY3Vyc2l2ZTogZnVuY3Rpb24gKG9iaiwgZGVsaW1pdGVyLCBwcmVmaXgsIGtleXMpIHtcbiAgICAgICAgICAgIGlmIChkZWxpbWl0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlciA9ICcuJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByZWZpeCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcHJlZml4ID0gJyc7XG4gICAgICAgICAgICAgICAga2V5cyA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGtleXMucHVzaChwcmVmaXggKyBpdGVtKTtcblxuICAgICAgICAgICAgICAgIGlmIChvYmpbaXRlbV0gIT09IHVuZGVmaW5lZCAmJiBvYmpbaXRlbV0gIT09IG51bGwgJiYgb2JqW2l0ZW1dLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2hlbHBlcnMuZ2V0S2V5c1JlY3Vyc2l2ZShvYmpbaXRlbV0sIGRlbGltaXRlciwgcHJlZml4ICsgaXRlbSArIGRlbGltaXRlciwga2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0RWxlbWVudDogZnVuY3Rpb24gKG9iaiwgcGF0aCwgZGVmYXVsdFZhbHVlLCBkZWxpbWl0ZXIpIHtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkZWxpbWl0ZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRlbGltaXRlciA9ICcuJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBvcyA9IHBhdGguaW5kZXhPZihkZWxpbWl0ZXIpO1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIHZhciByZXN0O1xuICAgICAgICAgICAgaWYgKHBvcyA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBwYXRoO1xuICAgICAgICAgICAgICAgIHJlc3QgPSBudWxsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBwYXRoLnN1YnN0cmluZygwLCBwb3MpO1xuICAgICAgICAgICAgICAgIHJlc3QgPSBwYXRoLnN1YnN0cmluZyhwb3MgKyAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmVzdCA9PT0gbnVsbCB8fCByZXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLmdldEVsZW1lbnQob2JqW2tleV0sIHJlc3QsIGRlZmF1bHRWYWx1ZSwgZGVsaW1pdGVyKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X2hlbHBlcnM7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2Zvcm1zID0gcmVxdWlyZSgnLi9sYXJvdXguZm9ybXMuanMnKTtcblxuICAgIC8vIGtleXNcbiAgICB2YXIgbGFyb3V4X2tleXMgPSB7XG4gICAgICAgIGtleU5hbWU6IGZ1bmN0aW9uIChrZXljb2RlKSB7XG4gICAgICAgICAgICBrZXljb2RlID0ga2V5Y29kZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKGtleWNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2JhY2tzcGFjZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgICAgICAgIGNhc2UgJ3RhYic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDk7XG5cbiAgICAgICAgICAgIGNhc2UgJ2VudGVyJzpcbiAgICAgICAgICAgIGNhc2UgJ3JldHVybic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEzO1xuXG4gICAgICAgICAgICBjYXNlICdlc2MnOlxuICAgICAgICAgICAgY2FzZSAnZXNjYXBlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMjc7XG5cbiAgICAgICAgICAgIGNhc2UgJ3NwYWNlJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzI7XG5cbiAgICAgICAgICAgIGNhc2UgJ3BndXAnOlxuICAgICAgICAgICAgICAgIHJldHVybiAzMztcblxuICAgICAgICAgICAgY2FzZSAncGdkbic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM0O1xuXG4gICAgICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAzNTtcblxuICAgICAgICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM2O1xuXG4gICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzc7XG5cbiAgICAgICAgICAgIGNhc2UgJ3VwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzg7XG5cbiAgICAgICAgICAgIGNhc2UgJ3JpZ2h0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzk7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Rvd24nOlxuICAgICAgICAgICAgICAgIHJldHVybiA0MDtcblxuICAgICAgICAgICAgY2FzZSAnaW5zZXJ0JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ2O1xuXG4gICAgICAgICAgICBjYXNlICdmMSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExMjtcblxuICAgICAgICAgICAgY2FzZSAnZjInOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTM7XG5cbiAgICAgICAgICAgIGNhc2UgJ2YzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTE0O1xuXG4gICAgICAgICAgICBjYXNlICdmNCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExNTtcblxuICAgICAgICAgICAgY2FzZSAnZjUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTY7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Y2JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTE3O1xuXG4gICAgICAgICAgICBjYXNlICdmNyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExODtcblxuICAgICAgICAgICAgY2FzZSAnZjgnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTk7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Y5JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTIwO1xuXG4gICAgICAgICAgICBjYXNlICdmMTAnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMjE7XG5cbiAgICAgICAgICAgIGNhc2UgJ2YxMSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEyMjtcblxuICAgICAgICAgICAgY2FzZSAnZjEyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTIzO1xuXG4gICAgICAgICAgICBjYXNlICcsJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTg4O1xuXG4gICAgICAgICAgICBjYXNlICcuJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTkwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShrZXljb2RlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB7dGFyZ2V0LCBrZXksIHNoaWZ0LCBjdHJsLCBhbHQsIGRpc2FibGVJbnB1dHMsIGZuY31cbiAgICAgICAgYXNzaWduOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXIgPSBmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGV2ID0gZXZlbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBldi50YXJnZXQgfHwgZXYuc3JjRWxlbWVudDtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtZW50Lm5vZGVUeXBlID09PSAxMSkgeyAvLyBlbGVtZW50Lm5vZGVUeXBlID09PSAxIHx8XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZUlucHV0cyAmJiBsYXJvdXhfZm9ybXMuaXNGb3JtRmllbGQoZWxlbWVudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnNoaWZ0ICYmICFldi5zaGlmdEtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY3RybCAmJiAhZXYuY3RybEtleSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuYWx0ICYmICFldi5hbHRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBsYXJvdXhfa2V5cy5rZXlOYW1lKG9wdGlvbnMua2V5KTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAoZXYua2V5Q29kZSB8fCBldi53aGljaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZm5jKGV2KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnQob3B0aW9ucy50YXJnZXQgfHwgZG9jdW1lbnQsICdrZXlkb3duJywgd3JhcHBlcik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9rZXlzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpLFxuICAgICAgICBsYXJvdXhfc3RhY2sgPSByZXF1aXJlKCcuL2xhcm91eC5zdGFjay5qcycpO1xuXG4gICAgLy8gbXZjXG4gICAgdmFyIGxhcm91eF9tdmMgPSB7XG4gICAgICAgIGFwcHM6IHt9LFxuICAgICAgICBwYXVzZVVwZGF0ZTogZmFsc2UsXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKGVsZW1lbnQsIG1vZGVsKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5jb25zdHJ1Y3RvciA9PT0gU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGxhcm91eF9kb20uc2VsZWN0QnlJZChlbGVtZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gaWYgKG1vZGVsLmNvbnN0cnVjdG9yICE9PSBsYXJvdXhfc3RhY2spIHtcbiAgICAgICAgICAgIC8vICAgICBtb2RlbCA9IG5ldyBsYXJvdXhfc3RhY2sobW9kZWwpO1xuICAgICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgICB2YXIgYXBwS2V5ID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2lkJyk7XG5cbiAgICAgICAgICAgIG1vZGVsLm9udXBkYXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfbXZjLnBhdXNlVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9tdmMudXBkYXRlKGFwcEtleSk7IC8vICwgW2V2ZW50LmtleV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsYXJvdXhfbXZjLmFwcHNbYXBwS2V5XSA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgICAgIG1vZGVsOiBtb2RlbCAvLyAsXG4gICAgICAgICAgICAgICAgLy8gbW9kZWxLZXlzOiBudWxsLFxuICAgICAgICAgICAgICAgIC8vIGJvdW5kRWxlbWVudHM6IG51bGwsXG4gICAgICAgICAgICAgICAgLy8gZXZlbnRFbGVtZW50czogbnVsbFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGFyb3V4X212Yy5yZWJpbmQoYXBwS2V5KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZWJpbmQ6IGZ1bmN0aW9uIChhcHBLZXkpIHtcbiAgICAgICAgICAgIHZhciBhcHAgPSBsYXJvdXhfbXZjLmFwcHNbYXBwS2V5XTtcbiAgICAgICAgICAgIC8qanNsaW50IG5vbWVuOiB0cnVlICovXG4gICAgICAgICAgICBhcHAubW9kZWxLZXlzID0gbGFyb3V4X2hlbHBlcnMuZ2V0S2V5c1JlY3Vyc2l2ZShhcHAubW9kZWwuX2RhdGEpOyAvLyBGSVhNRTogd29ya3Mgb25seSBmb3IgJGwuc3RhY2tcbiAgICAgICAgICAgIGFwcC5ib3VuZEVsZW1lbnRzID0ge307XG4gICAgICAgICAgICBhcHAuZXZlbnRFbGVtZW50cyA9IFtdO1xuXG4gICAgICAgICAgICBsYXJvdXhfbXZjLnNjYW5FbGVtZW50cyhhcHAsIGFwcC5lbGVtZW50KTtcbiAgICAgICAgICAgIGxhcm91eF9tdmMudXBkYXRlKGFwcEtleSk7XG5cbiAgICAgICAgICAgIHZhciBmbmMgPSBmdW5jdGlvbiAoZXYsIGVsZW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgYmluZGluZyA9IGxhcm91eF9tdmMuYmluZFN0cmluZ1BhcnNlcihlbGVtLmdldEF0dHJpYnV0ZSgnbHItZXZlbnQnKSk7XG4gICAgICAgICAgICAgICAgLy8gbGFyb3V4X212Yy5wYXVzZVVwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBiaW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSBudWxsIHx8ICFiaW5kaW5nLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nW2l0ZW1dLmNoYXJBdCgwKSA9PSAnXFwnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGVsW2l0ZW1dID0gYmluZGluZ1tpdGVtXS5zdWJzdHJpbmcoMSwgYmluZGluZ1tpdGVtXS5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChiaW5kaW5nW2l0ZW1dLnN1YnN0cmluZygwLCA1KSA9PSAnYXR0ci4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcHAubW9kZWxbaXRlbV0gPSBlbGVtLmdldEF0dHJpYnV0ZShiaW5kaW5nW2l0ZW1dLnN1YnN0cmluZyg1KSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmluZGluZ1tpdGVtXS5zdWJzdHJpbmcoMCwgNSkgPT0gJ3Byb3AuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGVsW2l0ZW1dID0gZWxlbVtiaW5kaW5nW2l0ZW1dLnN1YnN0cmluZyg1KV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gbGFyb3V4X212Yy5wYXVzZVVwZGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFwcC5ldmVudEVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudChcbiAgICAgICAgICAgICAgICAgICAgYXBwLmV2ZW50RWxlbWVudHNbaV0uZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgYXBwLmV2ZW50RWxlbWVudHNbaV0uYmluZGluZ1tudWxsXSxcbiAgICAgICAgICAgICAgICAgICAgZm5jXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzY2FuRWxlbWVudHM6IGZ1bmN0aW9uIChhcHAsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBhdHRzID0gZWxlbWVudC5hdHRyaWJ1dGVzLCBtID0gYXR0cy5sZW5ndGg7IGkgPCBtOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0c1tpXS5uYW1lID09ICdsci1iaW5kJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmluZGluZzEgPSBsYXJvdXhfbXZjLmJpbmRTdHJpbmdQYXJzZXIoYXR0c1tpXS52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBiaW5kaW5nMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiaW5kaW5nMS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXBwLmJvdW5kRWxlbWVudHNbYmluZGluZzFbaXRlbV1dID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHAuYm91bmRFbGVtZW50c1tiaW5kaW5nMVtpdGVtXV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmJvdW5kRWxlbWVudHNbYmluZGluZzFbaXRlbV1dLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpdGVtXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXR0c1tpXS5uYW1lID09ICdsci1ldmVudCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbmRpbmcyID0gbGFyb3V4X212Yy5iaW5kU3RyaW5nUGFyc2VyKGF0dHNbaV0udmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGFwcC5ldmVudEVsZW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRpbmc6IGJpbmRpbmcyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGNobGRybiA9IGVsZW1lbnQuY2hpbGROb2RlcywgbiA9IGNobGRybi5sZW5ndGg7IGogPCBuOyBqKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hsZHJuW2pdLm5vZGVUeXBlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9tdmMuc2NhbkVsZW1lbnRzKGFwcCwgY2hsZHJuW2pdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiAoYXBwS2V5LCBrZXlzKSB7XG4gICAgICAgICAgICB2YXIgYXBwID0gbGFyb3V4X212Yy5hcHBzW2FwcEtleV07XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5cyA9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGtleXMgPSBhcHAubW9kZWxLZXlzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoMSA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5c1tpXSBpbiBhcHAuYm91bmRFbGVtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGJvdW5kRWxlbWVudCA9IGFwcC5ib3VuZEVsZW1lbnRzW2tleXNbaV1dO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGxlbmd0aDIgPSBib3VuZEVsZW1lbnQubGVuZ3RoOyBqIDwgbGVuZ3RoMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChib3VuZEVsZW1lbnRbal0udGFyZ2V0LnN1YnN0cmluZygwLCA2KSA9PSAnc3R5bGUuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRFbGVtZW50W2pdLmVsZW1lbnQuc3R5bGVbYm91bmRFbGVtZW50W2pdLnRhcmdldC5zdWJzdHJpbmcoNildID0gbGFyb3V4X2hlbHBlcnMuZ2V0RWxlbWVudChhcHAubW9kZWwsIGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJvdW5kRWxlbWVudFtqXS50YXJnZXQuc3Vic3RyaW5nKDAsIDUpID09ICdhdHRyLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FIHJlbW92ZUF0dHJpYnV0ZSBvbiBudWxsIHZhbHVlP1xuICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRFbGVtZW50W2pdLmVsZW1lbnQuc2V0QXR0cmlidXRlKGJvdW5kRWxlbWVudFtqXS50YXJnZXQuc3Vic3RyaW5nKDUpLCBsYXJvdXhfaGVscGVycy5nZXRFbGVtZW50KGFwcC5tb2RlbCwga2V5c1tpXSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJvdW5kRWxlbWVudFtqXS50YXJnZXQuc3Vic3RyaW5nKDAsIDUpID09ICdwcm9wLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FIHJlbW92ZUF0dHJpYnV0ZSBvbiBudWxsIHZhbHVlP1xuICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRFbGVtZW50W2pdLmVsZW1lbnRbYm91bmRFbGVtZW50W2pdLnRhcmdldC5zdWJzdHJpbmcoNSldID0gbGFyb3V4X2hlbHBlcnMuZ2V0RWxlbWVudChhcHAubW9kZWwsIGtleXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGJpbmRTdHJpbmdQYXJzZXI6IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgICAgICAgICB2YXIgbGFzdEJ1ZmZlciA9IG51bGwsXG4gICAgICAgICAgICAgICAgYnVmZmVyID0gJycsXG4gICAgICAgICAgICAgICAgc3RhdGUgPSAwLFxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHt9O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gdGV4dC5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyID0gdGV4dC5jaGFyQXQoaSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnIgPT0gJzonKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0QnVmZmVyID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VyciA9PSAnLCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbbGFzdEJ1ZmZlcl0gPSBidWZmZXIudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYnVmZmVyICs9IGN1cnI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChidWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtsYXN0QnVmZmVyXSA9IGJ1ZmZlci50cmltKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9tdmM7XG5cbn0oKSk7XG4iLCIvKmpzbGludCBub21lbjogdHJ1ZSAqL1xubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHN0YWNrXG4gICAgdmFyIGxhcm91eF9zdGFjayA9IGZ1bmN0aW9uIChkYXRhLCBkZXB0aCwgdG9wKSB7XG4gICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5fZGVwdGggPSBkZXB0aDtcbiAgICAgICAgdGhpcy5fdG9wID0gdG9wIHx8IHRoaXM7XG5cbiAgICAgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgLy8gZGVsZXRlIHRoaXMuX2RhdGFba2V5XTtcblxuICAgICAgICAgICAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtrZXldKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gbmV3IGxhcm91eF9zdGFjayhcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVwdGggP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoICsgJy4nICsga2V5IDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90b3BcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy5fZGF0YVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9kYXRhW2tleV0gPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNldCh0aGlzLCBrZXksIG5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kYXRhW2tleV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90b3Aub251cGRhdGUoeyBzY29wZTogdGhpcywga2V5OiBrZXksIG9sZFZhbHVlOiBvbGRWYWx1ZSwgbmV3VmFsdWU6IG5ld1ZhbHVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnNldFJhbmdlID0gZnVuY3Rpb24gKHZhbHVlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgdmFsdWVLZXkgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF2YWx1ZXMuaGFzT3duUHJvcGVydHkodmFsdWVLZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0KHZhbHVlS2V5LCB2YWx1ZXNbdmFsdWVLZXldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChrZXksIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNba2V5XSB8fCBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFJhbmdlID0gZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB7fTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBrZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFrZXlzLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhbHVlc1trZXlzW2l0ZW1dXSA9IHRoaXNba2V5c1tpdGVtXV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5rZXlzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2RhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX2RhdGEpLmxlbmd0aDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmV4aXN0cyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiAoa2V5IGluIHRoaXMuX2RhdGEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVtb3ZlID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgaWYgKGtleSBpbiB0aGlzLl9kYXRhKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZGF0YVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRoaXMuX2RhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2RhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNbaXRlbV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2RhdGFbaXRlbV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2RhdGEgPSB7fTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm9udXBkYXRlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0UmFuZ2UoZGF0YSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9zdGFjaztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2RvbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRvbS5qcycpLFxuICAgICAgICBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKTtcblxuICAgIC8vIHRlbXBsYXRlc1xuICAgIHZhciBsYXJvdXhfdGVtcGxhdGVzID0ge1xuICAgICAgICBlbmdpbmVzOiB7XG4gICAgICAgICAgICBwbGFpbjoge1xuICAgICAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gW3RlbXBsYXRlLCBvcHRpb25zXTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBjb21waWxlZFswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpY3QgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0SW5kZXg7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChuZXh0SW5kZXggPSByZXN1bHQuaW5kZXhPZigne3snLCBsYXN0SW5kZXgpKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJbmRleCArPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNsb3NlSW5kZXggPSByZXN1bHQuaW5kZXhPZignfX0nLCBuZXh0SW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNsb3NlSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSByZXN1bHQuc3Vic3RyaW5nKG5leHRJbmRleCwgY2xvc2VJbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaWN0Wyd7eycgKyBrZXkgKyAnfX0nXSA9IGxhcm91eF9oZWxwZXJzLmdldEVsZW1lbnQobW9kZWwsIGtleSwgJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEluZGV4ID0gY2xvc2VJbmRleCArIDI7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2hlbHBlcnMucmVwbGFjZUFsbChyZXN1bHQsIGRpY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhvZ2FuOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBIb2dhbi5jb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZC5yZW5kZXIobW9kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG11c3RhY2hlOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBNdXN0YWNoZS5jb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaGFuZGxlYmFyczoge1xuICAgICAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSGFuZGxlYmFycy5jb21waWxlKHRlbXBsYXRlLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgbG9kYXNoOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qanNsaW50IG5vbWVuOiB0cnVlICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbXBpbGUodGVtcGxhdGUsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIChjb21waWxlZCwgbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVkKG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB1bmRlcnNjb3JlOiB7XG4gICAgICAgICAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKHRlbXBsYXRlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIC8qanNsaW50IG5vbWVuOiB0cnVlICovXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmNvbXBpbGUodGVtcGxhdGUsIG51bGwsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIChjb21waWxlZCwgbW9kZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXBpbGVkKG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGVuZ2luZTogJ3BsYWluJyxcblxuICAgICAgICBhcHBseTogZnVuY3Rpb24gKGVsZW1lbnQsIG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgY29udGVudCwgZW5naW5lID0gbGFyb3V4X3RlbXBsYXRlcy5lbmdpbmVzW2xhcm91eF90ZW1wbGF0ZXMuZW5naW5lXTtcblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IDEgfHwgZWxlbWVudC5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtZW50Lm5vZGVUeXBlID09PSAxMSkge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBlbGVtZW50LnRleHRDb250ZW50O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gZWxlbWVudC5ub2RlVmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBjb21waWxlZCA9IGVuZ2luZS5jb21waWxlKGNvbnRlbnQsIG9wdGlvbnMpO1xuICAgICAgICAgICAgcmV0dXJuIGVuZ2luZS5yZW5kZXIoY29tcGlsZWQsIG1vZGVsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbnNlcnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBtb2RlbCwgdGFyZ2V0LCBwb3NpdGlvbiwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IGxhcm91eF90ZW1wbGF0ZXMuYXBwbHkoZWxlbWVudCwgbW9kZWwsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLmluc2VydCh0YXJnZXQsIHBvc2l0aW9uIHx8ICdiZWZvcmVlbmQnLCBvdXRwdXQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChlbGVtZW50LCBtb2RlbCwgdGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gbGFyb3V4X3RlbXBsYXRlcy5hcHBseShlbGVtZW50LCBtb2RlbCwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGxhcm91eF9kb20ucmVwbGFjZSh0YXJnZXQsIG91dHB1dCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF90ZW1wbGF0ZXM7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gdGltZXJzXG4gICAgdmFyIGxhcm91eF90aW1lcnMgPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHRpbWVyKSB7XG4gICAgICAgICAgICB0aW1lci5uZXh0ID0gRGF0ZS5ub3coKSArIHRpbWVyLnRpbWVvdXQ7XG4gICAgICAgICAgICBsYXJvdXhfdGltZXJzLmRhdGEucHVzaCh0aW1lcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRLZXkgPSBudWxsO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF90aW1lcnMuZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X3RpbWVycy5kYXRhLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF90aW1lcnMuZGF0YVtpdGVtXTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5pZCAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRJdGVtLmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEtleSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRhcmdldEtleSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF90aW1lcnMuZGF0YS5zcGxpY2UodGFyZ2V0S2V5LCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9udGljazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICAgIHZhciByZW1vdmVLZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF90aW1lcnMuZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X3RpbWVycy5kYXRhLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF90aW1lcnMuZGF0YVtpdGVtXTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5uZXh0IDw9IG5vdykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY3VycmVudEl0ZW0ub250aWNrKGN1cnJlbnRJdGVtLnN0YXRlKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBmYWxzZSAmJiBjdXJyZW50SXRlbS5yZXNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0ubmV4dCA9IG5vdyArIGN1cnJlbnRJdGVtLnRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVLZXlzLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIHJlbW92ZUtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZUtleXMuaGFzT3duUHJvcGVydHkoaXRlbTIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF90aW1lcnMuZGF0YS5zcGxpY2UocmVtb3ZlS2V5c1tpdGVtMl0sIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfdGltZXJzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyk7XG5cbiAgICAvLyB0b3VjaCAtIHBhcnRpYWxseSB0YWtlbiBmcm9tICd0b2NjYS5qcycgcHJvamVjdFxuICAgIC8vICAgICAgICAgY2FuIGJlIGZvdW5kIGF0OiBodHRwczovL2dpdGh1Yi5jb20vR2lhbmx1Y2FHdWFyaW5pL1RvY2NhLmpzXG4gICAgdmFyIGxhcm91eF90b3VjaCA9IHtcbiAgICAgICAgdG91Y2hTdGFydGVkOiBudWxsLFxuICAgICAgICBzd2lwZVRyZXNob2xkOiA4MCxcbiAgICAgICAgcHJlY2lzaW9uOiAzMCxcbiAgICAgICAgdGFwQ291bnQ6IDAsXG4gICAgICAgIHRhcFRyZXNob2xkOiAyMDAsXG4gICAgICAgIGxvbmdUYXBUcmVzaG9sZDogODAwLFxuICAgICAgICB0YXBUaW1lcjogbnVsbCxcbiAgICAgICAgcG9zOiBudWxsLFxuICAgICAgICBjYWNoZWQ6IG51bGwsXG5cbiAgICAgICAgZXZlbnRzOiB7XG4gICAgICAgICAgICBzdGFydDogWyd0b3VjaHN0YXJ0JywgJ3BvaW50ZXJkb3duJywgJ01TUG9pbnRlckRvd24nLCAnbW91c2Vkb3duJ10sXG4gICAgICAgICAgICBlbmQ6IFsndG91Y2hlbmQnLCAncG9pbnRlcnVwJywgJ01TUG9pbnRlclVwJywgJ21vdXNldXAnXSxcbiAgICAgICAgICAgIG1vdmU6IFsndG91Y2htb3ZlJywgJ3BvaW50ZXJtb3ZlJywgJ01TUG9pbnRlck1vdmUnLCAnbW91c2Vtb3ZlJ11cbiAgICAgICAgfSxcblxuICAgICAgICBsb2NhdGVQb2ludGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXRUb3VjaGVzKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQgPSBldmVudC50YXJnZXRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gucG9zID0gW2V2ZW50LnBhZ2VYLCBldmVudC5wYWdlWV07XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGV2ZW50cyA9IFtcbiAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgIChuYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkgPyAyIDogMSxcbiAgICAgICAgICAgICAgICAzXG4gICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZXZlbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudFNpbmdsZShkb2N1bWVudCwgbGFyb3V4X3RvdWNoLmV2ZW50cy5zdGFydFtldmVudHNbaV1dLCBsYXJvdXhfdG91Y2gub25zdGFydCk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudFNpbmdsZShkb2N1bWVudCwgbGFyb3V4X3RvdWNoLmV2ZW50cy5lbmRbZXZlbnRzW2ldXSwgbGFyb3V4X3RvdWNoLm9uZW5kKTtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50U2luZ2xlKGRvY3VtZW50LCBsYXJvdXhfdG91Y2guZXZlbnRzLm1vdmVbZXZlbnRzW2ldXSwgbGFyb3V4X3RvdWNoLmxvY2F0ZVBvaW50ZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9uc3RhcnQ6IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmxvY2F0ZVBvaW50ZXIoZXZlbnQpO1xuICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZCA9IFtsYXJvdXhfdG91Y2gucG9zWzBdLCBsYXJvdXhfdG91Y2gucG9zWzFdXTtcbiAgICAgICAgICAgIGxhcm91eF90b3VjaC50b3VjaFN0YXJ0ZWQgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgLypqc2xpbnQgcGx1c3BsdXM6IHRydWUgKi9cbiAgICAgICAgICAgIGxhcm91eF90b3VjaC50YXBDb3VudCsrO1xuXG4gICAgICAgICAgICB2YXIgZm5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdG91Y2guY2FjaGVkWzBdID49IGxhcm91eF90b3VjaC5wb3NbMF0gLSBsYXJvdXhfdG91Y2gucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2guY2FjaGVkWzBdIDw9IGxhcm91eF90b3VjaC5wb3NbMF0gKyBsYXJvdXhfdG91Y2gucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2guY2FjaGVkWzFdID49IGxhcm91eF90b3VjaC5wb3NbMV0gLSBsYXJvdXhfdG91Y2gucHJlY2lzaW9uICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2guY2FjaGVkWzFdIDw9IGxhcm91eF90b3VjaC5wb3NbMV0gKyBsYXJvdXhfdG91Y2gucHJlY2lzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdG91Y2gudG91Y2hTdGFydGVkID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsYXJvdXhfdG91Y2gudGFwQ291bnQgPT09IDIpID8gJ2RibHRhcCcgOiAndGFwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBsYXJvdXhfdG91Y2gucG9zWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBsYXJvdXhfdG91Y2gucG9zWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnRhcENvdW50ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpIC0gbGFyb3V4X3RvdWNoLnRvdWNoU3RhcnRlZCA+IGxhcm91eF90b3VjaC5sb25nVGFwVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20uZGlzcGF0Y2hFdmVudChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2xvbmd0YXAnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5uZXJFdmVudDogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGxhcm91eF90b3VjaC5wb3NbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGxhcm91eF90b3VjaC5wb3NbMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gudG91Y2hTdGFydGVkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC50YXBDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwVGltZXIgPSBzZXRUaW1lb3V0KGZuYywgbGFyb3V4X3RvdWNoLnRhcFRyZXNob2xkKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC50YXBDb3VudCA9IDA7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQobGFyb3V4X3RvdWNoLnRhcFRpbWVyKTtcbiAgICAgICAgICAgIGxhcm91eF90b3VjaC50YXBUaW1lciA9IHNldFRpbWVvdXQoZm5jLCBsYXJvdXhfdG91Y2gudGFwVHJlc2hvbGQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uZW5kOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IFtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnBvc1swXSAtIGxhcm91eF90b3VjaC5jYWNoZWRbMF0sXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC5wb3NbMV0gLSBsYXJvdXhfdG91Y2guY2FjaGVkWzFdXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICBpbm5lckV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgeDogbGFyb3V4X3RvdWNoLnBvc1swXSxcbiAgICAgICAgICAgICAgICAgICAgeTogbGFyb3V4X3RvdWNoLnBvc1sxXSxcbiAgICAgICAgICAgICAgICAgICAgZGlzdGFuY2U6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IE1hdGguYWJzKGRlbHRhWzBdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IE1hdGguYWJzKGRlbHRhWzFdKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnRvdWNoU3RhcnRlZCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmIChkZWx0YVswXSA8PSAtbGFyb3V4X3RvdWNoLnN3aXBlVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQudGFyZ2V0LCAnc3dpcGVyaWdodCcsIGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMF0gPj0gbGFyb3V4X3RvdWNoLnN3aXBlVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQudGFyZ2V0LCAnc3dpcGVsZWZ0JywgZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkZWx0YVsxXSA8PSAtbGFyb3V4X3RvdWNoLnN3aXBlVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQudGFyZ2V0LCAnc3dpcGVkb3duJywgZGF0YSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkZWx0YVsxXSA+PSBsYXJvdXhfdG91Y2guc3dpcGVUcmVzaG9sZCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uZGlzcGF0Y2hFdmVudChldmVudC50YXJnZXQsICdzd2lwZXVwJywgZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gbGFyb3V4LnJlYWR5KGxhcm91eF90b3VjaC5pbml0KTtcblxuICAgIHJldHVybiBsYXJvdXhfdG91Y2g7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gdHJpZ2dlcnNcbiAgICB2YXIgbGFyb3V4X3RyaWdnZXJzID0ge1xuICAgICAgICBkZWxlZ2F0ZXM6IFtdLFxuICAgICAgICBsaXN0OiBbXSxcblxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjb25kaXRpb24sIGZuYywgc3RhdGUpIHtcbiAgICAgICAgICAgIHZhciBjb25kaXRpb25zID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShjb25kaXRpb24pO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmRpdGlvbnMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxhcm91eF9oZWxwZXJzLmFpbmRleChsYXJvdXhfdHJpZ2dlcnMubGlzdCwgY29uZGl0aW9uc1tpdGVtXSkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5saXN0LnB1c2goY29uZGl0aW9uc1tpdGVtXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMuZGVsZWdhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbnM6IGNvbmRpdGlvbnMsXG4gICAgICAgICAgICAgICAgZm5jOiBmbmMsXG4gICAgICAgICAgICAgICAgc3RhdGU6IHN0YXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbnRyaWdnZXI6IGZ1bmN0aW9uICh0cmlnZ2VyTmFtZSwgYXJncykge1xuICAgICAgICAgICAgdmFyIGV2ZW50SWR4ID0gbGFyb3V4X2hlbHBlcnMuYWluZGV4KGxhcm91eF90cmlnZ2Vycy5saXN0LCB0cmlnZ2VyTmFtZSk7XG4gICAgICAgICAgICBpZiAoZXZlbnRJZHggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLmxpc3Quc3BsaWNlKGV2ZW50SWR4LCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJlbW92ZUtleXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXNbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb25kaXRpb25LZXkgaW4gY3VycmVudEl0ZW0uY29uZGl0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRJdGVtLmNvbmRpdGlvbnMuaGFzT3duUHJvcGVydHkoY29uZGl0aW9uS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZGl0aW9uT2JqID0gY3VycmVudEl0ZW0uY29uZGl0aW9uc1tjb25kaXRpb25LZXldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfaGVscGVycy5haW5kZXgobGFyb3V4X3RyaWdnZXJzLmxpc3QsIGNvbmRpdGlvbk9iaikgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uZm5jKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBjdXJyZW50SXRlbS5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzOiBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGFyZ3MpXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIHJlbW92ZUtleXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZUtleXMuaGFzT3duUHJvcGVydHkoaXRlbTIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXMuc3BsaWNlKHJlbW92ZUtleXNbaXRlbTJdLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RyaWdnZXIgbmFtZTogJyArIHRyaWdnZXJOYW1lKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3RyaWdnZXJzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpLFxuICAgICAgICBsYXJvdXhfY3NzID0gcmVxdWlyZSgnLi9sYXJvdXguY3NzLmpzJyksXG4gICAgICAgIGxhcm91eF90aW1lcnMgPSByZXF1aXJlKCcuL2xhcm91eC50aW1lcnMuanMnKSxcbiAgICAgICAgbGFyb3V4X2RhdGUgPSByZXF1aXJlKCcuL2xhcm91eC5kYXRlLmpzJyk7XG5cbiAgICAvLyB1aVxuICAgIHZhciBsYXJvdXhfdWkgPSB7XG4gICAgICAgIGZsb2F0Q29udGFpbmVyOiBudWxsLFxuXG4gICAgICAgIHBvcHVwOiB7XG4gICAgICAgICAgICBkZWZhdWx0VGltZW91dDogNTAwLFxuXG4gICAgICAgICAgICBjcmVhdGVCb3g6IGZ1bmN0aW9uIChpZCwgeGNsYXNzLCBtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kb20uY3JlYXRlRWxlbWVudCgnRElWJywgeyBpZDogaWQsICdjbGFzcyc6IHhjbGFzcyB9LCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIG1zZ2JveDogZnVuY3Rpb24gKHRpbWVvdXQsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSBsYXJvdXhfaGVscGVycy5nZXRVbmlxdWVJZCgpLFxuICAgICAgICAgICAgICAgICAgICBvYmogPSBsYXJvdXhfdWkucG9wdXAuY3JlYXRlQm94KGlkLCAnbGFyb3V4TXNnQm94JywgbWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLmZsb2F0Q29udGFpbmVyLmFwcGVuZENoaWxkKG9iaik7XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KG9iaiwgeyBvcGFjaXR5OiAxIH0pO1xuXG4gICAgICAgICAgICAgICAgbGFyb3V4X3RpbWVycy5zZXQoe1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aW1lb3V0LFxuICAgICAgICAgICAgICAgICAgICByZXNldDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIG9udGljazogZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoeCwgeyBvcGFjaXR5OiAwIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5yZW1vdmUoeCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOiBvYmpcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBsb2FkaW5nOiB7XG4gICAgICAgICAgICBlbGVtZW50U2VsZWN0b3I6IG51bGwsXG4gICAgICAgICAgICBlbGVtZW50OiBudWxsLFxuICAgICAgICAgICAgZGVmYXVsdERlbGF5OiAxNTAwLFxuICAgICAgICAgICAgdGltZXI6IG51bGwsXG5cbiAgICAgICAgICAgIGtpbGxUaW1lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChsYXJvdXhfdWkubG9hZGluZy50aW1lcik7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBoaWRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLmxvYWRpbmcua2lsbFRpbWVyKCk7XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQsIHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5sb2FkaW5nSW5kaWNhdG9yID0gJ2ZhbHNlJztcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNob3c6IGZ1bmN0aW9uIChkZWxheSkge1xuICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLmtpbGxUaW1lcigpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBsYXJvdXhfdWkubG9hZGluZy5kZWZhdWx0RGVsYXk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgbGFyb3V4X3VpLmxvYWRpbmcuc2hvdygwKTsgfSwgZGVsYXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkobGFyb3V4X3VpLmxvYWRpbmcuZWxlbWVudCwgeyBkaXNwbGF5OiAnYmxvY2snIH0pO1xuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UubG9hZGluZ0luZGljYXRvciA9ICd0cnVlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQgPT09IG51bGwgJiYgbGFyb3V4X3VpLmxvYWRpbmcuZWxlbWVudFNlbGVjdG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQgPSBsYXJvdXhfZG9tLnNlbGVjdFNpbmdsZShsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50U2VsZWN0b3IpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnQod2luZG93LCAnbG9hZCcsIGxhcm91eF91aS5sb2FkaW5nLmhpZGUpO1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50KHdpbmRvdywgJ2JlZm9yZXVubG9hZCcsIGxhcm91eF91aS5sb2FkaW5nLnNob3cpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2NhbFN0b3JhZ2UubG9hZGluZ0luZGljYXRvciAhPT0gdW5kZWZpbmVkICYmIGxvY2FsU3RvcmFnZS5sb2FkaW5nSW5kaWNhdG9yID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLnNob3coMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkubG9hZGluZy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHluYW1pY0RhdGVzOiB7XG4gICAgICAgICAgICB1cGRhdGVEYXRlc0VsZW1lbnRzOiBudWxsLFxuXG4gICAgICAgICAgICB1cGRhdGVEYXRlczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdWkuZHluYW1pY0RhdGVzLnVwZGF0ZURhdGVzRWxlbWVudHMgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLmR5bmFtaWNEYXRlcy51cGRhdGVEYXRlc0VsZW1lbnRzID0gbGFyb3V4X2RvbS5zZWxlY3QoJypbZGF0YS1lcG9jaF0nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF91aS5keW5hbWljRGF0ZXMudXBkYXRlRGF0ZXNFbGVtZW50cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF91aS5keW5hbWljRGF0ZXMudXBkYXRlRGF0ZXNFbGVtZW50cy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gbGFyb3V4X3VpLmR5bmFtaWNEYXRlcy51cGRhdGVEYXRlc0VsZW1lbnRzW2l0ZW1dO1xuICAgICAgICAgICAgICAgICAgICAvLyBiaXRzaGlmdGluZyAoc3RyID4+IDApIHVzZWQgaW5zdGVhZCBvZiBwYXJzZUludChzdHIsIDEwKVxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKChvYmouZ2V0QXR0cmlidXRlKCdkYXRhLWVwb2NoJykgPj4gMCkgKiAxMDAwKTtcblxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmosXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZGF0ZS5nZXREYXRlU3RyaW5nKGRhdGUpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgb2JqLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBsYXJvdXhfZGF0ZS5nZXRMb25nRGF0ZVN0cmluZyhkYXRlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF90aW1lcnMuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogNTAwLFxuICAgICAgICAgICAgICAgICAgICByZXNldDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgb250aWNrOiBsYXJvdXhfdWkuZHluYW1pY0RhdGVzLnVwZGF0ZURhdGVzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2Nyb2xsVmlldzoge1xuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtZW50czogW10sXG5cbiAgICAgICAgICAgIG9uaGlkZGVuOiBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGVsZW1lbnRzLCB7IG9wYWNpdHk6IDAgfSk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRUcmFuc2l0aW9uKGVsZW1lbnRzLCBbJ29wYWNpdHknXSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBvbnJldmVhbDogZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50cywgeyBvcGFjaXR5OiAxIH0pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfY3NzLmluVmlld3BvcnQoZWxlbWVudHNbaV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkuc2Nyb2xsVmlldy5zZWxlY3RlZEVsZW1lbnRzLnB1c2goZWxlbWVudHNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLnNjcm9sbFZpZXcub25oaWRkZW4obGFyb3V4X3VpLnNjcm9sbFZpZXcuc2VsZWN0ZWRFbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudCh3aW5kb3csICdzY3JvbGwnLCBsYXJvdXhfdWkuc2Nyb2xsVmlldy5yZXZlYWwpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcmV2ZWFsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlbW92ZUtleXMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGxhcm91eF9oZWxwZXJzLmVhY2goXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5zY3JvbGxWaWV3LnNlbGVjdGVkRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChpLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2Nzcy5pblZpZXdwb3J0KGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlS2V5cy51bnNoaWZ0KGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiByZW1vdmVLZXlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVtb3ZlS2V5cy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkuc2Nyb2xsVmlldy5zZWxlY3RlZEVsZW1lbnRzLnNwbGljZShyZW1vdmVLZXlzW2l0ZW1dLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3VpLnNjcm9sbFZpZXcuc2VsZWN0ZWRFbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS51bnNldEV2ZW50KHdpbmRvdywgJ3Njcm9sbCcsIGxhcm91eF91aS5zY3JvbGxWaWV3LnJldmVhbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLnNjcm9sbFZpZXcub25yZXZlYWwoZWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVGbG9hdENvbnRhaW5lcjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFsYXJvdXhfdWkuZmxvYXRDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfdWkuZmxvYXRDb250YWluZXIgPSBsYXJvdXhfZG9tLmNyZWF0ZUVsZW1lbnQoJ0RJVicsIHsgJ2NsYXNzJzogJ2xhcm91eEZsb2F0RGl2JyB9KTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShsYXJvdXhfdWkuZmxvYXRDb250YWluZXIsIGRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGFyb3V4X3VpLmNyZWF0ZUZsb2F0Q29udGFpbmVyKCk7XG4gICAgICAgICAgICBsYXJvdXhfdWkubG9hZGluZy5pbml0KCk7XG4gICAgICAgICAgICBsYXJvdXhfdWkuZHluYW1pY0RhdGVzLmluaXQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBsYXJvdXgucmVhZHkobGFyb3V4X3VpLmluaXQpO1xuXG4gICAgcmV0dXJuIGxhcm91eF91aTtcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyB2YXJzXG4gICAgdmFyIGxhcm91eF92YXJzID0ge1xuICAgICAgICBjb29raWVQYXRoOiAnLycsXG5cbiAgICAgICAgZ2V0Q29va2llOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9W147XSsnLCAnaScpLFxuICAgICAgICAgICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKHJlKTtcblxuICAgICAgICAgICAgaWYgKCFtYXRjaCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChtYXRjaFswXS5zcGxpdCgnPScpWzFdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRDb29raWU6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgZXhwaXJlcywgcGF0aCkge1xuICAgICAgICAgICAgdmFyIGV4cGlyZVZhbHVlID0gJyc7XG4gICAgICAgICAgICBpZiAoZXhwaXJlcykge1xuICAgICAgICAgICAgICAgIGV4cGlyZVZhbHVlID0gJzsgZXhwaXJlcz0nICsgZXhwaXJlcy50b0dNVFN0cmluZygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpICsgZXhwaXJlVmFsdWUgKyAnOyBwYXRoPScgKyAocGF0aCB8fCBsYXJvdXhfdmFycy5jb29raWVQYXRoKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmVDb29raWU6IGZ1bmN0aW9uIChuYW1lLCBwYXRoKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPTsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIEdNVDsgcGF0aD0nICsgKHBhdGggfHwgbGFyb3V4X3ZhcnMuY29va2llUGF0aCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0TG9jYWw6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gbG9jYWxTdG9yYWdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlW25hbWVdKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRMb2NhbDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2VbbmFtZV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlTG9jYWw6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICBkZWxldGUgbG9jYWxTdG9yYWdlW25hbWVdO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNlc3Npb246IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIGlmICghKG5hbWUgaW4gc2Vzc2lvblN0b3JhZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZVtuYW1lXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0U2Vzc2lvbjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZVtuYW1lXSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmVTZXNzaW9uOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIHNlc3Npb25TdG9yYWdlW25hbWVdO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfdmFycztcblxufSgpKTtcbiIsIi8qZ2xvYmFsIE5vZGVMaXN0LCBOb2RlICovXG5tb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2NzcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmNzcy5qcycpLFxuICAgICAgICBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKTtcblxuICAgIC8vIHdyYXBwZXJcbiAgICB2YXIgbGFyb3V4X3dyYXBwZXIgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICB2YXIgc2VsZWN0aW9uO1xuXG4gICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBzZWxlY3RvcjtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGVMaXN0KSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBsYXJvdXhfaGVscGVycy50b0FycmF5KHNlbGVjdG9yKTtcbiAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgICAgICAgIHNlbGVjdGlvbiA9IFtzZWxlY3Rvcl07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBsYXJvdXhfZG9tLnNlbGVjdChzZWxlY3RvciwgcGFyZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZWxlY3Rpb24ubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IGxhcm91eF93cmFwcGVyLnNpbmdsZVRlbXBsYXRlKHNlbGVjdGlvblswXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbmV3IGxhcm91eF93cmFwcGVyLmFycmF5VGVtcGxhdGUoc2VsZWN0aW9uKTtcbiAgICB9O1xuXG4gICAgbGFyb3V4X3dyYXBwZXIuc2luZ2xlVGVtcGxhdGUgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuaXNBcnJheSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDAgfHwgaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmZpbmQgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfd3JhcHBlcihzZWxlY3RvciwgdGhpcy5zb3VyY2UpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBsYXJvdXhfd3JhcHBlci5hcnJheVRlbXBsYXRlID0gZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgIHRoaXMuc291cmNlID0gZWxlbWVudHM7XG4gICAgICAgIHRoaXMuaXNBcnJheSA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZVtpbmRleF07XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyQm90aCA9IDA7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUgPSAxO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyQXJyYXkgPSAyO1xuXG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIgPSBmdW5jdGlvbiAobmFtZSwgZm5jLCBzY29wZSkge1xuICAgICAgICB2YXIgbmV3Rm5jID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuYy5hcHBseShcbiAgICAgICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgICAgIFt0aGlzLnNvdXJjZV0uY29uY2F0KGxhcm91eF9oZWxwZXJzLnRvQXJyYXkoYXJndW1lbnRzKSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJldHVybiAocmVzdWx0ID09PSB1bmRlZmluZWQpID8gdGhpcyA6IHJlc3VsdDtcbiAgICAgICAgfTtcblxuICAgICAgICBzd2l0Y2ggKHNjb3BlKSB7XG4gICAgICAgIGNhc2UgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGU6XG4gICAgICAgICAgICBsYXJvdXhfd3JhcHBlci5zaW5nbGVUZW1wbGF0ZS5wcm90b3R5cGVbbmFtZV0gPSBuZXdGbmM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckFycmF5OlxuICAgICAgICAgICAgbGFyb3V4X3dyYXBwZXIuYXJyYXlUZW1wbGF0ZS5wcm90b3R5cGVbbmFtZV0gPSBuZXdGbmM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGxhcm91eF93cmFwcGVyLnNpbmdsZVRlbXBsYXRlLnByb3RvdHlwZVtuYW1lXSA9IG5ld0ZuYztcbiAgICAgICAgICAgIGxhcm91eF93cmFwcGVyLmFycmF5VGVtcGxhdGUucHJvdG90eXBlW25hbWVdID0gbmV3Rm5jO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2F0dHInLCBsYXJvdXhfZG9tLmF0dHIsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignZGF0YScsIGxhcm91eF9kb20uZGF0YSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdvbicsIGxhcm91eF9kb20uc2V0RXZlbnRTaW5nbGUsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignb24nLCBsYXJvdXhfZG9tLnNldEV2ZW50LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckFycmF5KTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignb2ZmJywgbGFyb3V4X2RvbS51bnNldEV2ZW50LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdjbGVhcicsIGxhcm91eF9kb20uY2xlYXIsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5zZXJ0JywgbGFyb3V4X2RvbS5pbnNlcnQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigncHJlcGVuZCcsIGxhcm91eF9kb20ucHJlcGVuZCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdhcHBlbmQnLCBsYXJvdXhfZG9tLmFwcGVuZCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdyZXBsYWNlJywgbGFyb3V4X2RvbS5yZXBsYWNlLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3JlcGxhY2VUZXh0JywgbGFyb3V4X2RvbS5yZXBsYWNlVGV4dCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdyZW1vdmUnLCBsYXJvdXhfZG9tLnJlbW92ZSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuXG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2hhc0NsYXNzJywgbGFyb3V4X2Nzcy5oYXNDbGFzcywgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdhZGRDbGFzcycsIGxhcm91eF9jc3MuYWRkQ2xhc3MsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyQm90aCk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3JlbW92ZUNsYXNzJywgbGFyb3V4X2Nzcy5yZW1vdmVDbGFzcywgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigndG9nZ2xlQ2xhc3MnLCBsYXJvdXhfY3NzLnRvZ2dsZUNsYXNzLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdnZXRQcm9wZXJ0eScsIGxhcm91eF9jc3MuZ2V0UHJvcGVydHksIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignc2V0UHJvcGVydHknLCBsYXJvdXhfY3NzLnNldFByb3BlcnR5LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdzZXRUcmFuc2l0aW9uJywgbGFyb3V4X2Nzcy5zZXRUcmFuc2l0aW9uLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdzaG93JywgbGFyb3V4X2Nzcy5zaG93LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdoaWRlJywgbGFyb3V4X2Nzcy5oaWRlLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdoZWlnaHQnLCBsYXJvdXhfY3NzLmhlaWdodCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdpbm5lckhlaWdodCcsIGxhcm91eF9jc3MuaW5uZXJIZWlnaHQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignb3V0ZXJIZWlnaHQnLCBsYXJvdXhfY3NzLm91dGVySGVpZ2h0LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3dpZHRoJywgbGFyb3V4X2Nzcy53aWR0aCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdpbm5lcldpZHRoJywgbGFyb3V4X2Nzcy5pbm5lcldpZHRoLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ291dGVyV2lkdGgnLCBsYXJvdXhfY3NzLm91dGVyV2lkdGgsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigndG9wJywgbGFyb3V4X2Nzcy50b3AsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignbGVmdCcsIGxhcm91eF9jc3MubGVmdCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdhYm92ZVRoZVRvcCcsIGxhcm91eF9jc3MuYWJvdmVUaGVUb3AsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYmVsb3dUaGVGb2xkJywgbGFyb3V4X2Nzcy5iZWxvd1RoZUZvbGQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignbGVmdE9mU2NyZWVuJywgbGFyb3V4X2Nzcy5sZWZ0T2ZTY3JlZW4sIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigncmlnaHRPZlNjcmVlbicsIGxhcm91eF9jc3MucmlnaHRPZlNjcmVlbiwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdpblZpZXdwb3J0JywgbGFyb3V4X2Nzcy5pblZpZXdwb3J0LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG5cbiAgICByZXR1cm4gbGFyb3V4X3dyYXBwZXI7XG5cbn0oKSk7XG4iXX0=\n"],"sourceRoot":"/source/"}