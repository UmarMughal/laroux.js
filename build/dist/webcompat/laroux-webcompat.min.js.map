{"version":3,"sources":["src/js/laroux.backward.js","src/js/laroux.js","src/js/laroux.ajax.js","src/js/laroux.anim.js","src/js/laroux.css.js","src/js/laroux.date.js","src/js/laroux.dom.js","src/js/laroux.events.js","src/js/laroux.forms.js","src/js/laroux.helpers.js","src/js/laroux.keys.js","src/js/laroux.mvc.js","src/js/laroux.stack.js","src/js/laroux.templates.js","src/js/laroux.timers.js","src/js/laroux.touch.js","src/js/laroux.triggers.js","src/js/laroux.ui.js","src/js/laroux.vars.js","src/js/laroux.wrapper.js","laroux-webcompat.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"global","scope","emptyFunction","undefined","document","attachEvent","createEventObject","readyState","requestAnimationFrame","callback","setTimeout","Date","now","getComputedStyle","element","this","getPropertyValue","prop","re","test","replace","arguments","toUpperCase","currentStyle","getPropertyCSSValue","CSSPrimitiveValue","primitiveType","getFloatValue","Event","prototype","preventDefault","returnValue","stopPropagation","cancelBubble","Element","eventListeners","addListener","eventname","self","wrapper","event","target","srcElement","currentTarget","push","object","type","listener","removeListener","eventListener","detachEvent","splice","dispatchEvent","eventObject","fireEvent","addEventListener","removeEventListener","HTMLDocument","Window","Text","innerText","Object","getOwnPropertyDescriptor","defineProperty","get","set","value","getAttribute","attribute","attributes","setAttribute","removeAttribute","removeNamedItem","children","add","className","trim","remove","RegExp","split","join","contains","nodeValue","String","observe","keys","item","hasOwnProperty","window",2,"module","laroux","selector","parent","Array","helpers","toArray","querySelectorAll","querySelector","$l","events","timers","cached","single","array","id","c","getElementById","idc","readyPassed","extend","unshift","extendObject","apply","each","map","index","aeach","amap","aindex","ready","fnc","ajax","css","dom","forms","triggers","vars","anim","date","mvc","stack","templates","touch","ui","invoke","setInterval","ontick","init","./laroux.ajax.js","./laroux.anim.js","./laroux.css.js","./laroux.date.js","./laroux.dom.js","./laroux.events.js","./laroux.forms.js","./laroux.helpers.js","./laroux.keys.js","./laroux.mvc.js","./laroux.stack.js","./laroux.templates.js","./laroux.timers.js","./laroux.touch.js","./laroux.triggers.js","./laroux.ui.js","./laroux.vars.js","./laroux.wrapper.js",3,"laroux_events","laroux_helpers","laroux_ajax","corsDefault","wrappers","registry","laroux.js","data","isSuccess","console","log","errorMessage","obj","format","JSON","parse","eval","name","xDomainObject","xmlHttpRequestObject","xDomainRequestObject","xhr","crossDomain","XMLHttpRequest","XDomainRequest","xhrResp","options","wrapperFunction","getResponseHeader","response","datatype","responseText","responseXML","wrapperFunc","makeRequest","cors","url","timer","timeout","abort","timeoutFn","onreadystatechange","clearTimeout","status","res","error","statusText","success","complete","progress","getdata","constructor","queryString","buildQueryString","indexOf","jsonp","open","xhrFields","headers","j","setRequestHeader","postdata","send","postdatatype","stringify","buildFormData","path","values","successfnc","errorfnc","getJson","getJsonP","method","getScript","post","postJson","Content-Type",4,"laroux_css","laroux_anim","fx","interpolate","source","shift","easing","pos","Math","cos","PI","newanim","startTime","unit","from","body","property","documentElement","scrollTop","Number","reset","onframe","setCss","getProperty","style","camelCase","targetKey","currentItem","timestamp","removeKeys","result","step","time","scrollTo","item2","finishT","to",5,"hasClass","classList","addClass","elements","getAsArray","removeClass","toggleClass","cycleClass","styleName","antiCamelCase","setProperty","properties","oldProperties","newStyleName","defaultTransition","setTransitionSingle","transition","currentTransitionsArray","transitions","currentTransitions","transitionProperties","substring","found","localeCompare","webkitTransition","msTransition","setTransition","show","opacity","hide","height","innerHeight","clientHeight","outerHeight","includeMargin","offsetHeight","marginTop","marginBottom","margins","ceil","width","innerWidth","clientWidth","outerWidth","offsetWidth","marginLeft","marginRight","top","getBoundingClientRect","left","scrollLeft","aboveTheTop","bottom","belowTheFold","leftOfScreen","right","rightOfScreen","inViewport","rect",6,"laroux_date","shortDateFormat","longDateFormat","timeFormat","monthsShort","monthsLong","strings","later","ago","seconds","aminute","minutes","ahour","hours","aday","days","aweek","weeks","amonth","months","ayear","years","parseEpoch","timespan","limitWithWeeks","getCustomDateString","match","getFullYear","getYear","getMonth","substr","getDate","hour1","getHours","hour2","getMinutes","getSeconds","getDateDiffString","getTime","absTimespan","abs","past","timespanstring","getShortDateString","includeTime","getLongDateString",7,"laroux_dom","docprop","propName","select","selectByClass","getElementsByClassName","selectByTag","getElementsByTagName","selectById","selectSingle","attr","oldAttributes","attributeName","datanames","oldDatanames","dataName","eventHistory","setEvent","setEventSingle","fncWrapper","unsetEvent","i1","length1","i2","length2","customEvent","createEvent","initEvent","create","html","frag","createDocumentFragment","temp","createElement","insertAdjacentHTML","firstChild","appendChild","elem","append","createOption","key","isDefault","option","selectByValue","selectedIndex","clear","hasChildNodes","removeChild","insert","position","content","prepend","replaceText","textContent","cloneReturn","cloneAppend","cloneInsertAfter","cloneInsertBefore","clone","container","newElement","cloneNode","parentNode","insertBefore","nextSibling","parentElement",8,"delegates","args",9,"laroux_forms","ajaxForm","formobj","fncBegin","serializeFormData","isFormField","tagName","getFormFieldValue","disabled","files","checked","setFormFieldValue","toggleFormEditing","selection","selected","lastDisabled","formdata","FormData","serialize","deserialize",10,"uniqueId","getUniqueId","rfc3986","uri","regEx","encodeURIComponent","toString","replaceAll","text","dictionary","flag","output","currChar","charAt","toLowerCase","quoteAttr","spliceString","count","slice","random","min","max","floor","find","iterator","context","some","list","arr","testOwnProperties","dontSkipReturns","results","start","column","shuffle","shuffled","rand","merge","tmp","isArray","concat","duplicate","items","NodeList","getLength","getKeysRecursive","delimiter","prefix","getElement","defaultValue","rest",11,"laroux_keys","keyName","keycode","fromCharCode","assign","ev","nodeType","disableInputs","shiftKey","ctrl","ctrlKey","alt","altKey","keyCode","which",12,"laroux_mvc","apps","pauseUpdate","model","appKey","onupdate","update","rebind","app","modelKeys","_data","boundElements","eventElements","scanElements","binding","bindStringParser","atts","m","binding1","binding2","chldrn","childNodes","boundElement","lastBuffer","buffer","state","curr",13,"laroux_stack","depth","_depth","_top","configurable","newValue","oldValue","setRange","valueKey","getRange","exists",14,"laroux_templates","engines","plain","compile","template","render","compiled","nextIndex","dict","lastIndex","closeIndex","hogan","Hogan","mustache","Mustache","handlebars","Handlebars","lodash","_","underscore","engine",15,"laroux_timers","next",16,"laroux_touch","touchStarted","swipeTreshold","precision","tapCount","tapTreshold","longTapTreshold","tapTimer","end","move","locatePointer","targetTouches","pageX","pageY","navigator","onstart","onend","innerEvent","x","y","delta","distance",17,"laroux_triggers","condition","conditions","ontrigger","triggerName","eventIdx","conditionKey","conditionObj",18,"laroux_ui","floatContainer","popup","defaultTimeout","createBox","xclass","message","class","msgbox","loading","elementSelector","defaultDelay","killTimer","display","localStorage","loadingIndicator","delay","dynamicDates","updateDatesElements","updateDates","getDateString","scrollView","selectedElements","onhidden","onreveal","reveal","createFloatContainer",19,"laroux_vars","cookiePath","getCookie","cookie","decodeURIComponent","setCookie","expires","expireValue","toGMTString","removeCookie","getLocal","setLocal","removeLocal","getSession","sessionStorage","setSession","removeSession",20,"laroux_wrapper","Node","singleTemplate","arrayTemplate","registerBoth","registerSingle","registerArray","register","newFnc"],"mappings":"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","file":"laroux-webcompat.min.js","sourcesContent":["(function (scope) {\n    'use strict';\n\n    var emptyFunction = function () {};\n\n    if (scope.document === undefined) {\n        scope.document = {\n            attachEvent: emptyFunction,\n            createEventObject: emptyFunction,\n            readyState: null\n        };\n    }\n\n    if (!('requestAnimationFrame' in scope)) {\n        scope.requestAnimationFrame = function (callback) {\n            setTimeout(function () { callback(Date.now()); }, 50);\n        };\n    }\n\n    if (!('getComputedStyle' in scope)) {\n        scope.getComputedStyle = function (element) {\n            this.element = element;\n\n            this.getPropertyValue = function (prop) {\n                var re = /(\\-([a-z]){1})/g;\n                if (prop === 'float') {\n                    prop = 'styleFloat';\n                }\n\n                if (re.test(prop)) {\n                    prop = prop.replace(re, function () {\n                        return arguments[2].toUpperCase();\n                    });\n                }\n\n                return this.element.currentStyle[prop] || null;\n            };\n\n            this.getPropertyCSSValue = function (prop) {\n                return new CSSPrimitiveValue(this.element, prop);\n            };\n\n            return this;\n        };\n    }\n\n    if (!('CSSPrimitiveValue' in scope)) {\n        scope.CSSPrimitiveValue = function (element, prop) {\n            this.element = element;\n            this.prop = prop;\n            this.primitiveType = 0;\n\n            this.getFloatValue = function (primitiveType) {\n                var re = /(\\-([a-z]){1})/g,\n                    prop = this.prop;\n\n                if (prop === 'float') {\n                    prop = 'styleFloat';\n                }\n\n                if (re.test(prop)) {\n                    prop = prop.replace(re, function () {\n                        return arguments[2].toUpperCase();\n                    });\n                }\n\n                return this.element.currentStyle[prop] || null;\n            };\n        };\n    }\n\n    if (scope.Event === undefined) {\n        scope.Event = emptyFunction;\n    }\n\n    if (!('preventDefault' in Event.prototype)) {\n        Event.prototype.preventDefault = function () {\n            this.returnValue = false;\n        };\n    }\n\n    if (!('stopPropagation' in Event.prototype)) {\n        Event.prototype.stopPropagation = function () {\n            this.cancelBubble = true;\n        };\n    }\n\n    if (scope.Element === undefined) {\n        scope.Element = emptyFunction;\n    }\n\n    if (!('addEventListener' in Element.prototype)) {\n        var eventListeners = [],\n            addListener = function (eventname, callback) {\n                var self = this,\n                    wrapper = function (event) {\n                        event.target = event.srcElement;\n                        event.currentTarget = self;\n\n                        // if ('handleEvent' in callback) {\n                        //     callback.handleEvent(event);\n                        // } else {\n                        //     callback.call(self, event);\n                        // }\n                        callback(self, event);\n                    };\n\n                if (eventname !== 'DOMContentLoaded') {\n                    this.attachEvent('on' + eventname, wrapper);\n                }\n                eventListeners.push({ object: this, type: eventname, listener: callback, wrapper: wrapper });\n            },\n            removeListener = function (eventname, callback) {\n                for (var i = 0, length = eventListeners.length; i < length; i++) {\n                    var eventListener = eventListeners[i];\n\n                    if (eventListener.object === this && eventListener.type === eventname && eventListener.listener === callback) {\n                        if (eventname != 'DOMContentLoaded') {\n                            this.detachEvent('on' + eventname, eventListener.wrapper);\n                        }\n\n                        eventListeners.splice(i, 1);\n                        break;\n                    }\n                }\n            },\n            dispatchEvent = function (event) {\n                var eventObject = document.createEventObject();\n                this.fireEvent('on' + event.type, eventObject);\n            };\n\n        Element.prototype.addEventListener = addListener;\n        Element.prototype.removeEventListener = removeListener;\n        Element.prototype.dispatchEvent = dispatchEvent;\n\n        if (scope.HTMLDocument !== undefined) {\n            HTMLDocument.prototype.addEventListener = addListener;\n            HTMLDocument.prototype.removeEventListener = removeListener;\n            HTMLDocument.prototype.dispatchEvent = dispatchEvent;\n        }\n\n        if (scope.Window !== undefined) {\n            Window.prototype.addEventListener = addListener;\n            Window.prototype.removeEventListener = removeListener;\n            Window.prototype.dispatchEvent = dispatchEvent;\n        }\n\n        document.attachEvent('onreadystatechange', function () {\n            if (document.readyState == 'complete') {\n                var eventObject = document.createEventObject();\n                // eventObject.srcElement = window;\n\n                for (var i = 0, length = eventListeners.length; i < length; i++) {\n                    if (eventListeners[i].object === document && eventListeners[i].type === 'DOMContentLoaded') {\n                        eventListeners[i].wrapper(eventObject);\n                    }\n                }\n            }\n        });\n    }\n\n    if (scope.Text === undefined) {\n        scope.Text = emptyFunction;\n    }\n\n    if (!('textContent' in Element.prototype)) {\n        var innerText = Object.getOwnPropertyDescriptor(Element.prototype, 'innerText');\n\n        Object.defineProperty(Element.prototype, 'textContent', {\n            get: function () {\n                return innerText.get.call(this);\n            },\n            set: function (value) {\n                return innerText.set.call(this, value);\n            }\n        });\n    }\n\n    if (!('getAttribute' in Element.prototype)) {\n        Element.prototype.getAttribute = function (attribute) {\n            return this.attributes[attribute].value;\n        };\n    }\n\n    if (!('setAttribute' in Element.prototype)) {\n        Element.prototype.setAttribute = function (attribute, value) {\n            this.attributes[attribute].value = value;\n        };\n    }\n\n    if (!('removeAttribute' in Element.prototype)) {\n        Element.prototype.removeAttribute = function (attribute) {\n            this.attributes.removeNamedItem(attribute);\n        };\n    }\n\n    if (!('firstElementChild' in Element.prototype)) {\n        Object.defineProperty(Element.prototype, 'firstElementChild', {\n            get: function () {\n                return this.children[0];\n            }\n        });\n    }\n\n    if (!('classList' in Element.prototype)) {\n        Object.defineProperty(Element.prototype, 'classList', {\n            get: function () {\n                var self = this;\n\n                return {\n                    add: function (className) {\n                        self.className = self.className.trim() + ' ' + className;\n                    },\n\n                    remove: function (className) {\n                        self.className = self.className.replace(\n                            new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'),\n                            ' '\n                        );\n                    },\n\n                    contains: function (className) {\n                        return (new RegExp('(^| )' + className + '( |$)', 'gi').test(self.className));\n                    }\n                };\n            }\n        });\n    }\n\n    if (!('textContent' in Text.prototype)) {\n        var nodeValue = Object.getOwnPropertyDescriptor(Text.prototype, 'nodeValue');\n\n        Object.defineProperty(Text.prototype, 'textContent', {\n            get: function () {\n                return nodeValue.get.call(this);\n            },\n            set: function (value) {\n                return nodeValue.set.call(this, value);\n            }\n        });\n    }\n\n    if (!('trim' in String.prototype)) {\n        String.prototype.trim = function () {\n            return this.replace(/^\\s+|\\s+$/g, '');\n        };\n    }\n\n    if (!('observe' in Object)) {\n        Object.observe = emptyFunction;\n    }\n\n    if (!('keys' in Object)) {\n        Object.keys = function (object) {\n            var keys = [];\n\n            for (var item in object) {\n                if (!object.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(item);\n            }\n\n            return keys;\n        };\n    }\n\n    /*\n    if (!('forEach' in Object.prototype)) {\n        Object.prototype.forEach = function (callback) {\n            for (var item in this) {\n                if (!this.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                callback.apply(this, [this[item], item, this]);\n            }\n        };\n    }\n\n    if (!('map' in Object.prototype)) {\n        Object.prototype.map = function (callback) {\n            var results = [];\n\n            for (var item in this) {\n                if (!this.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                results.push(callback.apply(this, [this[item], item, this]));\n            }\n\n            return results;\n        };\n    }\n\n    if (!('forEach' in Array.prototype)) {\n        Array.prototype.forEach = function (callback) {\n            for (var i = 0; i < this.length; i++) {\n                callback.apply(this, [this[i], i, this]);\n            }\n        };\n    }\n\n    if (!('map' in Array.prototype)) {\n        Array.prototype.map = function (callback) {\n            var results = [];\n\n            for (var i = 0; i < this.length; i++) {\n                results.push(callback.apply(this, [this[i], i, this]));\n            }\n\n            return results;\n        };\n    }\n\n    if (!('indexOf' in Array.prototype)) {\n        Array.prototype.indexOf = function (object, start) {\n            for (var i = (start || 0), length = this.length; i < length; i++) {\n                if (this[i] === object) {\n                    return i;\n                }\n            }\n\n            return -1;\n        };\n    }\n    */\n\n}(typeof window !== 'undefined' ? window : global));\n","module.exports = (function (scope) {\n    'use strict';\n\n    // core\n    var laroux = function (selector, parent) {\n        if (selector instanceof Array) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        }\n\n        /*\n        // FIXME: non-chrome optimization\n        var re = /^#([^\\+\\>\\[\\]\\.# ]*)$/.exec(selector);\n        if (re) {\n            if (parent === undefined) {\n                return document.getElementById(re[1]);\n            }\n\n            return parent.getElementById(re[1]);\n        }\n        */\n\n        return (parent || document).querySelector(selector);\n    };\n\n    if (!('$l' in scope)) {\n        scope.$l = laroux;\n    }\n\n    // core modules\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.timers = require('./laroux.timers.js');\n\n    laroux.cached = {\n        single: {},\n        array: {},\n        id: {}\n    };\n\n    laroux.c = function (selector) {\n        if (selector instanceof Array) {\n            return laroux.cached.array[selector] || (\n                laroux.cached.array[selector] = laroux.helpers.toArray(\n                    document.querySelectorAll(selector)\n                )\n            );\n        }\n\n        return laroux.cached.single[selector] || (\n            laroux.cached.single[selector] = document.querySelector(selector)\n        );\n    };\n\n    laroux.id = function (selector, parent) {\n        return (parent || document).getElementById(selector);\n    };\n\n    laroux.idc = function (selector) {\n        return laroux.cached.id[selector] ||\n            (laroux.cached.id[selector] = document.getElementById(selector));\n    };\n\n    laroux.readyPassed = false;\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    laroux.ready = function (fnc) {\n        if (!laroux.readyPassed) {\n            laroux.events.add('ContentLoaded', fnc);\n            return;\n        }\n\n        fnc();\n    };\n\n    // optional modules\n    laroux.wrapper = require('./laroux.wrapper.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.css = require('./laroux.css.js');\n    laroux.dom = require('./laroux.dom.js');\n    // laroux.events = require('./laroux.events.js');\n    laroux.forms = require('./laroux.forms.js');\n    // laroux.helpers = require('./laroux.helpers.js');\n    // laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n\n    laroux.anim = require('./laroux.anim.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.keys = require('./laroux.keys.js');\n    laroux.mvc = require('./laroux.mvc.js');\n    laroux.stack = require('./laroux.stack.js');\n    laroux.templates = require('./laroux.templates.js');\n    laroux.touch = require('./laroux.touch.js');\n    laroux.ui = require('./laroux.ui.js');\n\n    if (typeof document !== 'undefined') {\n        document.addEventListener(\n            'DOMContentLoaded',\n            function () {\n                if (!laroux.readyPassed) {\n                    laroux.events.invoke('ContentLoaded');\n                    setInterval(laroux.timers.ontick, 100);\n                    laroux.touch.init();\n                    laroux.readyPassed = true;\n                }\n            }\n        );\n    }\n\n    return laroux;\n\n}(typeof window !== 'undefined' ? window : global));\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js');\n\n    // anim\n    var laroux_anim = {\n        data: [],\n\n        fx: {\n            interpolate: function (source, target, shift) {\n                return (source + (target - source) * shift);\n            },\n\n            easing: function (pos) {\n                return (-Math.cos(pos * Math.PI) / 2) + 0.5;\n            }\n        },\n\n        // {object, property, from, to, time, unit, reset}\n        set: function (newanim) {\n            newanim.startTime = null;\n\n            if (newanim.unit === undefined || newanim.unit === null) {\n                newanim.unit = '';\n            }\n\n            if (newanim.from === undefined || newanim.from === null) {\n                if (newanim.object === document.body && newanim.property === 'scrollTop') {\n                    newanim.from = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n                } else {\n                    newanim.from = newanim.object[newanim.property];\n                }\n            }\n\n            if (typeof newanim.from === 'string') {\n                newanim.from = Number(newanim.from);\n            }\n\n            if (newanim.reset === undefined || newanim.reset === null) {\n                newanim.reset = false;\n            }\n\n            // if (newanim.id === undefined) {\n            //     newanim.id = laroux_helpers.getUniqueId();\n            // }\n\n            laroux_anim.data.push(newanim);\n            if (laroux_anim.data.length === 1) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        setCss: function (newanim) {\n            if (newanim.from === undefined || newanim.from === null) {\n                newanim.from = laroux_css.getProperty(newanim.object, newanim.property);\n            }\n\n            newanim.object = newanim.object.style;\n            newanim.property = laroux_helpers.camelCase(newanim.property);\n\n            laroux_anim.set(newanim);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_anim.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        onframe: function (timestamp) {\n            var removeKeys = [];\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n                if (currentItem.startTime === null) {\n                    currentItem.startTime = timestamp;\n                }\n\n                var result = laroux_anim.step(currentItem, timestamp);\n\n                if (result === false) {\n                    removeKeys.unshift(item);\n                } else if (timestamp > currentItem.startTime + currentItem.time) {\n                    if (currentItem.reset) {\n                        currentItem.startTime = timestamp;\n                        if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                            scrollTo(0, currentItem.from);\n                            // setTimeout(function () { scrollTo(0, currentItem.from); }, 1);\n                        } else {\n                            currentItem.object[currentItem.property] = currentItem.from;\n                        }\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_anim.data.splice(removeKeys[item2], 1);\n            }\n\n            if (laroux_anim.data.length > 0) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        step: function (newanim, timestamp) {\n            var finishT = newanim.startTime + newanim.time,\n                shift = (timestamp > finishT) ? 1 : (timestamp - newanim.startTime) / newanim.time;\n\n            var value = laroux_anim.fx.interpolate(\n                newanim.from,\n                newanim.to,\n                laroux_anim.fx.easing(shift)\n            ) + newanim.unit;\n\n            if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                scrollTo(0, value);\n                // setTimeout(function () { scrollTo(0, value); }, 1);\n            } else {\n                newanim.object[newanim.property] = value;\n            }\n        }\n    };\n\n    return laroux_anim;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // css\n    var laroux_css = {\n        // class features\n        hasClass: function (element, className) {\n            return element.classList.contains(className);\n        },\n\n        addClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.add(className);\n            }\n        },\n\n        removeClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.remove(className);\n            }\n        },\n\n        toggleClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                } else {\n                    elements[i].classList.add(className);\n                }\n            }\n        },\n\n        cycleClass: function (elements, className) {\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                    elements[(i + 1) % length].classList.add(className);\n                    return;\n                }\n            }\n        },\n\n        // style features\n        getProperty: function (element, styleName) {\n            var style = getComputedStyle(element);\n\n            styleName = laroux_helpers.antiCamelCase(styleName);\n\n            return style.getPropertyValue(styleName);\n        },\n\n        setProperty: function (element, properties, value) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            if (typeof properties == 'string') {\n                var oldProperties = properties;\n                properties = {};\n                properties[oldProperties] = value;\n            }\n\n            for (var styleName in properties) {\n                if (!properties.hasOwnProperty(styleName)) {\n                    continue;\n                }\n\n                var newStyleName = laroux_helpers.camelCase(styleName);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].style[newStyleName] = properties[styleName];\n                }\n            }\n        },\n\n        // transition features\n        defaultTransition: '2s ease',\n\n        setTransitionSingle: function (element, transition) {\n            var transitions = laroux_helpers.getAsArray(transition),\n                style = getComputedStyle(element),\n                currentTransitions = style.getPropertyValue('transition') || style.getPropertyValue('-webkit-transition') ||\n                    style.getPropertyValue('-ms-transition') || '',\n                currentTransitionsArray;\n\n            if (currentTransitions.length > 0) {\n                currentTransitionsArray = currentTransitions.split(',');\n            } else {\n                currentTransitionsArray = [];\n            }\n\n            for (var item in transitions) {\n                if (!transitions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var styleName,\n                    transitionProperties,\n                    pos = transitions[item].indexOf(' ');\n\n                if (pos !== -1) {\n                    styleName = transitions[item].substring(0, pos);\n                    transitionProperties = transitions[item].substring(pos + 1);\n                } else {\n                    styleName = transitions[item];\n                    transitionProperties = laroux_css.defaultTransition;\n                }\n\n                var found = false;\n                for (var j = 0; j < currentTransitionsArray.length; j++) {\n                    if (currentTransitionsArray[j].trim().localeCompare(styleName) === 0) {\n                        currentTransitionsArray[j] = styleName + ' ' + transitionProperties;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    currentTransitionsArray.push(styleName + ' ' + transitionProperties);\n                }\n            }\n\n            var value = currentTransitionsArray.join(', ');\n\n            element.style.transition = value;\n            element.style.webkitTransition = value;\n            element.style.msTransition = value;\n        },\n\n        setTransition: function (element, transition) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_css.setTransitionSingle(elements[i], transition);\n            }\n        },\n\n        show: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 1 });\n        },\n\n        hide: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 0 });\n        },\n\n        // measurement features\n        // height of element without padding, margin and border\n        height: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('height');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // height of element with padding but without margin and border\n        innerHeight: function (element) {\n            return element.clientHeight;\n        },\n\n        // height of element with padding and border but margin optional\n        outerHeight: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetHeight;\n            }\n\n            var style = getComputedStyle(element),\n                marginTop = style.getPropertyCSSValue('margin-top'),\n                marginBottom = style.getPropertyCSSValue('margin-bottom'),\n                margins = marginTop.getFloatValue(marginTop.primitiveType) +\n                    marginBottom.getFloatValue(marginBottom.primitiveType);\n\n            return Math.ceil(element.offsetHeight + margins);\n        },\n\n        // width of element without padding, margin and border\n        width: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('width');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // width of element with padding but without margin and border\n        innerWidth: function (element) {\n            return element.clientWidth;\n        },\n\n        // width of element with padding and border but margin optional\n        outerWidth: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetWidth;\n            }\n\n            var style = getComputedStyle(element),\n                marginLeft = style.getPropertyCSSValue('margin-left'),\n                marginRight = style.getPropertyCSSValue('margin-right'),\n                margins = marginLeft.getFloatValue(marginLeft.primitiveType) +\n                    marginRight.getFloatValue(marginRight.primitiveType);\n\n            return Math.ceil(element.offsetWidth + margins);\n        },\n\n        top: function (element) {\n            return element.getBoundingClientRect().top +\n                ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n        },\n\n        left: function (element) {\n            return element.getBoundingClientRect().left +\n                ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);\n        },\n\n        aboveTheTop: function (element) {\n            return element.getBoundingClientRect().bottom <= 0;\n        },\n\n        belowTheFold: function (element) {\n            return element.getBoundingClientRect().top > innerHeight;\n        },\n\n        leftOfScreen: function (element) {\n            return element.getBoundingClientRect().right <= 0;\n        },\n\n        rightOfScreen: function (element) {\n            return element.getBoundingClientRect().left > innerWidth;\n        },\n\n        inViewport: function (element) {\n            var rect = element.getBoundingClientRect();\n\n            return !(rect.bottom <= 0 || rect.top > innerHeight ||\n                rect.right <= 0 || rect.left > innerWidth);\n        }\n    };\n\n    return laroux_css;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n        // laroux_css = require('./laroux.css.js'),\n        // laroux_triggers = require('./laroux.triggers.js');\n\n    // dom\n    var laroux_dom = {\n        docprop: function (propName) {\n            return document.documentElement.classList.contains(propName);\n        },\n\n        select: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        },\n\n        selectByClass: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByClassName(selector)\n            );\n        },\n\n        selectByTag: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByTagName(selector)\n            );\n        },\n\n        selectById: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        selectSingle: function (selector, parent) {\n            return (parent || document).querySelector(selector);\n        },\n\n        attr: function (element, attributes, value) {\n            if (value === undefined && attributes.constructor !== Object) {\n                return element.getAttribute(attributes);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof attributes === 'string') {\n                var oldAttributes = attributes;\n                attributes = {};\n                attributes[oldAttributes] = value;\n            }\n\n            for (var attributeName in attributes) {\n                if (!attributes.hasOwnProperty(attributeName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (attributes[attributeName] === null) {\n                        element.removeAttribute(attributeName);\n                    } else {\n                        element.setAttribute(attributeName, attributes[attributeName]);\n                    }\n                }\n            }\n        },\n\n        data: function (element, datanames, value) {\n            if (value === undefined && datanames.constructor !== Object) {\n                return element.getAttribute('data-' + datanames);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof datanames == 'string') {\n                var oldDatanames = datanames;\n                datanames = {};\n                datanames[oldDatanames] = value;\n            }\n\n            for (var dataName in datanames) {\n                if (!datanames.hasOwnProperty(dataName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (datanames[dataName] === null) {\n                        element.removeAttribute('data-' + dataName);\n                    } else {\n                        element.setAttribute('data-' + dataName, datanames[dataName]);\n                    }\n                }\n            }\n        },\n\n        eventHistory: [],\n        setEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_dom.setEventSingle(elements[i], eventname, fnc);\n            }\n        },\n\n        setEventSingle: function (element, eventname, fnc) {\n            var fncWrapper = function (e) {\n                if (fnc(e, element) === false) {\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    } else {\n                        event.returnValue = false;\n                    }\n                }\n            };\n\n            laroux_dom.eventHistory.push({ element: element, eventname: eventname, fnc: fnc, fncWrapper: fncWrapper });\n            element.addEventListener(eventname, fncWrapper, false);\n        },\n\n        unsetEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i1 = 0, length1 = elements.length; i1 < length1; i1++) {\n                for (var i2 = 0, length2 = laroux_dom.eventHistory.length; i2 < length2; i2++) {\n                    var item = laroux_dom.eventHistory[i2];\n\n                    if (item === undefined) {\n                        continue;\n                    }\n\n                    if (item.element !== elements[i1]) {\n                        continue;\n                    }\n\n                    if (eventname !== undefined && item.eventname !== eventname) {\n                        continue;\n                    }\n\n                    if (fnc !== undefined && item.fnc !== fnc) {\n                        continue;\n                    }\n\n                    item.element.removeEventListener(item.eventname, item.fncWrapper, false);\n                    delete laroux_dom.eventHistory[i2];\n                }\n            }\n        },\n\n        dispatchEvent: function (element, eventname, data) {\n            var customEvent = document.createEvent('Event');\n            for (var item in data) {\n                if (!data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                customEvent[item] = data[item];\n            }\n\n            customEvent.initEvent(eventname, true, true);\n            element.dispatchEvent(customEvent);\n        },\n\n        create: function (html) {\n            var frag = document.createDocumentFragment(),\n                temp = document.createElement('DIV');\n\n            temp.insertAdjacentHTML('beforeend', html);\n            while (temp.firstChild) {\n                frag.appendChild(temp.firstChild);\n            }\n\n            // nulling out the reference, there is no obvious dispose method\n            temp = null;\n\n            return frag;\n        },\n\n        createElement: function (element, attributes, children) {\n            var elem = document.createElement(element);\n\n            if (attributes !== undefined && attributes.constructor === Object) {\n                for (var item in attributes) {\n                    if (!attributes.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    elem.setAttribute(item, attributes[item]);\n                }\n            }\n\n            if (children !== undefined) {\n                if (children.constructor === Object) {\n                    for (var item2 in children) {\n                        if (!children.hasOwnProperty(item2)) {\n                            continue;\n                        }\n\n                        elem.setAttribute(item2, children[item2]);\n                    }\n                } else if (/* typeof children == 'string' && */children.length > 0) {\n                    laroux_dom.append(elem, children);\n                }\n            }\n\n            return elem;\n        },\n\n        createOption: function (element, key, value, isDefault) {\n            /* old behaviour, does not support optgroups as parents.\n            var count = element.options.length;\n            element.options[count] = new Option(value, key);\n\n            if (isDefault === true) {\n                element.options.selectedIndex = count - 1;\n            }\n            */\n\n            var option = document.createElement('OPTION');\n            option.setAttribute('value', key);\n            if (isDefault === true) {\n                option.setAttribute('checked', 'checked');\n            }\n\n            laroux_dom.append(option, value);\n            element.appendChild(option);\n        },\n\n        selectByValue: function (element, value) {\n            for (var i = 0, length = element.options.length; i < length; i++) {\n                if (element.options[i].getAttribute('value') == value) {\n                    element.selectedIndex = i;\n                    break;\n                }\n            }\n        },/*,\n\n        // TODO: it's redundant for now\n        loadImage: function () {\n            var images = [];\n\n            for (var i = 0, length = arguments.length; i < length; i++) {\n                var image = document.createElement('IMG');\n                image.setAttribute('src', arguments[i]);\n\n                images.push(image);\n            }\n\n            return images;\n        },\n\n        loadAsyncScript: function (path, triggerName, async) {\n            var elem = document.createElement('script');\n\n            elem.type = 'text/javascript';\n            elem.async = (async !== undefined) ? async : true;\n            elem.src = path;\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },\n\n        loadAsyncStyle: function (path, triggerName, async) {\n            var elem = document.createElement('LINK');\n\n            elem.type = 'text/css';\n            elem.async = (async !== undefined) ? async : true;\n            elem.href = path;\n            elem.rel = 'stylesheet';\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },*/\n\n        clear: function (element) {\n            while (element.hasChildNodes()) {\n                element.removeChild(element.firstChild);\n            }\n        },\n\n        insert: function (element, position, content) {\n            element.insertAdjacentHTML(position, content);\n        },\n\n        prepend: function (element, content) {\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        append: function (element, content) {\n            element.insertAdjacentHTML('beforeend', content);\n        },\n\n        replace: function (element, content) {\n            laroux_dom.clear(element);\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        replaceText: function (element, content) {\n            // laroux_dom.clear(element);\n            element.textContent = content;\n        },\n\n        remove: function (element) {\n            element.remove();\n        },\n\n        cloneReturn: 0,\n        cloneAppend: 1,\n        cloneInsertAfter: 2,\n        cloneInsertBefore: 3,\n\n        clone: function (element, type, container, target) {\n            var newElement = element.cloneNode(true);\n\n            if (container === undefined) {\n                container = element.parentNode;\n            }\n            if (target === undefined) {\n                target = element;\n            }\n\n            if (type !== undefined && type != laroux_dom.cloneReturn) {\n                if (type == laroux_dom.cloneAppend) {\n                    container.appendChild(newElement);\n                } else if (type == laroux_dom.cloneInsertAfter) {\n                    container.insertBefore(newElement, target.nextSibling);\n                } else { // type == laroux_dom.cloneInsertBefore\n                    container.insertBefore(newElement, target);\n                }\n            }\n\n            return newElement;\n        }/*,\n\n        // TODO: it's redundant for now\n        applyOperations: function (element, operations) {\n            for (var operation in operations) {\n                if (!operations.hasOwnProperty(operation)) {\n                    continue;\n                }\n\n                for (var binding in operations[operation]) {\n                    if (!operations[operation].hasOwnProperty(binding)) {\n                        continue;\n                    }\n\n                    var value = operations[operation][binding];\n\n                    switch (operation) {\n                        case 'setprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.replace(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'addprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), element.getAttribute(binding.substring(1)) + value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.append(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'removeprop':\n                            if (value.substring(0, 1) == '_') {\n                                element.removeAttribute(value.substring(1));\n                                continue;\n                            }\n\n                            if (value == 'content') {\n                                laroux_dom.clear(element);\n                                continue;\n                            }\n                            break;\n                        case 'addclass':\n                            laroux_css.addClass(element, value);\n                            break;\n                        case 'removeclass':\n                            laroux_css.removeClass(element, value);\n                            break;\n                        case 'addstyle':\n                            laroux_css.setProperty(element, binding, value);\n                            break;\n                        case 'removestyle':\n                            laroux_css.setProperty(element, value, 'inherit !important');\n                            break;\n                        case 'repeat':\n                            break;\n                        default:\n                            console.log(operation);\n                    }\n                }\n            }\n        }*/\n    };\n\n    // a fix for Internet Explorer\n    if (typeof Element !== 'undefined') {\n        if (Element.prototype.remove === undefined) {\n            Element.prototype.remove = function () {\n                if (this.parentElement !== null) {\n                    this.parentElement.removeChild(this);\n                }\n            };\n        }\n    }\n\n    return laroux_dom;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_ajax = require('./laroux.ajax.js');\n\n    // forms\n    var laroux_forms = {\n        ajaxForm: function (formobj, fnc, fncBegin) {\n            laroux_dom.setEvent(formobj, 'submit', function () {\n                if (fncBegin !== undefined) {\n                    fncBegin();\n                }\n\n                laroux_ajax.post(\n                    formobj.getAttribute('action'),\n                    laroux_forms.serializeFormData(formobj),\n                    fnc\n                );\n\n                return false;\n            });\n        },\n\n        isFormField: function (element) {\n            if (element.tagName === 'SELECT') {\n                return true;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE' || type === 'CHECKBOX' || type === 'RADIO' || type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return true;\n            }\n\n            return false;\n        },\n\n        getFormFieldValue: function (element) {\n            if (element.disabled === true) {\n                return null;\n            }\n\n            if (element.tagName === 'SELECT') {\n                return element.options[element.selectedIndex].value;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE') {\n                    return element.files[0];\n                }\n\n                if (type === 'CHECKBOX' || type === 'RADIO') {\n                    if (element.checked) {\n                        return element.value;\n                    }\n\n                    return null;\n                }\n\n                if (type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return element.value;\n                }\n\n                return null;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return element.value;\n            }\n\n            return null;\n        },\n\n        setFormFieldValue: function (element, value) {\n            if (element.disabled === true) {\n                return;\n            }\n\n            if (element.tagName === 'SELECT') {\n                for (var option in element.options) {\n                    if (!element.options.hasOwnProperty(option)) {\n                        continue;\n                    }\n\n                    if (element.options[option].value == value) {\n                        element.selectedIndex = option;\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type == 'FILE') {\n                    element.files[0] = value;\n                    return;\n                }\n\n                if (type == 'CHECKBOX' || type == 'RADIO') {\n                    if (value === true || value == element.value) {\n                        element.checked = true;\n                    }\n\n                    return;\n                }\n\n                if (type == 'TEXT' || type == 'PASSWORD' || type == 'HIDDEN') {\n                    element.value = value;\n                    return;\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'TEXTAREA') {\n                element.value = value;\n                return;\n            }\n        },\n\n        toggleFormEditing: function (formobj, value) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            if (value === undefined) {\n                if (formobj.getAttribute('data-last-enabled') === null) {\n                    formobj.setAttribute('data-last-enabled', 'enabled');\n                    value = false;\n                } else {\n                    formobj.removeAttribute('data-last-enabled');\n                    value = true;\n                }\n            }\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                if (!laroux_forms.isFormField(selection[selected])) {\n                    continue;\n                }\n\n                var lastDisabled = selection[selected].getAttribute('data-last-disabled');\n                if (!value) {\n                    if (lastDisabled === null) {\n                        if (selection[selected].getAttribute('disabled') !== null) {\n                            selection[selected].setAttribute('data-last-disabled', 'disabled');\n                        }\n                    }\n\n                    selection[selected].setAttribute('disabled', 'disabled');\n                    continue;\n                }\n\n                if (lastDisabled !== null) {\n                    selection[selected].removeAttribute('data-last-disabled');\n                } else {\n                    selection[selected].removeAttribute('disabled');\n                }\n            }\n        },\n\n        serializeFormData: function (formobj) {\n            var formdata = new FormData();\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    formdata.append(selection[selected].getAttribute('name'), value);\n                }\n            }\n\n            return formdata;\n        },\n\n        serialize: function (formobj) {\n            var values = {};\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    values[selection[selected].getAttribute('name')] = value;\n                }\n            }\n\n            return values;\n        },\n\n        deserialize: function (formobj, data) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                laroux_forms.setFormFieldValue(selection[selected], data[selection[selected].getAttribute('name')]);\n            }\n        }\n    };\n\n    return laroux_forms;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(/%s/g, function () { return Array.prototype.shift.call(args); });\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(obj, function (value) { return value[key]; }, true);\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_forms = require('./laroux.forms.js');\n\n    // keys\n    var laroux_keys = {\n        keyName: function (keycode) {\n            keycode = keycode.toLowerCase();\n\n            switch (keycode) {\n            case 'backspace':\n                return 8;\n\n            case 'tab':\n                return 9;\n\n            case 'enter':\n            case 'return':\n                return 13;\n\n            case 'esc':\n            case 'escape':\n                return 27;\n\n            case 'space':\n                return 32;\n\n            case 'pgup':\n                return 33;\n\n            case 'pgdn':\n                return 34;\n\n            case 'end':\n                return 35;\n\n            case 'home':\n                return 36;\n\n            case 'left':\n                return 37;\n\n            case 'up':\n                return 38;\n\n            case 'right':\n                return 39;\n\n            case 'down':\n                return 40;\n\n            case 'insert':\n                return 45;\n\n            case 'delete':\n                return 46;\n\n            case 'f1':\n                return 112;\n\n            case 'f2':\n                return 113;\n\n            case 'f3':\n                return 114;\n\n            case 'f4':\n                return 115;\n\n            case 'f5':\n                return 116;\n\n            case 'f6':\n                return 117;\n\n            case 'f7':\n                return 118;\n\n            case 'f8':\n                return 119;\n\n            case 'f9':\n                return 120;\n\n            case 'f10':\n                return 121;\n\n            case 'f11':\n                return 122;\n\n            case 'f12':\n                return 123;\n\n            case ',':\n                return 188;\n\n            case '.':\n                return 190;\n            }\n\n            return String.fromCharCode(keycode);\n        },\n\n        // {target, key, shift, ctrl, alt, disableInputs, fnc}\n        assign: function (options) {\n            var wrapper = function (ev) {\n                if (!ev) {\n                    ev = event;\n                }\n\n                var element = ev.target || ev.srcElement;\n                if (element.nodeType === 3 || element.nodeType === 11) { // element.nodeType === 1 ||\n                    element = element.parentNode;\n                }\n\n                if (options.disableInputs && laroux_forms.isFormField(element)) {\n                    return;\n                }\n\n                if (options.shift && !ev.shiftKey) {\n                    return;\n                }\n\n                if (options.ctrl && !ev.ctrlKey) {\n                    return;\n                }\n\n                if (options.alt && !ev.altKey) {\n                    return;\n                }\n\n                var key = laroux_keys.keyName(options.key);\n                if (key !== (ev.keyCode || ev.which)) {\n                    return;\n                }\n\n                options.fnc(ev);\n\n                return false;\n            };\n\n            laroux_dom.setEvent(options.target || document, 'keydown', wrapper);\n        }\n    };\n\n    return laroux_keys;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_stack = require('./laroux.stack.js');\n\n    // mvc\n    var laroux_mvc = {\n        apps: {},\n        pauseUpdate: false,\n\n        init: function (element, model) {\n            if (element.constructor === String) {\n                element = laroux_dom.selectById(element);\n            }\n\n            // if (model.constructor !== laroux_stack) {\n            //     model = new laroux_stack(model);\n            // }\n\n            var appKey = element.getAttribute('id');\n\n            model.onupdate = function (event) {\n                if (!laroux_mvc.pauseUpdate) {\n                    laroux_mvc.update(appKey); // , [event.key]\n                }\n            };\n\n            laroux_mvc.apps[appKey] = {\n                element: element,\n                model: model // ,\n                // modelKeys: null,\n                // boundElements: null,\n                // eventElements: null\n            };\n\n            laroux_mvc.rebind(appKey);\n        },\n\n        rebind: function (appKey) {\n            var app = laroux_mvc.apps[appKey];\n            /*jslint nomen: true */\n            app.modelKeys = laroux_helpers.getKeysRecursive(app.model._data); // FIXME: works only for $l.stack\n            app.boundElements = {};\n            app.eventElements = [];\n\n            laroux_mvc.scanElements(app, app.element);\n            laroux_mvc.update(appKey);\n\n            var fnc = function (ev, elem) {\n                var binding = laroux_mvc.bindStringParser(elem.getAttribute('lr-event'));\n                // laroux_mvc.pauseUpdate = true;\n                for (var item in binding) {\n                    if (item === null || !binding.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    if (binding[item].charAt(0) == '\\'') {\n                        app.model[item] = binding[item].substring(1, binding[item].length - 1);\n                    } else if (binding[item].substring(0, 5) == 'attr.') {\n                        app.model[item] = elem.getAttribute(binding[item].substring(5));\n                    } else if (binding[item].substring(0, 5) == 'prop.') {\n                        app.model[item] = elem[binding[item].substring(5)];\n                    }\n                }\n                // laroux_mvc.pauseUpdate = false;\n            };\n\n            for (var i = 0, length = app.eventElements.length; i < length; i++) {\n                laroux_dom.setEvent(\n                    app.eventElements[i].element,\n                    app.eventElements[i].binding[null],\n                    fnc\n                );\n            }\n        },\n\n        scanElements: function (app, element) {\n            for (var i = 0, atts = element.attributes, m = atts.length; i < m; i++) {\n                if (atts[i].name == 'lr-bind') {\n                    var binding1 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    for (var item in binding1) {\n                        if (!binding1.hasOwnProperty(item)) {\n                            continue;\n                        }\n\n                        if (app.boundElements[binding1[item]] === undefined) {\n                            app.boundElements[binding1[item]] = [];\n                        }\n\n                        app.boundElements[binding1[item]].push({\n                            element: element,\n                            target: item\n                        });\n                    }\n                } else if (atts[i].name == 'lr-event') {\n                    var binding2 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    app.eventElements.push({\n                        element: element,\n                        binding: binding2\n                    });\n                }\n            }\n\n            for (var j = 0, chldrn = element.childNodes, n = chldrn.length; j < n; j++) {\n                if (chldrn[j].nodeType === 1) {\n                    laroux_mvc.scanElements(app, chldrn[j]);\n                }\n            }\n        },\n\n        update: function (appKey, keys) {\n            var app = laroux_mvc.apps[appKey];\n\n            if (typeof keys == 'undefined') {\n                keys = app.modelKeys;\n            }\n\n            for (var i = 0, length1 = keys.length; i < length1; i++) {\n                if (!(keys[i] in app.boundElements)) {\n                    continue;\n                }\n\n                var boundElement = app.boundElements[keys[i]];\n\n                for (var j = 0, length2 = boundElement.length; j < length2; j++) {\n                    if (boundElement[j].target.substring(0, 6) == 'style.') {\n                        boundElement[j].element.style[boundElement[j].target.substring(6)] = laroux_helpers.getElement(app.model, keys[i]);\n                    } else if (boundElement[j].target.substring(0, 5) == 'attr.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element.setAttribute(boundElement[j].target.substring(5), laroux_helpers.getElement(app.model, keys[i]));\n                    } else if (boundElement[j].target.substring(0, 5) == 'prop.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element[boundElement[j].target.substring(5)] = laroux_helpers.getElement(app.model, keys[i]);\n                    }\n                }\n            }\n        },\n\n        bindStringParser: function (text) {\n            var lastBuffer = null,\n                buffer = '',\n                state = 0,\n                result = {};\n\n            for (var i = 0, length = text.length; i < length; i++) {\n                var curr = text.charAt(i);\n\n                if (state === 0) {\n                    if (curr == ':') {\n                        state = 1;\n                        lastBuffer = buffer.trim();\n                        buffer = '';\n                        continue;\n                    }\n                }\n\n                if (curr == ',') {\n                    state = 0;\n                    result[lastBuffer] = buffer.trim();\n                    buffer = '';\n                    continue;\n                }\n\n                buffer += curr;\n            }\n\n            if (buffer.length > 0) {\n                result[lastBuffer] = buffer.trim();\n            }\n\n            return result;\n        }\n    };\n\n    return laroux_mvc;\n\n}());\n","/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // templates\n    var laroux_templates = {\n        engines: {\n            plain: {\n                compile: function (template, options) {\n                    return [template, options];\n                },\n\n                render: function (compiled, model) {\n                    var result = compiled[0],\n                        dict = [],\n                        lastIndex = 0,\n                        nextIndex;\n\n                    while ((nextIndex = result.indexOf('{{', lastIndex)) !== -1) {\n                        nextIndex += 2;\n                        var closeIndex = result.indexOf('}}', nextIndex);\n                        if (closeIndex === -1) {\n                            break;\n                        }\n\n                        var key = result.substring(nextIndex, closeIndex);\n                        dict['{{' + key + '}}'] = laroux_helpers.getElement(model, key, '');\n                        lastIndex = closeIndex + 2;\n                    }\n\n                    return laroux_helpers.replaceAll(result, dict);\n                }\n            },\n\n            hogan: {\n                compile: function (template, options) {\n                    return Hogan.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled.render(model);\n                }\n            },\n\n            mustache: {\n                compile: function (template, options) {\n                    return Mustache.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            handlebars: {\n                compile: function (template, options) {\n                    return Handlebars.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            lodash: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            underscore: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            }\n        },\n        engine: 'plain',\n\n        apply: function (element, model, options) {\n            var content, engine = laroux_templates.engines[laroux_templates.engine];\n\n            if (element.nodeType === 1 || element.nodeType === 3 || element.nodeType === 11) {\n                content = element.textContent;\n            } else {\n                content = element.nodeValue;\n            }\n\n            var compiled = engine.compile(content, options);\n            return engine.render(compiled, model);\n        },\n\n        insert: function (element, model, target, position, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.insert(target, position || 'beforeend', output);\n        },\n\n        replace: function (element, model, target, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.replace(target, output);\n        }\n    };\n\n    return laroux_templates;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js');\n\n    // touch - partially taken from 'tocca.js' project\n    //         can be found at: https://github.com/GianlucaGuarini/Tocca.js\n    var laroux_touch = {\n        touchStarted: null,\n        swipeTreshold: 80,\n        precision: 30,\n        tapCount: 0,\n        tapTreshold: 200,\n        longTapTreshold: 800,\n        tapTimer: null,\n        pos: null,\n        cached: null,\n\n        events: {\n            start: ['touchstart', 'pointerdown', 'MSPointerDown', 'mousedown'],\n            end: ['touchend', 'pointerup', 'MSPointerUp', 'mouseup'],\n            move: ['touchmove', 'pointermove', 'MSPointerMove', 'mousemove']\n        },\n\n        locatePointer: function (event) {\n            if (event.targetTouches) {\n                event = event.targetTouches[0];\n            }\n\n            laroux_touch.pos = [event.pageX, event.pageY];\n        },\n\n        init: function () {\n            var events = [\n                0,\n                (navigator.msPointerEnabled) ? 2 : 1,\n                3\n            ];\n\n            for (var i = 0, length = events.length; i < length; i++) {\n                laroux_dom.setEventSingle(document, laroux_touch.events.start[events[i]], laroux_touch.onstart);\n                laroux_dom.setEventSingle(document, laroux_touch.events.end[events[i]], laroux_touch.onend);\n                laroux_dom.setEventSingle(document, laroux_touch.events.move[events[i]], laroux_touch.locatePointer);\n            }\n        },\n\n        onstart: function (event) {\n            laroux_touch.locatePointer(event);\n            laroux_touch.cached = [laroux_touch.pos[0], laroux_touch.pos[1]];\n            laroux_touch.touchStarted = Date.now();\n            /*jslint plusplus: true */\n            laroux_touch.tapCount++;\n\n            var fnc = function () {\n                if (laroux_touch.cached[0] >= laroux_touch.pos[0] - laroux_touch.precision &&\n                        laroux_touch.cached[0] <= laroux_touch.pos[0] + laroux_touch.precision &&\n                        laroux_touch.cached[1] >= laroux_touch.pos[1] - laroux_touch.precision &&\n                        laroux_touch.cached[1] <= laroux_touch.pos[1] + laroux_touch.precision) {\n                    if (laroux_touch.touchStarted === null) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            (laroux_touch.tapCount === 2) ? 'dbltap' : 'tap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    if (Date.now() - laroux_touch.touchStarted > laroux_touch.longTapTreshold) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            'longtap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.touchStarted = null;\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n                    return;\n                }\n\n                laroux_touch.tapCount = 0;\n            };\n\n            clearTimeout(laroux_touch.tapTimer);\n            laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n        },\n\n        onend: function (event) {\n            var delta = [\n                    laroux_touch.pos[0] - laroux_touch.cached[0],\n                    laroux_touch.pos[1] - laroux_touch.cached[1]\n                ],\n                data = {\n                    innerEvent: event,\n                    x: laroux_touch.pos[0],\n                    y: laroux_touch.pos[1],\n                    distance: {\n                        x: Math.abs(delta[0]),\n                        y: Math.abs(delta[1])\n                    }\n                };\n\n            laroux_touch.touchStarted = null;\n\n            if (delta[0] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swiperight', data);\n            }\n\n            if (delta[0] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeleft', data);\n            }\n\n            if (delta[1] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipedown', data);\n            }\n\n            if (delta[1] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeup', data);\n            }\n        }\n    };\n\n    // laroux.ready(laroux_touch.init);\n\n    return laroux_touch;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_timers = require('./laroux.timers.js'),\n        laroux_date = require('./laroux.date.js');\n\n    // ui\n    var laroux_ui = {\n        floatContainer: null,\n\n        popup: {\n            defaultTimeout: 500,\n\n            createBox: function (id, xclass, message) {\n                return laroux_dom.createElement('DIV', { id: id, 'class': xclass }, message);\n            },\n\n            msgbox: function (timeout, message) {\n                var id = laroux_helpers.getUniqueId(),\n                    obj = laroux_ui.popup.createBox(id, 'larouxMsgBox', message);\n                laroux_ui.floatContainer.appendChild(obj);\n\n                laroux_css.setProperty(obj, { opacity: 1 });\n\n                laroux_timers.set({\n                    timeout: timeout,\n                    reset: false,\n                    ontick: function (x) {\n                        // laroux_css.setProperty(x, { opacity: 0 });\n                        laroux_dom.remove(x);\n                    },\n                    state: obj\n                });\n            }\n        },\n\n        loading: {\n            elementSelector: null,\n            element: null,\n            defaultDelay: 1500,\n            timer: null,\n\n            killTimer: function () {\n                clearTimeout(laroux_ui.loading.timer);\n            },\n\n            hide: function () {\n                laroux_ui.loading.killTimer();\n\n                laroux_css.setProperty(laroux_ui.loading.element, { display: 'none' });\n                localStorage.loadingIndicator = 'false';\n            },\n\n            show: function (delay) {\n                laroux_ui.loading.killTimer();\n\n                if (delay === undefined) {\n                    delay = laroux_ui.loading.defaultDelay;\n                }\n\n                if (delay > 0) {\n                    setTimeout(function () { laroux_ui.loading.show(0); }, delay);\n                } else {\n                    laroux_css.setProperty(laroux_ui.loading.element, { display: 'block' });\n                    localStorage.loadingIndicator = 'true';\n                }\n            },\n\n            init: function () {\n                if (laroux_ui.loading.element === null && laroux_ui.loading.elementSelector !== null) {\n                    laroux_ui.loading.element = laroux_dom.selectSingle(laroux_ui.loading.elementSelector);\n                }\n\n                if (laroux_ui.loading.element !== null) {\n                    laroux_dom.setEvent(window, 'load', laroux_ui.loading.hide);\n                    laroux_dom.setEvent(window, 'beforeunload', laroux_ui.loading.show);\n\n                    if (localStorage.loadingIndicator !== undefined && localStorage.loadingIndicator === 'true') {\n                        laroux_ui.loading.show(0);\n                    } else {\n                        laroux_ui.loading.show();\n                    }\n                }\n            }\n        },\n\n        dynamicDates: {\n            updateDatesElements: null,\n\n            updateDates: function () {\n                if (laroux_ui.dynamicDates.updateDatesElements === null) {\n                    laroux_ui.dynamicDates.updateDatesElements = laroux_dom.select('*[data-epoch]');\n                }\n\n                for (var item in laroux_ui.dynamicDates.updateDatesElements) {\n                    if (!laroux_ui.dynamicDates.updateDatesElements.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    var obj = laroux_ui.dynamicDates.updateDatesElements[item];\n                    // bitshifting (str >> 0) used instead of parseInt(str, 10)\n                    var date = new Date((obj.getAttribute('data-epoch') >> 0) * 1000);\n\n                    laroux_dom.replace(\n                        obj,\n                        laroux_date.getDateString(date)\n                    );\n\n                    obj.setAttribute('title', laroux_date.getLongDateString(date));\n                }\n            },\n\n            init: function () {\n                laroux_timers.set({\n                    timeout: 500,\n                    reset: true,\n                    ontick: laroux_ui.dynamicDates.updateDates\n                });\n            }\n        },\n\n        scrollView: {\n            selectedElements: [],\n\n            onhidden: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 0 });\n                laroux_css.setTransition(elements, ['opacity']);\n            },\n\n            onreveal: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 1 });\n            },\n\n            set: function (element) {\n                var elements = laroux_helpers.getAsArray(element);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (!laroux_css.inViewport(elements[i])) {\n                        laroux_ui.scrollView.selectedElements.push(elements[i]);\n                    }\n                }\n\n                laroux_ui.scrollView.onhidden(laroux_ui.scrollView.selectedElements);\n                laroux_dom.setEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n            },\n\n            reveal: function () {\n                var removeKeys = [],\n                    elements = [];\n\n                laroux_helpers.each(\n                    laroux_ui.scrollView.selectedElements,\n                    function (i, element) {\n                        if (laroux_css.inViewport(element)) {\n                            removeKeys.unshift(i);\n                            elements.push(element);\n                        }\n                    }\n                );\n\n                for (var item in removeKeys) {\n                    if (!removeKeys.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    laroux_ui.scrollView.selectedElements.splice(removeKeys[item], 1);\n                }\n\n                if (laroux_ui.scrollView.selectedElements.length === 0) {\n                    laroux_dom.unsetEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n                }\n\n                if (elements.length > 0) {\n                    laroux_ui.scrollView.onreveal(elements);\n                }\n            }\n        },\n\n        createFloatContainer: function () {\n            if (!laroux_ui.floatContainer) {\n                laroux_ui.floatContainer = laroux_dom.createElement('DIV', { 'class': 'larouxFloatDiv' });\n                document.body.insertBefore(laroux_ui.floatContainer, document.body.firstChild);\n            }\n        },\n\n        init: function () {\n            laroux_ui.createFloatContainer();\n            laroux_ui.loading.init();\n            laroux_ui.dynamicDates.init();\n        }\n    };\n\n    // laroux.ready(laroux_ui.init);\n\n    return laroux_ui;\n\n}());\n","module.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n","/*global NodeList, Node */\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // wrapper\n    var laroux_wrapper = function (selector, parent) {\n        var selection;\n\n        if (selector instanceof Array) {\n            selection = selector;\n        } else if (selector instanceof NodeList) {\n            selection = laroux_helpers.toArray(selector);\n        } else if (selector instanceof Node) {\n            selection = [selector];\n        } else {\n            selection = laroux_dom.select(selector, parent);\n        }\n\n        if (selection.length === 1) {\n            return new laroux_wrapper.singleTemplate(selection[0]);\n        }\n\n        return new laroux_wrapper.arrayTemplate(selection);\n    };\n\n    laroux_wrapper.singleTemplate = function (element) {\n        this.source = element;\n        this.isArray = false;\n\n        this.get = function (index) {\n            if (index === 0 || index === undefined) {\n                return this.source;\n            }\n\n            return undefined;\n        };\n\n        this.find = function (selector) {\n            return laroux_wrapper(selector, this.source);\n        };\n    };\n\n    laroux_wrapper.arrayTemplate = function (elements) {\n        this.source = elements;\n        this.isArray = true;\n\n        this.get = function (index) {\n            return this.source[index];\n        };\n    };\n\n    laroux_wrapper.registerBoth = 0;\n    laroux_wrapper.registerSingle = 1;\n    laroux_wrapper.registerArray = 2;\n\n    laroux_wrapper.register = function (name, fnc, scope) {\n        var newFnc = function () {\n            var result = fnc.apply(\n                this,\n                [this.source].concat(laroux_helpers.toArray(arguments))\n            );\n\n            return (result === undefined) ? this : result;\n        };\n\n        switch (scope) {\n        case laroux_wrapper.registerSingle:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            break;\n        case laroux_wrapper.registerArray:\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        default:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        }\n    };\n\n    laroux_wrapper.register('attr', laroux_dom.attr, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('data', laroux_dom.data, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEventSingle, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEvent, laroux_wrapper.registerArray);\n    laroux_wrapper.register('off', laroux_dom.unsetEvent, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('clear', laroux_dom.clear, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('insert', laroux_dom.insert, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('prepend', laroux_dom.prepend, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('append', laroux_dom.append, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replace', laroux_dom.replace, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replaceText', laroux_dom.replaceText, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('remove', laroux_dom.remove, laroux_wrapper.registerSingle);\n\n    laroux_wrapper.register('hasClass', laroux_css.hasClass, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('addClass', laroux_css.addClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('removeClass', laroux_css.removeClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('toggleClass', laroux_css.toggleClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('getProperty', laroux_css.getProperty, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('setProperty', laroux_css.setProperty, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('setTransition', laroux_css.setTransition, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('show', laroux_css.show, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('hide', laroux_css.hide, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('height', laroux_css.height, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerHeight', laroux_css.innerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerHeight', laroux_css.outerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('width', laroux_css.width, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerWidth', laroux_css.innerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerWidth', laroux_css.outerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('top', laroux_css.top, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('left', laroux_css.left, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('aboveTheTop', laroux_css.aboveTheTop, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('belowTheFold', laroux_css.belowTheFold, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('leftOfScreen', laroux_css.leftOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('rightOfScreen', laroux_css.rightOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('inViewport', laroux_css.inViewport, laroux_wrapper.registerSingle);\n\n    return laroux_wrapper;\n\n}());\n","/**\n * laroux.js - A jquery substitute for modern browsers\n *\n * @version v2.0.0\n * @link https://larukedi.github.io/laroux.js\n * @license Apache-2.0\n */\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n(function (global){\n(function (scope) {\n    'use strict';\n\n    var emptyFunction = function () {};\n\n    if (scope.document === undefined) {\n        scope.document = {\n            attachEvent: emptyFunction,\n            createEventObject: emptyFunction,\n            readyState: null\n        };\n    }\n\n    if (!('requestAnimationFrame' in scope)) {\n        scope.requestAnimationFrame = function (callback) {\n            setTimeout(function () { callback(Date.now()); }, 50);\n        };\n    }\n\n    if (!('getComputedStyle' in scope)) {\n        scope.getComputedStyle = function (element) {\n            this.element = element;\n\n            this.getPropertyValue = function (prop) {\n                var re = /(\\-([a-z]){1})/g;\n                if (prop === 'float') {\n                    prop = 'styleFloat';\n                }\n\n                if (re.test(prop)) {\n                    prop = prop.replace(re, function () {\n                        return arguments[2].toUpperCase();\n                    });\n                }\n\n                return this.element.currentStyle[prop] || null;\n            };\n\n            this.getPropertyCSSValue = function (prop) {\n                return new CSSPrimitiveValue(this.element, prop);\n            };\n\n            return this;\n        };\n    }\n\n    if (!('CSSPrimitiveValue' in scope)) {\n        scope.CSSPrimitiveValue = function (element, prop) {\n            this.element = element;\n            this.prop = prop;\n            this.primitiveType = 0;\n\n            this.getFloatValue = function (primitiveType) {\n                var re = /(\\-([a-z]){1})/g,\n                    prop = this.prop;\n\n                if (prop === 'float') {\n                    prop = 'styleFloat';\n                }\n\n                if (re.test(prop)) {\n                    prop = prop.replace(re, function () {\n                        return arguments[2].toUpperCase();\n                    });\n                }\n\n                return this.element.currentStyle[prop] || null;\n            };\n        };\n    }\n\n    if (scope.Event === undefined) {\n        scope.Event = emptyFunction;\n    }\n\n    if (!('preventDefault' in Event.prototype)) {\n        Event.prototype.preventDefault = function () {\n            this.returnValue = false;\n        };\n    }\n\n    if (!('stopPropagation' in Event.prototype)) {\n        Event.prototype.stopPropagation = function () {\n            this.cancelBubble = true;\n        };\n    }\n\n    if (scope.Element === undefined) {\n        scope.Element = emptyFunction;\n    }\n\n    if (!('addEventListener' in Element.prototype)) {\n        var eventListeners = [],\n            addListener = function (eventname, callback) {\n                var self = this,\n                    wrapper = function (event) {\n                        event.target = event.srcElement;\n                        event.currentTarget = self;\n\n                        // if ('handleEvent' in callback) {\n                        //     callback.handleEvent(event);\n                        // } else {\n                        //     callback.call(self, event);\n                        // }\n                        callback(self, event);\n                    };\n\n                if (eventname !== 'DOMContentLoaded') {\n                    this.attachEvent('on' + eventname, wrapper);\n                }\n                eventListeners.push({ object: this, type: eventname, listener: callback, wrapper: wrapper });\n            },\n            removeListener = function (eventname, callback) {\n                for (var i = 0, length = eventListeners.length; i < length; i++) {\n                    var eventListener = eventListeners[i];\n\n                    if (eventListener.object === this && eventListener.type === eventname && eventListener.listener === callback) {\n                        if (eventname != 'DOMContentLoaded') {\n                            this.detachEvent('on' + eventname, eventListener.wrapper);\n                        }\n\n                        eventListeners.splice(i, 1);\n                        break;\n                    }\n                }\n            },\n            dispatchEvent = function (event) {\n                var eventObject = document.createEventObject();\n                this.fireEvent('on' + event.type, eventObject);\n            };\n\n        Element.prototype.addEventListener = addListener;\n        Element.prototype.removeEventListener = removeListener;\n        Element.prototype.dispatchEvent = dispatchEvent;\n\n        if (scope.HTMLDocument !== undefined) {\n            HTMLDocument.prototype.addEventListener = addListener;\n            HTMLDocument.prototype.removeEventListener = removeListener;\n            HTMLDocument.prototype.dispatchEvent = dispatchEvent;\n        }\n\n        if (scope.Window !== undefined) {\n            Window.prototype.addEventListener = addListener;\n            Window.prototype.removeEventListener = removeListener;\n            Window.prototype.dispatchEvent = dispatchEvent;\n        }\n\n        document.attachEvent('onreadystatechange', function () {\n            if (document.readyState == 'complete') {\n                var eventObject = document.createEventObject();\n                // eventObject.srcElement = window;\n\n                for (var i = 0, length = eventListeners.length; i < length; i++) {\n                    if (eventListeners[i].object === document && eventListeners[i].type === 'DOMContentLoaded') {\n                        eventListeners[i].wrapper(eventObject);\n                    }\n                }\n            }\n        });\n    }\n\n    if (scope.Text === undefined) {\n        scope.Text = emptyFunction;\n    }\n\n    if (!('textContent' in Element.prototype)) {\n        var innerText = Object.getOwnPropertyDescriptor(Element.prototype, 'innerText');\n\n        Object.defineProperty(Element.prototype, 'textContent', {\n            get: function () {\n                return innerText.get.call(this);\n            },\n            set: function (value) {\n                return innerText.set.call(this, value);\n            }\n        });\n    }\n\n    if (!('getAttribute' in Element.prototype)) {\n        Element.prototype.getAttribute = function (attribute) {\n            return this.attributes[attribute].value;\n        };\n    }\n\n    if (!('setAttribute' in Element.prototype)) {\n        Element.prototype.setAttribute = function (attribute, value) {\n            this.attributes[attribute].value = value;\n        };\n    }\n\n    if (!('removeAttribute' in Element.prototype)) {\n        Element.prototype.removeAttribute = function (attribute) {\n            this.attributes.removeNamedItem(attribute);\n        };\n    }\n\n    if (!('firstElementChild' in Element.prototype)) {\n        Object.defineProperty(Element.prototype, 'firstElementChild', {\n            get: function () {\n                return this.children[0];\n            }\n        });\n    }\n\n    if (!('classList' in Element.prototype)) {\n        Object.defineProperty(Element.prototype, 'classList', {\n            get: function () {\n                var self = this;\n\n                return {\n                    add: function (className) {\n                        self.className = self.className.trim() + ' ' + className;\n                    },\n\n                    remove: function (className) {\n                        self.className = self.className.replace(\n                            new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'),\n                            ' '\n                        );\n                    },\n\n                    contains: function (className) {\n                        return (new RegExp('(^| )' + className + '( |$)', 'gi').test(self.className));\n                    }\n                };\n            }\n        });\n    }\n\n    if (!('textContent' in Text.prototype)) {\n        var nodeValue = Object.getOwnPropertyDescriptor(Text.prototype, 'nodeValue');\n\n        Object.defineProperty(Text.prototype, 'textContent', {\n            get: function () {\n                return nodeValue.get.call(this);\n            },\n            set: function (value) {\n                return nodeValue.set.call(this, value);\n            }\n        });\n    }\n\n    if (!('trim' in String.prototype)) {\n        String.prototype.trim = function () {\n            return this.replace(/^\\s+|\\s+$/g, '');\n        };\n    }\n\n    if (!('observe' in Object)) {\n        Object.observe = emptyFunction;\n    }\n\n    if (!('keys' in Object)) {\n        Object.keys = function (object) {\n            var keys = [];\n\n            for (var item in object) {\n                if (!object.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(item);\n            }\n\n            return keys;\n        };\n    }\n\n    /*\n    if (!('forEach' in Object.prototype)) {\n        Object.prototype.forEach = function (callback) {\n            for (var item in this) {\n                if (!this.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                callback.apply(this, [this[item], item, this]);\n            }\n        };\n    }\n\n    if (!('map' in Object.prototype)) {\n        Object.prototype.map = function (callback) {\n            var results = [];\n\n            for (var item in this) {\n                if (!this.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                results.push(callback.apply(this, [this[item], item, this]));\n            }\n\n            return results;\n        };\n    }\n\n    if (!('forEach' in Array.prototype)) {\n        Array.prototype.forEach = function (callback) {\n            for (var i = 0; i < this.length; i++) {\n                callback.apply(this, [this[i], i, this]);\n            }\n        };\n    }\n\n    if (!('map' in Array.prototype)) {\n        Array.prototype.map = function (callback) {\n            var results = [];\n\n            for (var i = 0; i < this.length; i++) {\n                results.push(callback.apply(this, [this[i], i, this]));\n            }\n\n            return results;\n        };\n    }\n\n    if (!('indexOf' in Array.prototype)) {\n        Array.prototype.indexOf = function (object, start) {\n            for (var i = (start || 0), length = this.length; i < length; i++) {\n                if (this[i] === object) {\n                    return i;\n                }\n            }\n\n            return -1;\n        };\n    }\n    */\n\n}(typeof window !== 'undefined' ? window : global));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],2:[function(require,module,exports){\n(function (global){\nmodule.exports = (function (scope) {\n    'use strict';\n\n    // core\n    var laroux = function (selector, parent) {\n        if (selector instanceof Array) {\n            return laroux.helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        }\n\n        /*\n        // FIXME: non-chrome optimization\n        var re = /^#([^\\+\\>\\[\\]\\.# ]*)$/.exec(selector);\n        if (re) {\n            if (parent === undefined) {\n                return document.getElementById(re[1]);\n            }\n\n            return parent.getElementById(re[1]);\n        }\n        */\n\n        return (parent || document).querySelector(selector);\n    };\n\n    if (!('$l' in scope)) {\n        scope.$l = laroux;\n    }\n\n    // core modules\n    laroux.events = require('./laroux.events.js');\n    laroux.helpers = require('./laroux.helpers.js');\n    laroux.timers = require('./laroux.timers.js');\n\n    laroux.cached = {\n        single: {},\n        array: {},\n        id: {}\n    };\n\n    laroux.c = function (selector) {\n        if (selector instanceof Array) {\n            return laroux.cached.array[selector] || (\n                laroux.cached.array[selector] = laroux.helpers.toArray(\n                    document.querySelectorAll(selector)\n                )\n            );\n        }\n\n        return laroux.cached.single[selector] || (\n            laroux.cached.single[selector] = document.querySelector(selector)\n        );\n    };\n\n    laroux.id = function (selector, parent) {\n        return (parent || document).getElementById(selector);\n    };\n\n    laroux.idc = function (selector) {\n        return laroux.cached.id[selector] ||\n            (laroux.cached.id[selector] = document.getElementById(selector));\n    };\n\n    laroux.readyPassed = false;\n\n    laroux.extend = function () {\n        Array.prototype.unshift.call(arguments, laroux);\n        laroux.helpers.extendObject.apply(this, arguments);\n    };\n\n    laroux.extendObject = laroux.helpers.extendObject;\n    laroux.each = laroux.helpers.each;\n    laroux.map = laroux.helpers.map;\n    laroux.index = laroux.helpers.index;\n    laroux.aeach = laroux.helpers.aeach;\n    laroux.amap = laroux.helpers.amap;\n    laroux.aindex = laroux.helpers.aindex;\n\n    laroux.ready = function (fnc) {\n        if (!laroux.readyPassed) {\n            laroux.events.add('ContentLoaded', fnc);\n            return;\n        }\n\n        fnc();\n    };\n\n    // optional modules\n    laroux.wrapper = require('./laroux.wrapper.js');\n    laroux.ajax = require('./laroux.ajax.js');\n    laroux.css = require('./laroux.css.js');\n    laroux.dom = require('./laroux.dom.js');\n    // laroux.events = require('./laroux.events.js');\n    laroux.forms = require('./laroux.forms.js');\n    // laroux.helpers = require('./laroux.helpers.js');\n    // laroux.timers = require('./laroux.timers.js');\n    laroux.triggers = require('./laroux.triggers.js');\n    laroux.vars = require('./laroux.vars.js');\n\n    laroux.anim = require('./laroux.anim.js');\n    laroux.date = require('./laroux.date.js');\n    laroux.keys = require('./laroux.keys.js');\n    laroux.mvc = require('./laroux.mvc.js');\n    laroux.stack = require('./laroux.stack.js');\n    laroux.templates = require('./laroux.templates.js');\n    laroux.touch = require('./laroux.touch.js');\n    laroux.ui = require('./laroux.ui.js');\n\n    if (typeof document !== 'undefined') {\n        document.addEventListener(\n            'DOMContentLoaded',\n            function () {\n                if (!laroux.readyPassed) {\n                    laroux.events.invoke('ContentLoaded');\n                    setInterval(laroux.timers.ontick, 100);\n                    laroux.touch.init();\n                    laroux.readyPassed = true;\n                }\n            }\n        );\n    }\n\n    return laroux;\n\n}(typeof window !== 'undefined' ? window : global));\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./laroux.ajax.js\":3,\"./laroux.anim.js\":4,\"./laroux.css.js\":5,\"./laroux.date.js\":6,\"./laroux.dom.js\":7,\"./laroux.events.js\":8,\"./laroux.forms.js\":9,\"./laroux.helpers.js\":10,\"./laroux.keys.js\":11,\"./laroux.mvc.js\":12,\"./laroux.stack.js\":13,\"./laroux.templates.js\":14,\"./laroux.timers.js\":15,\"./laroux.touch.js\":16,\"./laroux.triggers.js\":17,\"./laroux.ui.js\":18,\"./laroux.vars.js\":19,\"./laroux.wrapper.js\":20}],3:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_events = require('./laroux.events.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // ajax - partially taken from 'jquery in parts' project\n    //        can be found at: https://github.com/mythz/jquip/\n    var laroux_ajax = {\n        corsDefault: false,\n\n        wrappers: {\n            registry: {\n                'laroux.js': function (data) {\n                    if (!data.isSuccess) {\n                        console.log('Error: ' + data.errorMessage);\n                        return;\n                    }\n\n                    var obj;\n\n                    if (data.format === 'json') {\n                        obj = JSON.parse(data.object);\n                    } else if (data.format === 'script') {\n                        /*jshint evil:true */\n                        /*jslint evil:true */\n                        obj = eval(data.object);\n                    } else { // if (data.format == 'xml') {\n                        obj = data.object;\n                    }\n\n                    return obj;\n                }\n            },\n\n            set: function (name, fnc) {\n                laroux_ajax.wrappers.registry[name] = fnc;\n            }\n        },\n\n        xDomainObject: false,\n        xmlHttpRequestObject: null,\n        xDomainRequestObject: null,\n        xhr: function (crossDomain) {\n            if (laroux_ajax.xmlHttpRequestObject === null) {\n                laroux_ajax.xmlHttpRequestObject = new XMLHttpRequest();\n            }\n\n            if (crossDomain) {\n                if (!('withCredentials' in laroux_ajax.xmlHttpRequestObject) && typeof XDomainRequest !== 'undefined') {\n                    laroux_ajax.xDomainObject = true;\n\n                    if (laroux_ajax.xDomainRequestObject === null) {\n                        laroux_ajax.xDomainRequestObject = new XDomainRequest();\n                    }\n\n                    return laroux_ajax.xDomainRequestObject;\n                }\n            } else {\n                laroux_ajax.xDomainObject = false;\n            }\n\n            return laroux_ajax.xmlHttpRequestObject;\n        },\n\n        xhrResp: function (xhr, options) {\n            var wrapperFunction = xhr.getResponseHeader('X-Response-Wrapper-Function'),\n                response;\n\n            if (options.datatype === undefined) {\n                response = xhr.responseText;\n            } else if (options.datatype === 'json') {\n                response = JSON.parse(xhr.responseText);\n            } else if (options.datatype === 'script') {\n                /*jshint evil:true */\n                /*jslint evil:true */\n                response = eval(xhr.responseText);\n            } else if (options.datatype === 'xml') {\n                response = xhr.responseXML;\n            } else {\n                response = xhr.responseText;\n            }\n\n            if (wrapperFunction && (wrapperFunction in laroux_ajax.wrappers.registry)) {\n                response = laroux_ajax.wrappers.registry[wrapperFunction](response);\n            }\n\n            return {\n                response: response,\n                wrapperFunc: wrapperFunction\n            };\n        },\n\n        makeRequest: function (options) {\n            var cors = options.cors || laroux_ajax.corsDefault,\n                xhr = laroux_ajax.xhr(cors),\n                url = options.url,\n                timer = null,\n                n = 0;\n\n            if (options.timeout !== undefined) {\n                timer = setTimeout(\n                    function () {\n                        xhr.abort();\n                        if (options.timeoutFn !== undefined) {\n                            options.timeoutFn(options.url);\n                        }\n                    },\n                    options.timeout\n                );\n            }\n\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState === 4) {\n                    if (timer !== null) {\n                        clearTimeout(timer);\n                    }\n\n                    if (xhr.status < 300) {\n                        var res = null,\n                            isSuccess = true;\n\n                        try {\n                            res = laroux_ajax.xhrResp(xhr, options);\n                        } catch (e) {\n                            if (options.error !== undefined) {\n                                options.error(xhr, xhr.status, xhr.statusText);\n                            }\n\n                            laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                            isSuccess = false;\n                        }\n\n                        if (isSuccess) {\n                            if (options.success !== undefined && res !== null) {\n                                options.success(res.response, res.wrapperFunc);\n                            }\n\n                            laroux_events.invoke('ajaxSuccess', [xhr, res.response, res.wrapperFunc, options]);\n                        }\n                    } else {\n                        if (options.error !== undefined) {\n                            options.error(xhr, xhr.status, xhr.statusText);\n                        }\n\n                        laroux_events.invoke('ajaxError', [xhr, xhr.status, xhr.statusText, options]);\n                    }\n\n                    if (options.complete !== undefined) {\n                        options.complete(xhr, xhr.statusText);\n                    }\n\n                    laroux_events.invoke('ajaxComplete', [xhr, xhr.statusText, options]);\n                } else if (options.progress !== undefined) {\n                    /*jslint plusplus: true */\n                    options.progress(++n);\n                }\n            };\n\n            if (options.getdata !== undefined && options.getdata !== null) {\n                if (options.getdata.constructor === Object) {\n                    var queryString = laroux_helpers.buildQueryString(options.getdata);\n                    if (queryString.length > 0) {\n                        url += ((url.indexOf('?') < 0) ? '?' : '&') + queryString;\n                    }\n                } else {\n                    url += ((url.indexOf('?') < 0) ? '?' : '&') + options.getdata;\n                }\n            }\n\n            if (options.jsonp !== undefined) {\n                url += ((url.indexOf('?') < 0) ? '?' : '&') + 'jsonp=' + options.jsonp;\n            }\n\n            if (!laroux_ajax.xDomainObject) {\n                xhr.open(options.type, url, true);\n            } else {\n                xhr.open(options.type, url);\n            }\n\n            try {\n                if (options.xhrFields !== undefined) {\n                    for (var i in options.xhrFields) {\n                        if (!options.xhrFields.hasOwnProperty(i)) {\n                            continue;\n                        }\n\n                        xhr[i] = options.xhrFields[i];\n                    }\n                }\n\n                var headers = options.headers || {};\n\n                if (!cors) {\n                    headers['X-Requested-With'] = 'XMLHttpRequest';\n\n                    if (options.wrapper) {\n                        headers['X-Wrapper-Function'] = 'laroux.js';\n                    }\n                }\n\n                for (var j in headers) {\n                    if (!headers.hasOwnProperty(j)) {\n                        continue;\n                    }\n\n                    xhr.setRequestHeader(j, headers[j]);\n                }\n            } catch (e) {\n                console.log(e);\n            }\n\n            if (options.postdata === undefined || options.postdata === null) {\n                xhr.send(null);\n                return;\n            }\n\n            switch (options.postdatatype) {\n                case 'json':\n                    xhr.send(JSON.stringify(options.postdata));\n                    break;\n                case 'form':\n                    xhr.send(laroux_helpers.buildFormData(options.postdata));\n                    break;\n                default:\n                    xhr.send(options.postdata);\n                    break;\n            }\n        },\n\n        get: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'html',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'json',\n                getdata: values,\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getJsonP: function (path, values, method, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                jsonp: method,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        getScript: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'GET',\n                url: path,\n                datatype: 'script',\n                getdata: values,\n                wrapper: false,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        post: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'form',\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        },\n\n        postJson: function (path, values, successfnc, errorfnc, cors) {\n            laroux_ajax.makeRequest({\n                type: 'POST',\n                url: path,\n                datatype: 'json',\n                postdata: values,\n                postdatatype: 'json',\n                headers: {\n                    'Content-Type': 'application/json; charset=UTF-8'\n                },\n                wrapper: true,\n                cors: cors || laroux_ajax.corsDefault,\n                success: successfnc,\n                error: errorfnc\n            });\n        }\n    };\n\n    return laroux_ajax;\n\n}());\n\n},{\"./laroux.events.js\":8,\"./laroux.helpers.js\":10}],4:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js');\n\n    // anim\n    var laroux_anim = {\n        data: [],\n\n        fx: {\n            interpolate: function (source, target, shift) {\n                return (source + (target - source) * shift);\n            },\n\n            easing: function (pos) {\n                return (-Math.cos(pos * Math.PI) / 2) + 0.5;\n            }\n        },\n\n        // {object, property, from, to, time, unit, reset}\n        set: function (newanim) {\n            newanim.startTime = null;\n\n            if (newanim.unit === undefined || newanim.unit === null) {\n                newanim.unit = '';\n            }\n\n            if (newanim.from === undefined || newanim.from === null) {\n                if (newanim.object === document.body && newanim.property === 'scrollTop') {\n                    newanim.from = (document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop;\n                } else {\n                    newanim.from = newanim.object[newanim.property];\n                }\n            }\n\n            if (typeof newanim.from === 'string') {\n                newanim.from = Number(newanim.from);\n            }\n\n            if (newanim.reset === undefined || newanim.reset === null) {\n                newanim.reset = false;\n            }\n\n            // if (newanim.id === undefined) {\n            //     newanim.id = laroux_helpers.getUniqueId();\n            // }\n\n            laroux_anim.data.push(newanim);\n            if (laroux_anim.data.length === 1) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        setCss: function (newanim) {\n            if (newanim.from === undefined || newanim.from === null) {\n                newanim.from = laroux_css.getProperty(newanim.object, newanim.property);\n            }\n\n            newanim.object = newanim.object.style;\n            newanim.property = laroux_helpers.camelCase(newanim.property);\n\n            laroux_anim.set(newanim);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_anim.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        onframe: function (timestamp) {\n            var removeKeys = [];\n            for (var item in laroux_anim.data) {\n                if (!laroux_anim.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_anim.data[item];\n                if (currentItem.startTime === null) {\n                    currentItem.startTime = timestamp;\n                }\n\n                var result = laroux_anim.step(currentItem, timestamp);\n\n                if (result === false) {\n                    removeKeys.unshift(item);\n                } else if (timestamp > currentItem.startTime + currentItem.time) {\n                    if (currentItem.reset) {\n                        currentItem.startTime = timestamp;\n                        if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                            scrollTo(0, currentItem.from);\n                            // setTimeout(function () { scrollTo(0, currentItem.from); }, 1);\n                        } else {\n                            currentItem.object[currentItem.property] = currentItem.from;\n                        }\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_anim.data.splice(removeKeys[item2], 1);\n            }\n\n            if (laroux_anim.data.length > 0) {\n                requestAnimationFrame(laroux_anim.onframe);\n            }\n        },\n\n        step: function (newanim, timestamp) {\n            var finishT = newanim.startTime + newanim.time,\n                shift = (timestamp > finishT) ? 1 : (timestamp - newanim.startTime) / newanim.time;\n\n            var value = laroux_anim.fx.interpolate(\n                newanim.from,\n                newanim.to,\n                laroux_anim.fx.easing(shift)\n            ) + newanim.unit;\n\n            if (newanim.object === document.body && newanim.property == 'scrollTop') {\n                scrollTo(0, value);\n                // setTimeout(function () { scrollTo(0, value); }, 1);\n            } else {\n                newanim.object[newanim.property] = value;\n            }\n        }\n    };\n\n    return laroux_anim;\n\n}());\n\n},{\"./laroux.css.js\":5,\"./laroux.helpers.js\":10}],5:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // css\n    var laroux_css = {\n        // class features\n        hasClass: function (element, className) {\n            return element.classList.contains(className);\n        },\n\n        addClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.add(className);\n            }\n        },\n\n        removeClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                elements[i].classList.remove(className);\n            }\n        },\n\n        toggleClass: function (element, className) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                } else {\n                    elements[i].classList.add(className);\n                }\n            }\n        },\n\n        cycleClass: function (elements, className) {\n            for (var i = 0, length = elements.length; i < length; i++) {\n                if (elements[i].classList.contains(className)) {\n                    elements[i].classList.remove(className);\n                    elements[(i + 1) % length].classList.add(className);\n                    return;\n                }\n            }\n        },\n\n        // style features\n        getProperty: function (element, styleName) {\n            var style = getComputedStyle(element);\n\n            styleName = laroux_helpers.antiCamelCase(styleName);\n\n            return style.getPropertyValue(styleName);\n        },\n\n        setProperty: function (element, properties, value) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            if (typeof properties == 'string') {\n                var oldProperties = properties;\n                properties = {};\n                properties[oldProperties] = value;\n            }\n\n            for (var styleName in properties) {\n                if (!properties.hasOwnProperty(styleName)) {\n                    continue;\n                }\n\n                var newStyleName = laroux_helpers.camelCase(styleName);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    elements[i].style[newStyleName] = properties[styleName];\n                }\n            }\n        },\n\n        // transition features\n        defaultTransition: '2s ease',\n\n        setTransitionSingle: function (element, transition) {\n            var transitions = laroux_helpers.getAsArray(transition),\n                style = getComputedStyle(element),\n                currentTransitions = style.getPropertyValue('transition') || style.getPropertyValue('-webkit-transition') ||\n                    style.getPropertyValue('-ms-transition') || '',\n                currentTransitionsArray;\n\n            if (currentTransitions.length > 0) {\n                currentTransitionsArray = currentTransitions.split(',');\n            } else {\n                currentTransitionsArray = [];\n            }\n\n            for (var item in transitions) {\n                if (!transitions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var styleName,\n                    transitionProperties,\n                    pos = transitions[item].indexOf(' ');\n\n                if (pos !== -1) {\n                    styleName = transitions[item].substring(0, pos);\n                    transitionProperties = transitions[item].substring(pos + 1);\n                } else {\n                    styleName = transitions[item];\n                    transitionProperties = laroux_css.defaultTransition;\n                }\n\n                var found = false;\n                for (var j = 0; j < currentTransitionsArray.length; j++) {\n                    if (currentTransitionsArray[j].trim().localeCompare(styleName) === 0) {\n                        currentTransitionsArray[j] = styleName + ' ' + transitionProperties;\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    currentTransitionsArray.push(styleName + ' ' + transitionProperties);\n                }\n            }\n\n            var value = currentTransitionsArray.join(', ');\n\n            element.style.transition = value;\n            element.style.webkitTransition = value;\n            element.style.msTransition = value;\n        },\n\n        setTransition: function (element, transition) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_css.setTransitionSingle(elements[i], transition);\n            }\n        },\n\n        show: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 1 });\n        },\n\n        hide: function (element, transitionProperties) {\n            if (transitionProperties !== undefined) {\n                laroux_css.setTransition(element, 'opacity ' + transitionProperties);\n            } else {\n                laroux_css.setTransition(element, 'opacity');\n            }\n\n            laroux_css.setProperty(element, { opacity: 0 });\n        },\n\n        // measurement features\n        // height of element without padding, margin and border\n        height: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('height');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // height of element with padding but without margin and border\n        innerHeight: function (element) {\n            return element.clientHeight;\n        },\n\n        // height of element with padding and border but margin optional\n        outerHeight: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetHeight;\n            }\n\n            var style = getComputedStyle(element),\n                marginTop = style.getPropertyCSSValue('margin-top'),\n                marginBottom = style.getPropertyCSSValue('margin-bottom'),\n                margins = marginTop.getFloatValue(marginTop.primitiveType) +\n                    marginBottom.getFloatValue(marginBottom.primitiveType);\n\n            return Math.ceil(element.offsetHeight + margins);\n        },\n\n        // width of element without padding, margin and border\n        width: function (element) {\n            var style = getComputedStyle(element),\n                height = style.getPropertyCSSValue('width');\n\n            return height.getFloatValue(height.primitiveType);\n        },\n\n        // width of element with padding but without margin and border\n        innerWidth: function (element) {\n            return element.clientWidth;\n        },\n\n        // width of element with padding and border but margin optional\n        outerWidth: function (element, includeMargin) {\n            if (includeMargin || false) {\n                return element.offsetWidth;\n            }\n\n            var style = getComputedStyle(element),\n                marginLeft = style.getPropertyCSSValue('margin-left'),\n                marginRight = style.getPropertyCSSValue('margin-right'),\n                margins = marginLeft.getFloatValue(marginLeft.primitiveType) +\n                    marginRight.getFloatValue(marginRight.primitiveType);\n\n            return Math.ceil(element.offsetWidth + margins);\n        },\n\n        top: function (element) {\n            return element.getBoundingClientRect().top +\n                ((document.documentElement && document.documentElement.scrollTop) || document.body.scrollTop);\n        },\n\n        left: function (element) {\n            return element.getBoundingClientRect().left +\n                ((document.documentElement && document.documentElement.scrollLeft) || document.body.scrollLeft);\n        },\n\n        aboveTheTop: function (element) {\n            return element.getBoundingClientRect().bottom <= 0;\n        },\n\n        belowTheFold: function (element) {\n            return element.getBoundingClientRect().top > innerHeight;\n        },\n\n        leftOfScreen: function (element) {\n            return element.getBoundingClientRect().right <= 0;\n        },\n\n        rightOfScreen: function (element) {\n            return element.getBoundingClientRect().left > innerWidth;\n        },\n\n        inViewport: function (element) {\n            var rect = element.getBoundingClientRect();\n\n            return !(rect.bottom <= 0 || rect.top > innerHeight ||\n                rect.right <= 0 || rect.left > innerWidth);\n        }\n    };\n\n    return laroux_css;\n\n}());\n\n},{\"./laroux.helpers.js\":10}],6:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // date\n    var laroux_date = {\n        shortDateFormat: 'dd.MM.yyyy',\n        longDateFormat: 'dd MMMM yyyy',\n        timeFormat: 'HH:mm',\n\n        monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n        monthsLong: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n\n        strings: {\n            now:     'now',\n            later:   'later',\n            ago:     'ago',\n            seconds: 'seconds',\n            aminute: 'a minute',\n            minutes: 'minutes',\n            ahour:   'a hour',\n            hours:   'hours',\n            aday:    'a day',\n            days:    'days',\n            aweek:   'a week',\n            weeks:   'weeks',\n            amonth:  'a month',\n            months:  'months',\n            ayear:   'a year',\n            years:   'years'\n        },\n\n        parseEpoch: function (timespan, limitWithWeeks) {\n            if (timespan < 60 * 1000) {\n                timespan = Math.ceil(timespan / 1000);\n\n                return timespan + ' ' + laroux_date.strings.seconds;\n            }\n\n            if (timespan < 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aminute;\n                }\n\n                return timespan + ' ' + laroux_date.strings.minutes;\n            }\n\n            if (timespan < 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.ahour;\n                }\n\n                return timespan + ' ' + laroux_date.strings.hours;\n            }\n\n            if (timespan < 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aday;\n                }\n\n                return timespan + ' ' + laroux_date.strings.days;\n            }\n\n            if (timespan < 4 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (7 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.aweek;\n                }\n\n                return timespan + ' ' + laroux_date.strings.weeks;\n            }\n\n            if (limitWithWeeks === true) {\n                return null;\n            }\n\n            if (timespan < 30 * 7 * 24 * 60 * 60 * 1000) {\n                timespan = Math.ceil(timespan / (30 * 24 * 60 * 60 * 1000));\n\n                if (timespan === 1) {\n                    return laroux_date.strings.amonth;\n                }\n\n                return timespan + ' ' + laroux_date.strings.months;\n            }\n\n            timespan = Math.ceil(timespan / (365 * 24 * 60 * 60 * 1000));\n\n            if (timespan === 1) {\n                return laroux_date.strings.ayear;\n            }\n\n            return timespan + ' ' + laroux_date.strings.years;\n        },\n\n        getCustomDateString: function (format, date) {\n            var now = date || new Date();\n\n            return format.replace(\n                /yyyy|yy|MMMM|MMM|MM|M|dd|d|hh|h|HH|H|mm|m|ss|s|tt|t/g,\n                function (match) {\n                    switch (match) {\n                    case 'yyyy':\n                        return now.getFullYear();\n\n                    case 'yy':\n                        return now.getYear();\n\n                    case 'MMMM':\n                        return laroux_date.monthsLong[now.getMonth()];\n\n                    case 'MMM':\n                        return laroux_date.monthsShort[now.getMonth()];\n\n                    case 'MM':\n                        return ('0' + (now.getMonth() + 1)).substr(-2, 2);\n\n                    case 'M':\n                        return now.getMonth() + 1;\n\n                    case 'dd':\n                        return ('0' + now.getDate()).substr(-2, 2);\n\n                    case 'd':\n                        return now.getDate();\n\n                    case 'hh':\n                        var hour1 = now.getHours();\n                        return ('0' + (((hour1 % 12) > 0) ? hour1 % 12 : 12)).substr(-2, 2);\n\n                    case 'h':\n                        var hour2 = now.getHours();\n                        return ((hour2 % 12) > 0) ? hour2 % 12 : 12;\n\n                    case 'HH':\n                        return ('0' + now.getHours()).substr(-2, 2);\n\n                    case 'H':\n                        return now.getHours();\n\n                    case 'mm':\n                        return ('0' + now.getMinutes()).substr(-2, 2);\n\n                    case 'm':\n                        return now.getMinutes();\n\n                    case 'ss':\n                        return ('0' + now.getSeconds()).substr(-2, 2);\n\n                    case 's':\n                        return now.getSeconds();\n\n                    case 'tt':\n                        if (now.getHours() >= 12) {\n                            return 'pm';\n                        }\n\n                        return 'am';\n\n                    case 't':\n                        if (now.getHours() >= 12) {\n                            return 'p';\n                        }\n\n                        return 'a';\n                    }\n\n                    return match;\n                }\n            );\n        },\n\n        getDateDiffString: function (date) {\n            var now = Date.now(),\n                timespan = now - date.getTime(),\n                absTimespan = Math.abs(timespan),\n                past = (timespan > 0);\n\n            if (absTimespan <= 3000) {\n                return laroux_date.strings.now;\n            }\n\n            var timespanstring = laroux_date.parseEpoch(absTimespan, true);\n            if (timespanstring !== null) {\n                return timespanstring +\n                    ' ' +\n                    (past ? laroux_date.strings.ago : laroux_date.strings.later);\n            }\n\n            return laroux_date.getShortDateString(date, true);\n        },\n\n        getShortDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.shortDateFormat + ' ' + laroux_date.timeFormat : laroux_date.shortDateFormat,\n                date\n            );\n        },\n\n        getLongDateString: function (date, includeTime) {\n            return laroux_date.getCustomDateString(\n                includeTime ? laroux_date.longDateFormat + ' ' + laroux_date.timeFormat : laroux_date.longDateFormat,\n                date\n            );\n        }\n    };\n\n    return laroux_date;\n\n}());\n\n},{}],7:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n        // laroux_css = require('./laroux.css.js'),\n        // laroux_triggers = require('./laroux.triggers.js');\n\n    // dom\n    var laroux_dom = {\n        docprop: function (propName) {\n            return document.documentElement.classList.contains(propName);\n        },\n\n        select: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).querySelectorAll(selector)\n            );\n        },\n\n        selectByClass: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByClassName(selector)\n            );\n        },\n\n        selectByTag: function (selector, parent) {\n            return laroux_helpers.toArray(\n                (parent || document).getElementsByTagName(selector)\n            );\n        },\n\n        selectById: function (selector, parent) {\n            return (parent || document).getElementById(selector);\n        },\n\n        selectSingle: function (selector, parent) {\n            return (parent || document).querySelector(selector);\n        },\n\n        attr: function (element, attributes, value) {\n            if (value === undefined && attributes.constructor !== Object) {\n                return element.getAttribute(attributes);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof attributes === 'string') {\n                var oldAttributes = attributes;\n                attributes = {};\n                attributes[oldAttributes] = value;\n            }\n\n            for (var attributeName in attributes) {\n                if (!attributes.hasOwnProperty(attributeName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (attributes[attributeName] === null) {\n                        element.removeAttribute(attributeName);\n                    } else {\n                        element.setAttribute(attributeName, attributes[attributeName]);\n                    }\n                }\n            }\n        },\n\n        data: function (element, datanames, value) {\n            if (value === undefined && datanames.constructor !== Object) {\n                return element.getAttribute('data-' + datanames);\n            }\n\n            var elements = laroux_helpers.getAsArray(element);\n            if (typeof datanames == 'string') {\n                var oldDatanames = datanames;\n                datanames = {};\n                datanames[oldDatanames] = value;\n            }\n\n            for (var dataName in datanames) {\n                if (!datanames.hasOwnProperty(dataName)) {\n                    continue;\n                }\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (datanames[dataName] === null) {\n                        element.removeAttribute('data-' + dataName);\n                    } else {\n                        element.setAttribute('data-' + dataName, datanames[dataName]);\n                    }\n                }\n            }\n        },\n\n        eventHistory: [],\n        setEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i = 0, length = elements.length; i < length; i++) {\n                laroux_dom.setEventSingle(elements[i], eventname, fnc);\n            }\n        },\n\n        setEventSingle: function (element, eventname, fnc) {\n            var fncWrapper = function (e) {\n                if (fnc(e, element) === false) {\n                    if (e.preventDefault) {\n                        e.preventDefault();\n                    } else {\n                        event.returnValue = false;\n                    }\n                }\n            };\n\n            laroux_dom.eventHistory.push({ element: element, eventname: eventname, fnc: fnc, fncWrapper: fncWrapper });\n            element.addEventListener(eventname, fncWrapper, false);\n        },\n\n        unsetEvent: function (element, eventname, fnc) {\n            var elements = laroux_helpers.getAsArray(element);\n\n            for (var i1 = 0, length1 = elements.length; i1 < length1; i1++) {\n                for (var i2 = 0, length2 = laroux_dom.eventHistory.length; i2 < length2; i2++) {\n                    var item = laroux_dom.eventHistory[i2];\n\n                    if (item === undefined) {\n                        continue;\n                    }\n\n                    if (item.element !== elements[i1]) {\n                        continue;\n                    }\n\n                    if (eventname !== undefined && item.eventname !== eventname) {\n                        continue;\n                    }\n\n                    if (fnc !== undefined && item.fnc !== fnc) {\n                        continue;\n                    }\n\n                    item.element.removeEventListener(item.eventname, item.fncWrapper, false);\n                    delete laroux_dom.eventHistory[i2];\n                }\n            }\n        },\n\n        dispatchEvent: function (element, eventname, data) {\n            var customEvent = document.createEvent('Event');\n            for (var item in data) {\n                if (!data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                customEvent[item] = data[item];\n            }\n\n            customEvent.initEvent(eventname, true, true);\n            element.dispatchEvent(customEvent);\n        },\n\n        create: function (html) {\n            var frag = document.createDocumentFragment(),\n                temp = document.createElement('DIV');\n\n            temp.insertAdjacentHTML('beforeend', html);\n            while (temp.firstChild) {\n                frag.appendChild(temp.firstChild);\n            }\n\n            // nulling out the reference, there is no obvious dispose method\n            temp = null;\n\n            return frag;\n        },\n\n        createElement: function (element, attributes, children) {\n            var elem = document.createElement(element);\n\n            if (attributes !== undefined && attributes.constructor === Object) {\n                for (var item in attributes) {\n                    if (!attributes.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    elem.setAttribute(item, attributes[item]);\n                }\n            }\n\n            if (children !== undefined) {\n                if (children.constructor === Object) {\n                    for (var item2 in children) {\n                        if (!children.hasOwnProperty(item2)) {\n                            continue;\n                        }\n\n                        elem.setAttribute(item2, children[item2]);\n                    }\n                } else if (/* typeof children == 'string' && */children.length > 0) {\n                    laroux_dom.append(elem, children);\n                }\n            }\n\n            return elem;\n        },\n\n        createOption: function (element, key, value, isDefault) {\n            /* old behaviour, does not support optgroups as parents.\n            var count = element.options.length;\n            element.options[count] = new Option(value, key);\n\n            if (isDefault === true) {\n                element.options.selectedIndex = count - 1;\n            }\n            */\n\n            var option = document.createElement('OPTION');\n            option.setAttribute('value', key);\n            if (isDefault === true) {\n                option.setAttribute('checked', 'checked');\n            }\n\n            laroux_dom.append(option, value);\n            element.appendChild(option);\n        },\n\n        selectByValue: function (element, value) {\n            for (var i = 0, length = element.options.length; i < length; i++) {\n                if (element.options[i].getAttribute('value') == value) {\n                    element.selectedIndex = i;\n                    break;\n                }\n            }\n        },/*,\n\n        // TODO: it's redundant for now\n        loadImage: function () {\n            var images = [];\n\n            for (var i = 0, length = arguments.length; i < length; i++) {\n                var image = document.createElement('IMG');\n                image.setAttribute('src', arguments[i]);\n\n                images.push(image);\n            }\n\n            return images;\n        },\n\n        loadAsyncScript: function (path, triggerName, async) {\n            var elem = document.createElement('script');\n\n            elem.type = 'text/javascript';\n            elem.async = (async !== undefined) ? async : true;\n            elem.src = path;\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },\n\n        loadAsyncStyle: function (path, triggerName, async) {\n            var elem = document.createElement('LINK');\n\n            elem.type = 'text/css';\n            elem.async = (async !== undefined) ? async : true;\n            elem.href = path;\n            elem.rel = 'stylesheet';\n\n            var loaded = false;\n            elem.onload = elem.onreadystatechange = function () {\n                if ((elem.readyState && elem.readyState !== 'complete' && elem.readyState !== 'loaded') || loaded) {\n                    return false;\n                }\n\n                elem.onload = elem.onreadystatechange = null;\n                loaded = true;\n                if (triggerName) {\n                    if (typeof triggerName == 'function') {\n                        triggerName();\n                    } else {\n                        laroux_triggers.ontrigger(triggerName);\n                    }\n                }\n            };\n\n            var head = document.getElementsByTagName('head')[0];\n            head.appendChild(elem);\n        },*/\n\n        clear: function (element) {\n            while (element.hasChildNodes()) {\n                element.removeChild(element.firstChild);\n            }\n        },\n\n        insert: function (element, position, content) {\n            element.insertAdjacentHTML(position, content);\n        },\n\n        prepend: function (element, content) {\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        append: function (element, content) {\n            element.insertAdjacentHTML('beforeend', content);\n        },\n\n        replace: function (element, content) {\n            laroux_dom.clear(element);\n            element.insertAdjacentHTML('afterbegin', content);\n        },\n\n        replaceText: function (element, content) {\n            // laroux_dom.clear(element);\n            element.textContent = content;\n        },\n\n        remove: function (element) {\n            element.remove();\n        },\n\n        cloneReturn: 0,\n        cloneAppend: 1,\n        cloneInsertAfter: 2,\n        cloneInsertBefore: 3,\n\n        clone: function (element, type, container, target) {\n            var newElement = element.cloneNode(true);\n\n            if (container === undefined) {\n                container = element.parentNode;\n            }\n            if (target === undefined) {\n                target = element;\n            }\n\n            if (type !== undefined && type != laroux_dom.cloneReturn) {\n                if (type == laroux_dom.cloneAppend) {\n                    container.appendChild(newElement);\n                } else if (type == laroux_dom.cloneInsertAfter) {\n                    container.insertBefore(newElement, target.nextSibling);\n                } else { // type == laroux_dom.cloneInsertBefore\n                    container.insertBefore(newElement, target);\n                }\n            }\n\n            return newElement;\n        }/*,\n\n        // TODO: it's redundant for now\n        applyOperations: function (element, operations) {\n            for (var operation in operations) {\n                if (!operations.hasOwnProperty(operation)) {\n                    continue;\n                }\n\n                for (var binding in operations[operation]) {\n                    if (!operations[operation].hasOwnProperty(binding)) {\n                        continue;\n                    }\n\n                    var value = operations[operation][binding];\n\n                    switch (operation) {\n                        case 'setprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.replace(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'addprop':\n                            if (binding.substring(0, 1) == '_') {\n                                element.setAttribute(binding.substring(1), element.getAttribute(binding.substring(1)) + value);\n                                continue;\n                            }\n\n                            if (binding == 'content') {\n                                laroux_dom.append(element, value);\n                                continue;\n                            }\n                            break;\n                        case 'removeprop':\n                            if (value.substring(0, 1) == '_') {\n                                element.removeAttribute(value.substring(1));\n                                continue;\n                            }\n\n                            if (value == 'content') {\n                                laroux_dom.clear(element);\n                                continue;\n                            }\n                            break;\n                        case 'addclass':\n                            laroux_css.addClass(element, value);\n                            break;\n                        case 'removeclass':\n                            laroux_css.removeClass(element, value);\n                            break;\n                        case 'addstyle':\n                            laroux_css.setProperty(element, binding, value);\n                            break;\n                        case 'removestyle':\n                            laroux_css.setProperty(element, value, 'inherit !important');\n                            break;\n                        case 'repeat':\n                            break;\n                        default:\n                            console.log(operation);\n                    }\n                }\n            }\n        }*/\n    };\n\n    // a fix for Internet Explorer\n    if (typeof Element !== 'undefined') {\n        if (Element.prototype.remove === undefined) {\n            Element.prototype.remove = function () {\n                if (this.parentElement !== null) {\n                    this.parentElement.removeChild(this);\n                }\n            };\n        }\n    }\n\n    return laroux_dom;\n\n}());\n\n},{\"./laroux.helpers.js\":10}],8:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // events\n    var laroux_events = {\n        delegates: [],\n\n        add: function (event, fnc) {\n            laroux_events.delegates.push({ event: event, fnc: fnc });\n        },\n\n        invoke: function (event, args) {\n            for (var item in laroux_events.delegates) {\n                if (!laroux_events.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_events.delegates[item].event != event) {\n                    continue;\n                }\n\n                laroux_events.delegates[item].fnc(args);\n            }\n        }\n    };\n\n    return laroux_events;\n\n}());\n\n},{}],9:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_ajax = require('./laroux.ajax.js');\n\n    // forms\n    var laroux_forms = {\n        ajaxForm: function (formobj, fnc, fncBegin) {\n            laroux_dom.setEvent(formobj, 'submit', function () {\n                if (fncBegin !== undefined) {\n                    fncBegin();\n                }\n\n                laroux_ajax.post(\n                    formobj.getAttribute('action'),\n                    laroux_forms.serializeFormData(formobj),\n                    fnc\n                );\n\n                return false;\n            });\n        },\n\n        isFormField: function (element) {\n            if (element.tagName === 'SELECT') {\n                return true;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE' || type === 'CHECKBOX' || type === 'RADIO' || type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return true;\n                }\n\n                return false;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return true;\n            }\n\n            return false;\n        },\n\n        getFormFieldValue: function (element) {\n            if (element.disabled === true) {\n                return null;\n            }\n\n            if (element.tagName === 'SELECT') {\n                return element.options[element.selectedIndex].value;\n            }\n\n            if (element.tagName === 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type === 'FILE') {\n                    return element.files[0];\n                }\n\n                if (type === 'CHECKBOX' || type === 'RADIO') {\n                    if (element.checked) {\n                        return element.value;\n                    }\n\n                    return null;\n                }\n\n                if (type === 'TEXT' || type === 'PASSWORD' || type === 'HIDDEN') {\n                    return element.value;\n                }\n\n                return null;\n            }\n\n            if (element.tagName === 'TEXTAREA') {\n                return element.value;\n            }\n\n            return null;\n        },\n\n        setFormFieldValue: function (element, value) {\n            if (element.disabled === true) {\n                return;\n            }\n\n            if (element.tagName === 'SELECT') {\n                for (var option in element.options) {\n                    if (!element.options.hasOwnProperty(option)) {\n                        continue;\n                    }\n\n                    if (element.options[option].value == value) {\n                        element.selectedIndex = option;\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'INPUT') {\n                var type = element.getAttribute('type').toUpperCase();\n\n                if (type == 'FILE') {\n                    element.files[0] = value;\n                    return;\n                }\n\n                if (type == 'CHECKBOX' || type == 'RADIO') {\n                    if (value === true || value == element.value) {\n                        element.checked = true;\n                    }\n\n                    return;\n                }\n\n                if (type == 'TEXT' || type == 'PASSWORD' || type == 'HIDDEN') {\n                    element.value = value;\n                    return;\n                }\n\n                return;\n            }\n\n            if (element.tagName == 'TEXTAREA') {\n                element.value = value;\n                return;\n            }\n        },\n\n        toggleFormEditing: function (formobj, value) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            if (value === undefined) {\n                if (formobj.getAttribute('data-last-enabled') === null) {\n                    formobj.setAttribute('data-last-enabled', 'enabled');\n                    value = false;\n                } else {\n                    formobj.removeAttribute('data-last-enabled');\n                    value = true;\n                }\n            }\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                if (!laroux_forms.isFormField(selection[selected])) {\n                    continue;\n                }\n\n                var lastDisabled = selection[selected].getAttribute('data-last-disabled');\n                if (!value) {\n                    if (lastDisabled === null) {\n                        if (selection[selected].getAttribute('disabled') !== null) {\n                            selection[selected].setAttribute('data-last-disabled', 'disabled');\n                        }\n                    }\n\n                    selection[selected].setAttribute('disabled', 'disabled');\n                    continue;\n                }\n\n                if (lastDisabled !== null) {\n                    selection[selected].removeAttribute('data-last-disabled');\n                } else {\n                    selection[selected].removeAttribute('disabled');\n                }\n            }\n        },\n\n        serializeFormData: function (formobj) {\n            var formdata = new FormData();\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    formdata.append(selection[selected].getAttribute('name'), value);\n                }\n            }\n\n            return formdata;\n        },\n\n        serialize: function (formobj) {\n            var values = {};\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                var value = laroux_forms.getFormFieldValue(selection[selected]);\n\n                if (value !== null) {\n                    values[selection[selected].getAttribute('name')] = value;\n                }\n            }\n\n            return values;\n        },\n\n        deserialize: function (formobj, data) {\n            var selection = formobj.querySelectorAll('*[name]');\n\n            for (var selected = 0, length = selection.length; selected < length; selected++) {\n                laroux_forms.setFormFieldValue(selection[selected], data[selection[selected].getAttribute('name')]);\n            }\n        }\n    };\n\n    return laroux_forms;\n\n}());\n\n},{\"./laroux.ajax.js\":3,\"./laroux.dom.js\":7}],10:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // helpers\n    var laroux_helpers = {\n        uniqueId: 0,\n\n        getUniqueId: function () {\n            /*jslint plusplus: true */\n            return 'uid-' + (++laroux_helpers.uniqueId);\n        },\n\n        buildQueryString: function (values, rfc3986) {\n            var uri = '',\n                regEx = /%20/g;\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    if (rfc3986 || false) {\n                        uri += '&' + encodeURIComponent(name).replace(regEx, '+') + '=' + encodeURIComponent(values[name].toString()).replace(regEx, '+');\n                    } else {\n                        uri += '&' + encodeURIComponent(name) + '=' + encodeURIComponent(values[name].toString());\n                    }\n                }\n            }\n\n            return uri.substr(1);\n        },\n\n        buildFormData: function (values) {\n            var data = new FormData();\n\n            for (var name in values) {\n                if (!values.hasOwnProperty(name)) {\n                    continue;\n                }\n\n                if (typeof values[name] != 'function') {\n                    data.append(name, values[name]);\n                }\n            }\n\n            return data;\n        },\n\n        format: function () {\n            var args = arguments;\n            return Array.prototype.shift.call(args).replace(/%s/g, function () { return Array.prototype.shift.call(args); });\n        },\n\n        replaceAll: function (text, dictionary) {\n            var re = new RegExp(Object.keys(dictionary).join('|'), 'g');\n\n            return text.replace(\n                re,\n                function (match) {\n                    return dictionary[match];\n                }\n            );\n        },\n\n        camelCase: function (value) {\n            var flag = false;\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar == '-') {\n                    flag = true;\n                    continue;\n                }\n\n                output += (!flag) ? currChar : currChar.toUpperCase();\n                flag = false;\n            }\n\n            return output;\n        },\n\n        antiCamelCase: function (value) {\n            var output = '';\n\n            for (var j = 0; j < value.length; j++) {\n                var currChar = value.charAt(j);\n                if (currChar != '-' && currChar == currChar.toUpperCase()) {\n                    output += '-' + currChar.toLowerCase();\n                    continue;\n                }\n\n                output += currChar;\n            }\n\n            return output;\n        },\n\n        quoteAttr: function (value) {\n            return value.replace(/&/g, '&amp;')\n                        .replace(/'/g, '&apos;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/</g, '&lt;')\n                        .replace(/>/g, '&gt;')\n                        .replace(/\"/g, '&quot;')\n                        .replace(/\\r\\n/g, '&#13;')\n                        .replace(/[\\r\\n]/g, '&#13;');\n        },\n\n        spliceString: function (value, index, count, add) {\n            return value.slice(0, index) + (add || '') + value.slice(index + count);\n        },\n\n        random: function (min, max) {\n            return min + Math.floor(Math.random() * (max - min + 1));\n        },\n\n        find: function (obj, iterator, context) {\n            var result;\n\n            obj.some(function (value, index, list) {\n                if (iterator.call(context, value, index, list)) {\n                    result = value;\n                    return true;\n                }\n            });\n\n            return result;\n        },\n\n        extendObject: function () {\n            var target = Array.prototype.shift.call(arguments),\n                isArray = target instanceof Array;\n\n            for (var item in arguments) {\n                for (var name in arguments[item]) {\n                    // if (isArray) {\n                    //     target.push(arguments[item][name]);\n                    //     continue;\n                    // }\n\n                    /* target[name].constructor === Object */\n                    if (target.hasOwnProperty(name) && target[name] instanceof Object) {\n                        laroux_helpers.extendObject(target[name], arguments[item][name]);\n                        continue;\n                    }\n\n                    target[name] = arguments[item][name];\n                }\n            }\n        },\n\n        each: function (arr, fnc, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (fnc(item, arr[item]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        map: function (arr, fnc, dontSkipReturns, testOwnProperties) {\n            var results = [];\n\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var result = fnc(arr[item], item);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.push(result);\n                }\n            }\n\n            return results;\n        },\n\n        index: function (arr, value, testOwnProperties) {\n            for (var item in arr) {\n                if (testOwnProperties && !arr.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (arr[item] === object) {\n                    return item;\n                }\n            }\n\n            return null;\n        },\n\n        aeach: function (arr, fnc) {\n            for (var i = 0, length = arr.length; i < length; i++) {\n                if (fnc(i, arr[i]) === false) {\n                    break;\n                }\n            }\n\n            return arr;\n        },\n\n        amap: function (arr, fnc, dontSkipReturns) {\n            var results = [];\n\n            for (var i = 0, length = arr.length; i < length; i++) {\n                var result = fnc(arr[i], i);\n                if (result === false) {\n                    break;\n                }\n\n                if (dontSkipReturns || result !== undefined) {\n                    results.unshift(result);\n                }\n            }\n\n            return results;\n        },\n\n        aindex: function (arr, value, start) {\n            for (var i = (start || 0), length = arr.length; i < length; i++) {\n                if (arr[i] === value) {\n                    return i;\n                }\n            }\n\n            return -1;\n        },\n\n        column: function (obj, key) {\n            return laroux_helpers.map(obj, function (value) { return value[key]; }, true);\n        },\n\n        shuffle: function (obj) {\n            var index = 0,\n                shuffled = [];\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var rand = laroux_helpers.random(0, index);\n                shuffled[index++] = shuffled[rand];\n                shuffled[rand] = obj[item];\n            }\n\n            return shuffled;\n        },\n\n        merge: function () {\n            var target = Array.prototype.shift.call(arguments),\n                tmp = target,\n                isArray = tmp instanceof Array;\n\n            for (var item in arguments) {\n                if (isArray) {\n                    tmp = tmp.concat(arguments[item]);\n                    continue;\n                }\n\n                for (var attr in arguments[item]) {\n                    if (!arguments[item].hasOwnProperty(attr)) {\n                        continue;\n                    }\n\n                    tmp[attr] = arguments[item][attr];\n                }\n            }\n\n            return tmp;\n        },\n\n        duplicate: function (obj) {\n            return JSON.parse(JSON.stringify(obj));\n        },\n\n        toArray: function (obj) {\n            var length = obj.length,\n                items = new Array(length);\n\n            for (var i = 0; i < length; i++) {\n                items[i] = obj[i];\n            }\n\n            return items;\n        },\n\n        getAsArray: function (obj) {\n            var items;\n\n            if (obj instanceof Array) {\n                items = obj;\n            } else if (obj instanceof NodeList) {\n                var length = obj.length;\n\n                items = new Array(length);\n                for (var i = 0; i < length; i++) {\n                    items[i] = obj[i];\n                }\n            } else {\n                items = [obj];\n            }\n\n            return items;\n        },\n\n        getLength: function (obj) {\n            if (obj.constructor === Object) {\n                if (obj.length !== undefined) {\n                    return obj.length;\n                }\n\n                return Object.keys(obj).length;\n            }\n\n            return -1;\n        },\n\n        getKeysRecursive: function (obj, delimiter, prefix, keys) {\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            if (prefix === undefined) {\n                prefix = '';\n                keys = [];\n            }\n\n            for (var item in obj) {\n                if (!obj.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                keys.push(prefix + item);\n\n                if (obj[item] !== undefined && obj[item] !== null && obj[item].constructor === Object) {\n                    laroux_helpers.getKeysRecursive(obj[item], delimiter, prefix + item + delimiter, keys);\n                    continue;\n                }\n            }\n\n            return keys;\n        },\n\n        getElement: function (obj, path, defaultValue, delimiter) {\n            if (defaultValue === undefined) {\n                defaultValue = null;\n            }\n\n            if (delimiter === undefined) {\n                delimiter = '.';\n            }\n\n            var pos = path.indexOf(delimiter);\n            var key;\n            var rest;\n            if (pos === -1) {\n                key = path;\n                rest = null;\n            } else {\n                key = path.substring(0, pos);\n                rest = path.substring(pos + 1);\n            }\n\n            if (!(key in obj)) {\n                return defaultValue;\n            }\n\n            if (rest === null || rest.length === 0) {\n                return obj[key];\n            }\n\n            return laroux_helpers.getElement(obj[key], rest, defaultValue, delimiter);\n        }\n    };\n\n    return laroux_helpers;\n\n}());\n\n},{}],11:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_forms = require('./laroux.forms.js');\n\n    // keys\n    var laroux_keys = {\n        keyName: function (keycode) {\n            keycode = keycode.toLowerCase();\n\n            switch (keycode) {\n            case 'backspace':\n                return 8;\n\n            case 'tab':\n                return 9;\n\n            case 'enter':\n            case 'return':\n                return 13;\n\n            case 'esc':\n            case 'escape':\n                return 27;\n\n            case 'space':\n                return 32;\n\n            case 'pgup':\n                return 33;\n\n            case 'pgdn':\n                return 34;\n\n            case 'end':\n                return 35;\n\n            case 'home':\n                return 36;\n\n            case 'left':\n                return 37;\n\n            case 'up':\n                return 38;\n\n            case 'right':\n                return 39;\n\n            case 'down':\n                return 40;\n\n            case 'insert':\n                return 45;\n\n            case 'delete':\n                return 46;\n\n            case 'f1':\n                return 112;\n\n            case 'f2':\n                return 113;\n\n            case 'f3':\n                return 114;\n\n            case 'f4':\n                return 115;\n\n            case 'f5':\n                return 116;\n\n            case 'f6':\n                return 117;\n\n            case 'f7':\n                return 118;\n\n            case 'f8':\n                return 119;\n\n            case 'f9':\n                return 120;\n\n            case 'f10':\n                return 121;\n\n            case 'f11':\n                return 122;\n\n            case 'f12':\n                return 123;\n\n            case ',':\n                return 188;\n\n            case '.':\n                return 190;\n            }\n\n            return String.fromCharCode(keycode);\n        },\n\n        // {target, key, shift, ctrl, alt, disableInputs, fnc}\n        assign: function (options) {\n            var wrapper = function (ev) {\n                if (!ev) {\n                    ev = event;\n                }\n\n                var element = ev.target || ev.srcElement;\n                if (element.nodeType === 3 || element.nodeType === 11) { // element.nodeType === 1 ||\n                    element = element.parentNode;\n                }\n\n                if (options.disableInputs && laroux_forms.isFormField(element)) {\n                    return;\n                }\n\n                if (options.shift && !ev.shiftKey) {\n                    return;\n                }\n\n                if (options.ctrl && !ev.ctrlKey) {\n                    return;\n                }\n\n                if (options.alt && !ev.altKey) {\n                    return;\n                }\n\n                var key = laroux_keys.keyName(options.key);\n                if (key !== (ev.keyCode || ev.which)) {\n                    return;\n                }\n\n                options.fnc(ev);\n\n                return false;\n            };\n\n            laroux_dom.setEvent(options.target || document, 'keydown', wrapper);\n        }\n    };\n\n    return laroux_keys;\n\n}());\n\n},{\"./laroux.dom.js\":7,\"./laroux.forms.js\":9}],12:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_stack = require('./laroux.stack.js');\n\n    // mvc\n    var laroux_mvc = {\n        apps: {},\n        pauseUpdate: false,\n\n        init: function (element, model) {\n            if (element.constructor === String) {\n                element = laroux_dom.selectById(element);\n            }\n\n            // if (model.constructor !== laroux_stack) {\n            //     model = new laroux_stack(model);\n            // }\n\n            var appKey = element.getAttribute('id');\n\n            model.onupdate = function (event) {\n                if (!laroux_mvc.pauseUpdate) {\n                    laroux_mvc.update(appKey); // , [event.key]\n                }\n            };\n\n            laroux_mvc.apps[appKey] = {\n                element: element,\n                model: model // ,\n                // modelKeys: null,\n                // boundElements: null,\n                // eventElements: null\n            };\n\n            laroux_mvc.rebind(appKey);\n        },\n\n        rebind: function (appKey) {\n            var app = laroux_mvc.apps[appKey];\n            /*jslint nomen: true */\n            app.modelKeys = laroux_helpers.getKeysRecursive(app.model._data); // FIXME: works only for $l.stack\n            app.boundElements = {};\n            app.eventElements = [];\n\n            laroux_mvc.scanElements(app, app.element);\n            laroux_mvc.update(appKey);\n\n            var fnc = function (ev, elem) {\n                var binding = laroux_mvc.bindStringParser(elem.getAttribute('lr-event'));\n                // laroux_mvc.pauseUpdate = true;\n                for (var item in binding) {\n                    if (item === null || !binding.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    if (binding[item].charAt(0) == '\\'') {\n                        app.model[item] = binding[item].substring(1, binding[item].length - 1);\n                    } else if (binding[item].substring(0, 5) == 'attr.') {\n                        app.model[item] = elem.getAttribute(binding[item].substring(5));\n                    } else if (binding[item].substring(0, 5) == 'prop.') {\n                        app.model[item] = elem[binding[item].substring(5)];\n                    }\n                }\n                // laroux_mvc.pauseUpdate = false;\n            };\n\n            for (var i = 0, length = app.eventElements.length; i < length; i++) {\n                laroux_dom.setEvent(\n                    app.eventElements[i].element,\n                    app.eventElements[i].binding[null],\n                    fnc\n                );\n            }\n        },\n\n        scanElements: function (app, element) {\n            for (var i = 0, atts = element.attributes, m = atts.length; i < m; i++) {\n                if (atts[i].name == 'lr-bind') {\n                    var binding1 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    for (var item in binding1) {\n                        if (!binding1.hasOwnProperty(item)) {\n                            continue;\n                        }\n\n                        if (app.boundElements[binding1[item]] === undefined) {\n                            app.boundElements[binding1[item]] = [];\n                        }\n\n                        app.boundElements[binding1[item]].push({\n                            element: element,\n                            target: item\n                        });\n                    }\n                } else if (atts[i].name == 'lr-event') {\n                    var binding2 = laroux_mvc.bindStringParser(atts[i].value);\n\n                    app.eventElements.push({\n                        element: element,\n                        binding: binding2\n                    });\n                }\n            }\n\n            for (var j = 0, chldrn = element.childNodes, n = chldrn.length; j < n; j++) {\n                if (chldrn[j].nodeType === 1) {\n                    laroux_mvc.scanElements(app, chldrn[j]);\n                }\n            }\n        },\n\n        update: function (appKey, keys) {\n            var app = laroux_mvc.apps[appKey];\n\n            if (typeof keys == 'undefined') {\n                keys = app.modelKeys;\n            }\n\n            for (var i = 0, length1 = keys.length; i < length1; i++) {\n                if (!(keys[i] in app.boundElements)) {\n                    continue;\n                }\n\n                var boundElement = app.boundElements[keys[i]];\n\n                for (var j = 0, length2 = boundElement.length; j < length2; j++) {\n                    if (boundElement[j].target.substring(0, 6) == 'style.') {\n                        boundElement[j].element.style[boundElement[j].target.substring(6)] = laroux_helpers.getElement(app.model, keys[i]);\n                    } else if (boundElement[j].target.substring(0, 5) == 'attr.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element.setAttribute(boundElement[j].target.substring(5), laroux_helpers.getElement(app.model, keys[i]));\n                    } else if (boundElement[j].target.substring(0, 5) == 'prop.') {\n                        // FIXME removeAttribute on null value?\n                        boundElement[j].element[boundElement[j].target.substring(5)] = laroux_helpers.getElement(app.model, keys[i]);\n                    }\n                }\n            }\n        },\n\n        bindStringParser: function (text) {\n            var lastBuffer = null,\n                buffer = '',\n                state = 0,\n                result = {};\n\n            for (var i = 0, length = text.length; i < length; i++) {\n                var curr = text.charAt(i);\n\n                if (state === 0) {\n                    if (curr == ':') {\n                        state = 1;\n                        lastBuffer = buffer.trim();\n                        buffer = '';\n                        continue;\n                    }\n                }\n\n                if (curr == ',') {\n                    state = 0;\n                    result[lastBuffer] = buffer.trim();\n                    buffer = '';\n                    continue;\n                }\n\n                buffer += curr;\n            }\n\n            if (buffer.length > 0) {\n                result[lastBuffer] = buffer.trim();\n            }\n\n            return result;\n        }\n    };\n\n    return laroux_mvc;\n\n}());\n\n},{\"./laroux.dom.js\":7,\"./laroux.helpers.js\":10,\"./laroux.stack.js\":13}],13:[function(require,module,exports){\n/*jslint nomen: true */\nmodule.exports = (function () {\n    'use strict';\n\n    // stack\n    var laroux_stack = function (data, depth, top) {\n        this._data = {};\n        this._depth = depth;\n        this._top = top || this;\n\n        this.set = function (key, value) {\n            // delete this._data[key];\n\n            var type = typeof value;\n            switch (type) {\n            case 'function':\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key]();\n                        }\n                    }\n                );\n                break;\n\n            default:\n                /*\n                if (type == 'object') {\n                    this._data[key] = new laroux_stack(\n                        value,\n                        this._depth ?\n                            this._depth + '.' + key :\n                            key,\n                        this._top\n                    );\n                } else {\n                    this._data[key] = value;\n                }\n                */\n                this._data[key] = value;\n\n                Object.defineProperty(\n                    this,\n                    key,\n                    {\n                        configurable: true,\n                        get: function () {\n                            return this._data[key];\n                        },\n                        set: function (newValue) {\n                            var oldValue = this._data[key];\n                            if (this._data[key] === newValue) {\n                                return;\n                            }\n\n                            // this.set(this, key, newValue);\n                            this._data[key] = newValue;\n                            this._top.onupdate({ scope: this, key: key, oldValue: oldValue, newValue: newValue });\n                        }\n                    }\n                );\n                break;\n            }\n        };\n\n        this.setRange = function (values) {\n            for (var valueKey in values) {\n                if (!values.hasOwnProperty(valueKey)) {\n                    continue;\n                }\n\n                this.set(valueKey, values[valueKey]);\n            }\n        };\n\n        this.get = function (key, defaultValue) {\n            return this[key] || defaultValue || null;\n        };\n\n        this.getRange = function (keys) {\n            var values = {};\n\n            for (var item in keys) {\n                if (!keys.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                values[keys[item]] = this[keys[item]];\n            }\n\n            return values;\n        };\n\n        this.keys = function () {\n            return Object.keys(this._data);\n        };\n\n        this.length = function () {\n            return Object.keys(this._data).length;\n        };\n\n        this.exists = function (key) {\n            return (key in this._data);\n        };\n\n        this.remove = function (key) {\n            if (key in this._data) {\n                delete this[key];\n                delete this._data[key];\n            }\n        };\n\n        this.clear = function () {\n            for (var item in this._data) {\n                if (!this._data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                delete this[item];\n                delete this._data[item];\n            }\n\n            this._data = {};\n        };\n\n        this.onupdate = function (event) {\n        };\n\n        if (data) {\n            this.setRange(data);\n        }\n    };\n\n    return laroux_stack;\n\n}());\n\n},{}],14:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // templates\n    var laroux_templates = {\n        engines: {\n            plain: {\n                compile: function (template, options) {\n                    return [template, options];\n                },\n\n                render: function (compiled, model) {\n                    var result = compiled[0],\n                        dict = [],\n                        lastIndex = 0,\n                        nextIndex;\n\n                    while ((nextIndex = result.indexOf('{{', lastIndex)) !== -1) {\n                        nextIndex += 2;\n                        var closeIndex = result.indexOf('}}', nextIndex);\n                        if (closeIndex === -1) {\n                            break;\n                        }\n\n                        var key = result.substring(nextIndex, closeIndex);\n                        dict['{{' + key + '}}'] = laroux_helpers.getElement(model, key, '');\n                        lastIndex = closeIndex + 2;\n                    }\n\n                    return laroux_helpers.replaceAll(result, dict);\n                }\n            },\n\n            hogan: {\n                compile: function (template, options) {\n                    return Hogan.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled.render(model);\n                }\n            },\n\n            mustache: {\n                compile: function (template, options) {\n                    return Mustache.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            handlebars: {\n                compile: function (template, options) {\n                    return Handlebars.compile(template, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            lodash: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            },\n\n            underscore: {\n                compile: function (template, options) {\n                    /*jslint nomen: true */\n                    return _.compile(template, null, options);\n                },\n\n                render: function (compiled, model) {\n                    return compiled(model);\n                }\n            }\n        },\n        engine: 'plain',\n\n        apply: function (element, model, options) {\n            var content, engine = laroux_templates.engines[laroux_templates.engine];\n\n            if (element.nodeType === 1 || element.nodeType === 3 || element.nodeType === 11) {\n                content = element.textContent;\n            } else {\n                content = element.nodeValue;\n            }\n\n            var compiled = engine.compile(content, options);\n            return engine.render(compiled, model);\n        },\n\n        insert: function (element, model, target, position, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.insert(target, position || 'beforeend', output);\n        },\n\n        replace: function (element, model, target, options) {\n            var output = laroux_templates.apply(element, model, options);\n\n            laroux_dom.replace(target, output);\n        }\n    };\n\n    return laroux_templates;\n\n}());\n\n},{\"./laroux.dom.js\":7,\"./laroux.helpers.js\":10}],15:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // timers\n    var laroux_timers = {\n        data: [],\n\n        set: function (timer) {\n            timer.next = Date.now() + timer.timeout;\n            laroux_timers.data.push(timer);\n        },\n\n        remove: function (id) {\n            var targetKey = null;\n\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.id !== undefined && currentItem.id == id) {\n                    targetKey = item;\n                    break;\n                }\n            }\n\n            if (targetKey !== null) {\n                laroux_timers.data.splice(targetKey, 1);\n                return true;\n            }\n\n            return false;\n        },\n\n        ontick: function () {\n            var now = Date.now();\n\n            var removeKeys = [];\n            for (var item in laroux_timers.data) {\n                if (!laroux_timers.data.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var currentItem = laroux_timers.data[item];\n\n                if (currentItem.next <= now) {\n                    var result = currentItem.ontick(currentItem.state);\n\n                    if (result !== false && currentItem.reset) {\n                        currentItem.next = now + currentItem.timeout;\n                    } else {\n                        removeKeys.unshift(item);\n                    }\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_timers.data.splice(removeKeys[item2], 1);\n            }\n        }\n    };\n\n    return laroux_timers;\n\n}());\n\n},{}],16:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js');\n\n    // touch - partially taken from 'tocca.js' project\n    //         can be found at: https://github.com/GianlucaGuarini/Tocca.js\n    var laroux_touch = {\n        touchStarted: null,\n        swipeTreshold: 80,\n        precision: 30,\n        tapCount: 0,\n        tapTreshold: 200,\n        longTapTreshold: 800,\n        tapTimer: null,\n        pos: null,\n        cached: null,\n\n        events: {\n            start: ['touchstart', 'pointerdown', 'MSPointerDown', 'mousedown'],\n            end: ['touchend', 'pointerup', 'MSPointerUp', 'mouseup'],\n            move: ['touchmove', 'pointermove', 'MSPointerMove', 'mousemove']\n        },\n\n        locatePointer: function (event) {\n            if (event.targetTouches) {\n                event = event.targetTouches[0];\n            }\n\n            laroux_touch.pos = [event.pageX, event.pageY];\n        },\n\n        init: function () {\n            var events = [\n                0,\n                (navigator.msPointerEnabled) ? 2 : 1,\n                3\n            ];\n\n            for (var i = 0, length = events.length; i < length; i++) {\n                laroux_dom.setEventSingle(document, laroux_touch.events.start[events[i]], laroux_touch.onstart);\n                laroux_dom.setEventSingle(document, laroux_touch.events.end[events[i]], laroux_touch.onend);\n                laroux_dom.setEventSingle(document, laroux_touch.events.move[events[i]], laroux_touch.locatePointer);\n            }\n        },\n\n        onstart: function (event) {\n            laroux_touch.locatePointer(event);\n            laroux_touch.cached = [laroux_touch.pos[0], laroux_touch.pos[1]];\n            laroux_touch.touchStarted = Date.now();\n            /*jslint plusplus: true */\n            laroux_touch.tapCount++;\n\n            var fnc = function () {\n                if (laroux_touch.cached[0] >= laroux_touch.pos[0] - laroux_touch.precision &&\n                        laroux_touch.cached[0] <= laroux_touch.pos[0] + laroux_touch.precision &&\n                        laroux_touch.cached[1] >= laroux_touch.pos[1] - laroux_touch.precision &&\n                        laroux_touch.cached[1] <= laroux_touch.pos[1] + laroux_touch.precision) {\n                    if (laroux_touch.touchStarted === null) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            (laroux_touch.tapCount === 2) ? 'dbltap' : 'tap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    if (Date.now() - laroux_touch.touchStarted > laroux_touch.longTapTreshold) {\n                        laroux_dom.dispatchEvent(\n                            event.target,\n                            'longtap',\n                            {\n                                innerEvent: event,\n                                x: laroux_touch.pos[0],\n                                y: laroux_touch.pos[1]\n                            }\n                        );\n\n                        laroux_touch.touchStarted = null;\n                        laroux_touch.tapCount = 0;\n                        return;\n                    }\n\n                    laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n                    return;\n                }\n\n                laroux_touch.tapCount = 0;\n            };\n\n            clearTimeout(laroux_touch.tapTimer);\n            laroux_touch.tapTimer = setTimeout(fnc, laroux_touch.tapTreshold);\n        },\n\n        onend: function (event) {\n            var delta = [\n                    laroux_touch.pos[0] - laroux_touch.cached[0],\n                    laroux_touch.pos[1] - laroux_touch.cached[1]\n                ],\n                data = {\n                    innerEvent: event,\n                    x: laroux_touch.pos[0],\n                    y: laroux_touch.pos[1],\n                    distance: {\n                        x: Math.abs(delta[0]),\n                        y: Math.abs(delta[1])\n                    }\n                };\n\n            laroux_touch.touchStarted = null;\n\n            if (delta[0] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swiperight', data);\n            }\n\n            if (delta[0] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeleft', data);\n            }\n\n            if (delta[1] <= -laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipedown', data);\n            }\n\n            if (delta[1] >= laroux_touch.swipeTreshold) {\n                laroux_dom.dispatchEvent(event.target, 'swipeup', data);\n            }\n        }\n    };\n\n    // laroux.ready(laroux_touch.init);\n\n    return laroux_touch;\n\n}());\n\n},{\"./laroux.dom.js\":7}],17:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_helpers = require('./laroux.helpers.js');\n\n    // triggers\n    var laroux_triggers = {\n        delegates: [],\n        list: [],\n\n        set: function (condition, fnc, state) {\n            var conditions = laroux_helpers.getAsArray(condition);\n\n            for (var item in conditions) {\n                if (!conditions.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                if (laroux_helpers.aindex(laroux_triggers.list, conditions[item]) === -1) {\n                    laroux_triggers.list.push(conditions[item]);\n                }\n            }\n\n            laroux_triggers.delegates.push({\n                conditions: conditions,\n                fnc: fnc,\n                state: state\n            });\n        },\n\n        ontrigger: function (triggerName, args) {\n            var eventIdx = laroux_helpers.aindex(laroux_triggers.list, triggerName);\n            if (eventIdx !== -1) {\n                laroux_triggers.list.splice(eventIdx, 1);\n            }\n\n            var removeKeys = [];\n            for (var item in laroux_triggers.delegates) {\n                if (!laroux_triggers.delegates.hasOwnProperty(item)) {\n                    continue;\n                }\n\n                var count = 0;\n                var currentItem = laroux_triggers.delegates[item];\n\n                for (var conditionKey in currentItem.conditions) {\n                    if (!currentItem.conditions.hasOwnProperty(conditionKey)) {\n                        continue;\n                    }\n\n                    var conditionObj = currentItem.conditions[conditionKey];\n\n                    if (laroux_helpers.aindex(laroux_triggers.list, conditionObj) !== -1) {\n                        count++;\n                        // break;\n                    }\n                }\n\n                if (count === 0) {\n                    currentItem.fnc(\n                        {\n                            state: currentItem.state,\n                            args: laroux_helpers.getAsArray(args)\n                        }\n                    );\n                    removeKeys.unshift(item);\n                }\n            }\n\n            for (var item2 in removeKeys) {\n                if (!removeKeys.hasOwnProperty(item2)) {\n                    continue;\n                }\n\n                laroux_triggers.delegates.splice(removeKeys[item2], 1);\n            }\n\n            // console.log('trigger name: ' + triggerName);\n        }\n    };\n\n    return laroux_triggers;\n\n}());\n\n},{\"./laroux.helpers.js\":10}],18:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_helpers = require('./laroux.helpers.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_timers = require('./laroux.timers.js'),\n        laroux_date = require('./laroux.date.js');\n\n    // ui\n    var laroux_ui = {\n        floatContainer: null,\n\n        popup: {\n            defaultTimeout: 500,\n\n            createBox: function (id, xclass, message) {\n                return laroux_dom.createElement('DIV', { id: id, 'class': xclass }, message);\n            },\n\n            msgbox: function (timeout, message) {\n                var id = laroux_helpers.getUniqueId(),\n                    obj = laroux_ui.popup.createBox(id, 'larouxMsgBox', message);\n                laroux_ui.floatContainer.appendChild(obj);\n\n                laroux_css.setProperty(obj, { opacity: 1 });\n\n                laroux_timers.set({\n                    timeout: timeout,\n                    reset: false,\n                    ontick: function (x) {\n                        // laroux_css.setProperty(x, { opacity: 0 });\n                        laroux_dom.remove(x);\n                    },\n                    state: obj\n                });\n            }\n        },\n\n        loading: {\n            elementSelector: null,\n            element: null,\n            defaultDelay: 1500,\n            timer: null,\n\n            killTimer: function () {\n                clearTimeout(laroux_ui.loading.timer);\n            },\n\n            hide: function () {\n                laroux_ui.loading.killTimer();\n\n                laroux_css.setProperty(laroux_ui.loading.element, { display: 'none' });\n                localStorage.loadingIndicator = 'false';\n            },\n\n            show: function (delay) {\n                laroux_ui.loading.killTimer();\n\n                if (delay === undefined) {\n                    delay = laroux_ui.loading.defaultDelay;\n                }\n\n                if (delay > 0) {\n                    setTimeout(function () { laroux_ui.loading.show(0); }, delay);\n                } else {\n                    laroux_css.setProperty(laroux_ui.loading.element, { display: 'block' });\n                    localStorage.loadingIndicator = 'true';\n                }\n            },\n\n            init: function () {\n                if (laroux_ui.loading.element === null && laroux_ui.loading.elementSelector !== null) {\n                    laroux_ui.loading.element = laroux_dom.selectSingle(laroux_ui.loading.elementSelector);\n                }\n\n                if (laroux_ui.loading.element !== null) {\n                    laroux_dom.setEvent(window, 'load', laroux_ui.loading.hide);\n                    laroux_dom.setEvent(window, 'beforeunload', laroux_ui.loading.show);\n\n                    if (localStorage.loadingIndicator !== undefined && localStorage.loadingIndicator === 'true') {\n                        laroux_ui.loading.show(0);\n                    } else {\n                        laroux_ui.loading.show();\n                    }\n                }\n            }\n        },\n\n        dynamicDates: {\n            updateDatesElements: null,\n\n            updateDates: function () {\n                if (laroux_ui.dynamicDates.updateDatesElements === null) {\n                    laroux_ui.dynamicDates.updateDatesElements = laroux_dom.select('*[data-epoch]');\n                }\n\n                for (var item in laroux_ui.dynamicDates.updateDatesElements) {\n                    if (!laroux_ui.dynamicDates.updateDatesElements.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    var obj = laroux_ui.dynamicDates.updateDatesElements[item];\n                    // bitshifting (str >> 0) used instead of parseInt(str, 10)\n                    var date = new Date((obj.getAttribute('data-epoch') >> 0) * 1000);\n\n                    laroux_dom.replace(\n                        obj,\n                        laroux_date.getDateString(date)\n                    );\n\n                    obj.setAttribute('title', laroux_date.getLongDateString(date));\n                }\n            },\n\n            init: function () {\n                laroux_timers.set({\n                    timeout: 500,\n                    reset: true,\n                    ontick: laroux_ui.dynamicDates.updateDates\n                });\n            }\n        },\n\n        scrollView: {\n            selectedElements: [],\n\n            onhidden: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 0 });\n                laroux_css.setTransition(elements, ['opacity']);\n            },\n\n            onreveal: function (elements) {\n                laroux_css.setProperty(elements, { opacity: 1 });\n            },\n\n            set: function (element) {\n                var elements = laroux_helpers.getAsArray(element);\n\n                for (var i = 0, length = elements.length; i < length; i++) {\n                    if (!laroux_css.inViewport(elements[i])) {\n                        laroux_ui.scrollView.selectedElements.push(elements[i]);\n                    }\n                }\n\n                laroux_ui.scrollView.onhidden(laroux_ui.scrollView.selectedElements);\n                laroux_dom.setEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n            },\n\n            reveal: function () {\n                var removeKeys = [],\n                    elements = [];\n\n                laroux_helpers.each(\n                    laroux_ui.scrollView.selectedElements,\n                    function (i, element) {\n                        if (laroux_css.inViewport(element)) {\n                            removeKeys.unshift(i);\n                            elements.push(element);\n                        }\n                    }\n                );\n\n                for (var item in removeKeys) {\n                    if (!removeKeys.hasOwnProperty(item)) {\n                        continue;\n                    }\n\n                    laroux_ui.scrollView.selectedElements.splice(removeKeys[item], 1);\n                }\n\n                if (laroux_ui.scrollView.selectedElements.length === 0) {\n                    laroux_dom.unsetEvent(window, 'scroll', laroux_ui.scrollView.reveal);\n                }\n\n                if (elements.length > 0) {\n                    laroux_ui.scrollView.onreveal(elements);\n                }\n            }\n        },\n\n        createFloatContainer: function () {\n            if (!laroux_ui.floatContainer) {\n                laroux_ui.floatContainer = laroux_dom.createElement('DIV', { 'class': 'larouxFloatDiv' });\n                document.body.insertBefore(laroux_ui.floatContainer, document.body.firstChild);\n            }\n        },\n\n        init: function () {\n            laroux_ui.createFloatContainer();\n            laroux_ui.loading.init();\n            laroux_ui.dynamicDates.init();\n        }\n    };\n\n    // laroux.ready(laroux_ui.init);\n\n    return laroux_ui;\n\n}());\n\n},{\"./laroux.css.js\":5,\"./laroux.date.js\":6,\"./laroux.dom.js\":7,\"./laroux.helpers.js\":10,\"./laroux.timers.js\":15}],19:[function(require,module,exports){\nmodule.exports = (function () {\n    'use strict';\n\n    // vars\n    var laroux_vars = {\n        cookiePath: '/',\n\n        getCookie: function (name, defaultValue) {\n            var re = new RegExp(encodeURIComponent(name) + '=[^;]+', 'i'),\n                match = document.cookie.match(re);\n\n            if (!match) {\n                return defaultValue || null;\n            }\n\n            return decodeURIComponent(match[0].split('=')[1]);\n        },\n\n        setCookie: function (name, value, expires, path) {\n            var expireValue = '';\n            if (expires) {\n                expireValue = '; expires=' + expires.toGMTString();\n            }\n\n            document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value) + expireValue + '; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        removeCookie: function (name, path) {\n            document.cookie = encodeURIComponent(name) + '=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=' + (path || laroux_vars.cookiePath);\n        },\n\n        getLocal: function (name, defaultValue) {\n            if (!(name in localStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(localStorage[name]);\n        },\n\n        setLocal: function (name, value) {\n            localStorage[name] = JSON.stringify(value);\n        },\n\n        removeLocal: function (name) {\n            delete localStorage[name];\n        },\n\n        getSession: function (name, defaultValue) {\n            if (!(name in sessionStorage)) {\n                return defaultValue || null;\n            }\n\n            return JSON.parse(sessionStorage[name]);\n        },\n\n        setSession: function (name, value) {\n            sessionStorage[name] = JSON.stringify(value);\n        },\n\n        removeSession: function (name) {\n            delete sessionStorage[name];\n        }\n    };\n\n    return laroux_vars;\n\n}());\n\n},{}],20:[function(require,module,exports){\n/*global NodeList, Node */\nmodule.exports = (function () {\n    'use strict';\n\n    var laroux_dom = require('./laroux.dom.js'),\n        laroux_css = require('./laroux.css.js'),\n        laroux_helpers = require('./laroux.helpers.js');\n\n    // wrapper\n    var laroux_wrapper = function (selector, parent) {\n        var selection;\n\n        if (selector instanceof Array) {\n            selection = selector;\n        } else if (selector instanceof NodeList) {\n            selection = laroux_helpers.toArray(selector);\n        } else if (selector instanceof Node) {\n            selection = [selector];\n        } else {\n            selection = laroux_dom.select(selector, parent);\n        }\n\n        if (selection.length === 1) {\n            return new laroux_wrapper.singleTemplate(selection[0]);\n        }\n\n        return new laroux_wrapper.arrayTemplate(selection);\n    };\n\n    laroux_wrapper.singleTemplate = function (element) {\n        this.source = element;\n        this.isArray = false;\n\n        this.get = function (index) {\n            if (index === 0 || index === undefined) {\n                return this.source;\n            }\n\n            return undefined;\n        };\n\n        this.find = function (selector) {\n            return laroux_wrapper(selector, this.source);\n        };\n    };\n\n    laroux_wrapper.arrayTemplate = function (elements) {\n        this.source = elements;\n        this.isArray = true;\n\n        this.get = function (index) {\n            return this.source[index];\n        };\n    };\n\n    laroux_wrapper.registerBoth = 0;\n    laroux_wrapper.registerSingle = 1;\n    laroux_wrapper.registerArray = 2;\n\n    laroux_wrapper.register = function (name, fnc, scope) {\n        var newFnc = function () {\n            var result = fnc.apply(\n                this,\n                [this.source].concat(laroux_helpers.toArray(arguments))\n            );\n\n            return (result === undefined) ? this : result;\n        };\n\n        switch (scope) {\n        case laroux_wrapper.registerSingle:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            break;\n        case laroux_wrapper.registerArray:\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        default:\n            laroux_wrapper.singleTemplate.prototype[name] = newFnc;\n            laroux_wrapper.arrayTemplate.prototype[name] = newFnc;\n            break;\n        }\n    };\n\n    laroux_wrapper.register('attr', laroux_dom.attr, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('data', laroux_dom.data, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEventSingle, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('on', laroux_dom.setEvent, laroux_wrapper.registerArray);\n    laroux_wrapper.register('off', laroux_dom.unsetEvent, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('clear', laroux_dom.clear, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('insert', laroux_dom.insert, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('prepend', laroux_dom.prepend, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('append', laroux_dom.append, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replace', laroux_dom.replace, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('replaceText', laroux_dom.replaceText, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('remove', laroux_dom.remove, laroux_wrapper.registerSingle);\n\n    laroux_wrapper.register('hasClass', laroux_css.hasClass, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('addClass', laroux_css.addClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('removeClass', laroux_css.removeClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('toggleClass', laroux_css.toggleClass, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('getProperty', laroux_css.getProperty, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('setProperty', laroux_css.setProperty, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('setTransition', laroux_css.setTransition, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('show', laroux_css.show, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('hide', laroux_css.hide, laroux_wrapper.registerBoth);\n    laroux_wrapper.register('height', laroux_css.height, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerHeight', laroux_css.innerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerHeight', laroux_css.outerHeight, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('width', laroux_css.width, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('innerWidth', laroux_css.innerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('outerWidth', laroux_css.outerWidth, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('top', laroux_css.top, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('left', laroux_css.left, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('aboveTheTop', laroux_css.aboveTheTop, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('belowTheFold', laroux_css.belowTheFold, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('leftOfScreen', laroux_css.leftOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('rightOfScreen', laroux_css.rightOfScreen, laroux_wrapper.registerSingle);\n    laroux_wrapper.register('inViewport', laroux_css.inViewport, laroux_wrapper.registerSingle);\n\n    return laroux_wrapper;\n\n}());\n\n},{\"./laroux.css.js\":5,\"./laroux.dom.js\":7,\"./laroux.helpers.js\":10}]},{},[1,2])\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbGFyb3V4LmJhY2t3YXJkLmpzIiwic3JjL2pzL2xhcm91eC5qcyIsInNyYy9qcy9sYXJvdXguYWpheC5qcyIsInNyYy9qcy9sYXJvdXguYW5pbS5qcyIsInNyYy9qcy9sYXJvdXguY3NzLmpzIiwic3JjL2pzL2xhcm91eC5kYXRlLmpzIiwic3JjL2pzL2xhcm91eC5kb20uanMiLCJzcmMvanMvbGFyb3V4LmV2ZW50cy5qcyIsInNyYy9qcy9sYXJvdXguZm9ybXMuanMiLCJzcmMvanMvbGFyb3V4LmhlbHBlcnMuanMiLCJzcmMvanMvbGFyb3V4LmtleXMuanMiLCJzcmMvanMvbGFyb3V4Lm12Yy5qcyIsInNyYy9qcy9sYXJvdXguc3RhY2suanMiLCJzcmMvanMvbGFyb3V4LnRlbXBsYXRlcy5qcyIsInNyYy9qcy9sYXJvdXgudGltZXJzLmpzIiwic3JjL2pzL2xhcm91eC50b3VjaC5qcyIsInNyYy9qcy9sYXJvdXgudHJpZ2dlcnMuanMiLCJzcmMvanMvbGFyb3V4LnVpLmpzIiwic3JjL2pzL2xhcm91eC52YXJzLmpzIiwic3JjL2pzL2xhcm91eC53cmFwcGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FDM1VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDOUhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ROQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0WUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uIChzY29wZSkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBlbXB0eUZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge307XG5cbiAgICBpZiAoc2NvcGUuZG9jdW1lbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzY29wZS5kb2N1bWVudCA9IHtcbiAgICAgICAgICAgIGF0dGFjaEV2ZW50OiBlbXB0eUZ1bmN0aW9uLFxuICAgICAgICAgICAgY3JlYXRlRXZlbnRPYmplY3Q6IGVtcHR5RnVuY3Rpb24sXG4gICAgICAgICAgICByZWFkeVN0YXRlOiBudWxsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCEoJ3JlcXVlc3RBbmltYXRpb25GcmFtZScgaW4gc2NvcGUpKSB7XG4gICAgICAgIHNjb3BlLnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGNhbGxiYWNrKERhdGUubm93KCkpOyB9LCA1MCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCEoJ2dldENvbXB1dGVkU3R5bGUnIGluIHNjb3BlKSkge1xuICAgICAgICBzY29wZS5nZXRDb21wdXRlZFN0eWxlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlID0gLyhcXC0oW2Etel0pezF9KS9nO1xuICAgICAgICAgICAgICAgIGlmIChwcm9wID09PSAnZmxvYXQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHByb3AgPSAnc3R5bGVGbG9hdCc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLnRlc3QocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcCA9IHByb3AucmVwbGFjZShyZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1syXS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmN1cnJlbnRTdHlsZVtwcm9wXSB8fCBudWxsO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5nZXRQcm9wZXJ0eUNTU1ZhbHVlID0gZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENTU1ByaW1pdGl2ZVZhbHVlKHRoaXMuZWxlbWVudCwgcHJvcCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoISgnQ1NTUHJpbWl0aXZlVmFsdWUnIGluIHNjb3BlKSkge1xuICAgICAgICBzY29wZS5DU1NQcmltaXRpdmVWYWx1ZSA9IGZ1bmN0aW9uIChlbGVtZW50LCBwcm9wKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5wcm9wID0gcHJvcDtcbiAgICAgICAgICAgIHRoaXMucHJpbWl0aXZlVHlwZSA9IDA7XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0RmxvYXRWYWx1ZSA9IGZ1bmN0aW9uIChwcmltaXRpdmVUeXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlID0gLyhcXC0oW2Etel0pezF9KS9nLFxuICAgICAgICAgICAgICAgICAgICBwcm9wID0gdGhpcy5wcm9wO1xuXG4gICAgICAgICAgICAgICAgaWYgKHByb3AgPT09ICdmbG9hdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcCA9ICdzdHlsZUZsb2F0JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmUudGVzdChwcm9wKSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9wID0gcHJvcC5yZXBsYWNlKHJlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzWzJdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQuY3VycmVudFN0eWxlW3Byb3BdIHx8IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmIChzY29wZS5FdmVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNjb3BlLkV2ZW50ID0gZW1wdHlGdW5jdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoISgncHJldmVudERlZmF1bHQnIGluIEV2ZW50LnByb3RvdHlwZSkpIHtcbiAgICAgICAgRXZlbnQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICghKCdzdG9wUHJvcGFnYXRpb24nIGluIEV2ZW50LnByb3RvdHlwZSkpIHtcbiAgICAgICAgRXZlbnQucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQnViYmxlID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoc2NvcGUuRWxlbWVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNjb3BlLkVsZW1lbnQgPSBlbXB0eUZ1bmN0aW9uO1xuICAgIH1cblxuICAgIGlmICghKCdhZGRFdmVudExpc3RlbmVyJyBpbiBFbGVtZW50LnByb3RvdHlwZSkpIHtcbiAgICAgICAgdmFyIGV2ZW50TGlzdGVuZXJzID0gW10sXG4gICAgICAgICAgICBhZGRMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQgPSBldmVudC5zcmNFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldCA9IHNlbGY7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmICgnaGFuZGxlRXZlbnQnIGluIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY2FsbGJhY2suaGFuZGxlRXZlbnQoZXZlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjYWxsYmFjay5jYWxsKHNlbGYsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHNlbGYsIGV2ZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChldmVudG5hbWUgIT09ICdET01Db250ZW50TG9hZGVkJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaEV2ZW50KCdvbicgKyBldmVudG5hbWUsIHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBldmVudExpc3RlbmVycy5wdXNoKHsgb2JqZWN0OiB0aGlzLCB0eXBlOiBldmVudG5hbWUsIGxpc3RlbmVyOiBjYWxsYmFjaywgd3JhcHBlcjogd3JhcHBlciB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmVMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGV2ZW50TGlzdGVuZXJzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBldmVudExpc3RlbmVyID0gZXZlbnRMaXN0ZW5lcnNbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdGVuZXIub2JqZWN0ID09PSB0aGlzICYmIGV2ZW50TGlzdGVuZXIudHlwZSA9PT0gZXZlbnRuYW1lICYmIGV2ZW50TGlzdGVuZXIubGlzdGVuZXIgPT09IGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRuYW1lICE9ICdET01Db250ZW50TG9hZGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWNoRXZlbnQoJ29uJyArIGV2ZW50bmFtZSwgZXZlbnRMaXN0ZW5lci53cmFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBldmVudE9iamVjdCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJlRXZlbnQoJ29uJyArIGV2ZW50LnR5cGUsIGV2ZW50T2JqZWN0KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZExpc3RlbmVyO1xuICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gcmVtb3ZlTGlzdGVuZXI7XG4gICAgICAgIEVsZW1lbnQucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBkaXNwYXRjaEV2ZW50O1xuXG4gICAgICAgIGlmIChzY29wZS5IVE1MRG9jdW1lbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyID0gYWRkTGlzdGVuZXI7XG4gICAgICAgICAgICBIVE1MRG9jdW1lbnQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgPSByZW1vdmVMaXN0ZW5lcjtcbiAgICAgICAgICAgIEhUTUxEb2N1bWVudC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudCA9IGRpc3BhdGNoRXZlbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2NvcGUuV2luZG93ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIFdpbmRvdy5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lciA9IGFkZExpc3RlbmVyO1xuICAgICAgICAgICAgV2luZG93LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyID0gcmVtb3ZlTGlzdGVuZXI7XG4gICAgICAgICAgICBXaW5kb3cucHJvdG90eXBlLmRpc3BhdGNoRXZlbnQgPSBkaXNwYXRjaEV2ZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRPYmplY3QgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgICAgICAgICAgICAgIC8vIGV2ZW50T2JqZWN0LnNyY0VsZW1lbnQgPSB3aW5kb3c7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZXZlbnRMaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50TGlzdGVuZXJzW2ldLm9iamVjdCA9PT0gZG9jdW1lbnQgJiYgZXZlbnRMaXN0ZW5lcnNbaV0udHlwZSA9PT0gJ0RPTUNvbnRlbnRMb2FkZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudExpc3RlbmVyc1tpXS53cmFwcGVyKGV2ZW50T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHNjb3BlLlRleHQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBzY29wZS5UZXh0ID0gZW1wdHlGdW5jdGlvbjtcbiAgICB9XG5cbiAgICBpZiAoISgndGV4dENvbnRlbnQnIGluIEVsZW1lbnQucHJvdG90eXBlKSkge1xuICAgICAgICB2YXIgaW5uZXJUZXh0ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihFbGVtZW50LnByb3RvdHlwZSwgJ2lubmVyVGV4dCcpO1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgJ3RleHRDb250ZW50Jywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlubmVyVGV4dC5nZXQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbm5lclRleHQuc2V0LmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoISgnZ2V0QXR0cmlidXRlJyBpbiBFbGVtZW50LnByb3RvdHlwZSkpIHtcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUuZ2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyaWJ1dGVdLnZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICghKCdzZXRBdHRyaWJ1dGUnIGluIEVsZW1lbnQucHJvdG90eXBlKSkge1xuICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUgPSBmdW5jdGlvbiAoYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW2F0dHJpYnV0ZV0udmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoISgncmVtb3ZlQXR0cmlidXRlJyBpbiBFbGVtZW50LnByb3RvdHlwZSkpIHtcbiAgICAgICAgRWxlbWVudC5wcm90b3R5cGUucmVtb3ZlQXR0cmlidXRlID0gZnVuY3Rpb24gKGF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnJlbW92ZU5hbWVkSXRlbShhdHRyaWJ1dGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICghKCdmaXJzdEVsZW1lbnRDaGlsZCcgaW4gRWxlbWVudC5wcm90b3R5cGUpKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShFbGVtZW50LnByb3RvdHlwZSwgJ2ZpcnN0RWxlbWVudENoaWxkJywge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghKCdjbGFzc0xpc3QnIGluIEVsZW1lbnQucHJvdG90eXBlKSkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsICdjbGFzc0xpc3QnLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2xhc3NOYW1lID0gc2VsZi5jbGFzc05hbWUudHJpbSgpICsgJyAnICsgY2xhc3NOYW1lO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jbGFzc05hbWUgPSBzZWxmLmNsYXNzTmFtZS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAnXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5zOiBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBSZWdFeHAoJyhefCApJyArIGNsYXNzTmFtZSArICcoIHwkKScsICdnaScpLnRlc3Qoc2VsZi5jbGFzc05hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghKCd0ZXh0Q29udGVudCcgaW4gVGV4dC5wcm90b3R5cGUpKSB7XG4gICAgICAgIHZhciBub2RlVmFsdWUgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKFRleHQucHJvdG90eXBlLCAnbm9kZVZhbHVlJyk7XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHQucHJvdG90eXBlLCAndGV4dENvbnRlbnQnLCB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZVZhbHVlLmdldC5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGVWYWx1ZS5zZXQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICghKCd0cmltJyBpbiBTdHJpbmcucHJvdG90eXBlKSkge1xuICAgICAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCEoJ29ic2VydmUnIGluIE9iamVjdCkpIHtcbiAgICAgICAgT2JqZWN0Lm9ic2VydmUgPSBlbXB0eUZ1bmN0aW9uO1xuICAgIH1cblxuICAgIGlmICghKCdrZXlzJyBpbiBPYmplY3QpKSB7XG4gICAgICAgIE9iamVjdC5rZXlzID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iamVjdC5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qXG4gICAgaWYgKCEoJ2ZvckVhY2gnIGluIE9iamVjdC5wcm90b3R5cGUpKSB7XG4gICAgICAgIE9iamVjdC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIFt0aGlzW2l0ZW1dLCBpdGVtLCB0aGlzXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKCEoJ21hcCcgaW4gT2JqZWN0LnByb3RvdHlwZSkpIHtcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5tYXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gdGhpcykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goY2FsbGJhY2suYXBwbHkodGhpcywgW3RoaXNbaXRlbV0sIGl0ZW0sIHRoaXNdKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICghKCdmb3JFYWNoJyBpbiBBcnJheS5wcm90b3R5cGUpKSB7XG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBbdGhpc1tpXSwgaSwgdGhpc10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmICghKCdtYXAnIGluIEFycmF5LnByb3RvdHlwZSkpIHtcbiAgICAgICAgQXJyYXkucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGNhbGxiYWNrLmFwcGx5KHRoaXMsIFt0aGlzW2ldLCBpLCB0aGlzXSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBpZiAoISgnaW5kZXhPZicgaW4gQXJyYXkucHJvdG90eXBlKSkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIChvYmplY3QsIHN0YXJ0KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gKHN0YXJ0IHx8IDApLCBsZW5ndGggPSB0aGlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNbaV0gPT09IG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgKi9cblxufSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKHNjb3BlKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gY29yZVxuICAgIHZhciBsYXJvdXggPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGxhcm91eC5oZWxwZXJzLnRvQXJyYXkoXG4gICAgICAgICAgICAgICAgKHBhcmVudCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvKlxuICAgICAgICAvLyBGSVhNRTogbm9uLWNocm9tZSBvcHRpbWl6YXRpb25cbiAgICAgICAgdmFyIHJlID0gL14jKFteXFwrXFw+XFxbXFxdXFwuIyBdKikkLy5leGVjKHNlbGVjdG9yKTtcbiAgICAgICAgaWYgKHJlKSB7XG4gICAgICAgICAgICBpZiAocGFyZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocmVbMV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50LmdldEVsZW1lbnRCeUlkKHJlWzFdKTtcbiAgICAgICAgfVxuICAgICAgICAqL1xuXG4gICAgICAgIHJldHVybiAocGFyZW50IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICB9O1xuXG4gICAgaWYgKCEoJyRsJyBpbiBzY29wZSkpIHtcbiAgICAgICAgc2NvcGUuJGwgPSBsYXJvdXg7XG4gICAgfVxuXG4gICAgLy8gY29yZSBtb2R1bGVzXG4gICAgbGFyb3V4LmV2ZW50cyA9IHJlcXVpcmUoJy4vbGFyb3V4LmV2ZW50cy5qcycpO1xuICAgIGxhcm91eC5oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuICAgIGxhcm91eC50aW1lcnMgPSByZXF1aXJlKCcuL2xhcm91eC50aW1lcnMuanMnKTtcblxuICAgIGxhcm91eC5jYWNoZWQgPSB7XG4gICAgICAgIHNpbmdsZToge30sXG4gICAgICAgIGFycmF5OiB7fSxcbiAgICAgICAgaWQ6IHt9XG4gICAgfTtcblxuICAgIGxhcm91eC5jID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgIGlmIChzZWxlY3RvciBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4LmNhY2hlZC5hcnJheVtzZWxlY3Rvcl0gfHwgKFxuICAgICAgICAgICAgICAgIGxhcm91eC5jYWNoZWQuYXJyYXlbc2VsZWN0b3JdID0gbGFyb3V4LmhlbHBlcnMudG9BcnJheShcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcilcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxhcm91eC5jYWNoZWQuc2luZ2xlW3NlbGVjdG9yXSB8fCAoXG4gICAgICAgICAgICBsYXJvdXguY2FjaGVkLnNpbmdsZVtzZWxlY3Rvcl0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICBsYXJvdXguaWQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICByZXR1cm4gKHBhcmVudCB8fCBkb2N1bWVudCkuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICBsYXJvdXguaWRjID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBsYXJvdXguY2FjaGVkLmlkW3NlbGVjdG9yXSB8fFxuICAgICAgICAgICAgKGxhcm91eC5jYWNoZWQuaWRbc2VsZWN0b3JdID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3IpKTtcbiAgICB9O1xuXG4gICAgbGFyb3V4LnJlYWR5UGFzc2VkID0gZmFsc2U7XG5cbiAgICBsYXJvdXguZXh0ZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgbGFyb3V4KTtcbiAgICAgICAgbGFyb3V4LmhlbHBlcnMuZXh0ZW5kT2JqZWN0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIGxhcm91eC5leHRlbmRPYmplY3QgPSBsYXJvdXguaGVscGVycy5leHRlbmRPYmplY3Q7XG4gICAgbGFyb3V4LmVhY2ggPSBsYXJvdXguaGVscGVycy5lYWNoO1xuICAgIGxhcm91eC5tYXAgPSBsYXJvdXguaGVscGVycy5tYXA7XG4gICAgbGFyb3V4LmluZGV4ID0gbGFyb3V4LmhlbHBlcnMuaW5kZXg7XG4gICAgbGFyb3V4LmFlYWNoID0gbGFyb3V4LmhlbHBlcnMuYWVhY2g7XG4gICAgbGFyb3V4LmFtYXAgPSBsYXJvdXguaGVscGVycy5hbWFwO1xuICAgIGxhcm91eC5haW5kZXggPSBsYXJvdXguaGVscGVycy5haW5kZXg7XG5cbiAgICBsYXJvdXgucmVhZHkgPSBmdW5jdGlvbiAoZm5jKSB7XG4gICAgICAgIGlmICghbGFyb3V4LnJlYWR5UGFzc2VkKSB7XG4gICAgICAgICAgICBsYXJvdXguZXZlbnRzLmFkZCgnQ29udGVudExvYWRlZCcsIGZuYyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBmbmMoKTtcbiAgICB9O1xuXG4gICAgLy8gb3B0aW9uYWwgbW9kdWxlc1xuICAgIGxhcm91eC53cmFwcGVyID0gcmVxdWlyZSgnLi9sYXJvdXgud3JhcHBlci5qcycpO1xuICAgIGxhcm91eC5hamF4ID0gcmVxdWlyZSgnLi9sYXJvdXguYWpheC5qcycpO1xuICAgIGxhcm91eC5jc3MgPSByZXF1aXJlKCcuL2xhcm91eC5jc3MuanMnKTtcbiAgICBsYXJvdXguZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyk7XG4gICAgLy8gbGFyb3V4LmV2ZW50cyA9IHJlcXVpcmUoJy4vbGFyb3V4LmV2ZW50cy5qcycpO1xuICAgIGxhcm91eC5mb3JtcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmZvcm1zLmpzJyk7XG4gICAgLy8gbGFyb3V4LmhlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG4gICAgLy8gbGFyb3V4LnRpbWVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LnRpbWVycy5qcycpO1xuICAgIGxhcm91eC50cmlnZ2VycyA9IHJlcXVpcmUoJy4vbGFyb3V4LnRyaWdnZXJzLmpzJyk7XG4gICAgbGFyb3V4LnZhcnMgPSByZXF1aXJlKCcuL2xhcm91eC52YXJzLmpzJyk7XG5cbiAgICBsYXJvdXguYW5pbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmFuaW0uanMnKTtcbiAgICBsYXJvdXguZGF0ZSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRhdGUuanMnKTtcbiAgICBsYXJvdXgua2V5cyA9IHJlcXVpcmUoJy4vbGFyb3V4LmtleXMuanMnKTtcbiAgICBsYXJvdXgubXZjID0gcmVxdWlyZSgnLi9sYXJvdXgubXZjLmpzJyk7XG4gICAgbGFyb3V4LnN0YWNrID0gcmVxdWlyZSgnLi9sYXJvdXguc3RhY2suanMnKTtcbiAgICBsYXJvdXgudGVtcGxhdGVzID0gcmVxdWlyZSgnLi9sYXJvdXgudGVtcGxhdGVzLmpzJyk7XG4gICAgbGFyb3V4LnRvdWNoID0gcmVxdWlyZSgnLi9sYXJvdXgudG91Y2guanMnKTtcbiAgICBsYXJvdXgudWkgPSByZXF1aXJlKCcuL2xhcm91eC51aS5qcycpO1xuXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICdET01Db250ZW50TG9hZGVkJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eC5yZWFkeVBhc3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXguZXZlbnRzLmludm9rZSgnQ29udGVudExvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcnZhbChsYXJvdXgudGltZXJzLm9udGljaywgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4LnRvdWNoLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4LnJlYWR5UGFzc2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhcm91eDtcblxufSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IGdsb2JhbCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZXZlbnRzID0gcmVxdWlyZSgnLi9sYXJvdXguZXZlbnRzLmpzJyksXG4gICAgICAgIGxhcm91eF9oZWxwZXJzID0gcmVxdWlyZSgnLi9sYXJvdXguaGVscGVycy5qcycpO1xuXG4gICAgLy8gYWpheCAtIHBhcnRpYWxseSB0YWtlbiBmcm9tICdqcXVlcnkgaW4gcGFydHMnIHByb2plY3RcbiAgICAvLyAgICAgICAgY2FuIGJlIGZvdW5kIGF0OiBodHRwczovL2dpdGh1Yi5jb20vbXl0aHovanF1aXAvXG4gICAgdmFyIGxhcm91eF9hamF4ID0ge1xuICAgICAgICBjb3JzRGVmYXVsdDogZmFsc2UsXG5cbiAgICAgICAgd3JhcHBlcnM6IHtcbiAgICAgICAgICAgIHJlZ2lzdHJ5OiB7XG4gICAgICAgICAgICAgICAgJ2xhcm91eC5qcyc6IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YS5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvcjogJyArIGRhdGEuZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmo7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuZm9ybWF0ID09PSAnanNvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IEpTT04ucGFyc2UoZGF0YS5vYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZm9ybWF0ID09PSAnc2NyaXB0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLypqc2hpbnQgZXZpbDp0cnVlICovXG4gICAgICAgICAgICAgICAgICAgICAgICAvKmpzbGludCBldmlsOnRydWUgKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IGV2YWwoZGF0YS5vYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyAvLyBpZiAoZGF0YS5mb3JtYXQgPT0gJ3htbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IGRhdGEub2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuYW1lLCBmbmMpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC53cmFwcGVycy5yZWdpc3RyeVtuYW1lXSA9IGZuYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB4RG9tYWluT2JqZWN0OiBmYWxzZSxcbiAgICAgICAgeG1sSHR0cFJlcXVlc3RPYmplY3Q6IG51bGwsXG4gICAgICAgIHhEb21haW5SZXF1ZXN0T2JqZWN0OiBudWxsLFxuICAgICAgICB4aHI6IGZ1bmN0aW9uIChjcm9zc0RvbWFpbikge1xuICAgICAgICAgICAgaWYgKGxhcm91eF9hamF4LnhtbEh0dHBSZXF1ZXN0T2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2FqYXgueG1sSHR0cFJlcXVlc3RPYmplY3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNyb3NzRG9tYWluKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoJ3dpdGhDcmVkZW50aWFscycgaW4gbGFyb3V4X2FqYXgueG1sSHR0cFJlcXVlc3RPYmplY3QpICYmIHR5cGVvZiBYRG9tYWluUmVxdWVzdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2FqYXgueERvbWFpbk9iamVjdCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhcm91eF9hamF4LnhEb21haW5SZXF1ZXN0T2JqZWN0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfYWpheC54RG9tYWluUmVxdWVzdE9iamVjdCA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9hamF4LnhEb21haW5SZXF1ZXN0T2JqZWN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2FqYXgueERvbWFpbk9iamVjdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2FqYXgueG1sSHR0cFJlcXVlc3RPYmplY3Q7XG4gICAgICAgIH0sXG5cbiAgICAgICAgeGhyUmVzcDogZnVuY3Rpb24gKHhociwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIHdyYXBwZXJGdW5jdGlvbiA9IHhoci5nZXRSZXNwb25zZUhlYWRlcignWC1SZXNwb25zZS1XcmFwcGVyLUZ1bmN0aW9uJyksXG4gICAgICAgICAgICAgICAgcmVzcG9uc2U7XG5cbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRhdGF0eXBlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YXR5cGUgPT09ICdqc29uJykge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5kYXRhdHlwZSA9PT0gJ3NjcmlwdCcpIHtcbiAgICAgICAgICAgICAgICAvKmpzaGludCBldmlsOnRydWUgKi9cbiAgICAgICAgICAgICAgICAvKmpzbGludCBldmlsOnRydWUgKi9cbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGV2YWwoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YXR5cGUgPT09ICd4bWwnKSB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB4aHIucmVzcG9uc2VYTUw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0geGhyLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHdyYXBwZXJGdW5jdGlvbiAmJiAod3JhcHBlckZ1bmN0aW9uIGluIGxhcm91eF9hamF4LndyYXBwZXJzLnJlZ2lzdHJ5KSkge1xuICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gbGFyb3V4X2FqYXgud3JhcHBlcnMucmVnaXN0cnlbd3JhcHBlckZ1bmN0aW9uXShyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzcG9uc2U6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgIHdyYXBwZXJGdW5jOiB3cmFwcGVyRnVuY3Rpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG5cbiAgICAgICAgbWFrZVJlcXVlc3Q6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgY29ycyA9IG9wdGlvbnMuY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICB4aHIgPSBsYXJvdXhfYWpheC54aHIoY29ycyksXG4gICAgICAgICAgICAgICAgdXJsID0gb3B0aW9ucy51cmwsXG4gICAgICAgICAgICAgICAgdGltZXIgPSBudWxsLFxuICAgICAgICAgICAgICAgIG4gPSAwO1xuXG4gICAgICAgICAgICBpZiAob3B0aW9ucy50aW1lb3V0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhoci5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMudGltZW91dEZuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRpbWVvdXRGbihvcHRpb25zLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGltZW91dFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzIDwgMzAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc1N1Y2Nlc3MgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcyA9IGxhcm91eF9hamF4LnhoclJlc3AoeGhyLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5lcnJvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZXJyb3IoeGhyLCB4aHIuc3RhdHVzLCB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5pbnZva2UoJ2FqYXhFcnJvcicsIFt4aHIsIHhoci5zdGF0dXMsIHhoci5zdGF0dXNUZXh0LCBvcHRpb25zXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNTdWNjZXNzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zdWNjZXNzICE9PSB1bmRlZmluZWQgJiYgcmVzICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3VjY2VzcyhyZXMucmVzcG9uc2UsIHJlcy53cmFwcGVyRnVuYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5pbnZva2UoJ2FqYXhTdWNjZXNzJywgW3hociwgcmVzLnJlc3BvbnNlLCByZXMud3JhcHBlckZ1bmMsIG9wdGlvbnNdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmVycm9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmVycm9yKHhociwgeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmludm9rZSgnYWpheEVycm9yJywgW3hociwgeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQsIG9wdGlvbnNdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmNvbXBsZXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcGxldGUoeGhyLCB4aHIuc3RhdHVzVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZXZlbnRzLmludm9rZSgnYWpheENvbXBsZXRlJywgW3hociwgeGhyLnN0YXR1c1RleHQsIG9wdGlvbnNdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucHJvZ3Jlc3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAvKmpzbGludCBwbHVzcGx1czogdHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnByb2dyZXNzKCsrbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2V0ZGF0YSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuZ2V0ZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmdldGRhdGEuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBsYXJvdXhfaGVscGVycy5idWlsZFF1ZXJ5U3RyaW5nKG9wdGlvbnMuZ2V0ZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVN0cmluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpIDwgMCkgPyAnPycgOiAnJicpICsgcXVlcnlTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB1cmwgKz0gKCh1cmwuaW5kZXhPZignPycpIDwgMCkgPyAnPycgOiAnJicpICsgb3B0aW9ucy5nZXRkYXRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuanNvbnAgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHVybCArPSAoKHVybC5pbmRleE9mKCc/JykgPCAwKSA/ICc/JyA6ICcmJykgKyAnanNvbnA9JyArIG9wdGlvbnMuanNvbnA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghbGFyb3V4X2FqYXgueERvbWFpbk9iamVjdCkge1xuICAgICAgICAgICAgICAgIHhoci5vcGVuKG9wdGlvbnMudHlwZSwgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgeGhyLm9wZW4ob3B0aW9ucy50eXBlLCB1cmwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLnhockZpZWxkcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghb3B0aW9ucy54aHJGaWVsZHMuaGFzT3duUHJvcGVydHkoaSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgeGhyW2ldID0gb3B0aW9ucy54aHJGaWVsZHNbaV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyB8fCB7fTtcblxuICAgICAgICAgICAgICAgIGlmICghY29ycykge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydYLVJlcXVlc3RlZC1XaXRoJ10gPSAnWE1MSHR0cFJlcXVlc3QnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLndyYXBwZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNbJ1gtV3JhcHBlci1GdW5jdGlvbiddID0gJ2xhcm91eC5qcyc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqIGluIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzLmhhc093blByb3BlcnR5KGopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKGosIGhlYWRlcnNbal0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMucG9zdGRhdGEgPT09IHVuZGVmaW5lZCB8fCBvcHRpb25zLnBvc3RkYXRhID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgeGhyLnNlbmQobnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzd2l0Y2ggKG9wdGlvbnMucG9zdGRhdGF0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnanNvbic6XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KG9wdGlvbnMucG9zdGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZm9ybSc6XG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKGxhcm91eF9oZWxwZXJzLmJ1aWxkRm9ybURhdGEob3B0aW9ucy5wb3N0ZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChvcHRpb25zLnBvc3RkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2h0bWwnLFxuICAgICAgICAgICAgICAgIGdldGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICB3cmFwcGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEpzb246IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgdXJsOiBwYXRoLFxuICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgZ2V0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0SnNvblA6IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIG1ldGhvZCwgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgICAgICAgIGdldGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICBqc29ucDogbWV0aG9kLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNjcmlwdDogZnVuY3Rpb24gKHBhdGgsIHZhbHVlcywgc3VjY2Vzc2ZuYywgZXJyb3JmbmMsIGNvcnMpIHtcbiAgICAgICAgICAgIGxhcm91eF9hamF4Lm1ha2VSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdzY3JpcHQnLFxuICAgICAgICAgICAgICAgIGdldGRhdGE6IHZhbHVlcyxcbiAgICAgICAgICAgICAgICB3cmFwcGVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjb3JzOiBjb3JzIHx8IGxhcm91eF9hamF4LmNvcnNEZWZhdWx0LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHN1Y2Nlc3NmbmMsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yZm5jXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBwb3N0OiBmdW5jdGlvbiAocGF0aCwgdmFsdWVzLCBzdWNjZXNzZm5jLCBlcnJvcmZuYywgY29ycykge1xuICAgICAgICAgICAgbGFyb3V4X2FqYXgubWFrZVJlcXVlc3Qoe1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICB1cmw6IHBhdGgsXG4gICAgICAgICAgICAgICAgZGF0YXR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBwb3N0ZGF0YTogdmFsdWVzLFxuICAgICAgICAgICAgICAgIHBvc3RkYXRhdHlwZTogJ2Zvcm0nLFxuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgY29yczogY29ycyB8fCBsYXJvdXhfYWpheC5jb3JzRGVmYXVsdCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBzdWNjZXNzZm5jLFxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvcmZuY1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcG9zdEpzb246IGZ1bmN0aW9uIChwYXRoLCB2YWx1ZXMsIHN1Y2Nlc3NmbmMsIGVycm9yZm5jLCBjb3JzKSB7XG4gICAgICAgICAgICBsYXJvdXhfYWpheC5tYWtlUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgICAgICBkYXRhdHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIHBvc3RkYXRhOiB2YWx1ZXMsXG4gICAgICAgICAgICAgICAgcG9zdGRhdGF0eXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB3cmFwcGVyOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNvcnM6IGNvcnMgfHwgbGFyb3V4X2FqYXguY29yc0RlZmF1bHQsXG4gICAgICAgICAgICAgICAgc3VjY2Vzczogc3VjY2Vzc2ZuYyxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JmbmNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfYWpheDtcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyksXG4gICAgICAgIGxhcm91eF9jc3MgPSByZXF1aXJlKCcuL2xhcm91eC5jc3MuanMnKTtcblxuICAgIC8vIGFuaW1cbiAgICB2YXIgbGFyb3V4X2FuaW0gPSB7XG4gICAgICAgIGRhdGE6IFtdLFxuXG4gICAgICAgIGZ4OiB7XG4gICAgICAgICAgICBpbnRlcnBvbGF0ZTogZnVuY3Rpb24gKHNvdXJjZSwgdGFyZ2V0LCBzaGlmdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoc291cmNlICsgKHRhcmdldCAtIHNvdXJjZSkgKiBzaGlmdCk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBlYXNpbmc6IGZ1bmN0aW9uIChwb3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKC1NYXRoLmNvcyhwb3MgKiBNYXRoLlBJKSAvIDIpICsgMC41O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHtvYmplY3QsIHByb3BlcnR5LCBmcm9tLCB0bywgdGltZSwgdW5pdCwgcmVzZXR9XG4gICAgICAgIHNldDogZnVuY3Rpb24gKG5ld2FuaW0pIHtcbiAgICAgICAgICAgIG5ld2FuaW0uc3RhcnRUaW1lID0gbnVsbDtcblxuICAgICAgICAgICAgaWYgKG5ld2FuaW0udW5pdCA9PT0gdW5kZWZpbmVkIHx8IG5ld2FuaW0udW5pdCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG5ld2FuaW0udW5pdCA9ICcnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV3YW5pbS5mcm9tID09PSB1bmRlZmluZWQgfHwgbmV3YW5pbS5mcm9tID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5ld2FuaW0ub2JqZWN0ID09PSBkb2N1bWVudC5ib2R5ICYmIG5ld2FuaW0ucHJvcGVydHkgPT09ICdzY3JvbGxUb3AnKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld2FuaW0uZnJvbSA9IChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgJiYgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCkgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3YW5pbS5mcm9tID0gbmV3YW5pbS5vYmplY3RbbmV3YW5pbS5wcm9wZXJ0eV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG5ld2FuaW0uZnJvbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBuZXdhbmltLmZyb20gPSBOdW1iZXIobmV3YW5pbS5mcm9tKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG5ld2FuaW0ucmVzZXQgPT09IHVuZGVmaW5lZCB8fCBuZXdhbmltLnJlc2V0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3YW5pbS5yZXNldCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBpZiAobmV3YW5pbS5pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyAgICAgbmV3YW5pbS5pZCA9IGxhcm91eF9oZWxwZXJzLmdldFVuaXF1ZUlkKCk7XG4gICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgIGxhcm91eF9hbmltLmRhdGEucHVzaChuZXdhbmltKTtcbiAgICAgICAgICAgIGlmIChsYXJvdXhfYW5pbS5kYXRhLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShsYXJvdXhfYW5pbS5vbmZyYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXRDc3M6IGZ1bmN0aW9uIChuZXdhbmltKSB7XG4gICAgICAgICAgICBpZiAobmV3YW5pbS5mcm9tID09PSB1bmRlZmluZWQgfHwgbmV3YW5pbS5mcm9tID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbmV3YW5pbS5mcm9tID0gbGFyb3V4X2Nzcy5nZXRQcm9wZXJ0eShuZXdhbmltLm9iamVjdCwgbmV3YW5pbS5wcm9wZXJ0eSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG5ld2FuaW0ub2JqZWN0ID0gbmV3YW5pbS5vYmplY3Quc3R5bGU7XG4gICAgICAgICAgICBuZXdhbmltLnByb3BlcnR5ID0gbGFyb3V4X2hlbHBlcnMuY2FtZWxDYXNlKG5ld2FuaW0ucHJvcGVydHkpO1xuXG4gICAgICAgICAgICBsYXJvdXhfYW5pbS5zZXQobmV3YW5pbSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRLZXkgPSBudWxsO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF9hbmltLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF9hbmltLmRhdGEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJdGVtID0gbGFyb3V4X2FuaW0uZGF0YVtpdGVtXTtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5pZCAhPT0gdW5kZWZpbmVkICYmIGN1cnJlbnRJdGVtLmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEtleSA9IGl0ZW07XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRhcmdldEtleSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF9hbmltLmRhdGEuc3BsaWNlKHRhcmdldEtleSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbmZyYW1lOiBmdW5jdGlvbiAodGltZXN0YW1wKSB7XG4gICAgICAgICAgICB2YXIgcmVtb3ZlS2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfYW5pbS5kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfYW5pbS5kYXRhLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGxhcm91eF9hbmltLmRhdGFbaXRlbV07XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLnN0YXJ0VGltZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5zdGFydFRpbWUgPSB0aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGxhcm91eF9hbmltLnN0ZXAoY3VycmVudEl0ZW0sIHRpbWVzdGFtcCk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVLZXlzLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lc3RhbXAgPiBjdXJyZW50SXRlbS5zdGFydFRpbWUgKyBjdXJyZW50SXRlbS50aW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5yZXNldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uc3RhcnRUaW1lID0gdGltZXN0YW1wO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5ld2FuaW0ub2JqZWN0ID09PSBkb2N1bWVudC5ib2R5ICYmIG5ld2FuaW0ucHJvcGVydHkgPT0gJ3Njcm9sbFRvcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUbygwLCBjdXJyZW50SXRlbS5mcm9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgc2Nyb2xsVG8oMCwgY3VycmVudEl0ZW0uZnJvbSk7IH0sIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5vYmplY3RbY3VycmVudEl0ZW0ucHJvcGVydHldID0gY3VycmVudEl0ZW0uZnJvbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbTIgaW4gcmVtb3ZlS2V5cykge1xuICAgICAgICAgICAgICAgIGlmICghcmVtb3ZlS2V5cy5oYXNPd25Qcm9wZXJ0eShpdGVtMikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2FuaW0uZGF0YS5zcGxpY2UocmVtb3ZlS2V5c1tpdGVtMl0sIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobGFyb3V4X2FuaW0uZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxhcm91eF9hbmltLm9uZnJhbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHN0ZXA6IGZ1bmN0aW9uIChuZXdhbmltLCB0aW1lc3RhbXApIHtcbiAgICAgICAgICAgIHZhciBmaW5pc2hUID0gbmV3YW5pbS5zdGFydFRpbWUgKyBuZXdhbmltLnRpbWUsXG4gICAgICAgICAgICAgICAgc2hpZnQgPSAodGltZXN0YW1wID4gZmluaXNoVCkgPyAxIDogKHRpbWVzdGFtcCAtIG5ld2FuaW0uc3RhcnRUaW1lKSAvIG5ld2FuaW0udGltZTtcblxuICAgICAgICAgICAgdmFyIHZhbHVlID0gbGFyb3V4X2FuaW0uZnguaW50ZXJwb2xhdGUoXG4gICAgICAgICAgICAgICAgbmV3YW5pbS5mcm9tLFxuICAgICAgICAgICAgICAgIG5ld2FuaW0udG8sXG4gICAgICAgICAgICAgICAgbGFyb3V4X2FuaW0uZnguZWFzaW5nKHNoaWZ0KVxuICAgICAgICAgICAgKSArIG5ld2FuaW0udW5pdDtcblxuICAgICAgICAgICAgaWYgKG5ld2FuaW0ub2JqZWN0ID09PSBkb2N1bWVudC5ib2R5ICYmIG5ld2FuaW0ucHJvcGVydHkgPT0gJ3Njcm9sbFRvcCcpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxUbygwLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgLy8gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHNjcm9sbFRvKDAsIHZhbHVlKTsgfSwgMSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld2FuaW0ub2JqZWN0W25ld2FuaW0ucHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9hbmltO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKTtcblxuICAgIC8vIGNzc1xuICAgIHZhciBsYXJvdXhfY3NzID0ge1xuICAgICAgICAvLyBjbGFzcyBmZWF0dXJlc1xuICAgICAgICBoYXNDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWRkQ2xhc3M6IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGVsZW1lbnQsIGNsYXNzTmFtZSkge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudHNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3ljbGVDbGFzczogZnVuY3Rpb24gKGVsZW1lbnRzLCBjbGFzc05hbWUpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50c1tpXS5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzWyhpICsgMSkgJSBsZW5ndGhdLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyBzdHlsZSBmZWF0dXJlc1xuICAgICAgICBnZXRQcm9wZXJ0eTogZnVuY3Rpb24gKGVsZW1lbnQsIHN0eWxlTmFtZSkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KTtcblxuICAgICAgICAgICAgc3R5bGVOYW1lID0gbGFyb3V4X2hlbHBlcnMuYW50aUNhbWVsQ2FzZShzdHlsZU5hbWUpO1xuXG4gICAgICAgICAgICByZXR1cm4gc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShzdHlsZU5hbWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFByb3BlcnR5OiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcGVydGllcywgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvcGVydGllcyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHZhciBvbGRQcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzID0ge307XG4gICAgICAgICAgICAgICAgcHJvcGVydGllc1tvbGRQcm9wZXJ0aWVzXSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBzdHlsZU5hbWUgaW4gcHJvcGVydGllcykge1xuICAgICAgICAgICAgICAgIGlmICghcHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBuZXdTdHlsZU5hbWUgPSBsYXJvdXhfaGVscGVycy5jYW1lbENhc2Uoc3R5bGVOYW1lKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50c1tpXS5zdHlsZVtuZXdTdHlsZU5hbWVdID0gcHJvcGVydGllc1tzdHlsZU5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvLyB0cmFuc2l0aW9uIGZlYXR1cmVzXG4gICAgICAgIGRlZmF1bHRUcmFuc2l0aW9uOiAnMnMgZWFzZScsXG5cbiAgICAgICAgc2V0VHJhbnNpdGlvblNpbmdsZTogZnVuY3Rpb24gKGVsZW1lbnQsIHRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkodHJhbnNpdGlvbiksXG4gICAgICAgICAgICAgICAgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9ucyA9IHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ3RyYW5zaXRpb24nKSB8fCBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctd2Via2l0LXRyYW5zaXRpb24nKSB8fFxuICAgICAgICAgICAgICAgICAgICBzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctbXMtdHJhbnNpdGlvbicpIHx8ICcnLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5O1xuXG4gICAgICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbnNBcnJheSA9IGN1cnJlbnRUcmFuc2l0aW9ucy5zcGxpdCgnLCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbnNBcnJheSA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIHRyYW5zaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cmFuc2l0aW9ucy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc3R5bGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uUHJvcGVydGllcyxcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdHJhbnNpdGlvbnNbaXRlbV0uaW5kZXhPZignICcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHBvcyAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVOYW1lID0gdHJhbnNpdGlvbnNbaXRlbV0uc3Vic3RyaW5nKDAsIHBvcyk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0aWVzID0gdHJhbnNpdGlvbnNbaXRlbV0uc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlTmFtZSA9IHRyYW5zaXRpb25zW2l0ZW1dO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uUHJvcGVydGllcyA9IGxhcm91eF9jc3MuZGVmYXVsdFRyYW5zaXRpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBjdXJyZW50VHJhbnNpdGlvbnNBcnJheS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb25zQXJyYXlbal0udHJpbSgpLmxvY2FsZUNvbXBhcmUoc3R5bGVOYW1lKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFRyYW5zaXRpb25zQXJyYXlbal0gPSBzdHlsZU5hbWUgKyAnICcgKyB0cmFuc2l0aW9uUHJvcGVydGllcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbnNBcnJheS5wdXNoKHN0eWxlTmFtZSArICcgJyArIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGN1cnJlbnRUcmFuc2l0aW9uc0FycmF5LmpvaW4oJywgJyk7XG5cbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IHZhbHVlO1xuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS53ZWJraXRUcmFuc2l0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLm1zVHJhbnNpdGlvbiA9IHZhbHVlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIChlbGVtZW50LCB0cmFuc2l0aW9uKSB7XG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb25TaW5nbGUoZWxlbWVudHNbaV0sIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uIChlbGVtZW50LCB0cmFuc2l0aW9uUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb25Qcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb24oZWxlbWVudCwgJ29wYWNpdHkgJyArIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRUcmFuc2l0aW9uKGVsZW1lbnQsICdvcGFjaXR5Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoZWxlbWVudCwgeyBvcGFjaXR5OiAxIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uIChlbGVtZW50LCB0cmFuc2l0aW9uUHJvcGVydGllcykge1xuICAgICAgICAgICAgaWYgKHRyYW5zaXRpb25Qcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFRyYW5zaXRpb24oZWxlbWVudCwgJ29wYWNpdHkgJyArIHRyYW5zaXRpb25Qcm9wZXJ0aWVzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRUcmFuc2l0aW9uKGVsZW1lbnQsICdvcGFjaXR5Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoZWxlbWVudCwgeyBvcGFjaXR5OiAwIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIG1lYXN1cmVtZW50IGZlYXR1cmVzXG4gICAgICAgIC8vIGhlaWdodCBvZiBlbGVtZW50IHdpdGhvdXQgcGFkZGluZywgbWFyZ2luIGFuZCBib3JkZXJcbiAgICAgICAgaGVpZ2h0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtZW50KSxcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCdoZWlnaHQnKTtcblxuICAgICAgICAgICAgcmV0dXJuIGhlaWdodC5nZXRGbG9hdFZhbHVlKGhlaWdodC5wcmltaXRpdmVUeXBlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyBoZWlnaHQgb2YgZWxlbWVudCB3aXRoIHBhZGRpbmcgYnV0IHdpdGhvdXQgbWFyZ2luIGFuZCBib3JkZXJcbiAgICAgICAgaW5uZXJIZWlnaHQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gaGVpZ2h0IG9mIGVsZW1lbnQgd2l0aCBwYWRkaW5nIGFuZCBib3JkZXIgYnV0IG1hcmdpbiBvcHRpb25hbFxuICAgICAgICBvdXRlckhlaWdodDogZnVuY3Rpb24gKGVsZW1lbnQsIGluY2x1ZGVNYXJnaW4pIHtcbiAgICAgICAgICAgIGlmIChpbmNsdWRlTWFyZ2luIHx8IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIG1hcmdpblRvcCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoJ21hcmdpbi10b3AnKSxcbiAgICAgICAgICAgICAgICBtYXJnaW5Cb3R0b20gPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCdtYXJnaW4tYm90dG9tJyksXG4gICAgICAgICAgICAgICAgbWFyZ2lucyA9IG1hcmdpblRvcC5nZXRGbG9hdFZhbHVlKG1hcmdpblRvcC5wcmltaXRpdmVUeXBlKSArXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbS5nZXRGbG9hdFZhbHVlKG1hcmdpbkJvdHRvbS5wcmltaXRpdmVUeXBlKTtcblxuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChlbGVtZW50Lm9mZnNldEhlaWdodCArIG1hcmdpbnMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHdpZHRoIG9mIGVsZW1lbnQgd2l0aG91dCBwYWRkaW5nLCBtYXJnaW4gYW5kIGJvcmRlclxuICAgICAgICB3aWR0aDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCksXG4gICAgICAgICAgICAgICAgaGVpZ2h0ID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZSgnd2lkdGgnKTtcblxuICAgICAgICAgICAgcmV0dXJuIGhlaWdodC5nZXRGbG9hdFZhbHVlKGhlaWdodC5wcmltaXRpdmVUeXBlKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyB3aWR0aCBvZiBlbGVtZW50IHdpdGggcGFkZGluZyBidXQgd2l0aG91dCBtYXJnaW4gYW5kIGJvcmRlclxuICAgICAgICBpbm5lcldpZHRoOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gd2lkdGggb2YgZWxlbWVudCB3aXRoIHBhZGRpbmcgYW5kIGJvcmRlciBidXQgbWFyZ2luIG9wdGlvbmFsXG4gICAgICAgIG91dGVyV2lkdGg6IGZ1bmN0aW9uIChlbGVtZW50LCBpbmNsdWRlTWFyZ2luKSB7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZU1hcmdpbiB8fCBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50Lm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3R5bGUgPSBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLFxuICAgICAgICAgICAgICAgIG1hcmdpbkxlZnQgPSBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKCdtYXJnaW4tbGVmdCcpLFxuICAgICAgICAgICAgICAgIG1hcmdpblJpZ2h0ID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZSgnbWFyZ2luLXJpZ2h0JyksXG4gICAgICAgICAgICAgICAgbWFyZ2lucyA9IG1hcmdpbkxlZnQuZ2V0RmxvYXRWYWx1ZShtYXJnaW5MZWZ0LnByaW1pdGl2ZVR5cGUpICtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luUmlnaHQuZ2V0RmxvYXRWYWx1ZShtYXJnaW5SaWdodC5wcmltaXRpdmVUeXBlKTtcblxuICAgICAgICAgICAgcmV0dXJuIE1hdGguY2VpbChlbGVtZW50Lm9mZnNldFdpZHRoICsgbWFyZ2lucyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9wOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICtcbiAgICAgICAgICAgICAgICAoKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCAmJiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wKSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbGVmdDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgK1xuICAgICAgICAgICAgICAgICgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KSB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFib3ZlVGhlVG9wOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuYm90dG9tIDw9IDA7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYmVsb3dUaGVGb2xkOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wID4gaW5uZXJIZWlnaHQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbGVmdE9mU2NyZWVuOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkucmlnaHQgPD0gMDtcbiAgICAgICAgfSxcblxuICAgICAgICByaWdodE9mU2NyZWVuOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCA+IGlubmVyV2lkdGg7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5WaWV3cG9ydDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciByZWN0ID0gZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgcmV0dXJuICEocmVjdC5ib3R0b20gPD0gMCB8fCByZWN0LnRvcCA+IGlubmVySGVpZ2h0IHx8XG4gICAgICAgICAgICAgICAgcmVjdC5yaWdodCA8PSAwIHx8IHJlY3QubGVmdCA+IGlubmVyV2lkdGgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfY3NzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGRhdGVcbiAgICB2YXIgbGFyb3V4X2RhdGUgPSB7XG4gICAgICAgIHNob3J0RGF0ZUZvcm1hdDogJ2RkLk1NLnl5eXknLFxuICAgICAgICBsb25nRGF0ZUZvcm1hdDogJ2RkIE1NTU0geXl5eScsXG4gICAgICAgIHRpbWVGb3JtYXQ6ICdISDptbScsXG5cbiAgICAgICAgbW9udGhzU2hvcnQ6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcbiAgICAgICAgbW9udGhzTG9uZzogWydKYW51YXJ5JywgJ0ZlYnJ1YXJ5JywgJ01hcmNoJywgJ0FwcmlsJywgJ01heScsICdKdW5lJywgJ0p1bHknLCAnQXVndXN0JywgJ1NlcHRlbWJlcicsICdPY3RvYmVyJywgJ05vdmVtYmVyJywgJ0RlY2VtYmVyJ10sXG5cbiAgICAgICAgc3RyaW5nczoge1xuICAgICAgICAgICAgbm93OiAgICAgJ25vdycsXG4gICAgICAgICAgICBsYXRlcjogICAnbGF0ZXInLFxuICAgICAgICAgICAgYWdvOiAgICAgJ2FnbycsXG4gICAgICAgICAgICBzZWNvbmRzOiAnc2Vjb25kcycsXG4gICAgICAgICAgICBhbWludXRlOiAnYSBtaW51dGUnLFxuICAgICAgICAgICAgbWludXRlczogJ21pbnV0ZXMnLFxuICAgICAgICAgICAgYWhvdXI6ICAgJ2EgaG91cicsXG4gICAgICAgICAgICBob3VyczogICAnaG91cnMnLFxuICAgICAgICAgICAgYWRheTogICAgJ2EgZGF5JyxcbiAgICAgICAgICAgIGRheXM6ICAgICdkYXlzJyxcbiAgICAgICAgICAgIGF3ZWVrOiAgICdhIHdlZWsnLFxuICAgICAgICAgICAgd2Vla3M6ICAgJ3dlZWtzJyxcbiAgICAgICAgICAgIGFtb250aDogICdhIG1vbnRoJyxcbiAgICAgICAgICAgIG1vbnRoczogICdtb250aHMnLFxuICAgICAgICAgICAgYXllYXI6ICAgJ2EgeWVhcicsXG4gICAgICAgICAgICB5ZWFyczogICAneWVhcnMnXG4gICAgICAgIH0sXG5cbiAgICAgICAgcGFyc2VFcG9jaDogZnVuY3Rpb24gKHRpbWVzcGFuLCBsaW1pdFdpdGhXZWVrcykge1xuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNjAgKiAxMDAwKSB7XG4gICAgICAgICAgICAgICAgdGltZXNwYW4gPSBNYXRoLmNlaWwodGltZXNwYW4gLyAxMDAwKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3Muc2Vjb25kcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICg2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hbWludXRlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MubWludXRlcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYWhvdXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5ob3VycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuIDwgNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICgyNCAqIDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYWRheTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGltZXNwYW4gKyAnICcgKyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmRheXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aW1lc3BhbiA8IDQgKiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCkge1xuICAgICAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKSk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGltZXNwYW4gPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYXdlZWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy53ZWVrcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGxpbWl0V2l0aFdlZWtzID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aW1lc3BhbiA8IDMwICogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDApIHtcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IE1hdGguY2VpbCh0aW1lc3BhbiAvICgzMCAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aW1lc3BhbiA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5hbW9udGg7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuICsgJyAnICsgbGFyb3V4X2RhdGUuc3RyaW5ncy5tb250aHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRpbWVzcGFuID0gTWF0aC5jZWlsKHRpbWVzcGFuIC8gKDM2NSAqIDI0ICogNjAgKiA2MCAqIDEwMDApKTtcblxuICAgICAgICAgICAgaWYgKHRpbWVzcGFuID09PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLnN0cmluZ3MuYXllYXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aW1lc3BhbiArICcgJyArIGxhcm91eF9kYXRlLnN0cmluZ3MueWVhcnM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0Q3VzdG9tRGF0ZVN0cmluZzogZnVuY3Rpb24gKGZvcm1hdCwgZGF0ZSkge1xuICAgICAgICAgICAgdmFyIG5vdyA9IGRhdGUgfHwgbmV3IERhdGUoKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKFxuICAgICAgICAgICAgICAgIC95eXl5fHl5fE1NTU18TU1NfE1NfE18ZGR8ZHxoaHxofEhIfEh8bW18bXxzc3xzfHR0fHQvZyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd5eXl5JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0RnVsbFllYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd5eSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldFllYXIoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTU1NJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZGF0ZS5tb250aHNMb25nW25vdy5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTU0nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9kYXRlLm1vbnRoc1Nob3J0W25vdy5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdNTSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIChub3cuZ2V0TW9udGgoKSArIDEpKS5zdWJzdHIoLTIsIDIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ00nOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vdy5nZXRNb250aCgpICsgMTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdkZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXREYXRlKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldERhdGUoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cjEgPSBub3cuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoJzAnICsgKCgoaG91cjEgJSAxMikgPiAwKSA/IGhvdXIxICUgMTIgOiAxMikpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaG91cjIgPSBub3cuZ2V0SG91cnMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoKGhvdXIyICUgMTIpID4gMCkgPyBob3VyMiAlIDEyIDogMTI7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnSEgnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgnMCcgKyBub3cuZ2V0SG91cnMoKSkuc3Vic3RyKC0yLCAyKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3cuZ2V0SG91cnMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdtbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRNaW51dGVzKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbSc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldE1pbnV0ZXMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICdzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKCcwJyArIG5vdy5nZXRTZWNvbmRzKCkpLnN1YnN0cigtMiwgMik7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm93LmdldFNlY29uZHMoKTtcblxuICAgICAgICAgICAgICAgICAgICBjYXNlICd0dCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93LmdldEhvdXJzKCkgPj0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3BtJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdhbSc7XG5cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm93LmdldEhvdXJzKCkgPj0gMTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ3AnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2EnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0RGF0ZURpZmZTdHJpbmc6IGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgICAgICB0aW1lc3BhbiA9IG5vdyAtIGRhdGUuZ2V0VGltZSgpLFxuICAgICAgICAgICAgICAgIGFic1RpbWVzcGFuID0gTWF0aC5hYnModGltZXNwYW4pLFxuICAgICAgICAgICAgICAgIHBhc3QgPSAodGltZXNwYW4gPiAwKTtcblxuICAgICAgICAgICAgaWYgKGFic1RpbWVzcGFuIDw9IDMwMDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuc3RyaW5ncy5ub3c7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0aW1lc3BhbnN0cmluZyA9IGxhcm91eF9kYXRlLnBhcnNlRXBvY2goYWJzVGltZXNwYW4sIHRydWUpO1xuICAgICAgICAgICAgaWYgKHRpbWVzcGFuc3RyaW5nICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzcGFuc3RyaW5nICtcbiAgICAgICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAgICAgKHBhc3QgPyBsYXJvdXhfZGF0ZS5zdHJpbmdzLmFnbyA6IGxhcm91eF9kYXRlLnN0cmluZ3MubGF0ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0U2hvcnREYXRlU3RyaW5nKGRhdGUsIHRydWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldFNob3J0RGF0ZVN0cmluZzogZnVuY3Rpb24gKGRhdGUsIGluY2x1ZGVUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0Q3VzdG9tRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBpbmNsdWRlVGltZSA/IGxhcm91eF9kYXRlLnNob3J0RGF0ZUZvcm1hdCArICcgJyArIGxhcm91eF9kYXRlLnRpbWVGb3JtYXQgOiBsYXJvdXhfZGF0ZS5zaG9ydERhdGVGb3JtYXQsXG4gICAgICAgICAgICAgICAgZGF0ZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMb25nRGF0ZVN0cmluZzogZnVuY3Rpb24gKGRhdGUsIGluY2x1ZGVUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2RhdGUuZ2V0Q3VzdG9tRGF0ZVN0cmluZyhcbiAgICAgICAgICAgICAgICBpbmNsdWRlVGltZSA/IGxhcm91eF9kYXRlLmxvbmdEYXRlRm9ybWF0ICsgJyAnICsgbGFyb3V4X2RhdGUudGltZUZvcm1hdCA6IGxhcm91eF9kYXRlLmxvbmdEYXRlRm9ybWF0LFxuICAgICAgICAgICAgICAgIGRhdGVcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9kYXRlO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKTtcbiAgICAgICAgLy8gbGFyb3V4X2NzcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmNzcy5qcycpLFxuICAgICAgICAvLyBsYXJvdXhfdHJpZ2dlcnMgPSByZXF1aXJlKCcuL2xhcm91eC50cmlnZ2Vycy5qcycpO1xuXG4gICAgLy8gZG9tXG4gICAgdmFyIGxhcm91eF9kb20gPSB7XG4gICAgICAgIGRvY3Byb3A6IGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMocHJvcE5hbWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdDogZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy50b0FycmF5KFxuICAgICAgICAgICAgICAgIChwYXJlbnQgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpXG4gICAgICAgICAgICApO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlbGVjdEJ5Q2xhc3M6IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X2hlbHBlcnMudG9BcnJheShcbiAgICAgICAgICAgICAgICAocGFyZW50IHx8IGRvY3VtZW50KS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlbGVjdG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RCeVRhZzogZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy50b0FycmF5KFxuICAgICAgICAgICAgICAgIChwYXJlbnQgfHwgZG9jdW1lbnQpLmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RCeUlkOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIChwYXJlbnQgfHwgZG9jdW1lbnQpLmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZWxlY3RTaW5nbGU6IGZ1bmN0aW9uIChzZWxlY3RvciwgcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gKHBhcmVudCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYXR0cjogZnVuY3Rpb24gKGVsZW1lbnQsIGF0dHJpYnV0ZXMsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiBhdHRyaWJ1dGVzLmNvbnN0cnVjdG9yICE9PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5nZXRBdHRyaWJ1dGUoYXR0cmlidXRlcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYnV0ZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9sZEF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzW29sZEF0dHJpYnV0ZXNdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGF0dHJpYnV0ZU5hbWUgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlcy5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGF0YTogZnVuY3Rpb24gKGVsZW1lbnQsIGRhdGFuYW1lcywgdmFsdWUpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGRhdGFuYW1lcy5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLScgKyBkYXRhbmFtZXMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhbmFtZXMgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2xkRGF0YW5hbWVzID0gZGF0YW5hbWVzO1xuICAgICAgICAgICAgICAgIGRhdGFuYW1lcyA9IHt9O1xuICAgICAgICAgICAgICAgIGRhdGFuYW1lc1tvbGREYXRhbmFtZXNdID0gdmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGRhdGFOYW1lIGluIGRhdGFuYW1lcykge1xuICAgICAgICAgICAgICAgIGlmICghZGF0YW5hbWVzLmhhc093blByb3BlcnR5KGRhdGFOYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFuYW1lc1tkYXRhTmFtZV0gPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLScgKyBkYXRhTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnZGF0YS0nICsgZGF0YU5hbWUsIGRhdGFuYW1lc1tkYXRhTmFtZV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGV2ZW50SGlzdG9yeTogW10sXG4gICAgICAgIHNldEV2ZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnRuYW1lLCBmbmMpIHtcbiAgICAgICAgICAgIHZhciBlbGVtZW50cyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoZWxlbWVudCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnRTaW5nbGUoZWxlbWVudHNbaV0sIGV2ZW50bmFtZSwgZm5jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzZXRFdmVudFNpbmdsZTogZnVuY3Rpb24gKGVsZW1lbnQsIGV2ZW50bmFtZSwgZm5jKSB7XG4gICAgICAgICAgICB2YXIgZm5jV3JhcHBlciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZuYyhlLCBlbGVtZW50KSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLmV2ZW50SGlzdG9yeS5wdXNoKHsgZWxlbWVudDogZWxlbWVudCwgZXZlbnRuYW1lOiBldmVudG5hbWUsIGZuYzogZm5jLCBmbmNXcmFwcGVyOiBmbmNXcmFwcGVyIH0pO1xuICAgICAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50bmFtZSwgZm5jV3JhcHBlciwgZmFsc2UpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVuc2V0RXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudG5hbWUsIGZuYykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShlbGVtZW50KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaTEgPSAwLCBsZW5ndGgxID0gZWxlbWVudHMubGVuZ3RoOyBpMSA8IGxlbmd0aDE7IGkxKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpMiA9IDAsIGxlbmd0aDIgPSBsYXJvdXhfZG9tLmV2ZW50SGlzdG9yeS5sZW5ndGg7IGkyIDwgbGVuZ3RoMjsgaTIrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGxhcm91eF9kb20uZXZlbnRIaXN0b3J5W2kyXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmVsZW1lbnQgIT09IGVsZW1lbnRzW2kxXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnRuYW1lICE9PSB1bmRlZmluZWQgJiYgaXRlbS5ldmVudG5hbWUgIT09IGV2ZW50bmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoZm5jICE9PSB1bmRlZmluZWQgJiYgaXRlbS5mbmMgIT09IGZuYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpdGVtLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihpdGVtLmV2ZW50bmFtZSwgaXRlbS5mbmNXcmFwcGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBsYXJvdXhfZG9tLmV2ZW50SGlzdG9yeVtpMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRpc3BhdGNoRXZlbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBldmVudG5hbWUsIGRhdGEpIHtcbiAgICAgICAgICAgIHZhciBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFkYXRhLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGN1c3RvbUV2ZW50W2l0ZW1dID0gZGF0YVtpdGVtXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY3VzdG9tRXZlbnQuaW5pdEV2ZW50KGV2ZW50bmFtZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQoY3VzdG9tRXZlbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKGh0bWwpIHtcbiAgICAgICAgICAgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgICAgICAgICAgICAgIHRlbXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdESVYnKTtcblxuICAgICAgICAgICAgdGVtcC5pbnNlcnRBZGphY2VudEhUTUwoJ2JlZm9yZWVuZCcsIGh0bWwpO1xuICAgICAgICAgICAgd2hpbGUgKHRlbXAuZmlyc3RDaGlsZCkge1xuICAgICAgICAgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQodGVtcC5maXJzdENoaWxkKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gbnVsbGluZyBvdXQgdGhlIHJlZmVyZW5jZSwgdGhlcmUgaXMgbm8gb2J2aW91cyBkaXNwb3NlIG1ldGhvZFxuICAgICAgICAgICAgdGVtcCA9IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBmcmFnO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uIChlbGVtZW50LCBhdHRyaWJ1dGVzLCBjaGlsZHJlbikge1xuICAgICAgICAgICAgdmFyIGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlcyAhPT0gdW5kZWZpbmVkICYmIGF0dHJpYnV0ZXMuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoaXRlbSwgYXR0cmlidXRlc1tpdGVtXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChjaGlsZHJlbi5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIGNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkcmVuLmhhc093blByb3BlcnR5KGl0ZW0yKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShpdGVtMiwgY2hpbGRyZW5baXRlbTJdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoLyogdHlwZW9mIGNoaWxkcmVuID09ICdzdHJpbmcnICYmICovY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmFwcGVuZChlbGVtLCBjaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZWxlbTtcbiAgICAgICAgfSxcblxuICAgICAgICBjcmVhdGVPcHRpb246IGZ1bmN0aW9uIChlbGVtZW50LCBrZXksIHZhbHVlLCBpc0RlZmF1bHQpIHtcbiAgICAgICAgICAgIC8qIG9sZCBiZWhhdmlvdXIsIGRvZXMgbm90IHN1cHBvcnQgb3B0Z3JvdXBzIGFzIHBhcmVudHMuXG4gICAgICAgICAgICB2YXIgY291bnQgPSBlbGVtZW50Lm9wdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgZWxlbWVudC5vcHRpb25zW2NvdW50XSA9IG5ldyBPcHRpb24odmFsdWUsIGtleSk7XG5cbiAgICAgICAgICAgIGlmIChpc0RlZmF1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9wdGlvbnMuc2VsZWN0ZWRJbmRleCA9IGNvdW50IC0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIHZhciBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdPUFRJT04nKTtcbiAgICAgICAgICAgIG9wdGlvbi5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywga2V5KTtcbiAgICAgICAgICAgIGlmIChpc0RlZmF1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBvcHRpb24uc2V0QXR0cmlidXRlKCdjaGVja2VkJywgJ2NoZWNrZWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X2RvbS5hcHBlbmQob3B0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICBlbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VsZWN0QnlWYWx1ZTogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZWxlbWVudC5vcHRpb25zLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQub3B0aW9uc1tpXS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykgPT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZWxlY3RlZEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LC8qLFxuXG4gICAgICAgIC8vIFRPRE86IGl0J3MgcmVkdW5kYW50IGZvciBub3dcbiAgICAgICAgbG9hZEltYWdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW1hZ2VzID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdJTUcnKTtcbiAgICAgICAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ3NyYycsIGFyZ3VtZW50c1tpXSk7XG5cbiAgICAgICAgICAgICAgICBpbWFnZXMucHVzaChpbWFnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBpbWFnZXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9hZEFzeW5jU2NyaXB0OiBmdW5jdGlvbiAocGF0aCwgdHJpZ2dlck5hbWUsIGFzeW5jKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgICAgICBlbGVtLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgICAgICAgICAgIGVsZW0uYXN5bmMgPSAoYXN5bmMgIT09IHVuZGVmaW5lZCkgPyBhc3luYyA6IHRydWU7XG4gICAgICAgICAgICBlbGVtLnNyYyA9IHBhdGg7XG5cbiAgICAgICAgICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsZW0ub25sb2FkID0gZWxlbS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtLnJlYWR5U3RhdGUgJiYgZWxlbS5yZWFkeVN0YXRlICE9PSAnY29tcGxldGUnICYmIGVsZW0ucmVhZHlTdGF0ZSAhPT0gJ2xvYWRlZCcpIHx8IGxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxlbS5vbmxvYWQgPSBlbGVtLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyTmFtZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyTmFtZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLm9udHJpZ2dlcih0cmlnZ2VyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGxvYWRBc3luY1N0eWxlOiBmdW5jdGlvbiAocGF0aCwgdHJpZ2dlck5hbWUsIGFzeW5jKSB7XG4gICAgICAgICAgICB2YXIgZWxlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ0xJTksnKTtcblxuICAgICAgICAgICAgZWxlbS50eXBlID0gJ3RleHQvY3NzJztcbiAgICAgICAgICAgIGVsZW0uYXN5bmMgPSAoYXN5bmMgIT09IHVuZGVmaW5lZCkgPyBhc3luYyA6IHRydWU7XG4gICAgICAgICAgICBlbGVtLmhyZWYgPSBwYXRoO1xuICAgICAgICAgICAgZWxlbS5yZWwgPSAnc3R5bGVzaGVldCc7XG5cbiAgICAgICAgICAgIHZhciBsb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGVsZW0ub25sb2FkID0gZWxlbS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKChlbGVtLnJlYWR5U3RhdGUgJiYgZWxlbS5yZWFkeVN0YXRlICE9PSAnY29tcGxldGUnICYmIGVsZW0ucmVhZHlTdGF0ZSAhPT0gJ2xvYWRlZCcpIHx8IGxvYWRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxlbS5vbmxvYWQgPSBlbGVtLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgbG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodHJpZ2dlck5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0cmlnZ2VyTmFtZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyTmFtZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLm9udHJpZ2dlcih0cmlnZ2VyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKGVsZW0pO1xuICAgICAgICB9LCovXG5cbiAgICAgICAgY2xlYXI6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICB3aGlsZSAoZWxlbWVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNoaWxkKGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5zZXJ0OiBmdW5jdGlvbiAoZWxlbWVudCwgcG9zaXRpb24sIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKHBvc2l0aW9uLCBjb250ZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICBwcmVwZW5kOiBmdW5jdGlvbiAoZWxlbWVudCwgY29udGVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoJ2FmdGVyYmVnaW4nLCBjb250ZW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICBhcHBlbmQ6IGZ1bmN0aW9uIChlbGVtZW50LCBjb250ZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgY29udGVudCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVwbGFjZTogZnVuY3Rpb24gKGVsZW1lbnQsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIGxhcm91eF9kb20uY2xlYXIoZWxlbWVudCk7XG4gICAgICAgICAgICBlbGVtZW50Lmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIGNvbnRlbnQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlcGxhY2VUZXh0OiBmdW5jdGlvbiAoZWxlbWVudCwgY29udGVudCkge1xuICAgICAgICAgICAgLy8gbGFyb3V4X2RvbS5jbGVhcihlbGVtZW50KTtcbiAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xvbmVSZXR1cm46IDAsXG4gICAgICAgIGNsb25lQXBwZW5kOiAxLFxuICAgICAgICBjbG9uZUluc2VydEFmdGVyOiAyLFxuICAgICAgICBjbG9uZUluc2VydEJlZm9yZTogMyxcblxuICAgICAgICBjbG9uZTogZnVuY3Rpb24gKGVsZW1lbnQsIHR5cGUsIGNvbnRhaW5lciwgdGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgbmV3RWxlbWVudCA9IGVsZW1lbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgICAgICBpZiAoY29udGFpbmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSBlbGVtZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZSAhPT0gdW5kZWZpbmVkICYmIHR5cGUgIT0gbGFyb3V4X2RvbS5jbG9uZVJldHVybikge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlID09IGxhcm91eF9kb20uY2xvbmVBcHBlbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKG5ld0VsZW1lbnQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBsYXJvdXhfZG9tLmNsb25lSW5zZXJ0QWZ0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShuZXdFbGVtZW50LCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vIHR5cGUgPT0gbGFyb3V4X2RvbS5jbG9uZUluc2VydEJlZm9yZVxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKG5ld0VsZW1lbnQsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbmV3RWxlbWVudDtcbiAgICAgICAgfS8qLFxuXG4gICAgICAgIC8vIFRPRE86IGl0J3MgcmVkdW5kYW50IGZvciBub3dcbiAgICAgICAgYXBwbHlPcGVyYXRpb25zOiBmdW5jdGlvbiAoZWxlbWVudCwgb3BlcmF0aW9ucykge1xuICAgICAgICAgICAgZm9yICh2YXIgb3BlcmF0aW9uIGluIG9wZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9wZXJhdGlvbnMuaGFzT3duUHJvcGVydHkob3BlcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBiaW5kaW5nIGluIG9wZXJhdGlvbnNbb3BlcmF0aW9uXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9wZXJhdGlvbnNbb3BlcmF0aW9uXS5oYXNPd25Qcm9wZXJ0eShiaW5kaW5nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBvcGVyYXRpb25zW29wZXJhdGlvbl1bYmluZGluZ107XG5cbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NldHByb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnN1YnN0cmluZygwLCAxKSA9PSAnXycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYmluZGluZy5zdWJzdHJpbmcoMSksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcgPT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20ucmVwbGFjZShlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZHByb3AnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaW5kaW5nLnN1YnN0cmluZygwLCAxKSA9PSAnXycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoYmluZGluZy5zdWJzdHJpbmcoMSksIGVsZW1lbnQuZ2V0QXR0cmlidXRlKGJpbmRpbmcuc3Vic3RyaW5nKDEpKSArIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpbmRpbmcgPT0gJ2NvbnRlbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20uYXBwZW5kKGVsZW1lbnQsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVtb3ZlcHJvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLnN1YnN0cmluZygwLCAxKSA9PSAnXycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodmFsdWUuc3Vic3RyaW5nKDEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09ICdjb250ZW50Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmNsZWFyKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGRjbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5hZGRDbGFzcyhlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZW1vdmVjbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5yZW1vdmVDbGFzcyhlbGVtZW50LCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdhZGRzdHlsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50LCBiaW5kaW5nLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZW1vdmVzdHlsZSc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50LCB2YWx1ZSwgJ2luaGVyaXQgIWltcG9ydGFudCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVwZWF0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cob3BlcmF0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSovXG4gICAgfTtcblxuICAgIC8vIGEgZml4IGZvciBJbnRlcm5ldCBFeHBsb3JlclxuICAgIGlmICh0eXBlb2YgRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKEVsZW1lbnQucHJvdG90eXBlLnJlbW92ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50RWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsYXJvdXhfZG9tO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIGV2ZW50c1xuICAgIHZhciBsYXJvdXhfZXZlbnRzID0ge1xuICAgICAgICBkZWxlZ2F0ZXM6IFtdLFxuXG4gICAgICAgIGFkZDogZnVuY3Rpb24gKGV2ZW50LCBmbmMpIHtcbiAgICAgICAgICAgIGxhcm91eF9ldmVudHMuZGVsZWdhdGVzLnB1c2goeyBldmVudDogZXZlbnQsIGZuYzogZm5jIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGludm9rZTogZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF9ldmVudHMuZGVsZWdhdGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfZXZlbnRzLmRlbGVnYXRlcy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXNbaXRlbV0uZXZlbnQgIT0gZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2V2ZW50cy5kZWxlZ2F0ZXNbaXRlbV0uZm5jKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfZXZlbnRzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9hamF4ID0gcmVxdWlyZSgnLi9sYXJvdXguYWpheC5qcycpO1xuXG4gICAgLy8gZm9ybXNcbiAgICB2YXIgbGFyb3V4X2Zvcm1zID0ge1xuICAgICAgICBhamF4Rm9ybTogZnVuY3Rpb24gKGZvcm1vYmosIGZuYywgZm5jQmVnaW4pIHtcbiAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnQoZm9ybW9iaiwgJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoZm5jQmVnaW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmbmNCZWdpbigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF9hamF4LnBvc3QoXG4gICAgICAgICAgICAgICAgICAgIGZvcm1vYmouZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSxcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2Zvcm1zLnNlcmlhbGl6ZUZvcm1EYXRhKGZvcm1vYmopLFxuICAgICAgICAgICAgICAgICAgICBmbmNcbiAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaXNGb3JtRmllbGQ6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU0VMRUNUJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgndHlwZScpLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ0ZJTEUnIHx8IHR5cGUgPT09ICdDSEVDS0JPWCcgfHwgdHlwZSA9PT0gJ1JBRElPJyB8fCB0eXBlID09PSAnVEVYVCcgfHwgdHlwZSA9PT0gJ1BBU1NXT1JEJyB8fCB0eXBlID09PSAnSElEREVOJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEZvcm1GaWVsZFZhbHVlOiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuZGlzYWJsZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5vcHRpb25zW2VsZW1lbnQuc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnRklMRScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdDSEVDS0JPWCcgfHwgdHlwZSA9PT0gJ1JBRElPJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnVEVYVCcgfHwgdHlwZSA9PT0gJ1BBU1NXT1JEJyB8fCB0eXBlID09PSAnSElEREVOJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LnZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXRGb3JtRmllbGRWYWx1ZTogZnVuY3Rpb24gKGVsZW1lbnQsIHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5kaXNhYmxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PT0gJ1NFTEVDVCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBvcHRpb24gaW4gZWxlbWVudC5vcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudC5vcHRpb25zLmhhc093blByb3BlcnR5KG9wdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQub3B0aW9uc1tvcHRpb25dLnZhbHVlID09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnNlbGVjdGVkSW5kZXggPSBvcHRpb247XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gJ0lOUFVUJykge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gJ0ZJTEUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZmlsZXNbMF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdDSEVDS0JPWCcgfHwgdHlwZSA9PSAnUkFESU8nKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PSBlbGVtZW50LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdURVhUJyB8fCB0eXBlID09ICdQQVNTV09SRCcgfHwgdHlwZSA9PSAnSElEREVOJykge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT0gJ1RFWFRBUkVBJykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlRm9ybUVkaXRpbmc6IGZ1bmN0aW9uIChmb3Jtb2JqLCB2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbiA9IGZvcm1vYmoucXVlcnlTZWxlY3RvckFsbCgnKltuYW1lXScpO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChmb3Jtb2JqLmdldEF0dHJpYnV0ZSgnZGF0YS1sYXN0LWVuYWJsZWQnKSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3Jtb2JqLnNldEF0dHJpYnV0ZSgnZGF0YS1sYXN0LWVuYWJsZWQnLCAnZW5hYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1vYmoucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWxhc3QtZW5hYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBzZWxlY3RlZCA9IDAsIGxlbmd0aCA9IHNlbGVjdGlvbi5sZW5ndGg7IHNlbGVjdGVkIDwgbGVuZ3RoOyBzZWxlY3RlZCsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfZm9ybXMuaXNGb3JtRmllbGQoc2VsZWN0aW9uW3NlbGVjdGVkXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGxhc3REaXNhYmxlZCA9IHNlbGVjdGlvbltzZWxlY3RlZF0uZ2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0RGlzYWJsZWQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3Rpb25bc2VsZWN0ZWRdLmdldEF0dHJpYnV0ZSgnZGlzYWJsZWQnKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltzZWxlY3RlZF0uc2V0QXR0cmlidXRlKCdkYXRhLWxhc3QtZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltzZWxlY3RlZF0uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGFzdERpc2FibGVkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdGlvbltzZWxlY3RlZF0ucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWxhc3QtZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3Rpb25bc2VsZWN0ZWRdLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2VyaWFsaXplRm9ybURhdGE6IGZ1bmN0aW9uIChmb3Jtb2JqKSB7XG4gICAgICAgICAgICB2YXIgZm9ybWRhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBmb3Jtb2JqLnF1ZXJ5U2VsZWN0b3JBbGwoJypbbmFtZV0nKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0ZWQgPSAwLCBsZW5ndGggPSBzZWxlY3Rpb24ubGVuZ3RoOyBzZWxlY3RlZCA8IGxlbmd0aDsgc2VsZWN0ZWQrKykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxhcm91eF9mb3Jtcy5nZXRGb3JtRmllbGRWYWx1ZShzZWxlY3Rpb25bc2VsZWN0ZWRdKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBmb3JtZGF0YS5hcHBlbmQoc2VsZWN0aW9uW3NlbGVjdGVkXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZvcm1kYXRhO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24gKGZvcm1vYmopIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB7fTtcbiAgICAgICAgICAgIHZhciBzZWxlY3Rpb24gPSBmb3Jtb2JqLnF1ZXJ5U2VsZWN0b3JBbGwoJypbbmFtZV0nKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgc2VsZWN0ZWQgPSAwLCBsZW5ndGggPSBzZWxlY3Rpb24ubGVuZ3RoOyBzZWxlY3RlZCA8IGxlbmd0aDsgc2VsZWN0ZWQrKykge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxhcm91eF9mb3Jtcy5nZXRGb3JtRmllbGRWYWx1ZShzZWxlY3Rpb25bc2VsZWN0ZWRdKTtcblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbc2VsZWN0aW9uW3NlbGVjdGVkXS5nZXRBdHRyaWJ1dGUoJ25hbWUnKV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzZXJpYWxpemU6IGZ1bmN0aW9uIChmb3Jtb2JqLCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uID0gZm9ybW9iai5xdWVyeVNlbGVjdG9yQWxsKCcqW25hbWVdJyk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHNlbGVjdGVkID0gMCwgbGVuZ3RoID0gc2VsZWN0aW9uLmxlbmd0aDsgc2VsZWN0ZWQgPCBsZW5ndGg7IHNlbGVjdGVkKyspIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZm9ybXMuc2V0Rm9ybUZpZWxkVmFsdWUoc2VsZWN0aW9uW3NlbGVjdGVkXSwgZGF0YVtzZWxlY3Rpb25bc2VsZWN0ZWRdLmdldEF0dHJpYnV0ZSgnbmFtZScpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9mb3JtcztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBoZWxwZXJzXG4gICAgdmFyIGxhcm91eF9oZWxwZXJzID0ge1xuICAgICAgICB1bmlxdWVJZDogMCxcblxuICAgICAgICBnZXRVbmlxdWVJZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLypqc2xpbnQgcGx1c3BsdXM6IHRydWUgKi9cbiAgICAgICAgICAgIHJldHVybiAndWlkLScgKyAoKytsYXJvdXhfaGVscGVycy51bmlxdWVJZCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYnVpbGRRdWVyeVN0cmluZzogZnVuY3Rpb24gKHZhbHVlcywgcmZjMzk4Nikge1xuICAgICAgICAgICAgdmFyIHVyaSA9ICcnLFxuICAgICAgICAgICAgICAgIHJlZ0V4ID0gLyUyMC9nO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWVzW25hbWVdICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJmYzM5ODYgfHwgZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaSArPSAnJicgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkucmVwbGFjZShyZWdFeCwgJysnKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZXNbbmFtZV0udG9TdHJpbmcoKSkucmVwbGFjZShyZWdFeCwgJysnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaSArPSAnJicgKyBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWVzW25hbWVdLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdXJpLnN1YnN0cigxKTtcbiAgICAgICAgfSxcblxuICAgICAgICBidWlsZEZvcm1EYXRhOiBmdW5jdGlvbiAodmFsdWVzKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWVzW25hbWVdICE9ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5hcHBlbmQobmFtZSwgdmFsdWVzW25hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9LFxuXG4gICAgICAgIGZvcm1hdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNoaWZ0LmNhbGwoYXJncykucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24gKCkgeyByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNoaWZ0LmNhbGwoYXJncyk7IH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlcGxhY2VBbGw6IGZ1bmN0aW9uICh0ZXh0LCBkaWN0aW9uYXJ5KSB7XG4gICAgICAgICAgICB2YXIgcmUgPSBuZXcgUmVnRXhwKE9iamVjdC5rZXlzKGRpY3Rpb25hcnkpLmpvaW4oJ3wnKSwgJ2cnKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShcbiAgICAgICAgICAgICAgICByZSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpY3Rpb25hcnlbbWF0Y2hdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2FtZWxDYXNlOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBmbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gJyc7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsdWUubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyckNoYXIgPSB2YWx1ZS5jaGFyQXQoaik7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJDaGFyID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9ICghZmxhZykgPyBjdXJyQ2hhciA6IGN1cnJDaGFyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9LFxuXG4gICAgICAgIGFudGlDYW1lbENhc2U6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9ICcnO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZhbHVlLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJDaGFyID0gdmFsdWUuY2hhckF0KGopO1xuICAgICAgICAgICAgICAgIGlmIChjdXJyQ2hhciAhPSAnLScgJiYgY3VyckNoYXIgPT0gY3VyckNoYXIudG9VcHBlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQgKz0gJy0nICsgY3VyckNoYXIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgb3V0cHV0ICs9IGN1cnJDaGFyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICB9LFxuXG4gICAgICAgIHF1b3RlQXR0cjogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvJi9nLCAnJmFtcDsnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgJyZhcG9zOycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPC9nLCAnJmx0OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvPi9nLCAnJmd0OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCIvZywgJyZxdW90OycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXFxyXFxuL2csICcmIzEzOycpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW1xcclxcbl0vZywgJyYjMTM7Jyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3BsaWNlU3RyaW5nOiBmdW5jdGlvbiAodmFsdWUsIGluZGV4LCBjb3VudCwgYWRkKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuc2xpY2UoMCwgaW5kZXgpICsgKGFkZCB8fCAnJykgKyB2YWx1ZS5zbGljZShpbmRleCArIGNvdW50KTtcbiAgICAgICAgfSxcblxuICAgICAgICByYW5kb206IGZ1bmN0aW9uIChtaW4sIG1heCkge1xuICAgICAgICAgICAgcmV0dXJuIG1pbiArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZmluZDogZnVuY3Rpb24gKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQ7XG5cbiAgICAgICAgICAgIG9iai5zb21lKGZ1bmN0aW9uICh2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXRlcmF0b3IuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGxpc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSxcblxuICAgICAgICBleHRlbmRPYmplY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBBcnJheS5wcm90b3R5cGUuc2hpZnQuY2FsbChhcmd1bWVudHMpLFxuICAgICAgICAgICAgICAgIGlzQXJyYXkgPSB0YXJnZXQgaW5zdGFuY2VvZiBBcnJheTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcmd1bWVudHMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIGFyZ3VtZW50c1tpdGVtXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiAoaXNBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgdGFyZ2V0LnB1c2goYXJndW1lbnRzW2l0ZW1dW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAvLyB9XG5cbiAgICAgICAgICAgICAgICAgICAgLyogdGFyZ2V0W25hbWVdLmNvbnN0cnVjdG9yID09PSBPYmplY3QgKi9cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiB0YXJnZXRbbmFtZV0gaW5zdGFuY2VvZiBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9oZWxwZXJzLmV4dGVuZE9iamVjdCh0YXJnZXRbbmFtZV0sIGFyZ3VtZW50c1tpdGVtXVtuYW1lXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9IGFyZ3VtZW50c1tpdGVtXVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZWFjaDogZnVuY3Rpb24gKGFyciwgZm5jLCB0ZXN0T3duUHJvcGVydGllcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGVzdE93blByb3BlcnRpZXMgJiYgIWFyci5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZm5jKGl0ZW0sIGFycltpdGVtXSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGFycjtcbiAgICAgICAgfSxcblxuICAgICAgICBtYXA6IGZ1bmN0aW9uIChhcnIsIGZuYywgZG9udFNraXBSZXR1cm5zLCB0ZXN0T3duUHJvcGVydGllcykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBhcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAodGVzdE93blByb3BlcnRpZXMgJiYgIWFyci5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZm5jKGFycltpdGVtXSwgaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRvbnRTa2lwUmV0dXJucyB8fCByZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2gocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluZGV4OiBmdW5jdGlvbiAoYXJyLCB2YWx1ZSwgdGVzdE93blByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gYXJyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRlc3RPd25Qcm9wZXJ0aWVzICYmICFhcnIuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFycltpdGVtXSA9PT0gb2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgYWVhY2g6IGZ1bmN0aW9uIChhcnIsIGZuYykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGFyci5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChmbmMoaSwgYXJyW2ldKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9LFxuXG4gICAgICAgIGFtYXA6IGZ1bmN0aW9uIChhcnIsIGZuYywgZG9udFNraXBSZXR1cm5zKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuYyhhcnJbaV0sIGkpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkb250U2tpcFJldHVybnMgfHwgcmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy51bnNoaWZ0KHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgICAgfSxcblxuICAgICAgICBhaW5kZXg6IGZ1bmN0aW9uIChhcnIsIHZhbHVlLCBzdGFydCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IChzdGFydCB8fCAwKSwgbGVuZ3RoID0gYXJyLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY29sdW1uOiBmdW5jdGlvbiAob2JqLCBrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy5tYXAob2JqLCBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0sIHRydWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNodWZmbGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgICAgICAgc2h1ZmZsZWQgPSBbXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcmFuZCA9IGxhcm91eF9oZWxwZXJzLnJhbmRvbSgwLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgc2h1ZmZsZWRbaW5kZXgrK10gPSBzaHVmZmxlZFtyYW5kXTtcbiAgICAgICAgICAgICAgICBzaHVmZmxlZFtyYW5kXSA9IG9ialtpdGVtXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNodWZmbGVkO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1lcmdlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gQXJyYXkucHJvdG90eXBlLnNoaWZ0LmNhbGwoYXJndW1lbnRzKSxcbiAgICAgICAgICAgICAgICB0bXAgPSB0YXJnZXQsXG4gICAgICAgICAgICAgICAgaXNBcnJheSA9IHRtcCBpbnN0YW5jZW9mIEFycmF5O1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IHRtcC5jb25jYXQoYXJndW1lbnRzW2l0ZW1dKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0ciBpbiBhcmd1bWVudHNbaXRlbV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhcmd1bWVudHNbaXRlbV0uaGFzT3duUHJvcGVydHkoYXR0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdG1wW2F0dHJdID0gYXJndW1lbnRzW2l0ZW1dW2F0dHJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgICAgfSxcblxuICAgICAgICBkdXBsaWNhdGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBvYmoubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGl0ZW1zID0gbmV3IEFycmF5KGxlbmd0aCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtc1tpXSA9IG9ialtpXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEFzQXJyYXk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHZhciBpdGVtcztcblxuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBvYmo7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9iaiBpbnN0YW5jZW9mIE5vZGVMaXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW5ndGgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXNbaV0gPSBvYmpbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtcyA9IFtvYmpdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZ2V0TGVuZ3RoOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAob2JqLmxlbmd0aCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmoubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLmxlbmd0aDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEtleXNSZWN1cnNpdmU6IGZ1bmN0aW9uIChvYmosIGRlbGltaXRlciwgcHJlZml4LCBrZXlzKSB7XG4gICAgICAgICAgICBpZiAoZGVsaW1pdGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSAnLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwcmVmaXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHByZWZpeCA9ICcnO1xuICAgICAgICAgICAgICAgIGtleXMgPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBvYmopIHtcbiAgICAgICAgICAgICAgICBpZiAoIW9iai5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gocHJlZml4ICsgaXRlbSk7XG5cbiAgICAgICAgICAgICAgICBpZiAob2JqW2l0ZW1dICE9PSB1bmRlZmluZWQgJiYgb2JqW2l0ZW1dICE9PSBudWxsICYmIG9ialtpdGVtXS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9oZWxwZXJzLmdldEtleXNSZWN1cnNpdmUob2JqW2l0ZW1dLCBkZWxpbWl0ZXIsIHByZWZpeCArIGl0ZW0gKyBkZWxpbWl0ZXIsIGtleXMpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBrZXlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldEVsZW1lbnQ6IGZ1bmN0aW9uIChvYmosIHBhdGgsIGRlZmF1bHRWYWx1ZSwgZGVsaW1pdGVyKSB7XG4gICAgICAgICAgICBpZiAoZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVsaW1pdGVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWxpbWl0ZXIgPSAnLic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwb3MgPSBwYXRoLmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgICAgICAgICAgIHZhciBrZXk7XG4gICAgICAgICAgICB2YXIgcmVzdDtcbiAgICAgICAgICAgIGlmIChwb3MgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gcGF0aDtcbiAgICAgICAgICAgICAgICByZXN0ID0gbnVsbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAga2V5ID0gcGF0aC5zdWJzdHJpbmcoMCwgcG9zKTtcbiAgICAgICAgICAgICAgICByZXN0ID0gcGF0aC5zdWJzdHJpbmcocG9zICsgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghKGtleSBpbiBvYmopKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlc3QgPT09IG51bGwgfHwgcmVzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsYXJvdXhfaGVscGVycy5nZXRFbGVtZW50KG9ialtrZXldLCByZXN0LCBkZWZhdWx0VmFsdWUsIGRlbGltaXRlcik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9mb3JtcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmZvcm1zLmpzJyk7XG5cbiAgICAvLyBrZXlzXG4gICAgdmFyIGxhcm91eF9rZXlzID0ge1xuICAgICAgICBrZXlOYW1lOiBmdW5jdGlvbiAoa2V5Y29kZSkge1xuICAgICAgICAgICAga2V5Y29kZSA9IGtleWNvZGUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgc3dpdGNoIChrZXljb2RlKSB7XG4gICAgICAgICAgICBjYXNlICdiYWNrc3BhY2UnOlxuICAgICAgICAgICAgICAgIHJldHVybiA4O1xuXG4gICAgICAgICAgICBjYXNlICd0YWInOlxuICAgICAgICAgICAgICAgIHJldHVybiA5O1xuXG4gICAgICAgICAgICBjYXNlICdlbnRlcic6XG4gICAgICAgICAgICBjYXNlICdyZXR1cm4nOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMztcblxuICAgICAgICAgICAgY2FzZSAnZXNjJzpcbiAgICAgICAgICAgIGNhc2UgJ2VzY2FwZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDI3O1xuXG4gICAgICAgICAgICBjYXNlICdzcGFjZSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDMyO1xuXG4gICAgICAgICAgICBjYXNlICdwZ3VwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzM7XG5cbiAgICAgICAgICAgIGNhc2UgJ3BnZG4nOlxuICAgICAgICAgICAgICAgIHJldHVybiAzNDtcblxuICAgICAgICAgICAgY2FzZSAnZW5kJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMzU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2hvbWUnOlxuICAgICAgICAgICAgICAgIHJldHVybiAzNjtcblxuICAgICAgICAgICAgY2FzZSAnbGVmdCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM3O1xuXG4gICAgICAgICAgICBjYXNlICd1cCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM4O1xuXG4gICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDM5O1xuXG4gICAgICAgICAgICBjYXNlICdkb3duJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gNDA7XG5cbiAgICAgICAgICAgIGNhc2UgJ2luc2VydCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDQ1O1xuXG4gICAgICAgICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICAgICAgICAgIHJldHVybiA0NjtcblxuICAgICAgICAgICAgY2FzZSAnZjEnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTI7XG5cbiAgICAgICAgICAgIGNhc2UgJ2YyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTEzO1xuXG4gICAgICAgICAgICBjYXNlICdmMyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExNDtcblxuICAgICAgICAgICAgY2FzZSAnZjQnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTU7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Y1JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTE2O1xuXG4gICAgICAgICAgICBjYXNlICdmNic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDExNztcblxuICAgICAgICAgICAgY2FzZSAnZjcnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMTg7XG5cbiAgICAgICAgICAgIGNhc2UgJ2Y4JzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTE5O1xuXG4gICAgICAgICAgICBjYXNlICdmOSc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEyMDtcblxuICAgICAgICAgICAgY2FzZSAnZjEwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gMTIxO1xuXG4gICAgICAgICAgICBjYXNlICdmMTEnOlxuICAgICAgICAgICAgICAgIHJldHVybiAxMjI7XG5cbiAgICAgICAgICAgIGNhc2UgJ2YxMic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEyMztcblxuICAgICAgICAgICAgY2FzZSAnLCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE4ODtcblxuICAgICAgICAgICAgY2FzZSAnLic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE5MDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5Y29kZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8ge3RhcmdldCwga2V5LCBzaGlmdCwgY3RybCwgYWx0LCBkaXNhYmxlSW5wdXRzLCBmbmN9XG4gICAgICAgIGFzc2lnbjogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciB3cmFwcGVyID0gZnVuY3Rpb24gKGV2KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFldikge1xuICAgICAgICAgICAgICAgICAgICBldiA9IGV2ZW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZXYudGFyZ2V0IHx8IGV2LnNyY0VsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgPT09IDMgfHwgZWxlbWVudC5ub2RlVHlwZSA9PT0gMTEpIHsgLy8gZWxlbWVudC5ub2RlVHlwZSA9PT0gMSB8fFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmRpc2FibGVJbnB1dHMgJiYgbGFyb3V4X2Zvcm1zLmlzRm9ybUZpZWxkKGVsZW1lbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zaGlmdCAmJiAhZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmN0cmwgJiYgIWV2LmN0cmxLZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLmFsdCAmJiAhZXYuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbGFyb3V4X2tleXMua2V5TmFtZShvcHRpb25zLmtleSk7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gKGV2LmtleUNvZGUgfHwgZXYud2hpY2gpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBvcHRpb25zLmZuYyhldik7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50KG9wdGlvbnMudGFyZ2V0IHx8IGRvY3VtZW50LCAna2V5ZG93bicsIHdyYXBwZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfa2V5cztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2RvbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRvbS5qcycpLFxuICAgICAgICBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKSxcbiAgICAgICAgbGFyb3V4X3N0YWNrID0gcmVxdWlyZSgnLi9sYXJvdXguc3RhY2suanMnKTtcblxuICAgIC8vIG12Y1xuICAgIHZhciBsYXJvdXhfbXZjID0ge1xuICAgICAgICBhcHBzOiB7fSxcbiAgICAgICAgcGF1c2VVcGRhdGU6IGZhbHNlLFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uIChlbGVtZW50LCBtb2RlbCkge1xuICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29uc3RydWN0b3IgPT09IFN0cmluZykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBsYXJvdXhfZG9tLnNlbGVjdEJ5SWQoZWxlbWVudCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmIChtb2RlbC5jb25zdHJ1Y3RvciAhPT0gbGFyb3V4X3N0YWNrKSB7XG4gICAgICAgICAgICAvLyAgICAgbW9kZWwgPSBuZXcgbGFyb3V4X3N0YWNrKG1vZGVsKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgdmFyIGFwcEtleSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpZCcpO1xuXG4gICAgICAgICAgICBtb2RlbC5vbnVwZGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X212Yy5wYXVzZVVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfbXZjLnVwZGF0ZShhcHBLZXkpOyAvLyAsIFtldmVudC5rZXldXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgbGFyb3V4X212Yy5hcHBzW2FwcEtleV0gPSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudCxcbiAgICAgICAgICAgICAgICBtb2RlbDogbW9kZWwgLy8gLFxuICAgICAgICAgICAgICAgIC8vIG1vZGVsS2V5czogbnVsbCxcbiAgICAgICAgICAgICAgICAvLyBib3VuZEVsZW1lbnRzOiBudWxsLFxuICAgICAgICAgICAgICAgIC8vIGV2ZW50RWxlbWVudHM6IG51bGxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxhcm91eF9tdmMucmViaW5kKGFwcEtleSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmViaW5kOiBmdW5jdGlvbiAoYXBwS2V5KSB7XG4gICAgICAgICAgICB2YXIgYXBwID0gbGFyb3V4X212Yy5hcHBzW2FwcEtleV07XG4gICAgICAgICAgICAvKmpzbGludCBub21lbjogdHJ1ZSAqL1xuICAgICAgICAgICAgYXBwLm1vZGVsS2V5cyA9IGxhcm91eF9oZWxwZXJzLmdldEtleXNSZWN1cnNpdmUoYXBwLm1vZGVsLl9kYXRhKTsgLy8gRklYTUU6IHdvcmtzIG9ubHkgZm9yICRsLnN0YWNrXG4gICAgICAgICAgICBhcHAuYm91bmRFbGVtZW50cyA9IHt9O1xuICAgICAgICAgICAgYXBwLmV2ZW50RWxlbWVudHMgPSBbXTtcblxuICAgICAgICAgICAgbGFyb3V4X212Yy5zY2FuRWxlbWVudHMoYXBwLCBhcHAuZWxlbWVudCk7XG4gICAgICAgICAgICBsYXJvdXhfbXZjLnVwZGF0ZShhcHBLZXkpO1xuXG4gICAgICAgICAgICB2YXIgZm5jID0gZnVuY3Rpb24gKGV2LCBlbGVtKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJpbmRpbmcgPSBsYXJvdXhfbXZjLmJpbmRTdHJpbmdQYXJzZXIoZWxlbS5nZXRBdHRyaWJ1dGUoJ2xyLWV2ZW50JykpO1xuICAgICAgICAgICAgICAgIC8vIGxhcm91eF9tdmMucGF1c2VVcGRhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gYmluZGluZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gbnVsbCB8fCAhYmluZGluZy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoYmluZGluZ1tpdGVtXS5jaGFyQXQoMCkgPT0gJ1xcJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tb2RlbFtpdGVtXSA9IGJpbmRpbmdbaXRlbV0uc3Vic3RyaW5nKDEsIGJpbmRpbmdbaXRlbV0ubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmluZGluZ1tpdGVtXS5zdWJzdHJpbmcoMCwgNSkgPT0gJ2F0dHIuJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBwLm1vZGVsW2l0ZW1dID0gZWxlbS5nZXRBdHRyaWJ1dGUoYmluZGluZ1tpdGVtXS5zdWJzdHJpbmcoNSkpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGJpbmRpbmdbaXRlbV0uc3Vic3RyaW5nKDAsIDUpID09ICdwcm9wLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5tb2RlbFtpdGVtXSA9IGVsZW1bYmluZGluZ1tpdGVtXS5zdWJzdHJpbmcoNSldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGxhcm91eF9tdmMucGF1c2VVcGRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBhcHAuZXZlbnRFbGVtZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnQoXG4gICAgICAgICAgICAgICAgICAgIGFwcC5ldmVudEVsZW1lbnRzW2ldLmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGFwcC5ldmVudEVsZW1lbnRzW2ldLmJpbmRpbmdbbnVsbF0sXG4gICAgICAgICAgICAgICAgICAgIGZuY1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2NhbkVsZW1lbnRzOiBmdW5jdGlvbiAoYXBwLCBlbGVtZW50KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgYXR0cyA9IGVsZW1lbnQuYXR0cmlidXRlcywgbSA9IGF0dHMubGVuZ3RoOyBpIDwgbTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHNbaV0ubmFtZSA9PSAnbHItYmluZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbmRpbmcxID0gbGFyb3V4X212Yy5iaW5kU3RyaW5nUGFyc2VyKGF0dHNbaV0udmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gYmluZGluZzEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmluZGluZzEuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcC5ib3VuZEVsZW1lbnRzW2JpbmRpbmcxW2l0ZW1dXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBwLmJvdW5kRWxlbWVudHNbYmluZGluZzFbaXRlbV1dID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcC5ib3VuZEVsZW1lbnRzW2JpbmRpbmcxW2l0ZW1dXS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0dHNbaV0ubmFtZSA9PSAnbHItZXZlbnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiaW5kaW5nMiA9IGxhcm91eF9tdmMuYmluZFN0cmluZ1BhcnNlcihhdHRzW2ldLnZhbHVlKTtcblxuICAgICAgICAgICAgICAgICAgICBhcHAuZXZlbnRFbGVtZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBiaW5kaW5nOiBiaW5kaW5nMlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBjaGxkcm4gPSBlbGVtZW50LmNoaWxkTm9kZXMsIG4gPSBjaGxkcm4ubGVuZ3RoOyBqIDwgbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNobGRybltqXS5ub2RlVHlwZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfbXZjLnNjYW5FbGVtZW50cyhhcHAsIGNobGRybltqXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKGFwcEtleSwga2V5cykge1xuICAgICAgICAgICAgdmFyIGFwcCA9IGxhcm91eF9tdmMuYXBwc1thcHBLZXldO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleXMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBrZXlzID0gYXBwLm1vZGVsS2V5cztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aDEgPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDE7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghKGtleXNbaV0gaW4gYXBwLmJvdW5kRWxlbWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBib3VuZEVsZW1lbnQgPSBhcHAuYm91bmRFbGVtZW50c1trZXlzW2ldXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5ndGgyID0gYm91bmRFbGVtZW50Lmxlbmd0aDsgaiA8IGxlbmd0aDI7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYm91bmRFbGVtZW50W2pdLnRhcmdldC5zdWJzdHJpbmcoMCwgNikgPT0gJ3N0eWxlLicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudFtqXS5lbGVtZW50LnN0eWxlW2JvdW5kRWxlbWVudFtqXS50YXJnZXQuc3Vic3RyaW5nKDYpXSA9IGxhcm91eF9oZWxwZXJzLmdldEVsZW1lbnQoYXBwLm1vZGVsLCBrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib3VuZEVsZW1lbnRbal0udGFyZ2V0LnN1YnN0cmluZygwLCA1KSA9PSAnYXR0ci4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRSByZW1vdmVBdHRyaWJ1dGUgb24gbnVsbCB2YWx1ZT9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudFtqXS5lbGVtZW50LnNldEF0dHJpYnV0ZShib3VuZEVsZW1lbnRbal0udGFyZ2V0LnN1YnN0cmluZyg1KSwgbGFyb3V4X2hlbHBlcnMuZ2V0RWxlbWVudChhcHAubW9kZWwsIGtleXNbaV0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChib3VuZEVsZW1lbnRbal0udGFyZ2V0LnN1YnN0cmluZygwLCA1KSA9PSAncHJvcC4nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGSVhNRSByZW1vdmVBdHRyaWJ1dGUgb24gbnVsbCB2YWx1ZT9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdW5kRWxlbWVudFtqXS5lbGVtZW50W2JvdW5kRWxlbWVudFtqXS50YXJnZXQuc3Vic3RyaW5nKDUpXSA9IGxhcm91eF9oZWxwZXJzLmdldEVsZW1lbnQoYXBwLm1vZGVsLCBrZXlzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBiaW5kU3RyaW5nUGFyc2VyOiBmdW5jdGlvbiAodGV4dCkge1xuICAgICAgICAgICAgdmFyIGxhc3RCdWZmZXIgPSBudWxsLFxuICAgICAgICAgICAgICAgIGJ1ZmZlciA9ICcnLFxuICAgICAgICAgICAgICAgIHN0YXRlID0gMCxcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB7fTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IHRleHQubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VyciA9IHRleHQuY2hhckF0KGkpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyID09ICc6Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJ1ZmZlciA9IGJ1ZmZlci50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGN1cnIgPT0gJywnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2xhc3RCdWZmZXJdID0gYnVmZmVyLnRyaW0oKTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBjdXJyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbbGFzdEJ1ZmZlcl0gPSBidWZmZXIudHJpbSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfbXZjO1xuXG59KCkpO1xuIiwiLypqc2xpbnQgbm9tZW46IHRydWUgKi9cbm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLyBzdGFja1xuICAgIHZhciBsYXJvdXhfc3RhY2sgPSBmdW5jdGlvbiAoZGF0YSwgZGVwdGgsIHRvcCkge1xuICAgICAgICB0aGlzLl9kYXRhID0ge307XG4gICAgICAgIHRoaXMuX2RlcHRoID0gZGVwdGg7XG4gICAgICAgIHRoaXMuX3RvcCA9IHRvcCB8fCB0aGlzO1xuXG4gICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGlzLl9kYXRhW2tleV07XG5cbiAgICAgICAgICAgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gdmFsdWU7XG5cbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFba2V5XSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2RhdGFba2V5XSA9IG5ldyBsYXJvdXhfc3RhY2soXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2RlcHRoID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9kZXB0aCArICcuJyArIGtleSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdG9wXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gdmFsdWU7XG5cbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMuX2RhdGFba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZGF0YVtrZXldID09PSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZXQodGhpcywga2V5LCBuZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGF0YVtrZXldID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdG9wLm9udXBkYXRlKHsgc2NvcGU6IHRoaXMsIGtleToga2V5LCBvbGRWYWx1ZTogb2xkVmFsdWUsIG5ld1ZhbHVlOiBuZXdWYWx1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRSYW5nZSA9IGZ1bmN0aW9uICh2YWx1ZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIHZhbHVlS2V5IGluIHZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmICghdmFsdWVzLmhhc093blByb3BlcnR5KHZhbHVlS2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldCh2YWx1ZUtleSwgdmFsdWVzW3ZhbHVlS2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbiAoa2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzW2tleV0gfHwgZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRSYW5nZSA9IGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0ge307XG5cbiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4ga2V5cykge1xuICAgICAgICAgICAgICAgIGlmICgha2V5cy5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YWx1ZXNba2V5c1tpdGVtXV0gPSB0aGlzW2tleXNbaXRlbV1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMua2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9kYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLl9kYXRhKS5sZW5ndGg7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5leGlzdHMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gKGtleSBpbiB0aGlzLl9kYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gdGhpcy5fZGF0YSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2RhdGFba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiB0aGlzLl9kYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9kYXRhLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzW2l0ZW1dO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9kYXRhW2l0ZW1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9kYXRhID0ge307XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5vbnVwZGF0ZSA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnNldFJhbmdlKGRhdGEpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfc3RhY2s7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGxhcm91eF9kb20gPSByZXF1aXJlKCcuL2xhcm91eC5kb20uanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG5cbiAgICAvLyB0ZW1wbGF0ZXNcbiAgICB2YXIgbGFyb3V4X3RlbXBsYXRlcyA9IHtcbiAgICAgICAgZW5naW5lczoge1xuICAgICAgICAgICAgcGxhaW46IHtcbiAgICAgICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFt0ZW1wbGF0ZSwgb3B0aW9uc107XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKGNvbXBpbGVkLCBtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gY29tcGlsZWRbMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWN0ID0gW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEluZGV4O1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgobmV4dEluZGV4ID0gcmVzdWx0LmluZGV4T2YoJ3t7JywgbGFzdEluZGV4KSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0SW5kZXggKz0gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjbG9zZUluZGV4ID0gcmVzdWx0LmluZGV4T2YoJ319JywgbmV4dEluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbG9zZUluZGV4ID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gcmVzdWx0LnN1YnN0cmluZyhuZXh0SW5kZXgsIGNsb3NlSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGljdFsne3snICsga2V5ICsgJ319J10gPSBsYXJvdXhfaGVscGVycy5nZXRFbGVtZW50KG1vZGVsLCBrZXksICcnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IGNsb3NlSW5kZXggKyAyO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxhcm91eF9oZWxwZXJzLnJlcGxhY2VBbGwocmVzdWx0LCBkaWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBob2dhbjoge1xuICAgICAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gSG9nYW4uY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKGNvbXBpbGVkLCBtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZWQucmVuZGVyKG1vZGVsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBtdXN0YWNoZToge1xuICAgICAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTXVzdGFjaGUuY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKGNvbXBpbGVkLCBtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZWQobW9kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGhhbmRsZWJhcnM6IHtcbiAgICAgICAgICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAodGVtcGxhdGUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEhhbmRsZWJhcnMuY29tcGlsZSh0ZW1wbGF0ZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gKGNvbXBpbGVkLCBtb2RlbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGlsZWQobW9kZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGxvZGFzaDoge1xuICAgICAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAvKmpzbGludCBub21lbjogdHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jb21waWxlKHRlbXBsYXRlLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdW5kZXJzY29yZToge1xuICAgICAgICAgICAgICAgIGNvbXBpbGU6IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICAvKmpzbGludCBub21lbjogdHJ1ZSAqL1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5jb21waWxlKHRlbXBsYXRlLCBudWxsLCBvcHRpb25zKTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiAoY29tcGlsZWQsIG1vZGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21waWxlZChtb2RlbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlbmdpbmU6ICdwbGFpbicsXG5cbiAgICAgICAgYXBwbHk6IGZ1bmN0aW9uIChlbGVtZW50LCBtb2RlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnQsIGVuZ2luZSA9IGxhcm91eF90ZW1wbGF0ZXMuZW5naW5lc1tsYXJvdXhfdGVtcGxhdGVzLmVuZ2luZV07XG5cbiAgICAgICAgICAgIGlmIChlbGVtZW50Lm5vZGVUeXBlID09PSAxIHx8IGVsZW1lbnQubm9kZVR5cGUgPT09IDMgfHwgZWxlbWVudC5ub2RlVHlwZSA9PT0gMTEpIHtcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gZWxlbWVudC50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29udGVudCA9IGVsZW1lbnQubm9kZVZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY29tcGlsZWQgPSBlbmdpbmUuY29tcGlsZShjb250ZW50LCBvcHRpb25zKTtcbiAgICAgICAgICAgIHJldHVybiBlbmdpbmUucmVuZGVyKGNvbXBpbGVkLCBtb2RlbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5zZXJ0OiBmdW5jdGlvbiAoZWxlbWVudCwgbW9kZWwsIHRhcmdldCwgcG9zaXRpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBsYXJvdXhfdGVtcGxhdGVzLmFwcGx5KGVsZW1lbnQsIG1vZGVsLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgbGFyb3V4X2RvbS5pbnNlcnQodGFyZ2V0LCBwb3NpdGlvbiB8fCAnYmVmb3JlZW5kJywgb3V0cHV0KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZXBsYWNlOiBmdW5jdGlvbiAoZWxlbWVudCwgbW9kZWwsIHRhcmdldCwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IGxhcm91eF90ZW1wbGF0ZXMuYXBwbHkoZWxlbWVudCwgbW9kZWwsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBsYXJvdXhfZG9tLnJlcGxhY2UodGFyZ2V0LCBvdXRwdXQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBsYXJvdXhfdGVtcGxhdGVzO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vIHRpbWVyc1xuICAgIHZhciBsYXJvdXhfdGltZXJzID0ge1xuICAgICAgICBkYXRhOiBbXSxcblxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh0aW1lcikge1xuICAgICAgICAgICAgdGltZXIubmV4dCA9IERhdGUubm93KCkgKyB0aW1lci50aW1lb3V0O1xuICAgICAgICAgICAgbGFyb3V4X3RpbWVycy5kYXRhLnB1c2godGltZXIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0S2V5ID0gbnVsbDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfdGltZXJzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF90aW1lcnMuZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBsYXJvdXhfdGltZXJzLmRhdGFbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0uaWQgIT09IHVuZGVmaW5lZCAmJiBjdXJyZW50SXRlbS5pZCA9PSBpZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRLZXkgPSBpdGVtO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXRLZXkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfdGltZXJzLmRhdGEuc3BsaWNlKHRhcmdldEtleSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbnRpY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgICAgICB2YXIgcmVtb3ZlS2V5cyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfdGltZXJzLmRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF90aW1lcnMuZGF0YS5oYXNPd25Qcm9wZXJ0eShpdGVtKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBsYXJvdXhfdGltZXJzLmRhdGFbaXRlbV07XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0ubmV4dCA8PSBub3cpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGN1cnJlbnRJdGVtLm9udGljayhjdXJyZW50SXRlbS5zdGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UgJiYgY3VycmVudEl0ZW0ucmVzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLm5leHQgPSBub3cgKyBjdXJyZW50SXRlbS50aW1lb3V0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlS2V5cy51bnNoaWZ0KGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtMiBpbiByZW1vdmVLZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZW1vdmVLZXlzLmhhc093blByb3BlcnR5KGl0ZW0yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfdGltZXJzLmRhdGEuc3BsaWNlKHJlbW92ZUtleXNbaXRlbTJdLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3RpbWVycztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2RvbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRvbS5qcycpO1xuXG4gICAgLy8gdG91Y2ggLSBwYXJ0aWFsbHkgdGFrZW4gZnJvbSAndG9jY2EuanMnIHByb2plY3RcbiAgICAvLyAgICAgICAgIGNhbiBiZSBmb3VuZCBhdDogaHR0cHM6Ly9naXRodWIuY29tL0dpYW5sdWNhR3VhcmluaS9Ub2NjYS5qc1xuICAgIHZhciBsYXJvdXhfdG91Y2ggPSB7XG4gICAgICAgIHRvdWNoU3RhcnRlZDogbnVsbCxcbiAgICAgICAgc3dpcGVUcmVzaG9sZDogODAsXG4gICAgICAgIHByZWNpc2lvbjogMzAsXG4gICAgICAgIHRhcENvdW50OiAwLFxuICAgICAgICB0YXBUcmVzaG9sZDogMjAwLFxuICAgICAgICBsb25nVGFwVHJlc2hvbGQ6IDgwMCxcbiAgICAgICAgdGFwVGltZXI6IG51bGwsXG4gICAgICAgIHBvczogbnVsbCxcbiAgICAgICAgY2FjaGVkOiBudWxsLFxuXG4gICAgICAgIGV2ZW50czoge1xuICAgICAgICAgICAgc3RhcnQ6IFsndG91Y2hzdGFydCcsICdwb2ludGVyZG93bicsICdNU1BvaW50ZXJEb3duJywgJ21vdXNlZG93biddLFxuICAgICAgICAgICAgZW5kOiBbJ3RvdWNoZW5kJywgJ3BvaW50ZXJ1cCcsICdNU1BvaW50ZXJVcCcsICdtb3VzZXVwJ10sXG4gICAgICAgICAgICBtb3ZlOiBbJ3RvdWNobW92ZScsICdwb2ludGVybW92ZScsICdNU1BvaW50ZXJNb3ZlJywgJ21vdXNlbW92ZSddXG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9jYXRlUG9pbnRlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcykge1xuICAgICAgICAgICAgICAgIGV2ZW50ID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnBvcyA9IFtldmVudC5wYWdlWCwgZXZlbnQucGFnZVldO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBldmVudHMgPSBbXG4gICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAobmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpID8gMiA6IDEsXG4gICAgICAgICAgICAgICAgM1xuICAgICAgICAgICAgXTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGV2ZW50cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnRTaW5nbGUoZG9jdW1lbnQsIGxhcm91eF90b3VjaC5ldmVudHMuc3RhcnRbZXZlbnRzW2ldXSwgbGFyb3V4X3RvdWNoLm9uc3RhcnQpO1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnRTaW5nbGUoZG9jdW1lbnQsIGxhcm91eF90b3VjaC5ldmVudHMuZW5kW2V2ZW50c1tpXV0sIGxhcm91eF90b3VjaC5vbmVuZCk7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudFNpbmdsZShkb2N1bWVudCwgbGFyb3V4X3RvdWNoLmV2ZW50cy5tb3ZlW2V2ZW50c1tpXV0sIGxhcm91eF90b3VjaC5sb2NhdGVQb2ludGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvbnN0YXJ0OiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIGxhcm91eF90b3VjaC5sb2NhdGVQb2ludGVyKGV2ZW50KTtcbiAgICAgICAgICAgIGxhcm91eF90b3VjaC5jYWNoZWQgPSBbbGFyb3V4X3RvdWNoLnBvc1swXSwgbGFyb3V4X3RvdWNoLnBvc1sxXV07XG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gudG91Y2hTdGFydGVkID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIC8qanNsaW50IHBsdXNwbHVzOiB0cnVlICovXG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwQ291bnQrKztcblxuICAgICAgICAgICAgdmFyIGZuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3RvdWNoLmNhY2hlZFswXSA+PSBsYXJvdXhfdG91Y2gucG9zWzBdIC0gbGFyb3V4X3RvdWNoLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZFswXSA8PSBsYXJvdXhfdG91Y2gucG9zWzBdICsgbGFyb3V4X3RvdWNoLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZFsxXSA+PSBsYXJvdXhfdG91Y2gucG9zWzFdIC0gbGFyb3V4X3RvdWNoLnByZWNpc2lvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLmNhY2hlZFsxXSA8PSBsYXJvdXhfdG91Y2gucG9zWzFdICsgbGFyb3V4X3RvdWNoLnByZWNpc2lvbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3RvdWNoLnRvdWNoU3RhcnRlZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAobGFyb3V4X3RvdWNoLnRhcENvdW50ID09PSAyKSA/ICdkYmx0YXAnIDogJ3RhcCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbm5lckV2ZW50OiBldmVudCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogbGFyb3V4X3RvdWNoLnBvc1swXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogbGFyb3V4X3RvdWNoLnBvc1sxXVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC50YXBDb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIGxhcm91eF90b3VjaC50b3VjaFN0YXJ0ZWQgPiBsYXJvdXhfdG91Y2gubG9uZ1RhcFRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQudGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdsb25ndGFwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyRXZlbnQ6IGV2ZW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBsYXJvdXhfdG91Y2gucG9zWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBsYXJvdXhfdG91Y2gucG9zWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnRvdWNoU3RhcnRlZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3RvdWNoLnRhcFRpbWVyID0gc2V0VGltZW91dChmbmMsIGxhcm91eF90b3VjaC50YXBUcmVzaG9sZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwQ291bnQgPSAwO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGxhcm91eF90b3VjaC50YXBUaW1lcik7XG4gICAgICAgICAgICBsYXJvdXhfdG91Y2gudGFwVGltZXIgPSBzZXRUaW1lb3V0KGZuYywgbGFyb3V4X3RvdWNoLnRhcFRyZXNob2xkKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbmVuZDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBbXG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF90b3VjaC5wb3NbMF0gLSBsYXJvdXhfdG91Y2guY2FjaGVkWzBdLFxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdG91Y2gucG9zWzFdIC0gbGFyb3V4X3RvdWNoLmNhY2hlZFsxXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJFdmVudDogZXZlbnQsXG4gICAgICAgICAgICAgICAgICAgIHg6IGxhcm91eF90b3VjaC5wb3NbMF0sXG4gICAgICAgICAgICAgICAgICAgIHk6IGxhcm91eF90b3VjaC5wb3NbMV0sXG4gICAgICAgICAgICAgICAgICAgIGRpc3RhbmNlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiBNYXRoLmFicyhkZWx0YVswXSksXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiBNYXRoLmFicyhkZWx0YVsxXSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxhcm91eF90b3VjaC50b3VjaFN0YXJ0ZWQgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMF0gPD0gLWxhcm91eF90b3VjaC5zd2lwZVRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KGV2ZW50LnRhcmdldCwgJ3N3aXBlcmlnaHQnLCBkYXRhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRlbHRhWzBdID49IGxhcm91eF90b3VjaC5zd2lwZVRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KGV2ZW50LnRhcmdldCwgJ3N3aXBlbGVmdCcsIGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMV0gPD0gLWxhcm91eF90b3VjaC5zd2lwZVRyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5kaXNwYXRjaEV2ZW50KGV2ZW50LnRhcmdldCwgJ3N3aXBlZG93bicsIGRhdGEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGVsdGFbMV0gPj0gbGFyb3V4X3RvdWNoLnN3aXBlVHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLmRpc3BhdGNoRXZlbnQoZXZlbnQudGFyZ2V0LCAnc3dpcGV1cCcsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIGxhcm91eC5yZWFkeShsYXJvdXhfdG91Y2guaW5pdCk7XG5cbiAgICByZXR1cm4gbGFyb3V4X3RvdWNoO1xuXG59KCkpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKTtcblxuICAgIC8vIHRyaWdnZXJzXG4gICAgdmFyIGxhcm91eF90cmlnZ2VycyA9IHtcbiAgICAgICAgZGVsZWdhdGVzOiBbXSxcbiAgICAgICAgbGlzdDogW10sXG5cbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoY29uZGl0aW9uLCBmbmMsIHN0YXRlKSB7XG4gICAgICAgICAgICB2YXIgY29uZGl0aW9ucyA9IGxhcm91eF9oZWxwZXJzLmdldEFzQXJyYXkoY29uZGl0aW9uKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBjb25kaXRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb25kaXRpb25zLmhhc093blByb3BlcnR5KGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfaGVscGVycy5haW5kZXgobGFyb3V4X3RyaWdnZXJzLmxpc3QsIGNvbmRpdGlvbnNbaXRlbV0pID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMubGlzdC5wdXNoKGNvbmRpdGlvbnNbaXRlbV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGFyb3V4X3RyaWdnZXJzLmRlbGVnYXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBjb25kaXRpb25zOiBjb25kaXRpb25zLFxuICAgICAgICAgICAgICAgIGZuYzogZm5jLFxuICAgICAgICAgICAgICAgIHN0YXRlOiBzdGF0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb250cmlnZ2VyOiBmdW5jdGlvbiAodHJpZ2dlck5hbWUsIGFyZ3MpIHtcbiAgICAgICAgICAgIHZhciBldmVudElkeCA9IGxhcm91eF9oZWxwZXJzLmFpbmRleChsYXJvdXhfdHJpZ2dlcnMubGlzdCwgdHJpZ2dlck5hbWUpO1xuICAgICAgICAgICAgaWYgKGV2ZW50SWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIGxhcm91eF90cmlnZ2Vycy5saXN0LnNwbGljZShldmVudElkeCwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByZW1vdmVLZXlzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtIGluIGxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWxhcm91eF90cmlnZ2Vycy5kZWxlZ2F0ZXMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSBsYXJvdXhfdHJpZ2dlcnMuZGVsZWdhdGVzW2l0ZW1dO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29uZGl0aW9uS2V5IGluIGN1cnJlbnRJdGVtLmNvbmRpdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50SXRlbS5jb25kaXRpb25zLmhhc093blByb3BlcnR5KGNvbmRpdGlvbktleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmRpdGlvbk9iaiA9IGN1cnJlbnRJdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uS2V5XTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGFyb3V4X2hlbHBlcnMuYWluZGV4KGxhcm91eF90cmlnZ2Vycy5saXN0LCBjb25kaXRpb25PYmopICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLmZuYyhcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogY3VycmVudEl0ZW0uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJnczogbGFyb3V4X2hlbHBlcnMuZ2V0QXNBcnJheShhcmdzKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVLZXlzLnVuc2hpZnQoaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpdGVtMiBpbiByZW1vdmVLZXlzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZW1vdmVLZXlzLmhhc093blByb3BlcnR5KGl0ZW0yKSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfdHJpZ2dlcnMuZGVsZWdhdGVzLnNwbGljZShyZW1vdmVLZXlzW2l0ZW0yXSwgMSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0cmlnZ2VyIG5hbWU6ICcgKyB0cmlnZ2VyTmFtZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIGxhcm91eF90cmlnZ2VycztcblxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uICgpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgbGFyb3V4X2RvbSA9IHJlcXVpcmUoJy4vbGFyb3V4LmRvbS5qcycpLFxuICAgICAgICBsYXJvdXhfaGVscGVycyA9IHJlcXVpcmUoJy4vbGFyb3V4LmhlbHBlcnMuanMnKSxcbiAgICAgICAgbGFyb3V4X2NzcyA9IHJlcXVpcmUoJy4vbGFyb3V4LmNzcy5qcycpLFxuICAgICAgICBsYXJvdXhfdGltZXJzID0gcmVxdWlyZSgnLi9sYXJvdXgudGltZXJzLmpzJyksXG4gICAgICAgIGxhcm91eF9kYXRlID0gcmVxdWlyZSgnLi9sYXJvdXguZGF0ZS5qcycpO1xuXG4gICAgLy8gdWlcbiAgICB2YXIgbGFyb3V4X3VpID0ge1xuICAgICAgICBmbG9hdENvbnRhaW5lcjogbnVsbCxcblxuICAgICAgICBwb3B1cDoge1xuICAgICAgICAgICAgZGVmYXVsdFRpbWVvdXQ6IDUwMCxcblxuICAgICAgICAgICAgY3JlYXRlQm94OiBmdW5jdGlvbiAoaWQsIHhjbGFzcywgbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBsYXJvdXhfZG9tLmNyZWF0ZUVsZW1lbnQoJ0RJVicsIHsgaWQ6IGlkLCAnY2xhc3MnOiB4Y2xhc3MgfSwgbWVzc2FnZSk7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBtc2dib3g6IGZ1bmN0aW9uICh0aW1lb3V0LCBtZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gbGFyb3V4X2hlbHBlcnMuZ2V0VW5pcXVlSWQoKSxcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gbGFyb3V4X3VpLnBvcHVwLmNyZWF0ZUJveChpZCwgJ2xhcm91eE1zZ0JveCcsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGxhcm91eF91aS5mbG9hdENvbnRhaW5lci5hcHBlbmRDaGlsZChvYmopO1xuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShvYmosIHsgb3BhY2l0eTogMSB9KTtcblxuICAgICAgICAgICAgICAgIGxhcm91eF90aW1lcnMuc2V0KHtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgICAgICAgICAgcmVzZXQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBvbnRpY2s6IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsYXJvdXhfY3NzLnNldFByb3BlcnR5KHgsIHsgb3BhY2l0eTogMCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20ucmVtb3ZlKHgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTogb2JqXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgbG9hZGluZzoge1xuICAgICAgICAgICAgZWxlbWVudFNlbGVjdG9yOiBudWxsLFxuICAgICAgICAgICAgZWxlbWVudDogbnVsbCxcbiAgICAgICAgICAgIGRlZmF1bHREZWxheTogMTUwMCxcbiAgICAgICAgICAgIHRpbWVyOiBudWxsLFxuXG4gICAgICAgICAgICBraWxsVGltZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobGFyb3V4X3VpLmxvYWRpbmcudGltZXIpO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaGlkZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGxhcm91eF91aS5sb2FkaW5nLmtpbGxUaW1lcigpO1xuXG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50LCB7IGRpc3BsYXk6ICdub25lJyB9KTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UubG9hZGluZ0luZGljYXRvciA9ICdmYWxzZSc7XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzaG93OiBmdW5jdGlvbiAoZGVsYXkpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfdWkubG9hZGluZy5raWxsVGltZXIoKTtcblxuICAgICAgICAgICAgICAgIGlmIChkZWxheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbGF5ID0gbGFyb3V4X3VpLmxvYWRpbmcuZGVmYXVsdERlbGF5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkZWxheSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IGxhcm91eF91aS5sb2FkaW5nLnNob3coMCk7IH0sIGRlbGF5KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfY3NzLnNldFByb3BlcnR5KGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnQsIHsgZGlzcGxheTogJ2Jsb2NrJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLmxvYWRpbmdJbmRpY2F0b3IgPSAndHJ1ZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50ID09PSBudWxsICYmIGxhcm91eF91aS5sb2FkaW5nLmVsZW1lbnRTZWxlY3RvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkubG9hZGluZy5lbGVtZW50ID0gbGFyb3V4X2RvbS5zZWxlY3RTaW5nbGUobGFyb3V4X3VpLmxvYWRpbmcuZWxlbWVudFNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3VpLmxvYWRpbmcuZWxlbWVudCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfZG9tLnNldEV2ZW50KHdpbmRvdywgJ2xvYWQnLCBsYXJvdXhfdWkubG9hZGluZy5oaWRlKTtcbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5zZXRFdmVudCh3aW5kb3csICdiZWZvcmV1bmxvYWQnLCBsYXJvdXhfdWkubG9hZGluZy5zaG93KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmxvYWRpbmdJbmRpY2F0b3IgIT09IHVuZGVmaW5lZCAmJiBsb2NhbFN0b3JhZ2UubG9hZGluZ0luZGljYXRvciA9PT0gJ3RydWUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkubG9hZGluZy5zaG93KDApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLmxvYWRpbmcuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGR5bmFtaWNEYXRlczoge1xuICAgICAgICAgICAgdXBkYXRlRGF0ZXNFbGVtZW50czogbnVsbCxcblxuICAgICAgICAgICAgdXBkYXRlRGF0ZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAobGFyb3V4X3VpLmR5bmFtaWNEYXRlcy51cGRhdGVEYXRlc0VsZW1lbnRzID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5keW5hbWljRGF0ZXMudXBkYXRlRGF0ZXNFbGVtZW50cyA9IGxhcm91eF9kb20uc2VsZWN0KCcqW2RhdGEtZXBvY2hdJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaXRlbSBpbiBsYXJvdXhfdWkuZHluYW1pY0RhdGVzLnVwZGF0ZURhdGVzRWxlbWVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsYXJvdXhfdWkuZHluYW1pY0RhdGVzLnVwZGF0ZURhdGVzRWxlbWVudHMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IGxhcm91eF91aS5keW5hbWljRGF0ZXMudXBkYXRlRGF0ZXNFbGVtZW50c1tpdGVtXTtcbiAgICAgICAgICAgICAgICAgICAgLy8gYml0c2hpZnRpbmcgKHN0ciA+PiAwKSB1c2VkIGluc3RlYWQgb2YgcGFyc2VJbnQoc3RyLCAxMClcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgob2JqLmdldEF0dHJpYnV0ZSgnZGF0YS1lcG9jaCcpID4+IDApICogMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RvbS5yZXBsYWNlKFxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X2RhdGUuZ2V0RGF0ZVN0cmluZyhkYXRlKVxuICAgICAgICAgICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAgICAgICAgIG9iai5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgbGFyb3V4X2RhdGUuZ2V0TG9uZ0RhdGVTdHJpbmcoZGF0ZSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsYXJvdXhfdGltZXJzLnNldCh7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQ6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgcmVzZXQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9udGljazogbGFyb3V4X3VpLmR5bmFtaWNEYXRlcy51cGRhdGVEYXRlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNjcm9sbFZpZXc6IHtcbiAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudHM6IFtdLFxuXG4gICAgICAgICAgICBvbmhpZGRlbjogZnVuY3Rpb24gKGVsZW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eShlbGVtZW50cywgeyBvcGFjaXR5OiAwIH0pO1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbihlbGVtZW50cywgWydvcGFjaXR5J10pO1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgb25yZXZlYWw6IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICAgICAgICAgIGxhcm91eF9jc3Muc2V0UHJvcGVydHkoZWxlbWVudHMsIHsgb3BhY2l0eTogMSB9KTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBsYXJvdXhfaGVscGVycy5nZXRBc0FycmF5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGFyb3V4X2Nzcy5pblZpZXdwb3J0KGVsZW1lbnRzW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLnNjcm9sbFZpZXcuc2VsZWN0ZWRFbGVtZW50cy5wdXNoKGVsZW1lbnRzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhcm91eF91aS5zY3JvbGxWaWV3Lm9uaGlkZGVuKGxhcm91eF91aS5zY3JvbGxWaWV3LnNlbGVjdGVkRWxlbWVudHMpO1xuICAgICAgICAgICAgICAgIGxhcm91eF9kb20uc2V0RXZlbnQod2luZG93LCAnc2Nyb2xsJywgbGFyb3V4X3VpLnNjcm9sbFZpZXcucmV2ZWFsKTtcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJldmVhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciByZW1vdmVLZXlzID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gW107XG5cbiAgICAgICAgICAgICAgICBsYXJvdXhfaGVscGVycy5lYWNoKFxuICAgICAgICAgICAgICAgICAgICBsYXJvdXhfdWkuc2Nyb2xsVmlldy5zZWxlY3RlZEVsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoaSwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhcm91eF9jc3MuaW5WaWV3cG9ydChlbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUtleXMudW5zaGlmdChpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKGVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGl0ZW0gaW4gcmVtb3ZlS2V5cykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbW92ZUtleXMuaGFzT3duUHJvcGVydHkoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbGFyb3V4X3VpLnNjcm9sbFZpZXcuc2VsZWN0ZWRFbGVtZW50cy5zcGxpY2UocmVtb3ZlS2V5c1tpdGVtXSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxhcm91eF91aS5zY3JvbGxWaWV3LnNlbGVjdGVkRWxlbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF9kb20udW5zZXRFdmVudCh3aW5kb3csICdzY3JvbGwnLCBsYXJvdXhfdWkuc2Nyb2xsVmlldy5yZXZlYWwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhcm91eF91aS5zY3JvbGxWaWV3Lm9ucmV2ZWFsKGVsZW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY3JlYXRlRmxvYXRDb250YWluZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghbGFyb3V4X3VpLmZsb2F0Q29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgbGFyb3V4X3VpLmZsb2F0Q29udGFpbmVyID0gbGFyb3V4X2RvbS5jcmVhdGVFbGVtZW50KCdESVYnLCB7ICdjbGFzcyc6ICdsYXJvdXhGbG9hdERpdicgfSk7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUobGFyb3V4X3VpLmZsb2F0Q29udGFpbmVyLCBkb2N1bWVudC5ib2R5LmZpcnN0Q2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGxhcm91eF91aS5jcmVhdGVGbG9hdENvbnRhaW5lcigpO1xuICAgICAgICAgICAgbGFyb3V4X3VpLmxvYWRpbmcuaW5pdCgpO1xuICAgICAgICAgICAgbGFyb3V4X3VpLmR5bmFtaWNEYXRlcy5pbml0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gbGFyb3V4LnJlYWR5KGxhcm91eF91aS5pbml0KTtcblxuICAgIHJldHVybiBsYXJvdXhfdWk7XG5cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gdmFyc1xuICAgIHZhciBsYXJvdXhfdmFycyA9IHtcbiAgICAgICAgY29va2llUGF0aDogJy8nLFxuXG4gICAgICAgIGdldENvb2tpZTogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIHJlID0gbmV3IFJlZ0V4cChlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPVteO10rJywgJ2knKSxcbiAgICAgICAgICAgICAgICBtYXRjaCA9IGRvY3VtZW50LmNvb2tpZS5tYXRjaChyZSk7XG5cbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMF0uc3BsaXQoJz0nKVsxXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0Q29va2llOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUsIGV4cGlyZXMsIHBhdGgpIHtcbiAgICAgICAgICAgIHZhciBleHBpcmVWYWx1ZSA9ICcnO1xuICAgICAgICAgICAgaWYgKGV4cGlyZXMpIHtcbiAgICAgICAgICAgICAgICBleHBpcmVWYWx1ZSA9ICc7IGV4cGlyZXM9JyArIGV4cGlyZXMudG9HTVRTdHJpbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArIGV4cGlyZVZhbHVlICsgJzsgcGF0aD0nICsgKHBhdGggfHwgbGFyb3V4X3ZhcnMuY29va2llUGF0aCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlQ29va2llOiBmdW5jdGlvbiAobmFtZSwgcGF0aCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuY29va2llID0gZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJz07IGV4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVQ7IHBhdGg9JyArIChwYXRoIHx8IGxhcm91eF92YXJzLmNvb2tpZVBhdGgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGdldExvY2FsOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIShuYW1lIGluIGxvY2FsU3RvcmFnZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlIHx8IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVtuYW1lXSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0TG9jYWw6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlW25hbWVdID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZUxvY2FsOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIGxvY2FsU3RvcmFnZVtuYW1lXTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRTZXNzaW9uOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgICAgICBpZiAoIShuYW1lIGluIHNlc3Npb25TdG9yYWdlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2VbbmFtZV0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldFNlc3Npb246IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VbbmFtZV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlU2Vzc2lvbjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBzZXNzaW9uU3RvcmFnZVtuYW1lXTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gbGFyb3V4X3ZhcnM7XG5cbn0oKSk7XG4iLCIvKmdsb2JhbCBOb2RlTGlzdCwgTm9kZSAqL1xubW9kdWxlLmV4cG9ydHMgPSAoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBsYXJvdXhfZG9tID0gcmVxdWlyZSgnLi9sYXJvdXguZG9tLmpzJyksXG4gICAgICAgIGxhcm91eF9jc3MgPSByZXF1aXJlKCcuL2xhcm91eC5jc3MuanMnKSxcbiAgICAgICAgbGFyb3V4X2hlbHBlcnMgPSByZXF1aXJlKCcuL2xhcm91eC5oZWxwZXJzLmpzJyk7XG5cbiAgICAvLyB3cmFwcGVyXG4gICAgdmFyIGxhcm91eF93cmFwcGVyID0gZnVuY3Rpb24gKHNlbGVjdG9yLCBwYXJlbnQpIHtcbiAgICAgICAgdmFyIHNlbGVjdGlvbjtcblxuICAgICAgICBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gc2VsZWN0b3I7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gbGFyb3V4X2hlbHBlcnMudG9BcnJheShzZWxlY3Rvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoc2VsZWN0b3IgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICBzZWxlY3Rpb24gPSBbc2VsZWN0b3JdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZWN0aW9uID0gbGFyb3V4X2RvbS5zZWxlY3Qoc2VsZWN0b3IsIHBhcmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZWN0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBsYXJvdXhfd3JhcHBlci5zaW5nbGVUZW1wbGF0ZShzZWxlY3Rpb25bMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBsYXJvdXhfd3JhcHBlci5hcnJheVRlbXBsYXRlKHNlbGVjdGlvbik7XG4gICAgfTtcblxuICAgIGxhcm91eF93cmFwcGVyLnNpbmdsZVRlbXBsYXRlID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmlzQXJyYXkgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAwIHx8IGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5maW5kID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbGFyb3V4X3dyYXBwZXIoc2VsZWN0b3IsIHRoaXMuc291cmNlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgbGFyb3V4X3dyYXBwZXIuYXJyYXlUZW1wbGF0ZSA9IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgICB0aGlzLnNvdXJjZSA9IGVsZW1lbnRzO1xuICAgICAgICB0aGlzLmlzQXJyYXkgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VbaW5kZXhdO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGggPSAwO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlID0gMTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckFycmF5ID0gMjtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyID0gZnVuY3Rpb24gKG5hbWUsIGZuYywgc2NvcGUpIHtcbiAgICAgICAgdmFyIG5ld0ZuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbmMuYXBwbHkoXG4gICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICBbdGhpcy5zb3VyY2VdLmNvbmNhdChsYXJvdXhfaGVscGVycy50b0FycmF5KGFyZ3VtZW50cykpXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICByZXR1cm4gKHJlc3VsdCA9PT0gdW5kZWZpbmVkKSA/IHRoaXMgOiByZXN1bHQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgc3dpdGNoIChzY29wZSkge1xuICAgICAgICBjYXNlIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlOlxuICAgICAgICAgICAgbGFyb3V4X3dyYXBwZXIuc2luZ2xlVGVtcGxhdGUucHJvdG90eXBlW25hbWVdID0gbmV3Rm5jO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJBcnJheTpcbiAgICAgICAgICAgIGxhcm91eF93cmFwcGVyLmFycmF5VGVtcGxhdGUucHJvdG90eXBlW25hbWVdID0gbmV3Rm5jO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBsYXJvdXhfd3JhcHBlci5zaW5nbGVUZW1wbGF0ZS5wcm90b3R5cGVbbmFtZV0gPSBuZXdGbmM7XG4gICAgICAgICAgICBsYXJvdXhfd3JhcHBlci5hcnJheVRlbXBsYXRlLnByb3RvdHlwZVtuYW1lXSA9IG5ld0ZuYztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdhdHRyJywgbGFyb3V4X2RvbS5hdHRyLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2RhdGEnLCBsYXJvdXhfZG9tLmRhdGEsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignb24nLCBsYXJvdXhfZG9tLnNldEV2ZW50U2luZ2xlLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ29uJywgbGFyb3V4X2RvbS5zZXRFdmVudCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJBcnJheSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ29mZicsIGxhcm91eF9kb20udW5zZXRFdmVudCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignY2xlYXInLCBsYXJvdXhfZG9tLmNsZWFyLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2luc2VydCcsIGxhcm91eF9kb20uaW5zZXJ0LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3ByZXBlbmQnLCBsYXJvdXhfZG9tLnByZXBlbmQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYXBwZW5kJywgbGFyb3V4X2RvbS5hcHBlbmQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigncmVwbGFjZScsIGxhcm91eF9kb20ucmVwbGFjZSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdyZXBsYWNlVGV4dCcsIGxhcm91eF9kb20ucmVwbGFjZVRleHQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcigncmVtb3ZlJywgbGFyb3V4X2RvbS5yZW1vdmUsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcblxuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdoYXNDbGFzcycsIGxhcm91eF9jc3MuaGFzQ2xhc3MsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYWRkQ2xhc3MnLCBsYXJvdXhfY3NzLmFkZENsYXNzLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlckJvdGgpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdyZW1vdmVDbGFzcycsIGxhcm91eF9jc3MucmVtb3ZlQ2xhc3MsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyQm90aCk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3RvZ2dsZUNsYXNzJywgbGFyb3V4X2Nzcy50b2dnbGVDbGFzcywgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignZ2V0UHJvcGVydHknLCBsYXJvdXhfY3NzLmdldFByb3BlcnR5LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3NldFByb3BlcnR5JywgbGFyb3V4X2Nzcy5zZXRQcm9wZXJ0eSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignc2V0VHJhbnNpdGlvbicsIGxhcm91eF9jc3Muc2V0VHJhbnNpdGlvbiwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3Rlcignc2hvdycsIGxhcm91eF9jc3Muc2hvdywgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaGlkZScsIGxhcm91eF9jc3MuaGlkZSwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJCb3RoKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaGVpZ2h0JywgbGFyb3V4X2Nzcy5oZWlnaHQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5uZXJIZWlnaHQnLCBsYXJvdXhfY3NzLmlubmVySGVpZ2h0LCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ291dGVySGVpZ2h0JywgbGFyb3V4X2Nzcy5vdXRlckhlaWdodCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCd3aWR0aCcsIGxhcm91eF9jc3Mud2lkdGgsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5uZXJXaWR0aCcsIGxhcm91eF9jc3MuaW5uZXJXaWR0aCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuICAgIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyKCdvdXRlcldpZHRoJywgbGFyb3V4X2Nzcy5vdXRlcldpZHRoLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3RvcCcsIGxhcm91eF9jc3MudG9wLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2xlZnQnLCBsYXJvdXhfY3NzLmxlZnQsIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignYWJvdmVUaGVUb3AnLCBsYXJvdXhfY3NzLmFib3ZlVGhlVG9wLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2JlbG93VGhlRm9sZCcsIGxhcm91eF9jc3MuYmVsb3dUaGVGb2xkLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ2xlZnRPZlNjcmVlbicsIGxhcm91eF9jc3MubGVmdE9mU2NyZWVuLCBsYXJvdXhfd3JhcHBlci5yZWdpc3RlclNpbmdsZSk7XG4gICAgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXIoJ3JpZ2h0T2ZTY3JlZW4nLCBsYXJvdXhfY3NzLnJpZ2h0T2ZTY3JlZW4sIGxhcm91eF93cmFwcGVyLnJlZ2lzdGVyU2luZ2xlKTtcbiAgICBsYXJvdXhfd3JhcHBlci5yZWdpc3RlcignaW5WaWV3cG9ydCcsIGxhcm91eF9jc3MuaW5WaWV3cG9ydCwgbGFyb3V4X3dyYXBwZXIucmVnaXN0ZXJTaW5nbGUpO1xuXG4gICAgcmV0dXJuIGxhcm91eF93cmFwcGVyO1xuXG59KCkpO1xuIl19\n"],"sourceRoot":"/source/"}